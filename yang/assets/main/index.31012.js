window.__require=function t(e,o,n){function a(r,c){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var p=o[r]={exports:{}};e[r][0].call(p.exports,function(t){return a(e[r][1][t]||t)},p,p.exports,t,e,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({ApiTool:[function(t,e,o){"use strict";cc._RF.push(e,"b8fa1Acz1tD5ZSWCVi3x62F","ApiTool");var n,a,i=e,r=o;function c(){return null!==a&&a.apply(this,arguments)||this}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},i=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),i(c,a=cc.Component),Object.defineProperty(c,"instance",{get:function(){return this._instance||(this._instance=new c),this._instance},enumerable:!1,configurable:!0}),c._instance=null,c.avatar="",c.dailyAllNumber=0,c.dailywinNumber=0,i=c,r.default=i,cc._RF.pop()},{}],BulletPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"36bd1+aRohPD6vyVZmmE1za","BulletPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("data-manager"),d=a("str-utils");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.speed=0,t.contentLabel=null,t.header=null,t.border=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){},h.prototype.setupData=function(t){var e,o;t&&(o=t.content||"\u96c4\u8d77",t.region&&1==t.type?o=t.region+t.content:2==t.type&&(u.default.rankUserInfo?(e=u.default.rankUserInfo.fail)&&0!=e||(e=1):e=p.default.randomNum(1,50),o=d.default.formatStr(t.content,e)),this.contentLabel.string=o,1==t.state?this.contentLabel.node.color=new cc.Color(255,246,0):this.contentLabel.node.color=new cc.Color(255,255,255),p.default.setAvatar(this.header,t.avatar),t.isSelf?this.border.active=!0:this.border.active=!1)},s([i({type:cc.Label,tooltip:"\u5185\u5bb9"})],h.prototype,"contentLabel",void 0),s([i({type:cc.Node,tooltip:"\u5934\u50cf"})],h.prototype,"header",void 0),s([i({type:cc.Node,tooltip:"\u8fb9\u6846"})],h.prototype,"border",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],CcJsFunc:[function(t,e,o){"use strict";cc._RF.push(e,"3f1d9y5Ey5CfqFDLJVTW6yo","CcJsFunc");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var i=n("player-head-atlas"),r=n("audio"),c=n("sdk");function s(){}s.shuffle=function(t){for(var e=t.length-1;0<=e;e--){var o=Math.floor(Math.random()*(e+1)),n=t[o];t[o]=t[e],t[e]=n}return t},s.addClickAudio=function(){r.default.playAudioMusic("audio/sound/clickBlock.mp3",!1),c.default.vibrateShort()},s.addbtnTouchStartScale=function(t,e){t.on("touchstart",function(){this.addClickAudio(),cc.tween(t).to(.1,{scale:.9}).start(),e&&e()},this)},s.addbtnTouchEndScale=function(t,e){t.on("touchend",function(o){cc.tween(t).to(.1,{scale:1}).start(),e&&(t.stopAllActions(),t.scale=1,e(o))},this)},s.addbtnTouchCancelScale=function(t,e){t.on("touchcancel",function(){cc.tween(t).to(.1,{scale:1}).start(),e&&e()},this)},s.addTargetTouchUpInside=function(t,e){t.on("touchstart",function(){this.addClickAudio(),cc.tween(t).to(.1,{scale:.9}).start()},this),t.on("touchcancel",function(){cc.tween(t).to(.1,{scale:1}).start()},this),t.on("touchend",function(o){cc.tween(t).to(.1,{scale:1}).start(),e&&(t.stopAllActions(),t.scale=1,e(o))},this)},s.addbtnTouchOriginStartScale=function(t,e){var o=.9,n=.9;t.scaleX<0&&(o=-o),t.scaleY<0&&(n=-n),t.on("touchstart",function(){this.addClickAudio(),cc.tween(t).to(.1,{scaleX:o,scaleY:n}).start(),e&&e()},this)},s.addbtnTouchOriginEndScale=function(t,e){var o=1,n=1;t.scaleX<0&&(o=-o),t.scaleY<0&&(n=-n),t.on("touchend",function(a){cc.tween(t).to(.1,{scaleX:o,scaleY:n}).start(),e&&(t.stopAllActions(),t.scaleX=o,t.scaleY=n,e(a))},this)},s.addbtnTouchOriginCancelScale=function(t,e){var o=1,n=1;t.scaleX<0&&(o=-o),t.scaleY<0&&(n=-n),t.on("touchcancel",function(){cc.tween(t).to(.1,{scaleX:o,scaleY:n}).start(),e&&e()},this)},s.setAnimation=function(t,e,o,n,a){var i=new cc.Node,r=(i.addComponent(cc.Sprite),i.addComponent(cc.Animation));return cc.loader.loadRes(t,cc.SpriteAtlas,function(t,i){if(e)for(var c=[],s=0;s<e.length;s++)c.push(i.getSpriteFrame(e[s]));else i.getSpriteFrames();var l=cc.AnimationClip.createWithSpriteFrames(null,o);l.name=n,0==a?l.wrapMode=cc.WrapMode.Loop:1==a&&(l.wrapMode=cc.WrapMode.Normal),r.addClip(l),r.play(n)}),i},s.changeSpriteFrame=function(t,e,o,n,a){var i=this;o=o||function(){},this._spriteFrameCache||(this._spriteFrameCache={});var r=t.getComponent(cc.Sprite);if(r.pp_url=e,t=this._spriteFrameCache[e])return r.spriteFrame=t,void o();n&&(r.spriteFrame=null),cc.loader.loadRes(e,cc.SpriteFrame,function(t,n){t?cc.error("SpriteFrame\u52a0\u8f7d\u9519\u8bef, \u8282\u70b9\u540d: "+r.node.name+", url: "+e):(a&&(i._spriteFrameCache[e]=n),r.pp_url===e&&(r.spriteFrame=n,o()))})},s.loadResSpriteFrame=function(t,e){var o=this;e=e||function(){},this._spriteFrameCache||(this._spriteFrameCache={}),this._loadResIndex||(this._loadResIndex=0);var n=t[this._loadResIndex];this._spriteFrameCache[n]?(o._loadResIndex++,o._loadResIndex>=t.length?(o._loadResIndex=0,e()):o.loadResSpriteFrame(t,e)):cc.loader.loadRes(n,cc.SpriteFrame,function(a,i){a?cc.error("SpriteFrame\u52a0\u8f7d\u9519\u8bef, \u8282\u70b9\u540d: , url: "+n):(o._spriteFrameCache[n]=i,o._loadResIndex++,o._loadResIndex>=t.length?(o._loadResIndex=0,e()):o.loadResSpriteFrame(t,e))})},s.getUrlSpriteFrame=function(t){return this._spriteFrameCache[t]||!1},s.sliceURL=function(t){return/.+(?=\.png)/i.exec(t)[0].slice(10)},s.playFontAnimation=function(t,e,o,n){var a={num:e},i=t.getComponent(cc.Label);cc.tween(t).to(.05,{scale:1.3}).to(.05,{scale:1}).to(.05,{scale:1.3}).to(.05,{scale:1}).repeat(10).start(),i.string=a.num+"",1<(e=o-e<10?.3:(o-e)/10*.3)&&(e=1),cc.tween(a).to(e,{num:o},{progress:function(t,e,o,a){return i.string=n?n+Math.ceil(t+(e-t)*a)+"":Math.ceil(t+(e-t)*a)+"",t+(e-t)*a}}).call(function(){t.stopAllActions(),t.scale=1}).start()},s.loadWxHeadImgSpriteFrame=function(t,e,o,n,a,i){var r=this;o=o||function(){},this._spriteFrameCache||(this._spriteFrameCache={});var c=t.getComponent(cc.Sprite);if(c.pp_url=e,t=this._spriteFrameCache[e])return c.spriteFrame=t,void o();n&&(c.spriteFrame=null),cc.loader.load({url:e},function(t,n){t?cc.error("SpriteFrame\u52a0\u8f7d\u9519\u8bef, \u8282\u70b9\u540d: "+c.node.name+", url: "+e):(n=new cc.SpriteFrame(n),i instanceof Array&&(n.insetTop=i[0]||0,n.insetBottom=i[1]||0,n.insetLeft=i[2]||0,n.insetRight=i[3]||0),r._spriteFrameCache[e]=n,c.pp_url===e&&(c.spriteFrame=n,o()))})},s.changeWXHeadImgSize=function(t,e){for(var o=t.split("/"),n="",a=0;a<o.length-1;a++)n+=o[a]+"/";return n+e},s.preLoader=function(t,e){for(var o=[],n=0;n<t.length;n++)o.push(cc.url.raw("resources/"+t[n]));cc.loader.load(o,function(t,o){if(t)for(var n=0;n<t.length;n++)console.log("cc.js.preLoader Error: url ["+t[n]+"]: "+o.getError(t[n]));e&&e()})},s.setProgressBar=function(t,e,o){t.getComponent("progressBar").setProgressVal(e,o)},s.randomNum=function(t,e){return Math.round(Math.random()*(e-t)+t)},s.randomCharNum=function(t){void 0===t&&(t=16);for(var e=[[],[],[]],o=0;o<10;o++)e[0].push(o);for(o=0;o<26;o++)e[1].push(String.fromCharCode(97+o));for(o=0;o<26;o++)e[2].push(String.fromCharCode(65+o));var n="";for(o=0;o<t;o++){var a=e[this.randomNum(0,2)];n+=a[this.randomNum(0,a.length-1)]}return n},s.getWorldPosition=function(t){return t.convertToWorldSpaceAR(cc.v2(0,0))},s.getNodePosition=function(t,e){return t.convertToNodeSpaceAR(e)},s.getMonthShorthand=function(t){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e<=t||t<0?"Jan":e[t]},s.ifHaveNode=function(t,e,o){return t||(t=cc.instantiate(e),o.addChild(t)),t},s.setAvatar=function(t,e,o){var n=this;if(t){var a=t.getComponent(cc.Sprite);if(!e||0==e.length){var r="rank/rank_icon_default.png";return c.default.isPlatform(c.Platform.wx)&&(r="rank/rank_icon_default_wx.png"),void cc.loader.loadRes(r,cc.SpriteFrame,function(t,e){t?console.log("avatar err = "+t):a.spriteFrame=e})}cc.assetManager.loadRemote(e,{ext:".head"},function(e,r){var c;o?(c=i.default.instance,cc.isValid(n)&&cc.isValid(t)&&cc.isValid(a)&&(a.spriteFrame=new cc.SpriteFrame(r),o&&!cc.sys.isNative&&c.packToDynamicAtlas(o,a,a.spriteFrame))):(r.packable=!1,a.spriteFrame=new cc.SpriteFrame(r))})}else console.log("setAvatar node \u4e3a\u7a7a")},s.removeAvatar=function(t){t&&t.length&&i.default.instance.deleteInnerTextureByPath(t)},s.setAvatarHolder=function(t,e,o){var n;t?(n=t.getComponent(cc.Sprite),e&&0!=e.length||(e="rank/rank_icon_default.png",c.default.isPlatform(c.Platform.wx)&&(e="rank/rank_icon_default_wx.png"),o&&(e=o),cc.loader.loadRes(e,cc.SpriteFrame,function(t,e){t?console.log("avatar err = "+t):n.spriteFrame=e}))):console.log("setAvatar node \u4e3a\u7a7a")},n=s,a.default=n,cc._RF.pop()},{}],CoinEmitterByTime:[function(t,e,o){"use strict";cc._RF.push(e,"d2234O7oOZOV7MTLWcEx96i","CoinEmitterByTime");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CoinEmitter");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.tickTime=0,t.countMinPerTick=0,t.countMaxPerTick=0,t._timePassed=0,t._timeTick=0,t._timeEnd=0,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=p.CoinEmitter),u.prototype.fire=function(t,e,o){void 0===e&&(e=!1),this._timePassed=0,this._timeEnd=t,this._rndCur=0,this.newNode(e),this._cb=o},u.prototype.update=function(t){if(this._rndCur<this._rndPathCount){for(var e=.017453293*this.randomInRange(this.angleMin,this.angleMax),o=this.randomInRange(this.v0Min,this.v0Max),n=0,a=2*cc.visibleRect.height,i=0,r=[];-a<i;){var c=o*(n+=.016666666666666666)*Math.sin(e)-this.G*n*n/2;i=c,r.push(c)}var s=new p.YPathCacheData(o,e,r);this._cachePaths.push(s),this._rndCur++}if(this._timePassed+=t,!(this._timePassed>=this._timeEnd)&&(this._timeTick+=t,this._timeTick>=this.tickTime)){this._timeTick=0;for(var l=this.randomInt(this.countMinPerTick,this.countMaxPerTick),u=0;u<l;u++)this.fireOne()}},u.prototype.fireOne=function(){var t=this._coinPool.get();(t=t||cc.instantiate(this.prefab))&&(t.parent=this.node,this._runCoin(t))},u.prototype._resetNode=function(t){t.scale=0,t.angle=0,t.setPosition(0,0),t.stopAllActions(),this._coinPool.put(t),this._numFlying--,this._numFlying<=0&&(this._cb&&this._cb(),this._coinPool.clear())},s([i({type:cc.Float,tooltip:"\u53d1\u5c04\u95f4\u9694"})],u.prototype,"tickTime",void 0),s([i({type:cc.Integer,tooltip:"\u6bcf\u6b21\u6700\u5c11\u6570\u91cf"})],u.prototype,"countMinPerTick",void 0),s([i({type:cc.Integer,tooltip:"\u6bcf\u6b21\u6700\u591a\u6570\u91cf"})],u.prototype,"countMaxPerTick",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],CoinEmitter:[function(t,e,o){"use strict";cc._RF.push(e,"41348Csc6hCtbd7Gx/Kabw/","CoinEmitter");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};function s(t,e,o){this.v0=t,this.angle=e,this.path=o}Object.defineProperty(i,"__esModule",{value:!0}),i.CoinEmitter=i.YPathCacheData=void 0;var l,p=cc._decorator.ccclass,u=cc._decorator.property;function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.G=18e3,t.v0Min=11e3,t.v0Max=21e3,t.angleMin=20,t.angleMax=28,t.scaleStepMin=.065,t.scaleStepMax=.085,t.coinCount=50,t.xMoveStepMin=-18,t.xMoveStepMax=18,t.rotationStepMin=-1.3,t.rotationStepMax=1.3,t.bornOffsetXMin=1,t.bornOffsetXMax=-1,t.bornOffsetYMin=-10,t.bornOffsetYMax=0,t.bornScacle=.5,t.prefab=null,t._coinPool=new cc.NodePool,t._cachePaths=[],t._rndPathCount=100,t._rndCur=0,t._numFlying=0,t}a=cc._decorator.menu,i.YPathCacheData=s,r(d,l=cc.Component),d.prototype.onLoad=function(){if(!(70<=this._coinPool.size()))for(var t=0;t<70;t++){var e=cc.instantiate(this.prefab);e&&this._coinPool.put(e)}},d.prototype.newNode=function(t){if((t=void 0!==t&&t)&&(this._coinPool.clear(),!(70<=this._coinPool.size())))for(var e=0;e<70;e++){var o=cc.instantiate(this.prefab);o&&this._coinPool.put(o)}},d.prototype.fire=function(t,e,o){void 0===e&&(e=!1),console.log("push=>4"),this.newNode(e),t=t||this.coinCount,this._numFlying=t,this._cb=o;for(var n=0;n<t;n++){var a=this._coinPool.get();(a=a||cc.instantiate(this.prefab))&&(a.parent=this.node,this._runCoin(a))}},d.prototype.update=function(){if(!(this._rndCur>=this._rndPathCount)){for(var t=.017453293*this.randomInRange(this.angleMin,this.angleMax),e=this.randomInRange(this.v0Min,this.v0Max),o=0,n=2*cc.visibleRect.height,a=0,i=[];-n<a;){var r=e*(o+=.016666666666666666)*Math.sin(t)-this.G*o*o/2;a=r,i.push(r)}var c=new s(e,t,i);this._cachePaths.push(c),this._rndCur++}},d.prototype._resetNode=function(t){t.scale=0,t.angle=0,t.setPosition(0,0),t.stopAllActions(),this._coinPool.put(t),this._numFlying--,this._numFlying<=0&&this._cb&&this._cb()},d.prototype._runCoin=function(t){var e=this;t.getComponent(cc.Animation).play("",this.randomInRange(0,.7));var o=this.randomInArray(this._cachePaths).path;t.x=this.randomInRange(this.bornOffsetXMin,this.bornOffsetXMax),t.y=this.randomInRange(this.bornOffsetYMin,this.bornOffsetYMax);var n=t.x<=0?this.randomInRange(this.xMoveStepMin,0):this.randomInRange(0,this.xMoveStepMax),a=this.randomInRange(this.rotationStepMin,this.rotationStepMax),i=this.randomInRange(this.scaleStepMin,this.scaleStepMax);t.scale=this.bornScacle;var r=0;this.schedule(function c(){var s=o[r];r++,t.y=s,t.x+=n,t.scale+=i,t.angle+=a,r>=o.length&&(e._resetNode(t),e.unschedule(c))},1/60)},d.prototype.randomInRange=function(t,e){return t+(e-t)*Math.random()},d.prototype.randomInArray=function(t){return t[this.randomInt(0,t.length)]},d.prototype.randomInt=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},c([u({type:cc.Integer,tooltip:"\u91cd\u529b\u52a0\u901f\u5ea6"})],d.prototype,"G",void 0),c([u({type:cc.Integer,tooltip:"\u6700\u5c0f\u521d\u901f\u5ea6"})],d.prototype,"v0Min",void 0),c([u({type:cc.Integer,tooltip:"\u6700\u5927\u521d\u901f\u5ea6"})],d.prototype,"v0Max",void 0),c([u({type:cc.Integer,tooltip:"\u6700\u5c0f\u89d2\u5ea6"})],d.prototype,"angleMin",void 0),c([u({type:cc.Integer,tooltip:"\u6700\u5927\u89d2\u5ea6"})],d.prototype,"angleMax",void 0),c([u({type:cc.Float,tooltip:"\u6700\u5c0f\u6bcf\u5e27\u7f29\u653e\u589e\u52a0"})],d.prototype,"scaleStepMin",void 0),c([u({type:cc.Float,tooltip:"\u6700\u5927\u6bcf\u5e27\u7f29\u653e\u589e\u52a0"})],d.prototype,"scaleStepMax",void 0),c([u({type:cc.Integer,tooltip:"\u91d1\u5e01\u6570\u91cf"})],d.prototype,"coinCount",void 0),c([u({type:cc.Integer,tooltip:"x\u8f74\u6bcf\u5e27\u6700\u5c0f\u504f\u79fb"})],d.prototype,"xMoveStepMin",void 0),c([u({type:cc.Integer,tooltip:"x\u8f74\u6bcf\u5e27\u6700\u5927\u504f\u79fb"})],d.prototype,"xMoveStepMax",void 0),c([u(cc.Integer)],d.prototype,"rotationStepMin",void 0),c([u(cc.Integer)],d.prototype,"rotationStepMax",void 0),c([u({type:cc.Integer,tooltip:"\u6700\u5c0f\u521d\u59cbx\u504f\u79fb"})],d.prototype,"bornOffsetXMin",void 0),c([u({type:cc.Integer,tooltip:"\u6700\u5927\u521d\u59cbx\u504f\u79fb"})],d.prototype,"bornOffsetXMax",void 0),c([u({type:cc.Integer,tooltip:"\u6700\u5c0f\u521d\u59cby\u504f\u79fb"})],d.prototype,"bornOffsetYMin",void 0),c([u({type:cc.Integer,tooltip:"\u6700\u5927\u521d\u59cby\u504f\u79fb"})],d.prototype,"bornOffsetYMax",void 0),c([u({type:cc.Float,tooltip:"\u521d\u59cb\u7f29\u653e"})],d.prototype,"bornScacle",void 0),c([u(cc.Prefab)],d.prototype,"prefab",void 0),a=c([p,a("gameModules/common/CoinEmitter")],d),i.CoinEmitter=a,cc._RF.pop()},{}],DateManager:[function(t,e,o){"use strict";cc._RF.push(e,"5f103B5zARLaI+1jRcCObQr","DateManager");var n,a=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=((n=cc._decorator).ccclass,n.property,a("enumConfig"));function c(){this.cutType=r.CALENDAR.MONTH;var t=(o=new Date).getFullYear(),e=o.getMonth(),o=o.getDate();this.nowDate=new Date(t,e,o),this.selDate=new Date(t,e,o)}c.getInstance=function(){return this.instance||(this.instance=new c),this.instance},c.prototype.isNowMonth=function(t){return this.nowDate.getFullYear()===this.selDate.getFullYear()&&this.nowDate.getMonth()===t},c.prototype.isNowDay=function(t){if(this.nowDate.getFullYear()===this.selDate.getFullYear()&&this.nowDate.getMonth()===this.selDate.getMonth()){if(this.nowDate.getDate()===t)return!0}else if(this.selDate.getDate()==t)return!0;return!1},c.prototype.isOldDay=function(t){if(this.selDate.getFullYear()==this.nowDate.getFullYear()){if(this.nowDate.getMonth()==this.selDate.getMonth()){if(t<this.nowDate.getDate())return!0}else if(this.selDate.getMonth()<this.nowDate.getMonth())return!0}else if(this.selDate.getFullYear()<this.nowDate.getFullYear())return!0;return!1},c.prototype.isFutureDay=function(t){if(this.nowDate.getFullYear()==this.selDate.getFullYear()){if(this.nowDate.getDate()<t)return!0;if(this.nowDate.getMonth()==this.selDate.getMonth()){if(this.nowDate.getDate()<t)return!0}else if(this.nowDate.getMonth()<this.selDate.getMonth())return!0}else if(this.nowDate.getFullYear()<=this.selDate.getFullYear())return!0;return!1},c.prototype.isSel=function(t,e,o){return this.selDate.getFullYear()===t&&this.selDate.getMonth()===e&&this.selDate.getDate()===o},c.isLeapYear=function(t){return 29===new Date(t,1,29).getDate()},c.cloneDate=function(t){return new Date(t.valueOf())},c.nextDate=function(t,e){void 0===e&&(e=r.CALENDAR.DAY);var o=t.getFullYear(),n=t.getMonth(),a=t.getDate();switch(e){case r.CALENDAR.YEAR:o++,a<=(t=new Date(o,n+1,0)).getDate()&&(t=new Date(o,n,a));break;case r.CALENDAR.MONTH:n++,a<=(t=new Date(o,n+1,0)).getDate()&&(t=new Date(o,n,a));break;case r.CALENDAR.DAY:t=new Date(t.setDate(a+1));break;case r.CALENDAR.WEEK:t=new Date(t.setDate(a+7))}return t},c.lastDate=function(t,e){void 0===e&&(e=r.CALENDAR.DAY);var o=t.getFullYear(),n=t.getMonth(),a=t.getDate();switch(e){case r.CALENDAR.YEAR:o--,a<=(t=new Date(o,n+1,0)).getDate()&&(t=new Date(o,n,a));break;case r.CALENDAR.MONTH:n--,t=new Date(o,n+1,0);break;case r.CALENDAR.DAY:t=new Date(t.setDate(a-1));break;case r.CALENDAR.WEEK:t=new Date(t.setDate(a-7))}return t},c.showAloneChildByName=function(t,e){for(var o=0,n=e.children;o<n.length;o++){var a=n[o];a.active=!1,a.name===t&&(a.active=!0)}},c.format=function(t,e){void 0===t&&(t="yyyy-mm-dd");var o,n={"M+":(e=e).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(o in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")","i").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t},c.getDateString=function(t){void 0===t&&(t=!1);var e=c.format(r.CALENDARNAMES[4],new Date).split("-");return e.length<3?"":t?"- "+e[0]+"\u5e74"+e[1]+"\u6708"+e[2]+"\u65e5 -":"- "+e[1]+"\u6708"+e[2]+"\u65e5 -"},c.prototype.dateToUnix=function(t){t=((e=t.split(" ",2))[0]||"").split("-",3);var e=(e[1]||"").split(":",3);return new Date(parseInt(t[0],10)||null,(parseInt(t[1],10)||1)-1,parseInt(t[2],10)||null,parseInt(e[0],10)||null,parseInt(e[1],10)||null,parseInt(e[2],10)||null).getTime()/1e3},c.prototype.changeTime=function(t){return new Date(t.format("YYYY-MM-DD HH:mm:ss")).getTime()},c.prototype.formatTs=function(t){return[(t=new Date(1e3*parseInt(t))).getFullYear(),t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,t.getDate()<10?"0"+t.getDate():t.getDate(),t.getHours()<10?"0"+t.getHours():t.getHours(),t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds()]},c.prototype.formatDate=function(t,e){if(t){switch(e=e||"yyyy-MM-dd HH:mm:ss",typeof t){case"string":t=new Date(Number(t));break;case"number":t=new Date(t)}if(t instanceof Date){var o={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substring(1),dd:(""+(t.getMonth()+100)).substring(1),HH:(""+(t.getMonth()+100)).substring(1),mm:(""+(t.getMonth()+100)).substring(1),ss:(""+(t.getMonth()+100)).substring(1)};return e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,function(){return o[arguments[0]]})}}},a=c,i.default=a,cc._RF.pop()},{}],FriendRankPop:[function(t,e,o){"use strict";cc._RF.push(e,"4213beT0KVE5b2bFg6XH/hw","FriendRankPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("api-sheep"),u=a("CcJsFunc"),d=a("dataTs");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.closeBtn=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){u.default.addTargetTouchUpInside(this.closeBtn,this.closeBtnFunc.bind(this))},h.prototype.closeBtnFunc=function(){this.node.active=!1,cc.game.emit("showPop",{popName:"todayRankPop",showPopData:{}})},h.prototype.showPop=function(){this.node.active=!0,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),p.default.getPersonalInfo(function(t){t&&t.data&&(t=t.data.daily_count,d.default.updateFirendCount(t))})},s([i(cc.Node)],h.prototype,"popNode",void 0),s([i(cc.Node)],h.prototype,"closeBtn",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],FriendSubContextView:[function(t,e,o){"use strict";cc._RF.push(e,"ea1df8KK9tCd5m1ulIYJEp0","FriendSubContextView");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(r,"__esModule",{value:!0});var u,d=a("enumConfig"),h=cc._decorator;function f(){var t=null!==u&&u.apply(this,arguments)||this;return t.subContextView=null,t}i=h.ccclass,a=h.property,h.menu,c(f,u=cc.Component),f.prototype.onEnable=function(){var t=this;setTimeout(function(){t.changeViewType(d.ShownType.friendRank)},100)},f.prototype.start=function(){},f.prototype.changeViewType=function(){return l(this,void 0,Promise,function(){var t;return p(this,function(){return cc.sys.platform!=cc.sys.WECHAT_GAME||((t=this.node).width,t.height,this.subContextView.updateSubContextViewport()),[2]})})},s([a({type:cc.SubContextView,tooltip:"\u5b50\u57df\u89c6\u56fe\u8282\u70b9\uff0c\u6ca1\u6709\u5219\u6dfb\u52a0\u7ec4\u4ef6\u5230\u672c\u8eab"})],f.prototype,"subContextView",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"b5f13tOjPRM3rnhWE1kAMLK","GameManager");var n,a=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=((n=cc._decorator).ccclass,n.property,a("enumConfig"));function c(){this.register=!1,this.globalData={isFullScreen:!1,device:""},this.moneyDict={coin:0,fish:0},this.cookieDict={cookie:0,cookieCurCount:0,goldCoinCount:0,ribbonBoxCount:0},this.levelWinDict={coin:0,remove:0,cancel:0,random:0},this.dailyDict={receiveBox:!1},this.coinNum=60,this.collectionMark={tabbarCollection:!1,bgNum:0,brickNum:0,catNum:0,catSkinNum:0,topicClothesNum:0},this.sheepMark={resurgenceCount:0,propRemoveCount:0,propCancelCount:0,propRandomCount:0},this.unLimitVideo=!1,this.todayState=-1,this.gameBeginDate=null,this.gameEndDate=null,this.reportProperty={cancel_buy:0,random_buy:0,random_ad:0,random_use:0,remove_buy:0,remove_ad:0,resurrection_coin_cost:0,resurrection_ad_frequency:0,cancel_ad:0,cancel_use:0,remove_use:0,dailyWin_time_remaining:0,challenge_count:0},this.tabbarIsDaily=!1,this.sprintMark=!1,this.videoPath="",this.videoDuration=0,this.game_over=0,this.rankInfo=null,this.bulletTime=0,this.playGameCount=0,this.gameEnv=r.GAMEENV.ENVRELEASE,this.gameType=r.GAMETYPE.GAMELEVEL,this.mainPage=r.MAINPAGE.PAGEMAIN}c.getInstance=function(){return this.instance||(this.instance=new c),this.instance},c.prototype.initData=function(){console.log("systemInfo",cc.winSize),(1334<cc.winSize.height||2<cc.winSize.height/cc.winSize.width)&&(this.globalData.isFullScreen=!0),console.log("isFullScreen",this.globalData.isFullScreen)},c.setGameType=function(t){c.getInstance().gameType=t},c.blacksInfo={blockCurCount:0,blockAllCount:0},a=c,i.default=a,cc._RF.pop()},{}],PersonalPop:[function(t,e,o){"use strict";cc._RF.push(e,"23eb4oYlzpNJ74t7y6B9QZ/","PersonalPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("api-sheep"),u=a("CcJsFunc"),d=a("dataTs"),h=a("sdk"),f=a("spine"),g=a("util"),y=a("data-manager"),m=a("DateManager");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.nickName=null,t.registerLabel=null,t.dailyName=null,t.topicName=null,t.dailyCount=null,t.topicCount=null,t.idLabel=null,t.joinName=null,t.joinTime=null,t.failLabel=null,t.failCount=null,t.sheepNameLabel=null,t.spNode=null,t.headerImage=null,t.closeBtn=null,t.saveBtn=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(v,l=cc.Component),v.prototype.start=function(){u.default.addTargetTouchUpInside(this.closeBtn,this.closeBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.saveBtn,this.saveBtnFunc.bind(this)),h.default.isPlatform(h.Platform.wx)||h.default.isPlatform(h.Platform.tt)?this.saveBtn.active=!0:this.saveBtn.active=!1,this.saveBtn.active=!1},v.prototype.closeBtnFunc=function(){this.node.active=!1},v.prototype.saveBtnFunc=function(){},v.prototype.showPop=function(){this.node.active=!0;var t=this;this.joinTime.node.active=!1,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),p.default.getPersonalInfo(function(e){e&&e.data&&t.setupSubviews(e.data)})},v.prototype.setupSubviews=function(t){this.nickName.string=t.nick_name||"",this.idLabel.string="ID:"+t.uid,t.register_time?(c=(s=m.default.getInstance().formatTs(t.register_time))[0]+"\u5e74"+s[1]+"\u6708"+s[2]+"\u65e5",this.registerLabel.string="\u4e8e"+c+"\u8bde\u751f\n\u8fc4\u4eca\u4e3a\u6b62\u6311\u6218 "+t.challenge+" \u6b21"):this.registerLabel.string="",this.dailyCount.string=t.daily_count,this.topicCount.string=t.topic_count;var e="",o="",n="";if(1==t.today_state){e="sheep/Sheeps",o="skin_00",n="Jump2";for(var a=d.default.getSheepClothesData(),i=0;i<a.length;i++){var r=a[i];if(r.dressing){e="sheep/"+r.spName,o=r.spSkin;break}}this.sheepNameLabel.node.color=(new cc.Color).fromHEX("#FBE14D"),this.sheepNameLabel.string="\u5df2\u52a0\u5165\u7f8a\u7fa4",this.failLabel.node.active=!1,this.failCount.string="";var c="\u4e8e"+(s=m.default.getInstance().formatTs(t.today_ts))[3]+"\u65f6"+s[4]+"\u5206\uff0c",s=(l=g.default.formatTime(1e3*t.today_time))[2]<10?"0"+l[2]:l[2],l=l[3]<10?"0"+l[3]:l[3];this.joinTime.string=c+"\u8017\u65f6"+s+"\u5206"+l+"\u79d2",this.joinTime.node.active=!0}else e="sheep/Dead1",o="default",l=y.default.getDeadNum(t.today_fail_count),n="Dead"+l,this.sheepNameLabel.node.color=(new cc.Color).fromHEX("#FFFFFF"),this.sheepNameLabel.string="\u672a\u52a0\u5165\u7f8a\u7fa4",this.joinTime.string="",this.failLabel.node.active=!0,this.failCount.string=t.today_fail_count+"";var p=this;this.spNode.getComponent(f.default).loadSpine(e,function(){p.spNode.getComponent(f.default).setNewSkin(o),p.spNode.getComponent(f.default).play(n,0)}),u.default.setAvatar(this.headerImage,t.avatar)},s([i(cc.Node)],v.prototype,"popNode",void 0),s([i(cc.Label)],v.prototype,"nickName",void 0),s([i(cc.Label)],v.prototype,"registerLabel",void 0),s([i(cc.Label)],v.prototype,"dailyName",void 0),s([i(cc.Label)],v.prototype,"topicName",void 0),s([i(cc.Label)],v.prototype,"dailyCount",void 0),s([i(cc.Label)],v.prototype,"topicCount",void 0),s([i(cc.Label)],v.prototype,"idLabel",void 0),s([i(cc.Label)],v.prototype,"joinName",void 0),s([i(cc.Label)],v.prototype,"joinTime",void 0),s([i(cc.Label)],v.prototype,"failLabel",void 0),s([i(cc.Label)],v.prototype,"failCount",void 0),s([i(cc.Label)],v.prototype,"sheepNameLabel",void 0),s([i(cc.Node)],v.prototype,"spNode",void 0),s([i(cc.Node)],v.prototype,"headerImage",void 0),s([i(cc.Node)],v.prototype,"closeBtn",void 0),s([i(cc.Node)],v.prototype,"saveBtn",void 0),a=s([a],v),r.default=a,cc._RF.pop()},{}],PoolManager:[function(t,e,o){"use strict";cc._RF.push(e,"fa6ed2YIVxN45t8qifYPswb","PoolManager");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.PoolManager=void 0,a=(p=cc._decorator).ccclass;var s,l,p=p.property;function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.prefab=[],t.prefabMap={},t.poolMap={},t}r(u,s=cc.Component),(l=u).prototype.onLoad=function(){l.instance=this;for(var t,e=0;e<this.prefab.length;e++)this.prefabMap[this.prefab[e].name]=e,this.poolMap[this.prefab[e].name+"Pool"]=new cc.NodePool;for(t in this.prefabMap)cc.log(t+this.prefabMap[t])},u.prototype.get=function(t){var e=this.prefabMap[t];if(null!=e){var o=this.poolMap[t+"Pool"].get();return 0<this.poolMap[t+"Pool"].size()?o.active=!0:(o=cc.instantiate(this.prefab[e])).active=!0,o}console.log("\u9884\u5236\u4f53\u4e0d\u5b58\u5728\u6216\u672a\u52a0\u8f7d\uff08\u672a\u62d6\u62fd\uff09")},u.prototype.put=function(t){t.active=!1,this.poolMap[t.name+"Pool"].put(t)},c([p(cc.Prefab)],u.prototype,"prefab",void 0),a=l=c([a],u),i.PoolManager=a,cc._RF.pop()},{}],PrivacyPolicy:[function(t,e,o){"use strict";cc._RF.push(e,"83b1cbmnjRKCqtOVxg1KAz1","PrivacyPolicy");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.label=null,t.text="hello",t}r(p,s=cc.Component),p.prototype.start=function(){},c([l(cc.Node)],p.prototype,"label",void 0),c([l],p.prototype,"text",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],PrivacyUserPop:[function(t,e,o){"use strict";cc._RF.push(e,"2a225F7jMhPWpqoKwvcsBGP","PrivacyUserPop");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.popNode=null,t.privacyNode=null,t.userNode=null,t}r(p,s=cc.Component),p.prototype.start=function(){},p.prototype.privacyCloseBtnFunc=function(){this.node.active=!1},p.prototype.userCloseBtnFunc=function(){this.node.active=!1},p.prototype.showPop=function(t){this.node.active=!0,this.userNode.active=!1,this.privacyNode.active=!1,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),"user"==t.type?this.userNode.active=!0:this.privacyNode.active=!0},c([l(cc.Node)],p.prototype,"popNode",void 0),c([l(cc.Node)],p.prototype,"privacyNode",void 0),c([l(cc.Node)],p.prototype,"userNode",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],ScrollMsg:[function(t,e,o){"use strict";cc._RF.push(e,"0e6eb07gOpDPqlpg49sZaei","ScrollMsg");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0});var s,l,p=cc._decorator,u=p.ccclass;function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.label=null,t.maskNode=null,t.m_speed=100,t.m_xLeftEnd=0,t.m_xRightEnd=0,t.m_yPos=0,t.m_direction=s.LEFT_TO_RIGHT,t}a=p.property,(p=s=s||{})[p.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",p[p.RIGHT_TO_LEFT=2]="RIGHT_TO_LEFT",r(d,l=cc.Component),d.prototype.start=function(){},d.prototype.showMsg=function(t){this.label.string=t.msg,this.m_xRightEnd=this.node.x+this.maskNode.node.width*this.maskNode.node.anchorX,this.m_xLeftEnd=this.node.x-this.maskNode.node.width*this.maskNode.node.anchorX,t=this.label.node.getContentSize(),t=this.m_direction===s.LEFT_TO_RIGHT?this.m_xLeftEnd-t.width:this.m_xRightEnd,this.label.node.x=t,this.label.node.y=this.m_yPos},d.prototype.update=function(t){var e;this.m_direction===s.LEFT_TO_RIGHT?(e=this.label.node.getContentSize(),this.label.node.x>=this.m_xRightEnd&&(this.label.node.x=this.m_xLeftEnd-e.width),this.label.node.x+=this.m_speed*t):(e=this.label.node.getContentSize(),this.label.node.x<=this.m_xLeftEnd-e.width&&(this.label.node.x=this.m_xRightEnd),this.label.node.x-=this.m_speed*t)},c([a(cc.Label)],d.prototype,"label",void 0),c([a(cc.Mask)],d.prototype,"maskNode",void 0),c([a({tooltip:"\u6bcf\u79d2\u79fb\u52a8\u591a\u5c11\u50cf\u7d20"})],d.prototype,"m_speed",void 0),c([a({tooltip:"\u6587\u5b57\u6eda\u52a8\u7684\u65b9\u5411\uff0c1\u662f\u4ece\u5de6\u5230\u53f3\uff0c2\u662f\u4ece\u53f3\u5230\u5de6"})],d.prototype,"m_direction",void 0),u=c([u],d),i.default=u,cc._RF.pop()},{}],SpriteWithMaskAssembler:[function(t,e,o){"use strict";cc._RF.push(e,"6b309k9JDND+5aP2ebiAdxw","SpriteWithMaskAssembler");var n,a=o,i=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.getSpriteWithMaskAssembler=void 0,a.getSpriteWithMaskAssembler=function(){var t=cc.gfx,e=cc.Assembler2D;return i(o,e),Object.defineProperty(o.prototype,"floatsPerVert",{get:function(){return 7},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"colorOffset",{get:function(){return 6},enumerable:!1,configurable:!0}),o.prototype.getVfmt=function(){return o.vfmtPosTowUvColor},o.prototype.getBuffer=function(){var t;return o.meshBuffer||((t=cc.renderer._handle)._SpriteWithMaskBuffer&&console.error("\u7adf\u7136\u5df2\u7ecf\u5b58\u5728 _SpriteWithMaskBuffer \u5bf9\u8c61\u4e86, \u8fd9\u53ef\u80fd\u662f\u4e2a\u4e25\u91cd\u7684 bug!"),o.meshBuffer=t.getBuffer("mesh",this.getVfmt())),o.meshBuffer},o.prototype.updateRenderData=function(t){this.packToDynamicAtlas(t,t._spriteFrame),t._vertsDirty&&(this.updateUVs(t),this.updateVerts(t),t._vertsDirty=!1)},o.prototype.updateUVs=function(t){for(var e=t._spriteFrame.uv,n=this.uvOffset,a=this.floatsPerVert,i=this._renderData.vDatas[0],r=0;r<4;r++){var c=2*r,s=a*r+n;i[s]=e[c],i[s+1]=e[1+c],i[s+2]=o.uv2[c],i[s+3]=o.uv2[1+c]}},o.prototype.updateVerts=function(t){var e,o,n,a,i,r,c,s=t.node,l=s.width,p=s.height,u=s.anchorX*l,d=s.anchorY*p,h=t.trim?(i=-u,r=-d,c=l-u,p-d):(h=(n=t.spriteFrame)._originalSize.width,e=n._originalSize.height,a=n._rect.width,o=n._rect.height,n=(s=n._offset).x+(h-a)/2,a=s.x-(h-a)/2,i=n*(n=l/h)-u,r=(s.y+(e-o)/2)*(h=p/e)-d,c=l+a*n-u,p+(s.y-(e-o)/2)*h-d);(d=this._local)[0]=i,d[1]=r,d[2]=c,d[3]=h,this.updateWorldVerts(t)},o.vfmtPosTowUvColor=new t.VertexFormat([{name:t.ATTR_POSITION,type:t.ATTR_TYPE_FLOAT32,num:2},{name:t.ATTR_UV0,type:t.ATTR_TYPE_FLOAT32,num:4},{name:t.ATTR_COLOR,type:t.ATTR_TYPE_UINT8,num:4,normalize:!0}]),o.uv2=[0,1,1,1,0,0,1,0],new o;function o(){return null!==e&&e.apply(this,arguments)||this}},cc._RF.pop()},{}],SpriteWithMask:[function(t,e,o){"use strict";cc._RF.push(e,"16615oSi4lB+Y7u7Tdx2332","SpriteWithMask");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.SpriteWithMask=void 0;var s,l=a("SpriteWithMaskAssembler");function p(){return null!==s&&s.apply(this,arguments)||this}a=(i=cc._decorator).ccclass,i.property,i=i.menu,c(p,s=cc.Sprite),p.prototype.onLoad=function(){var t;null===(t=s.prototype.onLoad)||void 0===t||t.call(this),this.type,cc.Sprite.Type.SIMPLE},p.prototype._resetAssembler=function(){this.setVertsDirty(),this._assembler=l.getSpriteWithMaskAssembler(),this._assembler.init(this)},i=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r}([a(),i("2D/SpriteWithMask")],p),r.SpriteWithMask=i,cc._RF.pop()},{}],TodayRankPop:[function(t,e,o){"use strict";cc._RF.push(e,"3c9ecBLnyBEtad8HHAyJf0H","TodayRankPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("api-sheep"),u=a("CcJsFunc"),d=a("dataTs");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.closeBtn=null,t.friendBtn=null,t.shareBtn=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){u.default.addTargetTouchUpInside(this.closeBtn,this.closeBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.friendBtn,this.friendBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.shareBtn,this.shareBtnFunc.bind(this))},h.prototype.closeBtnFunc=function(){this.node.active=!1},h.prototype.friendBtnFunc=function(){this.node.active=!1,console.log("\u597d\u53cb\u6392\u884c\u699c"),cc.game.emit("showPop",{popName:"friendRankPop",showPopData:{}})},h.prototype.shareBtnFunc=function(){console.log("\u5206\u4eab\u670b\u53cb\u5708")},h.prototype.showPop=function(){this.node.active=!0,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),p.default.getUserRankInfo(function(t){var e;0==t.err_code&&t.data&&t.data.user&&(e=t.data.user.fail,1==(t=t.data.user.state)?d.default.updateTodayCount(t,"win"):d.default.updateTodayCount(e,"fail"))},function(){console.log("###### fail ######"),d.default.updateTodayCount(0,"fail")})},s([i(cc.Node)],h.prototype,"popNode",void 0),s([i(cc.Node)],h.prototype,"closeBtn",void 0),s([i(cc.Node)],h.prototype,"friendBtn",void 0),s([i(cc.Node)],h.prototype,"shareBtn",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],TodaySubContextView:[function(t,e,o){"use strict";cc._RF.push(e,"6f5a44uIwZLR54OKfk5cZc9","TodaySubContextView");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(r,"__esModule",{value:!0});var u,d=a("enumConfig"),h=cc._decorator;function f(){var t=null!==u&&u.apply(this,arguments)||this;return t.subContextView=null,t}i=h.ccclass,a=h.property,h.menu,c(f,u=cc.Component),f.prototype.onEnable=function(){var t=this;setTimeout(function(){t.changeViewType(d.ShownType.todayRank)},100)},f.prototype.start=function(){},f.prototype.changeViewType=function(){return l(this,void 0,Promise,function(){var t;return p(this,function(){return cc.sys.platform!=cc.sys.WECHAT_GAME||((t=this.node).width,t.height,this.subContextView.updateSubContextViewport()),[2]})})},s([a({type:cc.SubContextView,tooltip:"\u5b50\u57df\u89c6\u56fe\u8282\u70b9\uff0c\u6ca1\u6709\u5219\u6dfb\u52a0\u7ec4\u4ef6\u5230\u672c\u8eab"})],f.prototype,"subContextView",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],ad:[function(t,e,o){"use strict";cc._RF.push(e,"a30241BP59D1qFtYJSnt/BB","ad");var n,a=e,i=o,r=function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function c(){}Object.defineProperty(i,"__esModule",{value:!0}),i.AdType=i.AdTag=void 0,(a=n=i.AdTag||(i.AdTag={}))[a.NONE=0]="NONE",a[a.RewardVideo=1]="RewardVideo",(a=i.AdType||(i.AdType={}))[a.RewardVideo=0]="RewardVideo",a[a.FullScreenVideo=1]="FullScreenVideo",a[a.Interstitial=2]="Interstitial",a[a.BigImage=3]="BigImage",c.getAdByTag=function(t){console.log("[sdk] get ad by tag",t,typeof t,s[t]);var e=s[t],o="";switch(cc.sys.platform){case cc.sys.WECHAT_GAME:o=e.wxAdID;break;case cc.sys.BYTEDANCE_GAME:o=e.ttAdID}return r(r({},s[t]),{adID:o})},c.getRandomShareImgUrl=function(){return"https://www.52shenbian.com/jigsawRes/resources/sharingGraph/chigua"+(Math.floor(5*Math.random())+1)+".jpg"},i.default=a=c;var s=((i={})[n.RewardVideo]={title:"\u6b22\u8fce\u6765\u5230\u6708\u4e4b\u6751",url:a.getRandomShareImgUrl(),wxAdID:"adunit-51694ea44cfcc656",ttAdID:""},i);cc._RF.pop()},{}],"android-sdk":[function(t,e,o){"use strict";cc._RF.push(e,"edf737yBMxG3b6BBsVJzu1A","android-sdk");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.getCashOutParams=void 0;var i=n("sdk"),r=n("native-bridge"),c=n("native-def");function s(){}a.getCashOutParams=function(){try{return null}catch(n){return null}},s.vibrateShort=function(t){void 0===t&&(t=i.VibrateType.Light),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/CocosUtils","Vibrate","(I)V",t)},s.vibrateLong=function(t){void 0===t&&(t=i.VibrateType.Long),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/CocosUtils","Vibrate","(I)V",t)},s.showBannerAd=function(){},s.hideBannerAd=function(){},s.showInterstitialAd=function(t){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showInterstitial","(Ljava/lang/String;)V",t)},s.showRewardVideoAd=function(t,e,o){r.default.callNative(c.NativeFun.showRewardVideoAd),this.adCallback(t,e,o)},s.showFullScreenAd=function(t){var e=t.success,o=t.fail;t=t.tag,cc.sys.os==cc.sys.OS_ANDROID&&(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showFullScreenAd","(Ljava/lang/String;)V",t),this.adCallback(t,e,o))},s.showBigImageAd=function(t){var e=t.success,o=t.fail;t=t.tag,cc.sys.os==cc.sys.OS_ANDROID&&(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showBigImage","(Ljava/lang/String;)V",t),this.adCallback(t,e,o))},s.hideBigImageAd=function(t){t=t.tag,cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideBigImage","(Ljava/lang/String;)V",t)},s.adCallback=function(t,e,o){cc.game.once("ad-reward-video-native-callback",function(t,n){console.log("=== ad-reward-video-native-callback full screen ===",t,n),n?e&&e():o&&o()},this)},a.default=n=s,cc._RF.pop()},{}],"api-sheep":[function(t,e,o){"use strict";cc._RF.push(e,"21e18xyzLdONJh79eiw/cac","api-sheep");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},i=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})}),s=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("dataTs"),u=a("enumConfig"),d=a("sdk"),h=a("data-manager");function f(){return null!==l&&l.apply(this,arguments)||this}i(f,l=cc.Component),f.ttLogin=function(){if(console.log("[api] tt login"),d.default.isPlatform(d.Platform.tt))return new Promise(function(t){tt.login({success:function(e){console.log("login \u8c03\u7528\u6210\u529f code = "+e.code+"  annoymousCode = "+e.anonymousCode),d.default.post({url:"/sheep/v1/user/login_tt",data:{code:e.code,anonymous_code:e.anonymousCode},success:function(e){var o;t(),console.log("login_tt res: ",JSON.stringify(e)),0==e.err_code&&e.data&&(console.log("res.data.uid: ",e.data.uid),(o=p.default.getUserData()).userID=e.data.uid+"",o.openid=e.data.openid,o.token=e.data.token,p.default.saveUserData(o),h.default.user.uid=Number(o.userID),o=p.default.getUserData(),console.log("userData: ",o.userID))},fail:function(){t()}})},fail:function(e){console.log("\u767b\u5f55\u5931\u8d25: ",e),t()}})})},f.getUserInfo=function(){return c(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(t,e){tt.getUserInfo({withCredentials:!0,success:function(o){console.log("getUserInfo \u8c03\u7528\u6210\u529f "+o.userInfo),console.log("getUserInfo \u8c03\u7528\u6210\u529f "+JSON.stringify(o));var n=(a=o.userInfo).nickName,a=(o=a.avatarUrl,a.gender);h.default.user.avatar=o,h.default.user.nickName=n,h.default.user.gender=a,console.log(o,n,a),d.default.post({url:"/sheep/v1/game/update_user",data:{nick_name:n,avatar:o,gender:a},success:function(e){t(),console.log("update_user res: ",JSON.stringify(e))},fail:function(){e()}})},fail:function(){console.log("getUserInfo \u8c03\u7528\u5931\u8d25"),t()}})})]})})},f.wxLogin=function(){if(console.log("[api] wx login"),d.default.isPlatform(d.Platform.wx))return new Promise(function(t){wx.login({success:function(e){console.log("login \u8c03\u7528\u6210\u529f code = "+e.code),d.default.post({url:"/sheep/v1/user/login_wx",data:{code:e.code},success:function(e){var o;t(),console.log("login_wx res: ",JSON.stringify(e)),0==e.err_code&&e.data&&(console.log("res.data.uid: ",e.data.uid),(o=p.default.getUserData()).userID=e.data.uid+"",o.openid=e.data.openid,o.token=e.data.token,p.default.saveUserData(o),h.default.user.uid=Number(o.userID),o=p.default.getUserData(),console.log("userData: ",o.userID))},fail:function(){t()}})},fail:function(e){console.log("\u767b\u5f55\u5931\u8d25: ",e),t()}})})},f.getWxUserInfo=function(){return c(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(t,e){wx.getUserProfile({desc:"\u7528\u4e8e\u5b8c\u5584\u4e2a\u4eba\u8d44\u6599",success:function(o){console.log("getUserInfo \u8c03\u7528\u6210\u529f "+o.userInfo),console.log("getUserInfo \u8c03\u7528\u6210\u529f "+JSON.stringify(o));var n=(a=o.userInfo).nickName,a=(o=a.avatarUrl,a.gender);h.default.user.avatar=o,h.default.user.nickName=n,h.default.user.gender=a,console.log(o,n,a),d.default.post({url:"/sheep/v1/game/update_user",data:{nick_name:n,avatar:o,gender:a},success:function(e){t(),console.log("update_user res: ",JSON.stringify(e))},fail:function(){e()}})},fail:function(e){console.log("getUserInfo \u8c03\u7528\u5931\u8d25",e),t()}})})]})})},f.oppoLogin=function(){if(console.log("[api] oppo login"),d.default.isPlatform(d.Platform.oppo))return new Promise(function(t){qg.login({success:function(e){t();var o=JSON.stringify(e);console.log(o),e.data&&d.default.post({url:"/sheep/v1/user/login_oppo",data:{uid:e.data.uid,nick_name:e.data.nickName,avatar:e.data.avatar,sex:1},success:function(e){var o;t(),console.log("login_oppo res: ",JSON.stringify(e)),0==e.err_code&&e.data&&(console.log("res.data.uid: ",e.data.uid),(o=p.default.getUserData()).userID=e.data.uid+"",o.openid=e.data.openid,o.token=e.data.token,p.default.saveUserData(o),h.default.user.uid=Number(o.userID),console.log("userData: ",o.userID))},fail:function(){t()}})},fail:function(e){t(),console.log(JSON.stringify(e))}})})},f.vivoLogin=function(){if(console.log("[api] vivo login"),d.default.isPlatform(d.Platform.vivo))return new Promise(function(t){1063<=qg.getSystemInfoSync().platformVersionCode?qg.login().then(function(e){console.log(e),e.data.token?(console.log("\u5f53\u524d\u7528\u6237\u4fe1\u606f: "+JSON.stringify(e)),e.data&&d.default.post({url:"/sheep/v1/user/login_vivos",data:{token:e.data.token},success:function(e){var o;t(),console.log("login_vivos res: ",JSON.stringify(e)),0==e.err_code&&e.data&&(console.log("res.data.uid: ",e.data.uid),(o=p.default.getUserData()).userID=e.data.uid+"",o.openid=e.data.openid,o.token=e.data.token,p.default.saveUserData(o),h.default.user.uid=Number(o.userID),console.log("userData: ",o.userID))},fail:function(){t()}})):t()},function(e){console.log("\u767b\u5f55\u5931\u8d25"+JSON.stringify(e)),t()}):t()})},f.requestUserInfo=function(){return c(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(t){t();var e='{"err_code":0,"err_msg":"","data":{"id":"63214253824dd58b1005fa3a","created_at":"2022-09-14T02:54:11.42Z","updated_at":"2022-09-14T02:54:11.42Z","role":2,"uid":100001,"gender":1,"nick_name":"152******69","avatar":"https://instant.heytapimage.com/game-instant-img/icon/default_avatar_1.png","language":"en","wx_open_id":"oOYg25MNZeABCnWSo7XyV8sXNZyQ","wx_union_id":"oNvyk5mymsE3J05RvQ4IhhULKktE","last_login_time":null,"last_logout_time":null,"charge_first_time":0,"charge_last_time":0,"charge_total":0,"charge_times":0}}';0==(e=JSON.parse(e)).err_code&&e.data&&(h.default.user.uid=e.data.uid,h.default.user.avatar=e.data.avatar,h.default.user.gender=e.data.gender,h.default.user.openId=e.data.openId,cc.game.emit(u.EMITKEY.USERINFOSUCCESS))})]})})},f.requestRankUserInfo=function(){return c(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(t){d.default.get({url:"/sheep/v1/game/user_rank_info",params:{uid:p.default.getUserData().userID},success:function(e){t(),console.log("\u83b7\u53d6\u6392\u884c\u7528\u6237\u4fe1\u606f ### = ",JSON.stringify(e)),0==e.err_code&&e.data&&e.data.user&&(h.default.rankUserInfo=e.data.user,h.default.region=e.data.region,console.log("\u83b7\u53d6\u6392\u884c\u7528\u6237\u4fe1\u606f rankUserInfo ### = ",JSON.stringify(h.default.rankUserInfo)),cc.game.emit(u.EMITKEY.RANKUSERINFOSUCCESS))},fail:function(e){console.log("\u83b7\u53d6\u6392\u884c\u7528\u6237\u4fe1\u606f err = ",e),t()}})})]})})},f.getUserRankInfo=function(t,e){d.default.get({url:"/sheep/v1/game/user_rank_info",params:{uid:p.default.getUserData().userID},success:function(o){0==o.err_code?t&&t(o):(console.log("\u8bfb\u53d6\u6570\u636e\u5931\u8d25"),e&&e())},fail:function(){e&&e()}})},f.getBulletData=function(t){d.default.get({url:"/sheep/v1/game/get_bullet",success:function(e){0==e.err_code?t&&t(e.data):console.log("\u8bfb\u53d6\u6570\u636e\u5931\u8d25")}})},f.getRankInfoData=function(t){d.default.get({url:"/sheep/v1/game/rank_info",success:function(e){0==e.err_code?t&&t(e):console.log("\u8bfb\u53d6\u6570\u636e\u5931\u8d25")},fail:function(){}})},f.getStageInfoData=function(t){d.default.get({url:"/sheep/v1/game/rank_stage_info",success:function(e){console.log("state_info result = "+JSON.stringify(e)),0==e.err_code?t&&t(e):console.log("\u8bfb\u53d6\u6570\u636e\u5931\u8d25")},fail:function(){}})},f.gameOver=function(t,e){d.default.get({url:"/sheep/v1/game/game_over",params:t,success:function(t){console.log("game_over result = "+JSON.stringify(t)),0==t.err_code&&e&&e(t)}})},f.getTopicData=function(t){return c(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(e){d.default.get({url:"/sheep/v1/game/get_topic",params:{uid:p.default.getUserData().userID},success:function(o){e(),console.log("get_topic ### = ",JSON.stringify(o)),0==o.err_code&&(h.default.topicModel=o.data,t&&t(o),cc.game.emit(u.EMITKEY.TOPICACCOUNT))},fail:function(){e()}})})]})})},f.joinTopic=function(t,e){d.default.get({url:"/sheep/v1/game/topic_join",params:t,success:function(t){console.log("topic_join ### = ",JSON.stringify(t)),0==t.err_code&&e&&e(t)},fail:function(t){console.log("topic_join err = ",t)}})},f.topicGameOver=function(t,e){d.default.get({url:"/sheep/v1/game/topic_game_over",params:t,success:function(t){console.log("game_over result = "+JSON.stringify(t)),0==t.err_code&&e&&e(t)}})},f.topicRankInfo=function(t){return c(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(e){d.default.get({url:"/sheep/v1/game/topic_rank",params:{},success:function(o){e(),0==o.err_code&&(h.default.topicRankInfo=o.data,t&&t(o),cc.game.emit(u.EMITKEY.TOPICRANKINFO))},fail:function(){e()}})})]})})},f.getTopicUserInfo=function(t,e){d.default.get({url:"/sheep/v1/game/topic_user_info",params:{uid:t},success:function(t){0==t.err_code?e&&e(t):console.log("\u8bfb\u53d6\u6570\u636e\u5931\u8d25")},fail:function(){}})},f.getMatchResult=function(t,e){d.default.get({url:"/sheep/v1/game/topic_match_info",params:{type:t,uid:p.default.getUserData().userID},success:function(t){0==t.err_code?e&&e(t):console.log("\u8bfb\u53d6\u6570\u636e\u5931\u8d25")},fail:function(){}})},f.updateUserSkin=function(t,e){d.default.get({url:"/sheep/v1/game/update_user_skin",params:{skin:t},success:function(t){0==t.err_code?e&&e(t):console.log("\u8bfb\u53d6\u6570\u636e\u5931\u8d25")},fail:function(){}})},f.getPersonalInfo=function(t){d.default.get({url:"/sheep/v1/game/personal_info",params:{},success:function(e){0==e.err_code?t&&t(e):console.log("\u8bfb\u53d6\u6570\u636e\u5931\u8d25")},fail:function(){}})},i=f,r.default=i,cc._RF.pop()},{}],audio:[function(t,e,o){"use strict";cc._RF.push(e,"3d3f9s4k+9DLLd0qVZ7eBqp","audio");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var i=n("GameManager"),r=n("dataTs"),c=n("enumConfig");function s(){}s.updateAudioStatus=function(){this._playingMusicName&&this.playAudioMusic(this._playingMusicName,!0)},s.playBGM=function(){var t;this.setupData=r.default.getUserSetupData(),console.log(this.setupData.musicStatus),this.setupData.musicStatus<0?cc.audioEngine.stopAll():(t="audio/music/game_cycle.mp3",i.default.getInstance().gameType==c.GAMETYPE.GAMEMAIN?t="audio/music/main_music.mp3":i.default.getInstance().gameType!=c.GAMETYPE.GAMEDAILY&&i.default.getInstance().gameType!=c.GAMETYPE.GAMETOMB&&i.default.getInstance().gameType!=c.GAMETYPE.GAMETOPIC||(t="audio/music/game_cycle.mp3"),console.log("\u97f3\u4e50 ###### = ",t),console.log("gameType ###### = ",i.default.getInstance().gameType),s.playAudioMusic(t,!0))},s.playAudioMusic=function(t,e){this.setupData=r.default.getUserSetupData();var o=this,n=null;this._bgMusicClip||(this._bgMusicClip={}),this._audioClip||(this._audioClip={}),this._playingMusicName||(this._playingMusicName=""),this.setupData.musicStatus<0&&e?cc.audioEngine.stopAll():this.setupData.effectStatus<0&&!e||(e?(this._playingMusicName==t&&console.log("\u540c\u4e00\u4e2a\u97f3\u4e50"),cc.audioEngine.stopAll(),n=!!this._bgMusicClip&&this._bgMusicClip[t],this._playingMusicName=t):n=!!this._audioClip&&this._audioClip[t],n?e?cc.audioEngine.playMusic(n,e):cc.audioEngine.playEffect(n,!1):o.loadPlayAudioEngine(t,e,function(t){var n=null;e?o._playingMusicName==t&&(n=o._bgMusicClip[t],cc.audioEngine.playMusic(n,e)):(n=o._audioClip[t],cc.audioEngine.playEffect(n,!1))}))},s.resumeAllAudio=function(t){var e=this._playingMusicName;(e=!!this._bgMusicClip&&this._bgMusicClip[e])?(cc.audioEngine.stopAll(),cc.audioEngine.play(e,!0,1)):t&&s.playAudioMusic(t,!0)},s.loadPlayAudioEngine=function(t,e,o){o=o||function(){};var n=this;cc.loader.loadRes(t,function(a,i){a||(e?n._bgMusicClip[t]=i:n._audioClip[t]=i,o(t))})},s.audioLocalName="audioLocal",s._bgMusicClip={},s._playingMusicName="",s._audioClip={},s.setupData=null,n=s,a.default=n,cc._RF.pop()},{}],blockArea:[function(t,e,o){"use strict";cc._RF.push(e,"abca32Q32NKQIkl20gPemwL","blockArea");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.blockEditorPrefab=null,t}r(p,s=cc.Component),p.prototype.start=function(){},c([l(cc.Prefab)],p.prototype,"blockEditorPrefab",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],blockEditorPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"5c0a1NoiWZPf7dwBgQqTPdJ","blockEditorPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.layerNumber=null,t.blockImg=null,t.moldTypeText=null,t.rolNum=0,t.rowNum=0,t.layerIndex=0,t.moldType=0,t.deleteCallback=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.deleteBlock,this)},u.prototype.setBlockLayerNum=function(t,e,o,n,a){this.rolNum=t,this.rowNum=e,this.layerIndex=o,this.moldType=n,2==this.moldType?this.moldTypeText.active=!0:this.moldTypeText.active=!1,this.deleteCallback=a,this.layerNumber.node.active=!0,this.layerNumber.string=""+this.layerIndex},u.prototype.setBlockImgType=function(t,e){this.moldType=e,2==this.moldType?this.moldTypeText.active=!0:this.moldTypeText.active=!1,0==t?this.blockImg.active=!1:(this.blockImg.active=!0,p.default.changeSpriteFrame(this.blockImg,"block/block_"+t+".png"))},u.prototype.deleteBlock=function(){this.deleteCallback&&this.deleteCallback(this.rolNum,this.rowNum,this.layerIndex)},s([i(cc.Label)],u.prototype,"layerNumber",void 0),s([i(cc.Node)],u.prototype,"blockImg",void 0),s([i(cc.Node)],u.prototype,"moldTypeText",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],blockPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"163e04v/WJMCIjkhalOEqNm","blockPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("enumConfig"),d=a("audio"),h=a("sdk"),f=a("util"),g=a("data-manager"),y=a("GameManager");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.blockImgBg=null,t.blockImg=null,t.blackMaskNode=null,t.rollAreaNode=null,t.rollContent=null,t.rollBlockNode=null,t.isShowLight=!1,t.isChoosed=!1,t.cardDataObj=null,t.newScale=1,t.touchCallback=null,t.isRotating=!1,t.circleCenter=cc.v2(0,0),t.circleRadius=0,t.circleRadiusMax=250,t.circleRadiusMin=250,t.addCircleLength=3,t.subCircleLength=-10,t.nowMoveInTimes=0,t.moveInTimes=15,t.rotationTimes=80,t.radian=0,t.radianMin=0,t.radianAdd=0,t.addRadianOnce=0,t.rotateParentComp=null,t.rotateOldPosition=null,t.touchCancelCallback=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(m,l=cc.Component),m.prototype.onLoad=function(){},m.prototype.start=function(){this.node.on("touchstart",this.touchStart,this),this.node.on("touchend",this.touchEnd,this),this.node.on("touchcancel",this.touchCancel,this)},m.prototype.addBlockNode=function(t,e,o){this.isChoosed=!0,this.isShowLight=!0,this.blackMaskNode.active=!1,this.cardDataObj=t,this.touchCallback=e,this.touchCancelCallback=o||function(){},this.newScale=this.node.scale,o=this.getBlockName(this.cardDataObj.type),p.default.changeSpriteFrame(this.blockImg,o),2==this.cardDataObj.moldType&&(this.blockImg.active=!1)},m.prototype.getBlockName=function(t){var e="block/block_"+t+".png";return g.default.topicModel&&y.default.getInstance().gameType==u.GAMETYPE.GAMETOPIC&&(1==g.default.topicModel.id?e="block/zombie/block_"+t+".png":2==g.default.topicModel.id?e="block/werewolf/block_"+t+".png":3==g.default.topicModel.id?e="block/man/block_"+t+".png":4==g.default.topicModel.id?e="block/autumn/block_"+t+".png":5==g.default.topicModel.id?e="block/teacher/block_"+t+".png":6==g.default.topicModel.id?e="block/autumn/block_"+t+".png":7==g.default.topicModel.id&&(e="block/teacher/block_"+t+".png")),e},m.prototype.getType=function(){return this.cardDataObj.type},m.prototype.getCardObj=function(){var t=!0;return this.isShowLight&&!this.isChoosed||(t=!1),{cardDataObj:this.cardDataObj,isCanMove:t}},m.prototype.updateBlockNodeData=function(t,e,o){this.isChoosed=!0,this.isShowLight=!0,this.blackMaskNode.active=!1,this.cardDataObj=t,this.touchCallback=e,this.newScale=this.node.scale,this.touchCancelCallback=o||function(){}},m.prototype.touchStart=function(t){t.stopPropagation(),this.isShowLight&&!this.isChoosed&&(h.default.vibrateShort(),this.newScale=this.node.scale,cc.game.emit(u.EMITKEY.SHOWMASKLAYER,2),d.default.playAudioMusic("audio/sound/clickBlock.mp3",!1),cc.tween(this.node).to(.1,{scale:1.4*this.newScale}).start(),this.node.setSiblingIndex(1e4))},m.prototype.touchEnd=function(t){t.stopPropagation(),this.isShowLight&&!this.isChoosed&&(cc.game.emit(u.EMITKEY.HIDEMASKLAYER,1),this.touchCallback&&this.touchCallback(this))},m.prototype.touchCancel=function(t){t.stopPropagation(),this.isShowLight&&!this.isChoosed&&(cc.game.emit(u.EMITKEY.HIDEMASKLAYER,6),cc.tween(this.node).to(.1,{scale:this.newScale}).start(),this.touchCancelCallback&&this.touchCancelCallback())},m.prototype.playRandomBlockAnimate=function(){if(2==this.cardDataObj.moldType&&this.isShowLight){var t=this;d.default.playAudioMusic("audio/sound/blockRandom.mp3",!1);var e=this.cardDataObj.type;this.rollAreaNode.active=!0;for(var o=[],n=[],a=0;a<12;a++){var i=f.default.rnd(1,8);o.push(i)}o.push(e),e=f.default.rnd(1,8),o.push(e),e=.5*(12*this.rollBlockNode.height+200),this.rollContent.y=e,this.rollContent.scale=.5;for(var r=0;r<o.length;r++){var c=(r-12)*this.rollBlockNode.height,s=cc.instantiate(this.rollBlockNode);s.active=!0,s.x=0,s.y=c,c=this.getBlockName(o[r]),p.default.changeSpriteFrame(s,c),n.push(s),this.rollContent.addChild(s)}cc.tween(this.rollContent).to(1,{y:-7},{easing:cc.easing.cubicOut}).call(function(){cc.tween(this.rollContent).to(.4,{scale:1}).call(function(){t.blockImg.active=!0,t.rollAreaNode.active=!1;for(var e=0;e<n.length;e++)n[e].destroy()},this).start()},this).start()}},m.prototype.setStatus=function(t,e){var o=this;this.node.scale=e,this.isShowLight!=t&&(this.isShowLight=t,this.blackMaskNode.stopAllActions(),this.isShowLight?(this.blackMaskNode.opacity=255,this.blockImg.active=!0,cc.tween(this.blackMaskNode).to(.2,{opacity:0}).call(function(){o.blackMaskNode.active=!1}).start()):(this.blackMaskNode.opacity=0,this.blackMaskNode.active=!0,2==this.cardDataObj.moldType&&cc.tween(this.blockImg).set({opacity:255}).to(.2,{opacity:0}).call(function(){this.blockImg.opacity=255,this.blockImg.active=!1},this).start(),cc.tween(this.blackMaskNode).to(.3,{opacity:255}).start()))},m.prototype.beginRotate=function(t,e,o){var n=this;this.isRotating||(this.nowMoveInTimes=0,this.isRotating=!0,this.isChoosed=!0,this.rotateParentComp=t,this.rotateOldPosition=o,o=cc.v2(cc.winSize.width,cc.winSize.height/2),this.circleCenter=t.node.convertToNodeSpaceAR(o),this.initRotationData(),this.schedule(this.circleMove,.01),cc.tween(this.node).delay(.5).call(function(){n.cardDataObj.type=e;var t=n.getBlockName(n.cardDataObj.type);p.default.changeSpriteFrame(n.blockImg,t)},this).start())},m.prototype.initRotationData=function(){var t=this.getPointAngle(this.circleCenter,this.rotateOldPosition),e=f.default.rnd(-90,90);this.radian=t*Math.PI/180,this.radianMin=(t+e)*Math.PI/180,this.radianAdd=(this.radianMin-this.radian)/this.moveInTimes;var o=f.default.pointLength(this.circleCenter,this.rotateOldPosition);t=Math.sqrt(o),o=Math.ceil(100*Math.random())+70,this.circleRadius=t,this.circleRadiusMax=250,this.circleRadiusMin=o,this.subCircleLength=-(t-this.circleRadiusMin)/this.moveInTimes,this.addCircleLength=(this.circleRadiusMax-this.circleRadiusMin)/this.rotationTimes*1,e=(720-e-30)/this.rotationTimes,this.addRadianOnce=e*Math.PI/180},m.prototype.moveOldPosition=function(){var t=this;cc.tween(this.node).to(.1,{x:this.rotateOldPosition.x,y:this.rotateOldPosition.y}).call(function(){t.isRotating=!1,t.isChoosed=!1,cc.game.emit(u.EMITKEY.HIDEMASKLAYER,7)},this).start()},m.prototype.circleMove=function(){if(this.nowMoveInTimes+=1,this.nowMoveInTimes<=this.moveInTimes)this.circleRadius+=this.subCircleLength,this.radian+=this.radianAdd;else{if(this.nowMoveInTimes>this.rotationTimes+this.moveInTimes)return this.unschedule(this.circleMove),void this.moveOldPosition();this.circleRadius<this.circleRadiusMax&&(this.circleRadius+=this.addCircleLength),this.radian+=this.addRadianOnce}var t=this.circleRadius*Math.cos(this.radian)+this.circleCenter.x,e=this.circleRadius*Math.sin(this.radian)+this.circleCenter.y;this.node.x=t,this.node.y=e},m.prototype.getPointAngle=function(t,e){var o=e.x-t.x;return e=e.y-t.y,180*(0!=o?(t=Math.abs(e/o),0<o?0<=e?Math.atan(t):2*Math.PI-Math.atan(t):0<=e?Math.PI-Math.atan(t):Math.PI+Math.atan(t)):0<e?Math.PI/2:-Math.PI/2)/Math.PI},s([i(cc.Node)],m.prototype,"blockImgBg",void 0),s([i(cc.Node)],m.prototype,"blockImg",void 0),s([i(cc.Node)],m.prototype,"blackMaskNode",void 0),s([i(cc.Node)],m.prototype,"rollAreaNode",void 0),s([i(cc.Node)],m.prototype,"rollContent",void 0),s([i(cc.Node)],m.prototype,"rollBlockNode",void 0),s([i(cc.Node)],m.prototype,"isShowLight",void 0),a=s([a],m),r.default=a,cc._RF.pop()},{}],brickPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"713faAfsa9BN4dPx/ixKnJX","brickPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("brickSubPrefab");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.content=null,t.brickSubPrefab=null,t.base_title_label=null,t.parentNode=null,t.nodeData=null,t}c(d,l=cc.Component),d.prototype.start=function(){},d.prototype.setNodeData=function(t,e){for(var o in this.parentNode=e,this.nodeData=t,this.base_title_label.string="- "+this.nodeData.name+" -",this.nodeData.brickArr){var n=cc.instantiate(this.brickSubPrefab);n.getComponent(u.default).setNodeData(this.nodeData.brickArr[o],this),this.content.addChild(n)}},d.prototype.refreshNode=function(t,e){this.parentNode=e,this.nodeData=t;var o,n=this.content.children;for(o in n)n[o].getComponent(u.default).setNodeData(this.nodeData.brickArr[o],this)},s([p(cc.Node)],d.prototype,"content",void 0),s([p(cc.Prefab)],d.prototype,"brickSubPrefab",void 0),s([p(cc.Label)],d.prototype,"base_title_label",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],brickSubPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"d9565mv5uxJ9q8a8EOWqngx","brickSubPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("GameManager");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.imgContent=null,t.imgContentSub=null,t.imgLock=null,t.nodeData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(d,l=cc.Component),d.prototype.start=function(){p.default.addbtnTouchEndScale(this.node,this.clickNodeAction.bind(this))},d.prototype.clickNodeAction=function(){p.default.addClickAudio()},d.prototype.rewardNodeData=function(t){this.imgLock.active=!1,this.imgContent.active=!0,p.default.changeSpriteFrame(this.imgContentSub,"block/block_"+t+".png"),this.imgContent.getChildByName("mark").active=!1},d.prototype.setNodeData=function(t){var e="block/block_"+(this.nodeData=t).itemId+".png";p.default.changeSpriteFrame(this.imgContentSub,e),1==t.unlock?(this.imgContent.active=!0,this.imgLock.active=!1):(this.imgContent.active=!1,this.imgLock.active=!0),u.default.getInstance().collectionMark.brickNum==t.itemId?(this.imgContent.getChildByName("mark").active=!0,u.default.getInstance().collectionMark.brickNum=0):this.imgContent.getChildByName("mark").active=!1},s([i(cc.Node)],d.prototype,"imgContent",void 0),s([i(cc.Node)],d.prototype,"imgContentSub",void 0),s([i(cc.Node)],d.prototype,"imgLock",void 0),a=s([a],d),r.default=a,cc._RF.pop()},{}],brickSv:[function(t,e,o){"use strict";cc._RF.push(e,"0fd69rlRCBO6pXp78mPsOUw","brickSv");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("dataTs"),d=a("brickPrefab"),h=a("i18n"),f=a("gd_language");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.content=null,t.brickPrefab=null,t.pictureData=null,t.dataArray=[],t}c(g,l=cc.Component),g.prototype.start=function(){for(var t in this.content.removeAllChildren(),this.parserData(),this.dataArray){var e=cc.instantiate(this.brickPrefab);e.getComponent(d.default).setNodeData(this.dataArray[t],this),this.content.addChild(e)}},g.prototype.onEnable=function(){0<this.dataArray.length&&this.refreshSubNode()},g.prototype.parserData=function(){this.pictureData=u.default.getPictureData();var t=u.default.gameConfigData.baseConfigData.pictureData.brickMaxNum,e=this.pictureData.brickNum;t<=e&&(e=t);var o=[];this.dataArray=[];for(var n=0;n<t;n++)if(o.push({itemId:n+1,unlock:e-1<n?0:1}),5<=o.length||n==t-1){for(var a=5-o.length,i=0;i<a;i++)o.push({itemId:1,unlock:0});this.dataArray.push({name:this.dataArray.length+1,brickArr:o}),o=[]}for(o=[],i=0;i<5;i++)o.push({itemId:1,unlock:0});var r=h.default.instance.trans(f.GDLanguage.wallpaper_stay_tuned);this.dataArray.push({name:r,brickArr:o})},g.prototype.refreshSubNode=function(){this.parserData();var t,e=this.content.children;for(t in e)e[t].getComponent(d.default).refreshNode(this.dataArray[t],this)},s([p(cc.Node)],g.prototype,"content",void 0),s([p(cc.Prefab)],g.prototype,"brickPrefab",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],"bullet-item":[function(t,e,o){"use strict";cc._RF.push(e,"0f585dZZAJMXphXW81v5ZMV","bullet-item");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("data-manager"),d=a("str-utils");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.bgSprite=null,t.descNode=null,t.clickBtn=null,t.failSF=null,t.winSF=null,t.showData=null,t.callback=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){p.default.addbtnTouchEndScale(this.clickBtn,this.clickBtnFunc.bind(this))},h.prototype.clickBtnFunc=function(){var t;this.callback&&(t=this.showData.data,this.callback(t))},h.prototype.showSubData=function(t,e){this.showData=t,this.callback=e;var o=t.data,n=o.content;u.default.region&&1==o.type?n=u.default.region+o.content:2==o.type&&u.default.rankUserInfo&&(e=u.default.rankUserInfo.fail,n=d.default.formatStr(o.content,e=e&&0!=e?e:1)),this.descNode.getComponent(cc.Label).string=n,1==t.type?(this.bgSprite.spriteFrame=this.winSF,this.descNode.color=new cc.Color(0,0,0)):(this.bgSprite.spriteFrame=this.failSF,this.descNode.color=new cc.Color(255,255,255))},s([i(cc.Sprite)],h.prototype,"bgSprite",void 0),s([i(cc.Node)],h.prototype,"descNode",void 0),s([i(cc.Node)],h.prototype,"clickBtn",void 0),s([i(cc.SpriteFrame)],h.prototype,"failSF",void 0),s([i(cc.SpriteFrame)],h.prototype,"winSF",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],"bullet-screen-pop":[function(t,e,o){"use strict";cc._RF.push(e,"a8b16hoKXVDjrSvCkcW6JEW","bullet-screen-pop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("enumConfig"),h=a("sdk"),f=a("GameManager"),g=a("data-manager"),y=a("bullet-item");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.mask=null,t.popNode=null,t.closeBtn=null,t.contentNode=null,t.buttleItemNode=null,t.bulletsWin=[],t.bulletsFail=[],t}a=(i=cc._decorator).ccclass,i=i.property,c(m,l=cc.Component),m.prototype.start=function(){p.default.addbtnTouchEndScale(this.mask,this.maskFunc.bind(this)),p.default.addTargetTouchUpInside(this.closeBtn,this.closeBtnFunc.bind(this)),this.buttleItemNode.active=!1},m.prototype.closeBtnFunc=function(){this.node.active=!1},m.prototype.maskFunc=function(){this.node.active=!1},m.prototype.showPop=function(){this.node.active=!0,this.bulletsWin=g.default.bulletsWin,this.bulletsFail=g.default.bulletsFail,g.default.rankUserInfo&&1==g.default.rankUserInfo.state?this.setupSubviews(this.bulletsWin,1):this.setupSubviews(this.bulletsFail,2)},m.prototype.setupSubviews=function(t,e){var o=this;this.contentNode.removeAllChildren();for(var n=0;n<t.length;n++){var a=t[n],i=cc.instantiate(this.buttleItemNode);i.active=!0,this.contentNode.addChild(i),a={data:a,type:e},i.getComponent(y.default).showSubData(a,function(t){o.node.active=!1,console.log("\u5f39\u5e55 = "+JSON.stringify(t)),o.sendBulletMsg(t),cc.game.emit(d.EMITKEY.BULLETSEND,t.mid)})}},m.prototype.sendBulletMsg=function(t){t&&(f.default.getInstance().bulletTime=-60,h.default.post({url:"/sheep/v1/game/bullet_send",data:{uid:u.default.getUserData().userID,mid:t.mid},success:function(t){console.log("bullet_send res: ",JSON.stringify(t))},fail:function(){}}))},s([i(cc.Node)],m.prototype,"mask",void 0),s([i(cc.Node)],m.prototype,"popNode",void 0),s([i(cc.Node)],m.prototype,"closeBtn",void 0),s([i(cc.Node)],m.prototype,"contentNode",void 0),s([i(cc.Node)],m.prototype,"buttleItemNode",void 0),a=s([a],m),r.default=a,cc._RF.pop()},{}],"bullet-screen":[function(t,e,o){"use strict";cc._RF.push(e,"01bb9cdc4ROcLtEHfsN7AZR","bullet-screen");var n,a,i=t,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("api-sheep"),p=i("CcJsFunc"),u=i("enumConfig"),d=i("PoolManager"),h=i("data-manager"),f=i("BulletPrefab");function g(){var t=null!==s&&s.apply(this,arguments)||this;return t.bulletsCurrent=[],t.bulletsArray=[],t.timer=0,t}i=(a=cc._decorator).ccclass,a.property,c(g,s=cc.Component),g.prototype.start=function(){cc.game.on(u.EMITKEY.RANKUSERINFOSUCCESS,this.rankUserInfoFunc,this),cc.game.on(u.EMITKEY.BULLETSEND,this.bulletSendFunc,this),this.schedule(this.requestBulletData,60,1e4,1)},g.prototype.bulletSendFunc=function(t){for(var e,o={},n=0;n<h.default.bulletsWin.length;n++)if(t==(e=h.default.bulletsWin[n]).mid){o.content=e.content,o.type=e.type;break}if(!o.content)for(n=0;n<h.default.bulletsFail.length;n++)if(t==(e=h.default.bulletsFail[n]).mid){o.content=e.content,o.type=e.type;break}h.default.user&&(o.avatar=h.default.user.avatar),h.default.rankUserInfo&&(o.state=h.default.rankUserInfo.state),o.isSelf=1,h.default.region&&(o.region=h.default.region),console.log("mid = "+t,JSON.stringify(o)),this.createBullet(o)},g.prototype.rankUserInfoFunc=function(){h.default.rankUserInfo&&h.default.rankUserInfo.state},g.prototype.requestBulletData=function(){var t=this,e=h.default.getBulletData();e?(console.log("\u4f7f\u7528\u7f13\u5b58\u6570\u636e->\u5f39\u5e55"),this.setDataInfo(e)):(console.log("\u7f13\u5b58\u6570\u636e\u8fc7\u671f->\u5f39\u5e55"),l.default.getBulletData(function(e){e&&(t.setDataInfo(e),h.default.setBulletData(e))}))},g.prototype.setDataInfo=function(t){this.bulletsCurrent=t,this.showBullets()},g.prototype.spawnBullets=function(){for(var t=this,e=this,o=this.randomBullet(),n=0;n<o;n++)setTimeout(function(){var o=t.randomContent();o&&o.content&&e.createBullet(o)},2e3*n)},g.prototype.createBullet=function(t){var e=d.PoolManager.instance.get("BulletPrefab");e.x=this.node.width/2+200,e.getComponent(f.default).setupData(t),e.getComponent(f.default).speed=100,e.y=this.randomStartPosY(),this.bulletsArray.push(e),this.node.addChild(e)},g.prototype.randomRGB=function(t,e,o){return new cc.Color(t,e,o)},g.prototype.randomColor=function(){var t=Math.round(255*Math.random()),e=Math.round(255*Math.random()),o=Math.round(255*Math.random());return new cc.Color(t,e,o)},g.prototype.randomBullet=function(){var t=Math.round(p.default.randomNum(3,10));return this.bulletsCurrent.length<10?Math.round(p.default.randomNum(1,3)):t},g.prototype.randomContent=function(){if(this.bulletsCurrent&&0!=this.bulletsCurrent.length){for(var t=Math.round(Math.random()*(this.bulletsCurrent.length-1)),e=this.bulletsCurrent[t],o=0;o<h.default.bulletsWin.length;o++){var n=h.default.bulletsWin[o];if(e.mid==n.mid){e.content=n.content,e.type=n.type;break}}if(!e.content)for(o=0;o<h.default.bulletsFail.length;o++)if(n=h.default.bulletsFail[o],e.mid==n.mid){e.content=n.content,e.type=n.type;break}return e}},g.prototype.randomSpeed=function(){return Math.round(100*Math.random())+100},g.prototype.randomStartPosY=function(){var t=this.node.height;return Math.round(Math.random()*t*.8)-.4*t},g.prototype.update=function(t){this.timer+=t;for(var e=[],o=0;o<this.bulletsArray.length;o++)this.bulletsArray[o].x-=t*this.bulletsArray[o].getComponent(f.default).speed,this.bulletsArray[o].x<=-(this.node.width+this.bulletsArray[o].width)&&(d.PoolManager.instance.put(this.bulletsArray[o]),e.push(o));for(o=0;o<e.length;o++)this.bulletsArray.splice(e[o],1);3<=this.timer&&(this.timer=0,this.showBullets())},g.prototype.showBullets=function(){0!=this.bulletsArray.length&&4!=this.bulletsArray.length||(console.log("\u518d\u6b21\u521b\u5efa\u5f39\u5e55 ### "+this.bulletsArray.length),this.spawnBullets())},i=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r}([i],g),r.default=i,cc._RF.pop()},{}],"calendar-item":[function(t,e,o){"use strict";cc._RF.push(e,"312273bidZPd4yxEMIojF1F","calendar-item");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("dataTs"),d=a("enumConfig");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.imgEnd=null,t.imgStart=null,t.imgWin=null,t.descNode=null,t.nodeData=null,t.parentNode=null,t}c(h,l=cc.Component),h.prototype.start=function(){},h.prototype.setNodeData=function(t){this.nodeData=t,this.descNode.getComponent(cc.Label).string=String(t.day),this.show(t.type)},h.prototype.getNodeData=function(){return this.nodeData},h.prototype.isWin=function(){if(3<=(n=this.nodeData.date.split("-")).length){var t=""+n[0]+n[1],e=""+n[0]+n[1]+n[2],o=u.default.getUserData().dailyData,n=this.nodeData.type==d.CALENDARITEM.ITEMOLD||this.nodeData.type==d.CALENDARITEM.ITEMNOW;if(o&&o[t]&&o[t][e]&&o[t][e].isWin&&n)return!0}return!1},h.prototype.show=function(t){void 0===t&&(t=d.CALENDARITEM.ITEMFUTURE),this.showBackground(t),this.isWin()&&(this.imgEnd.active=!1,this.imgStart.active=!1,this.imgWin.active=!0,this.descNode.color=(new cc.Color).fromHEX("58BF3A"))},h.prototype.showBackground=function(t){switch(this.imgEnd.active=!1,this.imgStart.active=!1,this.imgWin.active=!1,this.descNode.active=!0,this.descNode.color=(new cc.Color).fromHEX("#661C1C"),t){case d.CALENDARITEM.ITEMLAST:this.descNode.active=!1;break;case d.CALENDARITEM.ITEMOLD:this.imgEnd.active=!0;break;case d.CALENDARITEM.ITEMNOW:this.imgEnd.active=!0,this.imgStart.active=!0,this.descNode.color=(new cc.Color).fromHEX("#FFFFFF");break;case d.CALENDARITEM.ITEMFUTURE:this.descNode.color=(new cc.Color).fromHEX("#BBADAD");break;case d.CALENDARITEM.ITEMNEXT:this.descNode.active=!1,this.descNode.color=(new cc.Color).fromHEX("#BBADAD");break;case d.CALENDARITEM.ITEMNOR:this.imgEnd.active=!0,this.imgStart.active=!1,this.imgWin.active=!1;break;case d.CALENDARITEM.ITEMSELE:this.imgEnd.active=!1,this.imgStart.active=!0,this.imgWin.active=!1,this.descNode.color=(new cc.Color).fromHEX("#FFFFFF");break;case d.CALENDARITEM.ITEMSUC:this.imgEnd.active=!1,this.imgStart.active=!1,this.imgWin.active=!0,this.descNode.color=(new cc.Color).fromHEX("58BF3A")}},s([p(cc.Node)],h.prototype,"imgEnd",void 0),s([p(cc.Node)],h.prototype,"imgStart",void 0),s([p(cc.Node)],h.prototype,"imgWin",void 0),s([p(cc.Node)],h.prototype,"descNode",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],"cat-house-progress":[function(t,e,o){"use strict";cc._RF.push(e,"a832bZG8ctCkbykfAYO9amD","cat-house-progress");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("enumConfig"),h=a("spine"),f=a("houseLayer"),g=a("mainCultivateLayer"),y=a("unlock-build-pop");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainCultivateLayer=null,t.mainUILayer=null,t.houseLayer=null,t.progressMain=null,t.progressNode=null,t.receiveNode=null,t.newCatNode=null,t.titleLabel=null,t.progressBar=null,t.progressLabel=null,t.boxNode=null,t.boxMark=null,t.clawSpine=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(m,l=cc.Component),m.prototype.start=function(){cc.game.on(d.EMITKEY.MAINUPDATEUI,this.updateSubUI,this),cc.game.on(d.EMITKEY.UPDATETABBARSEND,this.updateTabbar,this),p.default.addbtnTouchStartScale(this.node),p.default.addbtnTouchEndScale(this.node,this.catProgressFunc.bind(this)),p.default.addbtnTouchCancelScale(this.node),this.updateSubUI()},m.prototype.updateSubUI=function(){var t,e=this;this.updateProgress(),1==u.default.currentHouseUnlockAll()&&(u.default.haveNewHouseUnlock()?this.boxMark.active=!0:this.boxMark.active=!1,"1"==cc.sys.localStorage.getItem("unlockNewHouse")?this.unlockNewHouseFunc():this.receiveBox()),this.clawSpine.active=!1,cc.sys.localStorage.getItem("unlockClawCache")||2<=(t=u.default.getUserData()).fish&&t.playLevelId<10&&(this.clawSpine.active=!0,this.clawSpine.getComponent(h.default).play("6Pa",0,function(){e.clawSpine.active=!1}),cc.sys.localStorage.setItem("unlockClawCache",1))},m.prototype.updateTabbar=function(t){t==d.MAINPAGE.PAGEMAIN&&(this.clawSpine.active=!1)},m.prototype.catProgressFunc=function(){if("1"==cc.sys.localStorage.getItem("unlockNewHouse"))return u.default.haveNewHouseUnlock()?(this.mainCultivateLayer.getComponent(g.default).unlockNewHouse(),void cc.sys.localStorage.setItem("unlockNewHouse","0")):(console.log("\u623f\u5c4b\u5df2\u5168\u90e8\u89e3\u9501"),void cc.game.emit("showMainTips","Waiting for new houses to be built!"));if(1==u.default.currentHouseUnlockAll())return u.default.getHourseUnlockData(),this.mainUILayer.getChildByName("unlock-build-pop").getComponent(y.default).showGetRemoveProp(),this.unlockNewHouseFunc(),void cc.sys.localStorage.setItem("unlockNewHouse","1");cc.game.emit(d.EMITKEY.UPDATETABBARRECEIVE,1);var t=u.default.getHourseUnlockData();t&&(t.length<=4?this.houseLayer.getComponent(f.default).moveWithRoomId(d.ROOMTYPE.ROOMONE):4<t.length&&t.length<8?this.houseLayer.getComponent(f.default).moveWithRoomId(d.ROOMTYPE.ROOMTWO):8<=t.length&&t.length<11&&this.houseLayer.getComponent(f.default).moveWithRoomId(d.ROOMTYPE.ROOMTHREE)),this.updateSubUI()},m.prototype.updateProgress=function(){this.receiveNode.active=!1,this.newCatNode.active=!1,this.progressMain.active=!0,this.progressNode.active=!0;var t=u.default.getUserData().fish,e=u.default.getHourseUnlockData();if(e&&e.length){e[e.length-1]&&e[e.length-1].length&&(this.boxMark.active=t>=e[e.length-1][0].fish),this.titleLabel.string="\u732b\u5c4b"+e.length;var o,n=e[e.length-1],a=0;for(o in n)n[o].unlock&&a++;this.progressLabel.string=a+"/"+n.length,this.progressBar.getComponent(cc.Sprite).fillRange=a/n.length}else this.boxMark.active=!1},m.prototype.receiveBox=function(){this.progressNode.active=!1,this.newCatNode.active=!1,this.receiveNode.active=!0},m.prototype.unlockNewHouseFunc=function(){this.progressMain.active=!1,this.newCatNode.active=!0,u.default.haveNewHouseUnlock()?this.newCatNode.getComponent(cc.Label).string="\u89e3\u9501\u65b0\u623f\u5c4b":this.newCatNode.getComponent(cc.Label).string="\u5df2\u5168\u90e8\u89e3\u9501"},s([i(cc.Node)],m.prototype,"mainCultivateLayer",void 0),s([i(cc.Node)],m.prototype,"mainUILayer",void 0),s([i(cc.Node)],m.prototype,"houseLayer",void 0),s([i(cc.Node)],m.prototype,"progressMain",void 0),s([i(cc.Node)],m.prototype,"progressNode",void 0),s([i(cc.Node)],m.prototype,"receiveNode",void 0),s([i(cc.Node)],m.prototype,"newCatNode",void 0),s([i(cc.Label)],m.prototype,"titleLabel",void 0),s([i(cc.Node)],m.prototype,"progressBar",void 0),s([i(cc.Label)],m.prototype,"progressLabel",void 0),s([i(cc.Node)],m.prototype,"boxNode",void 0),s([i(cc.Node)],m.prototype,"boxMark",void 0),s([i(cc.Node)],m.prototype,"clawSpine",void 0),a=s([a],m),r.default=a,cc._RF.pop()},{}],catClawPrefabs:[function(t,e,o){"use strict";cc._RF.push(e,"d608do4PQpDxZoRa+u6of6d","catClawPrefabs");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("spine");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.catClaw=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){},u.prototype.playClawAnimation=function(){var t=this;t.node.active=!0,this.node.scale=.8,this.catClaw.getComponent(p.default).play("6Pa",0,function(){t.node.active=!1})},s([i(cc.Node)],u.prototype,"catClaw",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],catNode:[function(t,e,o){"use strict";cc._RF.push(e,"576facriHVLQ5wzTbqa6xlT","catNode");var n,a,i=t,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("dataTs"),p=i("spine");function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.catId=0,t.parentComp=null,t.touchStartPoint=null,t.touchEndPoint=null,t.distance=0,t.unlockClothingBg=null,t.unlockClothing=null,t}i=(a=cc._decorator).ccclass,a.property,c(u,s=cc.Component),u.prototype.start=function(){this.node.on("touchend",this.touchEndFunc,this),this.node.on("touchstart",this.touchStartFunc,this),this.node.on("touchmove",this.touchMoveFunc,this),this.node.on("touchcancel",this.touchCancelFunc,this);var t=this.node.parent;this.unlockClothingBg=t.getChildByName("unlockClothingBg"),this.unlockClothing=t.getChildByName("unlockClothing"),cc.tween(this.unlockClothingBg).by(10,{angle:360}).repeatForever().start()},u.prototype.setCatData=function(t,e){this.catId=t,this.parentComp=e,this.updateSkin()},u.prototype.playClothesAnimation=function(t){this.unlockClothingBg.active=t=void 0!==t&&t,this.unlockClothing.active=t},u.prototype.updateSkin=function(t){void 0===t&&(t=!1);var e,o="cat_"+this.catId,n=l.default.getUserData().catClothesData[o];for(e in n)1==n[e].isWear&&this.setCatSpine(n[e].clothesID,n[e].clothRank,t)},u.prototype.setCatSpine=function(t,e,o){void 0===o&&(o=!1);var n=this,a="Model"+(this.catId<10?"0"+this.catId:this.catId+"");this.node.getComponent(p.default).loadNewSpine(a,function(){var a=(a=t%1e3)<10?"0"+a:a+"";n.node.getComponent(p.default).setNewSkin(a),o?n.node.getComponent(p.default).play("2_SkinChange1",1,function(){n.node.getComponent(p.default).play("1_Standby1",0)}):n.node.getComponent(p.default).play("1_Standby1",0);for(var i=1,r=(i=e<2?0:1,["Collar2","Collar1"]),c=0;c<r.length;c++)n.node.getComponent("spine").spine.getAttachment(r[c],r[c])&&(n.node.getComponent("spine").spine.getAttachment(r[c],r[c]).color.a=i);i=e<3?0:1;var s=["Body1","Arm_L1","Arm_R1","Cloak1"];for(c=0;c<s.length;c++)n.node.getComponent("spine").spine.getAttachment(s[c],s[c])&&(n.node.getComponent("spine").spine.getAttachment(s[c],s[c]).color.a=i)})},u.prototype.touchEndFunc=function(t){t.stopPropagation(),this.touchEndPoint=t.getLocation(),this.distance=this.touchStartPoint.sub(this.touchEndPoint).mag(),this.distance<10&&(this.parentComp?this.parentComp.touchCatFunc(this.catId):console.log("parentComp = null")),this.playClothesAnimation(!1)},u.prototype.touchStartFunc=function(t){this.touchStartPoint=t.getLocation()},u.prototype.touchMoveFunc=function(){},u.prototype.touchCancelFunc=function(){},i=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r}([i],u),r.default=i,cc._RF.pop()},{}],challengeSucPop:[function(t,e,o){"use strict";cc._RF.push(e,"37c28V2pHFLK67RfzN7DCzx","challengeSucPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("ApiTool"),u=a("CcJsFunc"),d=a("dataTs"),h=a("spine");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.maskNode=null,t.popNode=null,t.titleLabel=null,t.allLabel=null,t.numLabel=null,t.sheepSP=null,t.bgFlashSP=null,t.headerNode=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){u.default.addbtnTouchEndScale(this.maskNode,this.maskNodeFunc.bind(this))},f.prototype.maskNodeFunc=function(){this.node.active=!1},f.prototype.showPop=function(){var t=this;this.node.active=!0,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),cc.tween(this.bgFlashSP).to(0,{scale:0}).to(.1,{scale:1}).call(function(){t.bgFlashSP.getComponent(h.default).loadSpine("sheep/UI",function(){t.bgFlashSP.getComponent(h.default).play("4Ray2",0)})}).start();for(var e="sheep/Sheeps",o="skin_00",n=d.default.getSheepClothesData(),a=0;a<n.length;a++){var i=n[a];if(i.dressing){e="sheep/"+i.spName,o=i.spSkin;break}}cc.tween(this.sheepSP).to(0,{scale:0}).to(.2,{scale:1}).call(function(){t.sheepSP.getComponent(h.default).loadSpine(e,function(){t.sheepSP.getComponent(h.default).setNewSkin(o),t.sheepSP.getComponent(h.default).play("Jump1",0)})}).start(),p.default.dailyAllNumber,p.default.dailywinNumber,this.allLabel.string="\u5168\u56fd\u6311\u62181\u7f8a",this.numLabel.string=" 1 ",u.default.setAvatar(this.headerNode,p.default.avatar)},s([i(cc.Node)],f.prototype,"maskNode",void 0),s([i(cc.Node)],f.prototype,"popNode",void 0),s([i(cc.Label)],f.prototype,"titleLabel",void 0),s([i(cc.Label)],f.prototype,"allLabel",void 0),s([i(cc.Label)],f.prototype,"numLabel",void 0),s([i(cc.Node)],f.prototype,"sheepSP",void 0),s([i(cc.Node)],f.prototype,"bgFlashSP",void 0),s([i(cc.Node)],f.prototype,"headerNode",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],chessboard:[function(t,e,o){"use strict";cc._RF.push(e,"209706/F/ZKrrywgXpITLxQ","chessboard");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("blockPrefab"),u=a("CcJsFunc"),d=a("dataTs"),h=a("enumConfig"),f=a("audio"),g=a("GameManager"),y=a("crushArea");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.blockPrefab=null,t.blockArea=null,t.crushAreaNode=null,t.gameTopNode=null,t.moveOutArea=null,t.cookieGetParticle=null,t.crushAreaArgs=null,t.levelID=0,t.nowLevelBlockObj={},t.parentComp=null,t.blockTypeArr=[],t.minBlockNum=8,t.blockMaxWidth=120,t.blockMaxHeight=135,t.cookieBlockType=0,t.scaleRate=1,t}a=(i=cc._decorator).ccclass,i=i.property,c(m,l=cc.Component),m.prototype.onLoad=function(){},m.prototype.onDestroy=function(){console.log("chessboard \u9000\u51fa\u7a0b\u5e8f ######")},m.prototype.start=function(){console.log("start ###")},m.prototype.onEnable=function(){console.log("onEnable ###")},m.prototype.init=function(t,e){this.node.scale=1,console.log("init ###### ",t.widthNum,t.heightNum,this.node.scale),this.parentComp=e,this.nowLevelData=t,this.blockArea.removeAllChildren(),this.levelID=t.levelID,this.createBlockTypeObj(),this.rewardBlockInit(t,!1),this.initBlockNodeLayer(!0),cc.game.emit(h.EMITKEY.SHOWMASKLAYER,3),this.refreshIndex()},m.prototype.initNextLevelMap=function(t,e){this.node.scale=1,console.log("init ###### ",t.widthNum,t.heightNum,this.node.scale),this.parentComp=e,this.nowLevelData=t,this.blockArea.x=cc.winSize.width,this.blockArea.removeAllChildren(),this.createBlockTypeObj(),this.rewardBlockInit(t,!0),this.initBlockNodeLayer(!1),cc.game.emit(h.EMITKEY.SHOWMASKLAYER,3),this.refreshIndex(),cc.tween(this.blockArea).to(1,{x:-360,y:0},{easing:cc.easing.quadOut}).call(function(){cc.game.emit(h.EMITKEY.HIDEMASKLAYER,11)},this).start()},m.prototype.rewardBlockInit=function(t,e){var o,n;d.default.gameConfigData.baseConfigData&&(this.cookieBlockType=0,n=d.default.getUserData().playLevelId,o=d.default.gameConfigData.baseConfigData.cookieRewardLevel,e&&o<=n&&n%2!=0&&(o=this.getCookieLevelData(),console.log("\u997c\u5e72\u7c7b\u578b\u4e3a",o.type),n=d.default.getCookieRewardData(),console.log("cookieData",JSON.stringify(n)),this.cookieBlockType=o.type))},m.prototype.getCookieLevelData=function(){var t=this.blockTypeArr.concat(),e=this.sortAndGroup(t),o=u.default.shuffle(e);console.log("blockArr",t),console.log("randomArr",o);var n=[];30<=t.length&&t.length<=72&&n.push(3),36<=t.length&&t.length<=93&&n.push(6),60<=t.length&&t.length<=105&&n.push(9),54<=t.length&&t.length<=99&&n.push(12),69<=t.length&&t.length<=114&&n.push(15),114<=t.length&&t.length<=147&&n.push(21),console.log("countArr",n);var a,i=[];for(a in n)for(var r in e)if(n[a]==e[r].length){i.push(n[a]);break}console.log("canArr",i);var c,s=i[Math.floor(Math.random()*i.length)];for(c in console.log("count",s),o)if(s==o[c].length)return{count:s,type:o[c][0]};return{count:0,type:0}},m.prototype.sortAndGroup=function(t){var e,o=[];t.sort(function(t,e){return t-e});for(var n=0;n<t.length;n++)t[n-1]!==t[n]&&o.push(e=[]),e.push(t[n]);return o},m.prototype.createBlockTypeObj=function(){var t,e=this.nowLevelData.blockTypeData;for(t in this.blockTypeArr=[],this.nowLevelBlockObj={},e)for(var o=3*e[t],n=0;n<o;n++)this.blockTypeArr.push(t);console.log("PUSH=> block ",this.blockTypeArr.length),this.blockTypeArr=u.default.shuffle(this.blockTypeArr),g.default.blacksInfo.blockCurCount=this.blockTypeArr.length,g.default.blacksInfo.blockAllCount=this.blockTypeArr.length,console.log("blockCurCount = "+g.default.blacksInfo.blockCurCount+" blockAllCount = "+g.default.blacksInfo.blockAllCount)},m.prototype.initBlockNodeLayer=function(t){g.default.getInstance().cookieDict.cookieCurCount=0;var e,o=this.nowLevelData.levelData;for(e in o)for(var n in o[e])t?this.addBlockFunc(o[e][n],cc.winSize.height):this.addBlockFunc(o[e][n],0);t?this.playInitBlockAnimate():this.noPlayAnimate()},m.prototype.checkGameWin=function(){for(var t in this.nowLevelBlockObj)for(var e in this.nowLevelBlockObj[t])for(var o in this.nowLevelBlockObj[t][e])return!1;return!0},m.prototype.noPlayAnimate=function(){for(var t in this.nowLevelBlockObj)for(var e in this.nowLevelBlockObj[t])for(var o in this.nowLevelBlockObj[t][e]){var n=this.checkIsShow(t,Number(o),Number(e)),a=this.nowLevelBlockObj[t][e][o].getComponent(p.default);o=this.node.width/this.nowLevelData.widthNum/this.blockMaxWidth,o*=this.scaleRate,a.setStatus(n,o),a.isChoosed=!1,a.playRandomBlockAnimate()}},m.prototype.playInitBlockAnimate=function(){cc.tween(this.node).delay(.3).call(function(){f.default.playAudioMusic("audio/sound/levelInit.mp3",!1)}).start();var t=1e4,e=0,o=0;for(r in this.nowLevelBlockObj)for(var n in this.nowLevelBlockObj[r])for(var a in this.nowLevelBlockObj[r][n])o++,Number(a)<t&&(t=Number(a)),Number(n)>e&&(e=Number(n));function i(n){function a(a){for(var i in c.nowLevelBlockObj[n][a])!function(i){var r=.02*(Number(i)-t)+.02*(e-Number(a)),s=c.nowLevelBlockObj[n][a][i].getComponent(p.default);cc.tween(s.node).delay(r).by(.8,{y:-cc.winSize.height}).by(.1,{y:-5}).by(.1,{y:8}).by(.1,{y:-3}).call(function(){o--;var t=this.checkIsShow(n,Number(i),Number(a)),e=this.nowLevelBlockObj[n][a][i].getComponent(p.default),r=this.node.width/this.nowLevelData.widthNum/this.blockMaxWidth;r*=this.scaleRate,e.setStatus(t,r),e.isChoosed=!1,e.playRandomBlockAnimate(),0==o&&cc.game.emit(h.EMITKEY.HIDEMASKLAYER,3)},c).start()}(i)}for(var i in c.nowLevelBlockObj[n])a(i)}var r,c=this;for(r in this.nowLevelBlockObj)i(r)},m.prototype.refreshIndex=function(){for(var t in this.nowLevelBlockObj)for(var e in this.nowLevelBlockObj[t])for(var o in this.nowLevelBlockObj[t][e])this.nowLevelBlockObj[t][e][o].setSiblingIndex(1e4)},m.prototype.refreshMask=function(){var t,e=0;for(t in this.nowLevelBlockObj)for(var o in this.nowLevelBlockObj[t])for(var n in this.nowLevelBlockObj[t][o]){e++;var a=this.checkIsShow(t,Number(n),Number(o)),i=this.node.width/this.nowLevelData.widthNum/this.blockMaxWidth;i*=this.scaleRate,this.nowLevelBlockObj[t][o][n].getComponent(p.default).setStatus(a,i)}g.default.blacksInfo.blockCurCount=e},m.prototype.updateBlockArea=function(){var t=[];for(a in cc.game.emit(h.EMITKEY.SHOWMASKLAYER,4),this.nowLevelBlockObj)for(var e in this.nowLevelBlockObj[a])for(var o in this.nowLevelBlockObj[a][e]){var n=this.nowLevelBlockObj[a][e][o].getComponent(p.default);t.push(n.cardDataObj.type)}if(!((t=u.default.shuffle(t)).length<1)){for(var a in this.nowLevelBlockObj)for(var e in this.nowLevelBlockObj[a])for(var o in this.nowLevelBlockObj[a][e]){n=this.nowLevelBlockObj[a][e][o].getComponent(p.default);var i=this.nowLevelData.widthNum*this.minBlockNum,r=this.node.width/i,c=this.node.width/this.nowLevelData.widthNum;i=n.cardDataObj.rolNum*r+c/2,c/=this.blockMaxWidth,c*=this.scaleRate,c=-(n.cardDataObj.rowNum*r+c*this.blockMaxHeight/2),c=cc.v3(i,c,0),n.beginRotate(this,t.pop(),c)}return!0}cc.game.emit(h.EMITKEY.HIDEMASKLAYER,4)},m.prototype.checkIsShow=function(t,e,o){var n,a=this.nowLevelBlockObj;for(n in a)if(Number(n)>Number(t)){var i,r=e-this.minBlockNum,c=e+this.minBlockNum,s=o-this.minBlockNum,l=o+this.minBlockNum;for(i in a[n])for(var p in a[n][i])if(Number(p)>r&&Number(p)<c&&Number(i)>s&&Number(i)<l)return!1}return!0},m.prototype.removeCardNode=function(t){var e;7<=this.crushAreaNode.getComponent(y.default).getCrushBlockNum()||(this.crushAreaNode.setSiblingIndex(10),this.crushAreaArgs&&this.crushAreaArgs.setSiblingIndex(10),e=t.cardDataObj,this.nowLevelBlockObj[e.layerNum][e.rowNum][e.rolNum]&&delete this.nowLevelBlockObj[e.layerNum][e.rowNum][e.rolNum],this.parentComp.crushBlockNode(t),t.comeParent="chessboard",this.refreshMask())},m.prototype.addBlockFunc=function(t,e){var o=cc.instantiate(this.blockPrefab);this.blockArea.addChild(o);var n=this.nowLevelData.widthNum*this.minBlockNum,a=this.node.width/n,i=this.node.width/this.nowLevelData.widthNum;n=i/this.blockMaxWidth,n*=this.scaleRate,o.scale=n,i=t.rolNum*a+i/2,n=-(t.rowNum*a+n*this.blockMaxHeight/2),o.x=i,o.y=n+e,0==t.type&&(e=this.blockTypeArr.pop(),t.type=e),this.cookieBlockType==t.type?t.cookie=1:t.cookie=0,t.cookieType=this.cookieBlockType,o.getComponent(p.default).addBlockNode(t,this.removeCardNode.bind(this),this.refreshIndex.bind(this)),this.addBlockDataObj(o,t)},m.prototype.cancelAddBlockFunc=function(t){t.node.setSiblingIndex(1e3);var e=t.node,o=e.convertToWorldSpaceAR(cc.v2(0,0)),n=this.blockArea.convertToNodeSpaceAR(o);e.removeFromParent(!1),e.x=n.x,e.y=n.y,this.blockArea.addChild(e);var a=this.nowLevelData.widthNum*this.minBlockNum;o=this.node.width/a,n=this.node.width/this.nowLevelData.widthNum,a=t.cardDataObj.rolNum*o+n/2,n/=this.blockMaxWidth,n*=this.scaleRate,o=-(t.cardDataObj.rowNum*o+n*this.blockMaxHeight/2),e.stopAllActions(),cc.tween(e).to(.15,{x:a,y:o,scale:n}).call(function(){t.isChoosed=!1,cc.game.emit(h.EMITKEY.HIDEMASKLAYER,2)},this).start(),e.getComponent(p.default).updateBlockNodeData(t.cardDataObj,this.removeCardNode.bind(this),this.refreshIndex.bind(this)),this.addBlockDataObj(e,t.cardDataObj),this.refreshMask(),this.refreshIndex()},m.prototype.addBlockDataObj=function(t,e){this.nowLevelBlockObj[e.layerNum]?this.nowLevelBlockObj[e.layerNum][e.rowNum]||(this.nowLevelBlockObj[e.layerNum][e.rowNum]={}):(this.nowLevelBlockObj[e.layerNum]={},this.nowLevelBlockObj[e.layerNum][e.rowNum]={}),this.nowLevelBlockObj[e.layerNum][e.rowNum][e.rolNum]=t},s([i(cc.Prefab)],m.prototype,"blockPrefab",void 0),s([i(cc.Node)],m.prototype,"blockArea",void 0),s([i(cc.Node)],m.prototype,"crushAreaNode",void 0),s([i(cc.Node)],m.prototype,"gameTopNode",void 0),s([i(cc.Node)],m.prototype,"moveOutArea",void 0),s([i(cc.Prefab)],m.prototype,"cookieGetParticle",void 0),s([i(cc.Node)],m.prototype,"crushAreaArgs",void 0),a=s([a],m),r.default=a,cc._RF.pop()},{}],clothesPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"33fd5tSoKRCfKE6RQ1fb4nf","clothesPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("spine"),h=a("GameManager");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.titleBanner_1=null,t.lvLabel_1=null,t.titleLabel_1=null,t.titleBanner_2=null,t.titleLabel_2=null,t.titleBanner_3=null,t.lockNode=null,t.selectNode=null,t.catNode=null,t.clothId=0,t.clothData=null,t.isClicked=!1,t.catId=0,t.parentComp=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){this.node.on("touchend",this.dressCloth,this)},f.prototype.setClothNodeData=function(t,e,o,n){if(this.clothData=t,this.parentComp=e,u.default.getUserData(),this.isClicked=!1,this.titleBanner_1.active=!1,this.titleBanner_2.active=!1,this.titleBanner_3.active=!1,this.lockNode.active=!1,this.catNode.active=!1,this.selectNode.active=!1,this.clothId=t.clothesID,h.default.getInstance().collectionMark.catSkinNum==this.clothData.clothesID?(this.node.getChildByName("mark").active=!0,h.default.getInstance().collectionMark.catSkinNum=0):this.node.getChildByName("mark").active=!1,"level"==t.unlockType){var a=!1;for(i in n)if(this.clothData.clothesID==n[i].clothesID){a=!0;break}if(a)for(var i in n)this.clothData.clothesID==n[i].clothesID&&(this.titleBanner_1.active=!0,this.isClicked=!0,this.titleLabel_1.string=t.name,this.lvLabel_1.string="Lv"+n[i].clothRank,this.catNode.active=!0,this.selectNode.active=n[i].isWear,this.setCatSpine(o,n[i].clothRank),0==this.clothData.skin?this.lvLabel_1.node.active=!1:this.lvLabel_1.node.active=!0,2==this.clothData.skin&&n[i].clothRank<3&&(this.titleBanner_1.active=!1,this.titleBanner_2.active=!0,this.titleLabel_2.string="\u5b8c\u6210\u6311\u6218\u89e3\u9501"));else this.titleBanner_2.active=!1,this.titleLabel_2.string=t.unlockNum+"\u5173\u89e3\u9501",this.lockNode.active=!0,this.clothData.skin<1e4&&(this.catNode.active=!0,this.titleBanner_1.active=!1,this.lockNode.active=!1,1==this.clothData.skin?(this.titleBanner_3.active=!0,this.setCatSpine(o,1)):2==this.clothData.skin?(this.titleBanner_2.active=!0,this.titleLabel_2.string="\u5b8c\u6210\u6311\u6218\u89e3\u9501",this.setCatSpine(o,0)):this.setCatSpine(o,1))}else t.unlockType},f.prototype.setCatSpine=function(t,e){var o=this;this.catId=t,t="Model"+(this.catId<10?"0"+this.catId:this.catId+""),this.catNode.getComponent(d.default).loadNewSpine(t,function(){var t=o.clothId%1e3,n=t<10?"0"+t:t+"";o.clothData.skin<1e4&&o.catNode.getComponent(d.default).setNewSkin(n),t="Skin/"+n+"_"+e,console.log(n+" "+t),o.catNode.getComponent(d.default).play(t,0)})},f.prototype.dressCloth=function(){p.default.addClickAudio(),this.isClicked?(console.log("\u9009\u62e9\u8863\u670d\uff1a",this.clothId),this.parentComp.dressCloth(this.clothId)):console.log("\u4e0d\u80fd\u88ab\u70b9\u51fb")},s([i(cc.Node)],f.prototype,"titleBanner_1",void 0),s([i(cc.Label)],f.prototype,"lvLabel_1",void 0),s([i(cc.Label)],f.prototype,"titleLabel_1",void 0),s([i(cc.Node)],f.prototype,"titleBanner_2",void 0),s([i(cc.Label)],f.prototype,"titleLabel_2",void 0),s([i(cc.Node)],f.prototype,"titleBanner_3",void 0),s([i(cc.Node)],f.prototype,"lockNode",void 0),s([i(cc.Node)],f.prototype,"selectNode",void 0),s([i(cc.Node)],f.prototype,"catNode",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],collectPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"0d875oEXn5LZ7yyzkAjxqlu","collectPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("collectSubPrefab");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.content=null,t.collectSubPrefab=null,t.base_title_label=null,t.nodeData=null,t}c(d,l=cc.Component),d.prototype.start=function(){},d.prototype.setNodeData=function(t){var e;for(e in this.nodeData=t,t=this.nodeData.catArr.length,this.node.height=130+t/3*305,this.base_title_label.string="- "+this.nodeData.name+" -",this.nodeData.catArr){var o=cc.instantiate(this.collectSubPrefab);o.getComponent(u.default).setNodeData(this.nodeData.catArr[e],this),this.content.addChild(o)}},d.prototype.refreshNode=function(t){this.nodeData=t;var e,o=this.content.children;for(e in o)o[e].getComponent(u.default).setNodeData(this.nodeData.catArr[e],this)},s([p(cc.Node)],d.prototype,"content",void 0),s([p(cc.Prefab)],d.prototype,"collectSubPrefab",void 0),s([p(cc.Label)],d.prototype,"base_title_label",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],collectSubPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"57acahslq1PzajDPXaUCYWO","collectSubPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("spine"),d=a("dataTs"),h=a("GameManager");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.imgContent=null,t.tabLabel=null,t.imgTab=null,t.catNode=null,t.unlocking=null,t.imgLock=null,t.nodeData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){p.default.addbtnTouchEndScale(this.node,this.clickNodeAction.bind(this))},f.prototype.clickNodeAction=function(){p.default.addClickAudio()},f.prototype.setNodeData=function(t){var e=this;this.nodeData=t,this.tabLabel.string=this.nodeData.name;var o,n=d.default.getUserData().catClothesData["cat_"+e.nodeData.modelID],a=!1;for(o in n)if(this.nodeData.clothesID==n[o].clothesID){a=!0;break}if(d.default.getUserData().playLevelId,a?(this.imgContent.active=!0,this.imgLock.active=!1):(this.imgContent.active=!1,this.imgLock.active=!0),!(1e4<=this.nodeData.unlockNum)){0==this.nodeData.skin?this.tabLabel.getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX("#4482CE"):1==this.nodeData.skin?this.tabLabel.getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX("#A648D7"):2==this.nodeData.skin&&(this.tabLabel.getComponent(cc.LabelOutline).color=(new cc.Color).fromHEX("#D5A618"));var i="rewardIcon/Tab"+(t.skin+1)+".png";p.default.changeSpriteFrame(this.imgTab,i);var r=this.nodeData.clothesID%1e3;if(i="Model"+((i=this.nodeData.modelID)<10?"0"+i:i+""),!n)return e.imgContent.active=!1,void(e.imgLock.active=!0);this.catNode.getComponent(u.default).loadNewSpine(i,function(){var t=r<10?"0"+r:r+"";e.catNode.getComponent(u.default).setNewSkin(t);for(var o=0;o<n.length;o++){var a=n[o];if(a.clothesID==e.nodeData.clothesID){var i=e.nodeData.skin;i<1e4&&(a="Skin/"+(i<10?"0"+i:i+"")+"_"+a.clothRank,e.catNode.getComponent(u.default).play(a,0));break}}}),h.default.getInstance().collectionMark.catNum==t.clothesID?(this.imgContent.getChildByName("mark").active=!0,h.default.getInstance().collectionMark.catNum=0):this.imgContent.getChildByName("mark").active=!1}},s([i(cc.Node)],f.prototype,"imgContent",void 0),s([i(cc.Label)],f.prototype,"tabLabel",void 0),s([i(cc.Node)],f.prototype,"imgTab",void 0),s([i(cc.Node)],f.prototype,"catNode",void 0),s([i(cc.Node)],f.prototype,"unlocking",void 0),s([i(cc.Node)],f.prototype,"imgLock",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],collectSv:[function(t,e,o){"use strict";cc._RF.push(e,"f3673ZyHCpFtbKp/M6ZObGH","collectSv");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("dataTs"),d=a("collectPrefab");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.content=null,t.collectPrefab=null,t.collectData=null,t.dataArray=[],t}c(h,l=cc.Component),h.prototype.start=function(){this.parserData(),this.content.removeAllChildren();for(var t=0;t<this.dataArray.length;t++){var e=cc.instantiate(this.collectPrefab);e.getComponent(d.default).setNodeData(this.dataArray[t],this),this.content.addChild(e)}},h.prototype.onEnable=function(){0<this.dataArray.length&&this.refreshSubNode()},h.prototype.refreshSubNode=function(){this.parserData();var t,e=this.content.children;for(t in e)e[t].getComponent(d.default).refreshNode(this.dataArray[t],this)},h.prototype.parserData=function(){var t,e=[];for(t in this.collectData=u.default.gameConfigData.baseConfigData.catClothesData,this.collectData)for(var o in this.collectData[t])this.collectData[t][o].modelID<1e4&&e.push(this.collectData[t][o]);for(var n=0,a=0;a<e.length;a++)(c=e[a].roomID)>n&&(n=c);for(a=0;a<=n;a++)this.dataArray[a]={name:"",catArr:[]};for(var i=[],r=0;r<e.length;r++){var c=e[r].roomID;this.dataArray[c-1].name="\u623f\u95f4"+c,this.dataArray[c-1].catArr.push(e[r])}for(i=[],a=0;a<3;a++)i.push({name:"\u683c\u683c",clothesID:7e3,unlockType:"level",unlockNum:1e4,skin:1});this.dataArray[this.dataArray.length-1].name="\u656c\u8bf7\u671f\u5f85",this.dataArray[this.dataArray.length-1].catArr=i,console.log(this.dataArray.length)},s([p(cc.Node)],h.prototype,"content",void 0),s([p(cc.Prefab)],h.prototype,"collectPrefab",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],config:[function(t,e,o){"use strict";cc._RF.push(e,"09960YHWTBJybJ2atehqivt","config");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.default={blockTypeConfig:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],mapType:{6:{width:6,height:7},7:{width:7,height:9},8:{width:8,height:10},9:{width:9,height:11},10:{width:10,height:12}},baseMapObj:{widthNum:8,heightNum:10,levelKey:1,blockTypeData:{},levelData:{1:[]}}},cc._RF.pop()},{}],cookiePrefab:[function(t,e,o){"use strict";cc._RF.push(e,"30474i2SThKzpM59arL/dte","cookiePrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.cookieTrailing=null,t.imageNode=null,t.labelNode=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){},u.prototype.showData=function(t,e){void 0===e&&(e=0),0==(t=void 0===t?0:t)?(this.imageNode.angle=0,this.labelNode.active=!1,this.cookieTrailing.active=!1,p.default.changeSpriteFrame(this.imageNode,"block/cookie/cookie_icon_fly.png")):1==t?(this.imageNode.angle=-12,this.labelNode.active=!0,this.labelNode.getComponent(cc.Label).string="x"+e,this.cookieTrailing.active=!1,p.default.changeSpriteFrame(this.imageNode,"block/cookie/cookie_icon_fly.png")):2==t&&(this.imageNode.angle=0,this.labelNode.active=!1,this.cookieTrailing.active=!1,p.default.changeSpriteFrame(this.imageNode,"rewardIcon/base_icon_ribbon.png"))},s([i(cc.Node)],u.prototype,"cookieTrailing",void 0),s([i(cc.Node)],u.prototype,"imageNode",void 0),s([i(cc.Node)],u.prototype,"labelNode",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],cookieRewardNode:[function(t,e,o){"use strict";cc._RF.push(e,"69fe22S909JKoELNPl5QSbH","cookieRewardNode");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.imageNode=null,t.labelNode=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){},u.prototype.showData=function(t){var e="rewardIcon/"+t.rewardType+".png",o=0;this.imageNode.y=0,"reward_fish"==t.rewardType?o=0:"prop_random"==t.rewardType?(o=60,this.imageNode.y=5):"prop_remove"==t.rewardType&&(e="rewardIcon/prop_remove.png",o=0,this.imageNode.y=15),this.imageNode.angle=o,p.default.changeSpriteFrame(this.imageNode,e),this.labelNode.getComponent(cc.Label).string=t.rewardCount+""},s([i(cc.Node)],u.prototype,"imageNode",void 0),s([i(cc.Node)],u.prototype,"labelNode",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],crushArea:[function(t,e,o){"use strict";cc._RF.push(e,"aa009UiZ8pDtasKgVM+bH6Y","crushArea");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("enumConfig"),u=a("audio"),d=a("util"),h=a("GameManager"),f=a("chessboard"),g=a("moveOutArea");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.gametopUI=null,t.moveOutArea=null,t.chessboardNode=null,t.particlePrefab=null,t.rewardEmitter=null,t.rewardEmitterNode=null,t.ribbonBoxPrefab=null,t.ribbonBox=null,t.crushAreaArgs=null,t.dailySF=null,t.topicSF=null,t.crushArray=[],t.blockMaxWidth=120,t.newScale=.8,t.moveSpeed=2e3,t.cancelArray=[],t.failNumber=7,t.gameOverStatus=!1,t.particleNode1=null,t.particleNode2=null,t.particleNode3=null,t.parentComp=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(y,l=cc.Component),y.prototype.onLoad=function(){},y.prototype.start=function(){},y.prototype.initCrushArea=function(t){this.node.removeAllChildren(),this.parentComp=t,this.particleNode1=null,this.particleNode2=null,this.particleNode3=null,this.rewardEmitterNode=null,this.ribbonBox=null,this.crushArray=[],this.cancelArray=[],this.gameOverStatus=!1,this.node.opacity=0,cc.tween(this.node).to(.4,{opacity:255}).start(),h.default.getInstance().gameType==p.GAMETYPE.GAMETOPIC?(this.getComponent(cc.Sprite).spriteFrame=this.topicSF,this.crushAreaArgs&&(this.crushAreaArgs.active=!1)):(this.getComponent(cc.Sprite).spriteFrame=this.dailySF,this.crushAreaArgs&&(this.crushAreaArgs.active=!0))},y.prototype.hideCrushArea=function(){cc.tween(this.node).to(.4,{opacity:0}).start()},y.prototype.addCrushAreaCardNode=function(t){var e=t.node.convertToWorldSpaceAR(cc.v2(0,0));e=this.node.convertToNodeSpaceAR(e),t.node.removeFromParent(!1),t.node.x=e.x,t.node.y=e.y,t.isChoosed=!0,this.node.addChild(t.node),this.addNewBlockNode(t),7<=this.getCrushBlockNum()&&cc.game.emit(p.EMITKEY.SHOWMASKLAYER,5)},y.prototype.getCrushBlockNum=function(){for(var t=this.crushArray.length,e=0;e<this.crushArray.length-2;e++){var o=this.crushArray[e+2].cardDataObj.type,n=(this.crushArray[e+2].node,this.crushArray[e+1].cardDataObj.type),a=(this.crushArray[e+1].node,this.crushArray[e].cardDataObj.type);this.crushArray[e].node,o==a&&n==a&&(t-=3)}return t},y.prototype.addNewBlockNode=function(t){t.isReady=!1;var e=this.getNewPosit(t);this.crushArray.splice(e,0,t),this.cancelArray.push(t),e=t.cardDataObj.layerNum+"-"+t.cardDataObj.rolNum+"-"+t.cardDataObj.rowNum,t.blockID=e,this.updateNewPosition()},y.prototype.isCrushBlock=function(){for(var t=0;t<this.crushArray.length-2;t++){var e=this.crushArray[t+2].cardDataObj.type,o=this.crushArray[t+2].node,n=this.crushArray[t+1].cardDataObj.type,a=this.crushArray[t+1].node,i=this.crushArray[t].cardDataObj.type,r=this.crushArray[t].node;if(e==i&&n==i&&this.crushArray[t+2].isReady&&this.crushArray[t+1].isReady&&this.crushArray[t+0].isReady)return u.default.playAudioMusic("audio/sound/crush.mp3",!1),cc.tween(o).to(.1,{scale:0}).call(function(){this.crushArray.length<1&&this.parentComp.crushAnimateCallback(),this.particleNode1||(this.particleNode1=cc.instantiate(this.particlePrefab),this.node.addChild(this.particleNode1)),this.particleNode1.setSiblingIndex(100),this.particleNode1.position=o.position,this.particleNode1.getComponent(cc.ParticleSystem).resetSystem(),o.destroy()},this).start(),cc.tween(a).to(.1,{scale:0}).call(function(){this.particleNode2||(this.particleNode2=cc.instantiate(this.particlePrefab),this.node.addChild(this.particleNode2)),this.particleNode2.setSiblingIndex(100),this.particleNode2.position=a.position,this.particleNode2.getComponent(cc.ParticleSystem).resetSystem(),a.destroy()},this).start(),cc.tween(r).to(.1,{scale:0}).call(function(){this.particleNode3||(this.particleNode3=cc.instantiate(this.particlePrefab),this.node.addChild(this.particleNode3)),this.particleNode3.setSiblingIndex(100),this.particleNode3.position=r.position,this.particleNode3.getComponent(cc.ParticleSystem).resetSystem(),r.destroy()},this).start(),this.crushArray.splice(t,3),this.cancelArray=[],this.updateNewPosition(),!0}return!1},y.prototype.updateNewPosition=function(){for(var t,e=this,o=this,n=0;n<this.crushArray.length;n++)!function(){t=n*o.blockMaxWidth*o.newScale+o.blockMaxWidth*o.newScale/2,o.crushArray[n].node.stopAllActions();var a=o.crushArray[n],i=o.getMoveTime(a.node.position,{x:t,y:0});a.node.x==t&&0==a.node.y||cc.tween(a.node).to(i,{x:14+t,y:8,scale:o.newScale}).call(function(){if(a.isReady=!0,!e.isCrushBlock()&&e.crushArray.length>=e.failNumber){for(var t=!0,o=0;o<e.crushArray.length;o++)e.crushArray[o].isReady||(t=!1);t&&e.gameOverFunc()}},o).start()}()},y.prototype.gameOverFunc=function(){this.gameOverStatus||(this.gameOverStatus=!0,cc.game.emit(p.EMITKEY.HIDEMASKLAYER,10),this.parentComp.gameOverFunc())},y.prototype.rebornGameFunc=function(){this.gameOverStatus=!1,this.moveOutBlock()},y.prototype.getNewPosit=function(t){for(var e=this.crushArray.length-1;0<=e;e--)if(this.crushArray[e].cardDataObj.type==t.cardDataObj.type)return e+1;return this.crushArray.length},y.prototype.moveOutBlock=function(){if(this.crushArray.length<1)return!1;this.node.setSiblingIndex(10),this.crushAreaArgs&&this.crushAreaArgs.setSiblingIndex(10),this.moveOutArea.setSiblingIndex(9),cc.game.emit(p.EMITKEY.SHOWMASKLAYER,1),this.cancelArray=[];for(var t=[],e=0;e<this.crushArray.length&&!(this.crushArray[e].isReady&&(t.push(this.crushArray.splice(e,1)[0]),e--,3<=t.length));e++);return t.length<1&&cc.game.emit(p.EMITKEY.HIDEMASKLAYER,5),this.moveOutArea.getComponent(g.default).addThreeOutBlock(t),this.updateNewPosition(),!0},y.prototype.cancelOneStep=function(){if(0<this.cancelArray.length){cc.game.emit(p.EMITKEY.SHOWMASKLAYER,6);for(var t=this.cancelArray.pop(),e=0;e<this.crushArray.length;e++)this.crushArray[e].cardDataObj.layerNum==t.cardDataObj.layerNum&&this.crushArray[e].cardDataObj.rolNum==t.cardDataObj.rolNum&&this.crushArray[e].cardDataObj.rowNum==t.cardDataObj.rowNum&&this.crushArray.splice(e,1);return"moveOutArea"==t.comeParent&&(this.moveOutArea.getComponent(g.default).cancelAddBlockFunc(t),this.moveOutArea.setSiblingIndex(10)),"chessboard"==t.comeParent&&(this.chessboardNode.getComponent(f.default).cancelAddBlockFunc(t),this.chessboardNode.setSiblingIndex(10)),this.updateNewPosition(),!0}return!1},y.prototype.getMoveTime=function(t,e){return e=d.default.pointLength(t,e),Math.sqrt(e)/this.moveSpeed},s([i(cc.Node)],y.prototype,"gametopUI",void 0),s([i(cc.Node)],y.prototype,"moveOutArea",void 0),s([i(cc.Node)],y.prototype,"chessboardNode",void 0),s([i(cc.Prefab)],y.prototype,"particlePrefab",void 0),s([i(cc.Prefab)],y.prototype,"rewardEmitter",void 0),s([i(cc.Prefab)],y.prototype,"ribbonBoxPrefab",void 0),s([i(cc.Node)],y.prototype,"crushAreaArgs",void 0),s([i({type:cc.SpriteFrame,tooltip:"\u6bcf\u65e5\u6311\u6218"})],y.prototype,"dailySF",void 0),s([i({type:cc.SpriteFrame,tooltip:"\u8bdd\u9898"})],y.prototype,"topicSF",void 0),a=s([a],y),r.default=a,cc._RF.pop()},{}],"cubic-bezier-curve":[function(t,e,o){"use strict";cc._RF.push(e,"1d0f1p1wcNIAKRIU+Hz/9CF","cubic-bezier-curve");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.CubicBezierCurve=void 0;var i=n("curve-sample"),r=n("typed-event"),c=cc.Vec3,s=cc.Vec2;function l(t,e){this.samples=new Array,this.length=0,this.Changed=new r.TypedEvent,this.n1=t,this.n2=e,t.changed.on(this.computeSamples),e.changed.on(this.computeSamples),this.computeSamples()}Object.defineProperty(l.prototype,"Length",{get:function(){return this.length},enumerable:!1,configurable:!0}),l.prototype.ConnectStart=function(t){this.n1.changed.off(this.computeSamples),(this.n1=t).changed.on(this.computeSamples),this.computeSamples()},l.prototype.ConnectEnd=function(t){this.n2.changed.off(this.computeSamples),(this.n2=t).changed.on(this.computeSamples),this.computeSamples()},l.prototype.GetInverseDirection=function(){return c.scaleAndAdd(new c,c.negate(new c,this.n2.Direction),this.n2.Position,2)},l.prototype.GetLocation=function(t){var e=1-t,o=e*e,n=t*t,a=c.multiplyScalar(new c,this.n1.Position,o*e),i=c.multiplyScalar(new c,this.n1.Direction,3*o*t);return o=this.GetInverseDirection(),c.multiplyScalar(o,o,3*e*n),t=c.multiplyScalar(new c,this.n2.Position,n*t),c.add(a,a,i),c.add(a,a,o),c.add(a,a,t),a},l.prototype.GetTangent=function(t){var e=(a=1-t)*a,o=t*t,n=c.multiplyScalar(new c,this.n1.Position,-e),a=c.multiplyScalar(new c,this.n1.Direction,3*e-2*a);return t=c.multiplyScalar(new c,this.GetInverseDirection(),-3*o+2*t),o=c.multiplyScalar(new c,this.n2.Position,o),c.add(n,n,a),c.add(n,n,t),c.add(n,n,o),n.normalize()},l.prototype.GetUp=function(t){return c.lerp(new c,this.n1.Up,this.n2.Up,t)},l.prototype.GetScale=function(t){return s.lerp(new s,this.n1.Scale,this.n2.Scale,t)},l.prototype.GetRoll=function(){return console.assert(!1),0},l.prototype.recursiveSamples=function(t,e,o){var n,a,i;8<o||(n=.5*(e+t),a=this.GetTangent(t),i=this.GetTangent(e),c.angle(a,i)<=.1&&0!=o||(this.recursiveSamples(t,n,o+1),i=this.samples[this.samples.length-1].location,t=this.GetLocation(n),this.length+=c.distance(i,t),this.samples.push(this.createSample(this.Length,n,t)),this.recursiveSamples(n,e,o+1)))},l.prototype.computeSamples=function(){this.samples.length=0,this.length=0,this.samples.push(this.createSample(0,0)),this.recursiveSamples(0,1,0);var t=this.samples[this.samples.length-1].location,e=this.GetLocation(1);this.length+=c.distance(t,e),this.samples.push(this.createSample(this.Length,1))},l.prototype.createSample=function(t,e,o){return o=o||this.GetLocation(e),new i.CurveSample(o,this.GetTangent(e),this.GetUp(e),this.GetScale(e),t,e,this)},l.prototype.GetSample=function(t){if(t<0||1<t)throw new Error("Time must be between 0 and 1 (was "+t+").");for(var e=this.samples[0],o=null,n=!1,a=0,r=this.samples;a<r.length;a++){var c=r[a];if(c.timeInCurve>=t){o=c,n=!0;break}e=c}if(!n)throw new Error("Can't find curve samples.");var s=o===e?0:(t-e.timeInCurve)/(o.timeInCurve-e.timeInCurve);return i.CurveSample.Lerp(e,o,s)},l.prototype.GetSampleAtDistance=function(t){if(t<0||t>this.Length)throw new Error("Distance must be positive and less than curve length. Length = "+this.Length+", given distance was "+t+".");for(var e=this.samples[0],o=null,n=!1,a=0,r=this.samples;a<r.length;a++){var c=r[a];if(c.distanceInCurve>=t){o=c,n=!0;break}e=c}if(!n)throw new Error("Can't find curve sample.");var s=o===e?0:(t-e.distanceInCurve)/(o.distanceInCurve-e.distanceInCurve);return i.CurveSample.Lerp(e,o,s)},l.prototype.GetProjectionSample=function(){return console.assert(!1,"Not implement"),null},n=l,a.CubicBezierCurve=n,cc._RF.pop()},{}],"curve-sample":[function(t,e,o){"use strict";cc._RF.push(e,"fcdcepeqV5GO5ejTxbhKhyO","curve-sample");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.CurveSample=void 0;var i=n("mesh-vertex"),r=cc.Quat,c=cc.Vec2,s=cc.Vec3,l=n("export-helper"),p=cc.misc;function u(t,e,o,n,a,i,c){this.location=t,this.tangent=e,this.up=o,this.scale=n,this.distanceInCurve=a,this.timeInCurve=i,this.curve=c,this.rotation=new r}Object.defineProperty(u.prototype,"Rotation",{get:function(){var t=Object.freeze(new r);return this.rotation===t&&(t=this.up,this.rotation=new r,r.fromViewUp(this.rotation,this.tangent,t)),this.rotation},enumerable:!1,configurable:!0}),u.prototype.equals=function(t){return this.location.equals(t.location)&&this.tangent.equals(t.tangent)&&this.up.equals(t.up)&&this.scale.equals(t.scale)&&l.math.equals(this.distanceInCurve,t.distanceInCurve)&&l.math.equals(this.timeInCurve,t.timeInCurve)},u.Lerp=function(t,e,o){var n=new s;s.lerp(n,t.location,e.location,o);var a=new s;s.lerp(a,t.tangent,e.tangent,o).normalize();var i=new s;s.lerp(i,t.up,e.up,o);var r=new c;return c.lerp(r,t.scale,e.scale,o),new u(n,a,i,r,p.lerp(t.distanceInCurve,e.distanceInCurve,o),p.lerp(t.timeInCurve,e.timeInCurve,o),t.curve)},u.prototype.getBent=function(t){var e=new i.MeshVertex(t.position,t.normal,t.uv),o=new s(0,e.position.y*this.scale.y,e.position.z*this.scale.x);return o.x=0,t=r.fromEuler(new r,0,p.degreesToRadians(-90),0),t=r.multiply(new r,this.Rotation,t),s.transformQuat(o,o,t),s.add(o,o,this.location),e},n=u,a.CurveSample=n,cc._RF.pop()},{}],"daily-challenge":[function(t,e,o){"use strict";cc._RF.push(e,"d96aesUCApI06hXg7ZujIsy","daily-challenge");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("CcJsFunc"),d=a("calendar-item"),h=a("enumConfig"),f=a("DateManager"),g=a("gameLayer"),y=a("dataTs"),m=a("gameUiLayer"),v=a("spine"),b=a("uma-sdk"),N=a("GameManager"),_=a("report-common"),w=a("i18n"),C=a("gd_language");function P(){var t=null!==l&&l.apply(this,arguments)||this;return t.gameLayer=null,t.mainLayer=null,t.baseContent=null,t.baseContentBg=null,t.scrollView=null,t.bottomMask=null,t.calendarItem=null,t.previousBtn=null,t.titleLabel=null,t.nextBtn=null,t.spineLevel1=null,t.spineLevel2=null,t.spineLevel3=null,t.progressBarOne=null,t.progressBarTwo=null,t.progressBarThree=null,t.catFootBegin=null,t.catFootThree=null,t.catFootTen=null,t.catFootThirty=null,t.content=null,t.bottomView=null,t.playBtn=null,t.playImg=null,t.playLabel=null,t.progressPoint=null,t.progressLabel=null,t.winLabel=null,t.userData=null,t.dataArray=[],t.curArray=[],t.year=null,t.month=null,t.day=null,t.catArr=[],t.clickTime=0,t.clickMiniTime=0,t.isNoWin=!1,t.beginButtonDuration=0,t}c(P,l=cc.Component),P.prototype.onEnable=function(){this.catArr=[],this.catArr.push(this.spineLevel1),this.catArr.push(this.spineLevel2),this.catArr.push(this.spineLevel3),this.setupData()},P.prototype.update=function(t){this.beginButtonDuration+=t},P.prototype.start=function(){u.default.addbtnTouchStartScale(this.playBtn),u.default.addbtnTouchEndScale(this.playBtn,this.playBtnTouchEnd.bind(this)),u.default.addbtnTouchCancelScale(this.playBtn),u.default.addbtnTouchStartScale(this.previousBtn),u.default.addbtnTouchEndScale(this.previousBtn,this.previousBtnTouchEnd.bind(this)),u.default.addbtnTouchCancelScale(this.previousBtn),u.default.addbtnTouchOriginStartScale(this.nextBtn),u.default.addbtnTouchOriginEndScale(this.nextBtn,this.nextBtnTouchEnd.bind(this)),u.default.addbtnTouchOriginCancelScale(this.nextBtn),this.clickTime=(new Date).getTime(),this.clickMiniTime=1e3,cc.winSize.height<1334&&(this.node.scale=.8)},P.prototype.setupData=function(){this.year=f.default.getInstance().selDate.getFullYear(),this.month=f.default.getInstance().selDate.getMonth()+1,this.initData()},P.prototype.playBtnTouchEnd=function(){if(this.beginButtonDuration<=1)console.log("\u4e0d\u80fd\u8fde\u7eed\u70b9\u51fb");else if(this.beginButtonDuration=0,!((e=f.default.format(h.CALENDARNAMES[4],f.default.getInstance().selDate).split("-")).length<3)){console.log(e[0]+"\u5e74"+e[1]+"\u6708"+e[2]+"\u65e5");var t=Number(e[2]),e=null;if(y.default.getUserData().playLevelId<=50){if(!(e=y.default.getGameConfigData().baseConfigData.dailyData.easyGame.simple))return void console.log("monthData sample\u914d\u7f6e\u8868\u65e0\u6570\u636e")}else{var o=f.default.format(h.CALENDARNAMES[5],f.default.getInstance().selDate);if(!(e=y.default.getGameConfigData().baseConfigData.dailyData.monthData[o]))return void console.log("monthData \u914d\u7f6e\u8868\u65e0\u6570\u636e")}console.log("monthData = "+JSON.stringify(e)),o=e.levelID+t-1,console.log("index = "+o+" day = "+t),0!=this.isNoWin?this.dailyBeginGame(e,o,t):cc.game.emit("showMainTips",w.default.instance.trans(C.GDLanguage.level_new_tomorrow))}},P.prototype.dailyBeginGame=function(t,e,o){console.log("levelID = "+e);var n=this;n.userData=y.default.getUserData(),console.log("\u7528\u6237\u6570\u636e:",n.userData),y.default.getLevelByNumber(e,function(e){console.log("\u5173\u5361\u6570\u636e:",e),n.gameLayer.activeInHierarchy?console.log("\u5df2\u7ecf\u6253\u5f00 mainLayer 2"):e.length<1?cc.game.emit("showMainTips",w.default.instance.trans(C.GDLanguage.level_inadequate)):y.default.isHaveLove()?f.default.getInstance().isOldDay(o)?console.log("\u770b\u89c6\u9891###"):n.gameLayer.activeInHierarchy?console.log("\u5df2\u7ecf\u6253\u5f00 mainLayer 2"):n.showGameAction(t,e,o):(console.log("\u7231\u5fc3\u4e0d\u8db3"),cc.game.emit("showMainTips",w.default.instance.trans(C.GDLanguage.life_inadequate)),cc.game.emit("showPop",{popName:"getLovePop",showPopData:{popCallbackCollect:null,getLoveTime:0}}))})},P.prototype.showGameAction=function(t,e,o){var n=this;cc.game.emit(h.EMITKEY.SHOWTRANSITLAYER,function(a){n.gameLayer.activeInHierarchy?console.log("\u5df2\u7ecf\u6253\u5f00 daily"):(console.log("\u53ef\u4ee5\u6253\u5f00\u4e86 daily"),n.gameLayer.getComponent(g.default).initLevelLayer(e),n.gameLayer.getChildByName("gameUiLayer").getComponent(m.default).setTimeByLevel(t,o),n.node.active=!1,a(),N.default.getInstance().tabbarIsDaily=!1)})},P.prototype.previousBtnTouchEnd=function(){this.changeMonth("last"),this.initData(this.year,this.month)},P.prototype.nextBtnTouchEnd=function(){this.changeMonth("next"),this.initData(this.year,this.month)},P.prototype.changeMonth=function(t){var e=f.default.getInstance().selDate,o=f.default.getInstance().cutType;switch(t){case"last":var n=f.default.lastDate(e,o);f.default.getInstance().selDate=f.default.cloneDate(n);break;case"next":n=f.default.nextDate(e,o),f.default.getInstance().selDate=f.default.cloneDate(n)}this.year=f.default.getInstance().selDate.getFullYear(),this.month=f.default.getInstance().selDate.getMonth()+1,this.day=f.default.getInstance().selDate.getDay(),this.initData(this.year,this.month),b.default.trackEvent("daily_month"),_.default.reportTACommon("daily_month",{}),_.default.reportTACommon("daily_click",{action:"\u5207\u6362\u6708\u4efd"})},P.prototype.initData=function(t,e){void 0===t&&(t=this.year),void 0===e&&(e=this.month),this.titleLabel.string="- "+u.default.getMonthShorthand(e-1)+"/"+t+" -",this.dataArray=[],this.content.removeAllChildren(),this.createLastMonth(t,e),this.createNowMonth(t,e),this.createNextMonth(t,e),cc.winSize.height,console.log(this.dataArray.length),N.default.getInstance().globalData.isFullScreen?(this.bottomMask.active=!1,e=(t=104*Math.ceil(this.dataArray.length/7))-416,this.scrollView.height=t,this.baseContent.height=980+e):this.bottomMask.active=!0,this.showLastSelDate(),this.updatePlayState(),this.updateSubUI(),this.showActionFunc()},P.prototype.showLastSelDate=function(){if(this.curArray.length){for(var t=0,e=this.curArray;t<e.length;t++)(r=e[t]).getComponent(d.default).show(h.CALENDARITEM.ITEMNOR);var o=null;this.isNoWin=!1;for(var n,a,i,r,c=this.curArray.length-1;0<=c&&(o=this.curArray[c],this.isNoWin=!o.getComponent(d.default).isWin(),!this.isNoWin);c--);this.isNoWin?(o.getComponent(d.default).show(h.CALENDARITEM.ITEMSELE),(i=o.getComponent(d.default).getNodeData())&&i.date&&((n=i.date.split("-")).length<3||(a=Number(n[0]),i=Number(n[1]),r=Number(n[2]),this.updatePlayBtn(i,r),f.default.getInstance().selDate=new Date(a,i-1,r)))):console.log("\u8bf7\u7b49\u5f85\u660e\u5929\u6e38\u73a9\u65b0\u5173\u5361######")}},P.prototype.showActionFunc=function(){var t=Number(y.default.getGameConfigData().baseConfigData.dailyData.originMonth);console.log("originMonthNum = "+t);var e=Number(f.default.format(h.CALENDARNAMES[5],f.default.getInstance().nowDate));console.log("nowMonthNum = "+e);var o=Number(f.default.format(h.CALENDARNAMES[5],f.default.getInstance().selDate));console.log("selMonthNum = "+o),this.previousBtn.active=!(o<=t),this.nextBtn.active=!(e<=o)},P.prototype.updatePlayState=function(){var t,e=f.default.format(h.CALENDARNAMES[3],f.default.getInstance().selDate).split("-");e.length<2||(t=Number(e[0]),e=Number(e[1]),this.updatePlayBtn(t,e))},P.prototype.updatePlayBtn=function(t,e){f.default.getInstance().isOldDay(e)?this.playImg.active=!0:this.playImg.active=!1,e="Play "+t+"/"+e,0==this.isNoWin&&(this.playImg.active=!(e="Tomorrow")),this.playLabel.getComponent(cc.Label).string=e},P.prototype.updateSubUI=function(){if(!((e=f.default.format(h.CALENDARNAMES[4],f.default.getInstance().selDate).split("-")).length<2)){var t=Number(e[0]),e=Number(e[1]);(t=new Date(t,e,0).getDate())<=0&&(t=30);var o=y.default.getUserData().dailyData,n=f.default.format(h.CALENDARNAMES[5],f.default.getInstance().selDate);if(e=y.default.getGameConfigData().baseConfigData.dailyData.monthData[n]){if(console.log("monthData = "+JSON.stringify(e)),o&&(o[n]||(console.log("dailyData[monthKey] \u4e3a\u7a7a\uff0c\u521d\u59cb\u5316\u6570\u636e##### "),o[n]={},(a=y.default.getUserData()).dailyData=o,y.default.saveUserData(a))),console.log("dailyData ##### ",JSON.stringify(o),n),o&&o[n]){var a,i,r,c=0;for(r in o[n])o[n][r]&&o[n][r].isWin&&c++;for(r in this.catFootThree.active=!1,this.catFootTen.active=!1,this.catFootThirty.active=!1,this.progressBarOne.progress=0,this.progressBarTwo.progress=0,this.progressBarThree.progress=0,this.progressPoint.active=!0,0<c?(c<=3?(this.catFootThree.active=!(c<3),this.progressBarOne.progress=c/3,this.progressPoint.x=166/3*c-250):c<=10?(this.catFootThree.active=!0,this.catFootTen.active=!(3<c&&c<10),this.progressBarOne.progress=1,this.progressBarTwo.progress=(c-3)/7,this.progressPoint.x=16.6*(c-3)-250+192.5):(this.catFootThree.active=!0,this.catFootTen.active=!0,this.catFootThirty.active=!(20<c&&c<t),this.progressBarOne.progress=1,this.progressBarTwo.progress=1,this.progressBarThree.progress=(c-10)/(t-10),this.progressPoint.x=166/t*(c-10)-250+358.5),3!=c&&10!=c&&c!=t||(this.progressPoint.active=!1,!N.default.getInstance().dailyDict.receiveBox)||(N.default.getInstance().dailyDict.receiveBox=!1,a=y.default.getUserData(),i=1,3==c?(i=1,a.prop_random+=3):10==c?(i=2,a.prop_cancel+=3):a.prop_remove+=3,y.default.saveUserData(a),this.scheduleOnce(function(){var t={popName:"showDailyPop",showPopData:{popName:"daily",popType:i,popCallbackCollect:null}};cc.game.emit("showPop",t)},1.5))):this.progressPoint.x=-250,this.progressLabel.string=""+c,this.winLabel.string="WIN "+t,console.log("monthKey = "+n+" index = "+c),this.spineLevel1.getComponent(v.default).play("4Daily_Open1_1",0),this.spineLevel2.getComponent(v.default).play("4Daily_Open2_1",0),this.spineLevel3.getComponent(v.default).play("4Daily_Open3_1",0),this.catArr){var s=this.catArr[r];s.parent.getChildByName("bg-gray").active=!0,s.parent.getChildByName("bg-green").active=!1}3<=c&&(this.catArr[0].parent.getChildByName("bg-gray").active=!1,this.catArr[0].parent.getChildByName("bg-green").active=!0),10<=c&&(this.catArr[1].parent.getChildByName("bg-gray").active=!1,this.catArr[1].parent.getChildByName("bg-green").active=!0),t<=c&&(this.catArr[2].parent.getChildByName("bg-gray").active=!1,this.catArr[2].parent.getChildByName("bg-green").active=!0)}}else console.log("monthData \u914d\u7f6e\u8868\u65e0\u6570\u636e")}},P.prototype.createLastMonth=function(t,e,o,n){void 0===o&&(o=!0),void 0===n&&(n=255),--e;var a=(o=new Date(t,e,0)).getDate();if((o=o.getDay())<7)for(var i=o;0<i;i--){var r=cc.instantiate(this.calendarItem);r.parent=this.content,r.opacity=n,this.dataArray.push(r);var c={day:c=a-i,type:h.CALENDARITEM.ITEMLAST,date:t+"-"+(e<10?"0"+e:e)+"-"+(c<10?"0"+c:c)};r.getComponent(d.default).setNodeData(c,this)}},P.prototype.createNowMonth=function(t,e,o,n){void 0===o&&(o=!0),void 0===n&&(n=255);var a=new Date(t,e,0).getDate();f.default.getInstance().isNowMonth(e-1),this.curArray=[];for(var i=this,r=1;r<a+1;r++)!function(a){var r=cc.instantiate(i.calendarItem);r.parent=i.content,r.opacity=n,i.dataArray.push(r);var c=!1,s=h.CALENDARITEM.ITEMFUTURE;f.default.getInstance().isNowDay(a)?(i.curArray.push(r),c=!0,s=h.CALENDARITEM.ITEMNOW):f.default.getInstance().isOldDay(a)?(i.curArray.push(r),c=!0,s=h.CALENDARITEM.ITEMOLD):f.default.getInstance().isFutureDay(a)&&(s=h.CALENDARITEM.ITEMFUTURE);var l=t+"-"+(e<10?"0"+e:e)+"-"+(a<10?"0"+a:a);s={day:a,type:s,date:l},r.getComponent(d.default).setNodeData(s,i),o&&c&&r.on(cc.Node.EventType.TOUCH_END,function(){var o=l.split("-");if(console.log(o),3<=o.length){var n=""+o[0]+o[1],i=""+o[0]+o[1]+o[2];if((o=y.default.getUserData().dailyData)&&o[n]&&o[n][i]&&o[n][i].isWin)return void console.log("\u672c\u5173\u5df2\u5b8c\u6210")}b.default.trackEvent("daily_date",{otherDate:l}),_.default.reportTACommon("daily_date",{}),_.default.reportTACommon("daily_click",{action:"\u5207\u6362\u65e5\u671f"});for(var c=0,s=this.curArray;c<s.length;c++)s[c].getComponent(d.default).show(h.CALENDARITEM.ITEMNOR);r.getComponent(d.default).show(h.CALENDARITEM.ITEMSELE),f.default.getInstance().selDate=new Date(t,e-1,a),this.updatePlayState()},i)}(r)},P.prototype.createNextMonth=function(t,e,o,n){void 0===o&&(o=!0),void 0===n&&(n=255);var a=new Date(t,e,1).getDay();if(e+=1,1!=a){0==a&&(a=7);for(var i=1;i<9-a;i++){var r=cc.instantiate(this.calendarItem);r.parent=this.content,r.opacity=n,this.dataArray.push(r);var c={day:i,type:h.CALENDARITEM.ITEMNEXT,date:t+"-"+(e<10?"0"+e:e)+"-"+(i<10?"0"+i:i)};r.getComponent(d.default).setNodeData(c,this)}}},s([p(cc.Node)],P.prototype,"gameLayer",void 0),s([p(cc.Node)],P.prototype,"mainLayer",void 0),s([p(cc.Node)],P.prototype,"baseContent",void 0),s([p(cc.Node)],P.prototype,"baseContentBg",void 0),s([p(cc.Node)],P.prototype,"scrollView",void 0),s([p(cc.Node)],P.prototype,"bottomMask",void 0),s([p(cc.Prefab)],P.prototype,"calendarItem",void 0),s([p(cc.Node)],P.prototype,"previousBtn",void 0),s([p(cc.Label)],P.prototype,"titleLabel",void 0),s([p(cc.Node)],P.prototype,"nextBtn",void 0),s([p(cc.Node)],P.prototype,"spineLevel1",void 0),s([p(cc.Node)],P.prototype,"spineLevel2",void 0),s([p(cc.Node)],P.prototype,"spineLevel3",void 0),s([p(cc.ProgressBar)],P.prototype,"progressBarOne",void 0),s([p(cc.ProgressBar)],P.prototype,"progressBarTwo",void 0),s([p(cc.ProgressBar)],P.prototype,"progressBarThree",void 0),s([p(cc.Node)],P.prototype,"catFootBegin",void 0),s([p(cc.Node)],P.prototype,"catFootThree",void 0),s([p(cc.Node)],P.prototype,"catFootTen",void 0),s([p(cc.Node)],P.prototype,"catFootThirty",void 0),s([p(cc.Node)],P.prototype,"content",void 0),s([p(cc.Node)],P.prototype,"bottomView",void 0),s([p(cc.Node)],P.prototype,"playBtn",void 0),s([p(cc.Node)],P.prototype,"playImg",void 0),s([p(cc.Node)],P.prototype,"playLabel",void 0),s([p(cc.Node)],P.prototype,"progressPoint",void 0),s([p(cc.Label)],P.prototype,"progressLabel",void 0),s([p(cc.Label)],P.prototype,"winLabel",void 0),i=s([i],P),r.default=i,cc._RF.pop()},{}],"data-env":[function(t,e,o){"use strict";cc._RF.push(e,"2af60/iE7lNdKoauwbjspyW","data-env");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.getLocalEnvConfig=a.getEnvConfig=void 0;var i=(n=n("data-type")).ENV.onlineWx,r={local:{evn:n.ENV.local,host:"http://192.168.31.86:8080",reportPrefix:"local_"},beta:{evn:n.ENV.beta,host:"http://192.144.195.86",reportPrefix:"beta_"},online:{evn:n.ENV.online,host:"https://cat-match.easygame2021.com",reportPrefix:"sheep_"},onlineWx:{evn:n.ENV.onlineWx,host:"https://cat-match.easygame2021.com",reportPrefix:"sheep_wx_"},leiTing:{evn:n.ENV.leiTing,host:"http://maowgameos1.leiting.com:8080",reportPrefix:""},onlineOppo:{evn:n.ENV.onlineOppo,host:"https://cat-match.easygame2021.com",reportPrefix:"sheep_oppo_"},onlineVivo:{evn:n.ENV.onlineVivo,host:"https://cat-match.easygame2021.com",reportPrefix:"sheep_vivo_"}};a.getEnvConfig=function(){return r[i]},a.getLocalEnvConfig=function(t){return r[t]},cc._RF.pop()},{}],"data-manager":[function(t,e,o){"use strict";cc._RF.push(e,"ce18c9/oWBJEKOpZDT7wYKF","data-manager");var n,a=t,i=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},i=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0});var c,s=a("dataTs"),l=a("enumConfig"),p=a("DateManager"),u=a("GameManager");function d(){return null!==c&&c.apply(this,arguments)||this}i(d,c=cc.Component),d.getTopicAnimation=function(t,e,o){var n="The01A";return e?1==t?n="The01A":2==t?n="The02A":3==t?n="The03A":4==t?n="The04A":5==t?n="The05A":6==t?n="The06A":7==t&&(n="The07A"):o&&(1==t?n="The01B":2==t?n="The02B":3==t?n="The03B":4==t?n="The04B":5==t?n="The05B":6==t?n="The06B":7==t&&(n="The07B")),{spName:"sheep/ThemeSheeps",skin:n}},d.getJudgeAnimation=function(t,e,o){var n="1Dead1_1";return e?n="1Dead"+t+"_1":o&&(n="1Dead"+t+"_2"),{spName:"sheep/Theme",anim:n}},d.getDeadNum=function(t){var e=1;return(e=11<(e=t<10?1:t<20?2:t<60?3:t<100?4:t<2140?5:t<3800?6:t<5260?7:t<8e3?8:t<15e3?9:t<2e4?10:11)?11:e)<=0?1:e},d.isUpgradeNum=function(t){return console.log("fail = "+t),10==t||20==t||60==t||100==t||140==t||180==t||260==t||340==t||500==t||800==t},d.todayIsWin=function(){if(3<=(t=p.default.format(l.CALENDARNAMES[7],p.default.getInstance().nowDate).split("-")).length){var t,e=""+t[0]+t[1],o=""+t[0]+t[1]+t[2];if((t=s.default.getUserData().dailyData)&&t[e]&&t[e][o]&&t[e][o].isWin)return 1;if(t&&t[e]&&t[e][o]&&!t[e][o].isWin)return 0}return-1},d.checkExpireData=function(t){-1==d.todayIsWin()&&(s.default.removeItem(t),console.log("\u672c\u5730\u7f13\u5b58\u8fc7\u671f\u6570\u636e ###### cacheName = ",t)),s.default.isPlatform(s.GDPlatform.web)&&s.default.removeItem(t)},d.getTAUserInfo=function(){d.checkExpireData(l.STORAGEKEY.TAUSERINFO);var t=u.default.getInstance().reportProperty,e=t.challenge_count,o=t.cancel_use+t.random_use+t.remove_use,n=t.resurrection_ad_frequency,a=t.resurrection_ad_frequency+t.cancel_ad+t.random_ad+t.remove_ad,i=0;return 0<u.default.blacksInfo.blockAllCount&&(i=u.default.blacksInfo.blockCurCount/u.default.blacksInfo.blockAllCount),(t=(t=s.default.getItem(l.STORAGEKEY.TAUSERINFO))||{change_num:0,prop_num:0,resurgence_num:0,ad_num:0,block_ratio:i}).change_num+=e,t.prop_num+=o,t.resurgence_num+=n,t.ad_num+=a,t.block_ratio=i.toFixed(2),s.default.setItem(l.STORAGEKEY.TAUSERINFO,t),t=t||{},i="\u6bcf\u65e5\u6311\u6218",u.default.getInstance().gameType==l.GAMETYPE.GAMEDAILY?i="\u6bcf\u65e5\u6311\u6218":u.default.getInstance().gameType==l.GAMETYPE.GAMETOPIC&&(i="\u8bdd\u9898\u6311\u6218"),t.game_type=i,t},d.getGameLevelData=function(){var t=this.gameLevelCacheName();return d.checkExpireData(t),s.default.getItem(t)},d.setGameLevelData=function(t){var e=this.gameLevelCacheName();s.default.setItem(e,t,30*this.cacheTime)},d.gameLevelCacheName=function(){return u.default.getInstance().gameType!=l.GAMETYPE.GAMELEVEL&&u.default.getInstance().gameType!=l.GAMETYPE.GAMEDAILY&&u.default.getInstance().gameType==l.GAMETYPE.GAMETOPIC?l.STORAGEKEY.GAMETOPICLEVELDATA:l.STORAGEKEY.GAMEDAILYLEVELDATA},d.getRankData=function(){return d.checkExpireData(l.STORAGEKEY.RANKDATA),s.default.getItem(l.STORAGEKEY.RANKDATA)},d.setRankData=function(t){s.default.setItem(l.STORAGEKEY.RANKDATA,t,10*this.cacheTime)},d.getBulletData=function(){return d.checkExpireData(l.STORAGEKEY.BULLETDATA),s.default.getItem(l.STORAGEKEY.BULLETDATA)},d.setBulletData=function(t){s.default.setItem(l.STORAGEKEY.BULLETDATA,t,60*this.cacheTime)},d.getStageData=function(){return d.checkExpireData(l.STORAGEKEY.STAGEDATA),s.default.getItem(l.STORAGEKEY.STAGEDATA)},d.setStageData=function(t){s.default.setItem(l.STORAGEKEY.STAGEDATA,t,30*this.cacheTime)},d.getMatchResultData=function(){var t=s.default.getItem(l.STORAGEKEY.TOPICMATCHRECORD);return t&&t[p.default.format(l.CALENDARNAMES[7],p.default.getInstance().nowDate)]?(console.log("\u4eca\u65e5\u5df2\u8c03\u7528\u8d5b\u51b5\u63a5\u53e3 ###### "),!0):(console.log("\u4eca\u65e5\u672a\u8c03\u7528\u8d5b\u51b5\u63a5\u53e3 ###### "),!1)},d.setMatchResultData=function(){var t=p.default.format(l.CALENDARNAMES[7],p.default.getInstance().nowDate),e=s.default.getItem(l.STORAGEKEY.TOPICMATCHRECORD);(e=e||{})[t]=!0,s.default.setItem(l.STORAGEKEY.TOPICMATCHRECORD,e)},d.getPropData=function(){var t=s.default.getItem(l.STORAGEKEY.PROPGAMEDATA);return t&&p.default.format(l.CALENDARNAMES[7],p.default.getInstance().nowDate)==t.time?t:this.defaultPropData()},d.setPropData=function(t){return t=t||this.defaultPropData(),s.default.setItem(l.STORAGEKEY.PROPGAMEDATA,t),t},d.defaultPropData=function(){return{time:p.default.format(l.CALENDARNAMES[7],p.default.getInstance().nowDate),daily:{prop_remove:2,prop_cancel:2,prop_random:2},topic:{prop_remove:2,prop_cancel:2,prop_random:2}}},d.user={uid:0,levelNum:0,openId:"",zoneId:1,unionId:"",gender:0,token:"",avatar:"",nickName:"",agreement:!1,deviceId:"",note:"",like_count:0,skinName:"",skinId:101,inviteCode:"",serverName:"",serverId:"",channel:"",userId:""},d.rankUserInfo=null,d.region=null,d.cacheTime=60,d.topicModel=null,d.topicRankInfo=null,d.bulletsWin=[{content:"\u7ec8\u4e8e\u6392\u4e0a\u4e86",mid:1,type:0},{content:"\u8f7b\u677e\u901a\u8fc7~",mid:2,type:0},{content:"\u4eca\u5929\u592a\u7b80\u5355",mid:3,type:0},{content:"\u7f8a\u4e86\u4e2a\u7f8a",mid:4,type:0},{content:"\u96c4\u8d77\uff01",mid:5,type:1},{content:"\u52a0\u6cb9\uff01",mid:6,type:1},{content:"yyds",mid:7,type:1},{content:"666",mid:8,type:1},{content:"\u51b2\u9e2d",mid:9,type:1},{content:"\u51b2\u51b2\u51b2",mid:10,type:1},{content:"\u5389\u5bb3\u4e86",mid:11,type:1}],d.bulletsFail=[{content:"\u96c4\u8d77\uff01",mid:12,type:1},{content:"\u52a0\u6cb9\uff01",mid:13,type:1},{content:"yyds",mid:14,type:1},{content:"666",mid:15,type:1},{content:"\u51b2\u9e2d",mid:16,type:1},{content:"\u51b2\u51b2\u51b2",mid:17,type:1},{content:"\u5389\u5bb3\u4e86",mid:18,type:1},{content:"\u8fc7\u4e0d\u53bb\u554a\uff01",mid:19,type:0},{content:"\u4eca\u5929\u592a\u96be\u4e86",mid:20,type:0},{content:"\u96be\u54ed\u4e86",mid:21,type:0},{content:"\u8bd5\u4e86 {0} \u6b21\u4e86",mid:22,type:2}],i=d,r.default=i,cc._RF.pop()},{}],"data-type":[function(t,e,o){"use strict";cc._RF.push(e,"8cbe9Sgf2lHObO7pL4MBQTS","data-type");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.ENV=void 0,(n=n.ENV||(n.ENV={})).local="local",n.beta="beta",n.online="online",n.onlineWx="onlineWx",n.leiTing="leiTing",n.onlineOppo="onlineOppo",n.onlineVivo="onlineVivo",cc._RF.pop()},{}],dataModel:[function(t,e,o){"use strict";cc._RF.push(e,"f787b1iWeJMv6XB6Y+Z4lEb","dataModel");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],dataTs:[function(t,e,o){"use strict";cc._RF.push(e,"2b52b5mP0hOv4ijR3rDmmai","dataTs");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.GDPlatform=void 0;var i,r=n("GameManager"),c=n("report-common"),s=n("CcJsFunc"),l=n("enumConfig"),p=n("native-bridge"),u=n("native-def"),d=n("sdk");function h(){}(n=i=a.GDPlatform||(a.GDPlatform={}))[n.android=0]="android",n[n.ios=1]="ios",n[n.wx=2]="wx",n[n.tt=3]="tt",n[n.web=4]="web",n[n.oppo=5]="oppo",n[n.vivo=6]="vivo",h.GetVedioID=function(){return d.default.isPlatform(d.Platform.wx)?this.WXVedioID:d.default.isPlatform(d.Platform.tt)?this.TTVedioID:d.default.isPlatform(d.Platform.android)?this.AndroidVedioID:d.default.isPlatform(d.Platform.oppo)?this.OppoVedioID:d.default.isPlatform(d.Platform.vivo)?this.VivoVedioID:""},h.getGameConfigData=function(){return this.gameConfigData},h.initData=function(t){var e,o,n=this,a=this;cc.sys.localStorage.getItem(this.localKeyName)?o=this.getUserData():(this.registerUserData(),e=this.getUserData().userID,p.default.callNative(u.NativeFun.publicParamsInfo,{userId:e}),c.default.reportTACommon("register",{}),p.default.deviceInfo&&(console.log("AF af_register\u6253\u70b9"),o=h.getUserData(),e={androidid:p.default.deviceInfo.androidId,chennal:"310001",gameCode:"59",userId:o.userID,type:3},p.default.leitingReport("af_register",e),console.log("AF af_character\u6253\u70b9"),o={androidid:p.default.deviceInfo.androidId,chennal:"310001",gameCode:"59",userId:o.userID,type:3,roleId:p.default.deviceInfo.gaid,serviceName:"\u6d77\u5916\u6d4b\u8bd5\u670d",serviceId:"1"},p.default.leitingReport("af_character",o)));var i=2;this.loadJsonData("data/levelConfigData",function(e){n.gameConfigData.levelConfigData=e,0==--i&&(t(),a.adaptCacheData())}),this.loadJsonData("data/baseConfigData",function(e){n.gameConfigData.baseConfigData=e,0==--i&&(t(),a.adaptCacheData())})},h.registerUserData=function(){var t;cc.sys.localStorage.getItem(this.localKeyName)||(this.gameUserLocalData=this.registerData,d.default.isPlatform(d.Platform.android)?p.default.loginInfo&&p.default.loginInfo.userId?this.gameUserLocalData.userData.userID=p.default.loginInfo.userId:this.gameUserLocalData.userData.userID=s.default.randomCharNum():d.default.isPlatform(d.Platform.tt)||d.default.isPlatform(d.Platform.wx)?this.gameUserLocalData.userData.userID="":d.default.isPlatform(d.Platform.web)?(this.gameUserLocalData.userData.userID="100001",this.gameUserLocalData.userData.token="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2OTAwMjA0MDIsIm5iZiI6MTY1ODkxODIwMiwiaWF0IjoxNjU4OTE2NDAyLCJqdGkiOiJDTTpjYXRfbWF0Y2g6bHQxMjM0NTYiLCJvcGVuX2lkIjoiIiwidWlkIjoxMDAwMDEsImRlYnVnIjoiIiwibGFuZyI6IiJ9.NQZAWBLYtq6hBff9YjNcaI2Soa6Z5vwbIU7YnjP1KBQ"):d.default.isPlatform(d.Platform.oppo)||d.default.isPlatform(d.Platform.vivo)?this.gameUserLocalData.userData.userID="":this.gameUserLocalData.userData.userID=s.default.randomCharNum(),this.gameUserLocalData.userData.registerTime=Date.now()+"",t=JSON.stringify(this.gameUserLocalData),cc.sys.localStorage.setItem(this.localKeyName,t),console.log("[PUSH] \u6ce8\u518c\u7528\u6237 ###### "+t),r.default.getInstance().register=!0)},h.removeUserData=function(){cc.sys.localStorage.getItem(this.localKeyName)&&(cc.sys.localStorage.clear(),console.log("\u79fb\u9664\u672c\u5730\u7f13\u5b58 ### "))},h.isLogin=function(){var t=h.getUserData().userID,e=h.getUserData().token;return!!(t&&t.length&&e&&e.length)},h.adaptCacheData=function(){console.log("\u9002\u914d\u8001\u7528\u6237\u6570\u636e ###### ");var t=this.getUserData(),e=h.getSprintRewardData();console.log("sprintRewardData ### ",JSON.stringify(e)),1==e.isGameEd&&h.resetSprintReward(e);var o,n=t.unlockHouseUserData;for(o in n)for(var a in n[o]){var i=n[o][a];if(!i.fish){var r=this.gameConfigData.baseConfigData.unlockHouseDataArray;if(r)for(var c in r)for(var s in r[c])if(s=r[c][s],i.unlockID==s.unlockID){i.fish=s.fish;break}}}this.saveUserData(t),this.removeOldCacheData(t)},h.removeOldCacheData=function(t){(t=t||this.getUserData()).userID&&""!=t.userID&&"1"!=t.userID||(this.removeUserData(),this.registerUserData())},h.saveUserData=function(t){this.gameUserLocalData.userData=t,t=JSON.stringify(this.gameUserLocalData),cc.sys.localStorage.setItem(this.localKeyName,t)},h.getUserData=function(){var t=cc.sys.localStorage.getItem(this.localKeyName);return this.gameUserLocalData=JSON.parse(t),this.gameUserLocalData.userData},h.getPictureData=function(){var t=cc.sys.localStorage.getItem(this.localKeyName);return this.gameUserLocalData=JSON.parse(t),this.gameUserLocalData.pictureData},h.savePictureData=function(t){this.gameUserLocalData.pictureData=t,t=JSON.stringify(this.gameUserLocalData),cc.sys.localStorage.setItem(this.localKeyName,t)},h.getUserSetupData=function(){var t=cc.sys.localStorage.getItem(this.localKeyName);return this.gameUserLocalData=JSON.parse(t),this.gameUserLocalData.setUpData},h.saveUserSetupData=function(t){this.gameUserLocalData.setUpData=t,t=JSON.stringify(this.gameUserLocalData),cc.sys.localStorage.setItem(this.localKeyName,t)},h.updateFirendCount=function(t){console.log("count = ",t),d.default.rankScoreUpdate(l.ShownType.friendRank,JSON.stringify({moonCount:t}),l.RefreshType.add)},h.updateTodayCount=function(t,e){e={moonCount:t,state:e},console.log("rankData = ",e),d.default.rankScoreUpdate(l.ShownType.todayRank,JSON.stringify(e),l.RefreshType.add)},h.getDailyWinCount=function(){var t=h.getUserData();if(t.dailyData){var e,o=0;for(e in t.dailyData)for(var n in t.dailyData[e])t.dailyData[e][n]&&t.dailyData[e][n].isWin&&o++;return o}return 0},h.getDailyData=function(t,e){var o=h.getUserData();if(o.dailyData[t])return o.dailyData[t][e]},h.saveDailyData=function(t,e,o){var n=h.getUserData();n.dailyData[t]||(n.dailyData[t]={}),n.dailyData[t][e]=o,h.saveUserData(n)},h.gameLevelWin=function(t,e){e||(console.log("\u83b7\u53d6\u521a\u5b8c\u6210\u5173\u5361\u7684\u5956\u52b1\u6570\u636e, \u968f\u673a\u83b7\u53d6\u586b\u5145 ###"),e=this.getRewardBoxData(this.gameUserLocalData.userData.playLevelId)),console.log("winRewardObj ### ",JSON.stringify(e));var o=Number(e.everLevelRewardObj.coin),n=Number(e.everLevelRewardObj.fish);r.default.getInstance().gameType==l.GAMETYPE.GAMELEVEL?(o=Number(o),n=Number(n),this.gameUserLocalData.userData.playLevelId++):r.default.getInstance().gameType==l.GAMETYPE.GAMEDAILY&&(o=2*Number(o),n=2*Number(n)),this.gameUserLocalData.userData.coin+=o,this.gameUserLocalData.userData.fish+=n;var a=this.gameUserLocalData.userData.coin,i=o;if(c.default.reportTACommon("coin_get",{item_id:0,item_name:"\u91d1\u5e01",change_num:i,num_before:a-i,num_after:a,action:"\u5173\u5361\u80dc\u5229\u5956\u52b1",reason:"\u5173\u5361\u80dc\u5229\u83b7\u5f97\u91d1\u5e01",gold_num:a}),r.default.getInstance().moneyDict.coin=o+=Number(r.default.getInstance().moneyDict.coin),r.default.getInstance().moneyDict.fish=n+=Number(r.default.getInstance().moneyDict.fish),console.log("moneyDict = "+JSON.stringify(r.default.getInstance().moneyDict)),e.levelNewNum==e.levelNumMax){console.log("\u6dfb\u52a0\u5b9d\u7bb1\u5956\u52b1");for(var s=0;s<e.boxReward.length;s++){var p=e.boxReward[s].propType;"reward_coin"==p?(this.gameUserLocalData.userData.coin+=e.boxReward[s].num,this.gameUserLocalData.userData.coin,e.boxReward[s].num):(this.gameUserLocalData.userData[p]+=e.boxReward[s].num,this.gameUserLocalData.userData[p])}}this.addLoveCount(1)},h.upgradeClothesLevel=function(t,e){var o=this.getUserData(),n=o.catClothesData;if(n[t="cat_"+t]){for(var a=n[t],i=0;i<a.length;i++)if(a[i].clothesID==e)return 5<=o.fish&&(o.fish-=5,a[i].clothRank+=1,this.saveUserData(o),!0)}else console.log("\u6682\u65e0\u89e3\u9501\u732b")},h.updateCatData=function(){var t,e=this.gameConfigData.baseConfigData.catClothesData,o=this.gameUserLocalData.userData.playLevelId;for(t in e)for(var n in e[t])if("level"==e[t][n].unlockType&&o>e[t][n].unlockNum){var a,i,r=this.gameUserLocalData.userData.catClothesData,c=!1;for(a in r[t])r[t][a].clothesID==e[t][n].clothesID&&(c=!0);c||(i={clothesID:e[t][n].clothesID,clothRank:1,isWear:!1},r[t].push(i),h.saveUserData(this.gameUserLocalData.userData))}},h.updateLoveTime=function(){if(0==this.gameUserLocalData.userData.loveGetTime)return 0;var t=this.gameConfigData.baseConfigData.loveNumMax,e=this.gameUserLocalData.userData.loveGetTime,o=6e4*this.gameConfigData.baseConfigData.getLoveTime,n=Number(Date.now())-e,a=Math.floor(n/o);return e=0,1<=a?(this.gameUserLocalData.userData.love+=a,this.gameUserLocalData.userData.love>=t?(this.gameUserLocalData.userData.love=t,this.gameUserLocalData.userData.loveGetTime=0):(this.gameUserLocalData.userData.loveGetTime+=a*o,e=o-(n-a*o)),this.saveUserData(this.gameUserLocalData.userData)):e=o-(n-a*o),e},h.addLoveToMax=function(){var t=this.gameConfigData.baseConfigData.loveNumMax;this.gameUserLocalData.userData.love<t?(this.gameUserLocalData.userData.love=t,this.gameUserLocalData.userData.loveGetTime=0,this.saveUserData(this.gameUserLocalData.userData)):console.log("\u5df2\u7ecf\u662f\u6ee1\u7684\u4e86")},h.addLoveCount=function(t){var e=this.gameConfigData.baseConfigData.loveNumMax;this.gameUserLocalData.userData.love+=t,this.gameUserLocalData.userData.love>=e&&(this.gameUserLocalData.userData.loveGetTime=0),5<=this.gameUserLocalData.userData.love&&(this.gameUserLocalData.userData.love=5),this.saveUserData(this.gameUserLocalData.userData)},h.subLoveCount=function(t){return this.gameUserLocalData.userData.love<t?(console.log("\u7231\u5fc3\u6570\u91cf\u4e0d\u8db3"),!1):(this.gameUserLocalData.userData.love-=t,t=this.gameConfigData.baseConfigData.loveNumMax,this.gameUserLocalData.userData.love<t&&0==this.gameUserLocalData.userData.loveGetTime&&(this.gameUserLocalData.userData.loveGetTime=Date.now()),this.gameUserLocalData.userData.love<=0&&(this.gameUserLocalData.userData.love=0),this.saveUserData(this.gameUserLocalData.userData),!0)},h.isHaveLove=function(){return!(this.gameUserLocalData.userData.love<=0)},h.getLevelByID=function(t,e){var o=[],n=[],a=this.gameConfigData.levelConfigData;if(t>(a=r.default.getInstance().gameType!=l.GAMETYPE.GAMELEVEL&&r.default.getInstance().gameType!=l.GAMETYPE.GAMEDAILY&&r.default.getInstance().gameType==l.GAMETYPE.GAMETOPIC?a.topicLevel:a.dailyLevel).length)return console.log("\u6ca1\u6709\u5173\u5361"),void e(n);var i=a[t-1];console.log("modelLevelIdArray => ",i);for(var c=i.length,s=0,p=0;p<c;p++)this.getLevelMapData(i[p],function(t){if(o.push(t),(s+=1)>=c){for(var a=0;a<c;a++)for(var r=i[a],l=0;l<c;l++)o[l].levelKey==r&&n.push(o[l]);e(n)}})},h.getLevelByNumber=function(t,e){var o=[];this.getLevelMapData(t,function(t){o.push(t),e(o)})},h.currentHouseUnlockAll=function(){var t=h.getHourseUnlockData();if(t){var e,o=t[t.length-1],n=!1;for(e in o)o[e].unlock||(n=!0);if(!n)return!0}return!1},h.haveNewHouseUnlock=function(){return this.getHourseUnlockData().length!=this.gameConfigData.baseConfigData.unlockHouseDataArray.length},h.getHourseUnlockData=function(t){void 0===t&&(t=!1);var e=this.getUserData(),o=e.unlockHouseUserData,n=this.gameConfigData.baseConfigData.unlockHouseDataArray,a=!1;if(0==o.length)a=!1;else for(var i in o)for(var r in o[i])o[i][r].unlock||(a=!0);return!a&&o.length<n.length&&(t||0==o.length)&&o.push(n[o.length]),e.unlockHouseUserData=o,this.saveUserData(e),e.unlockHouseUserData},h.checkCollectionData=function(){var t,e,o,n=this.gameConfigData.baseConfigData.rewardCollection,a=this.getUserData(),i=this.getPictureData(),c=null;for(t in n){var s=n[t];if(a.playLevelId-1==s.levelNum){c=s;break}}return c&&(e=this.gameConfigData.baseConfigData.pictureData.bgMaxNum,o=this.gameConfigData.baseConfigData.pictureData.brickMaxNum,i.bgNum+=Number(c.wallpaper),i.brickNum+=Number(c.brick),i.bgNum>=e&&(i.bgNum=e),i.brickNum>=o&&(i.brickNum=o),this.savePictureData(i),r.default.getInstance().collectionMark.tabbarCollection=!0,0<Number(c.wallpaper)&&(r.default.getInstance().collectionMark.bgNum=i.bgNum),0<Number(c.brick)&&(r.default.getInstance().collectionMark.brickNum=i.brickNum)),c},h.getCollectionUnlockData=function(){for(var t=this.getUserData().playLevelId-1,e=this.gameConfigData.baseConfigData.rewardCollection,o={buildNewNum:1,buildNumMax:10,buildObj:null},n=null,a=0,i=0;i<e.length;i++){if(t<=e[i].levelNum){n=e[i];break}a++}var r,c=e[0];return t<=c.levelNum?(o.buildNewNum=t,o.buildNumMax=c.levelNum,o.buildObj=c,console.log("getCollectionUnlockData = "+JSON.stringify(o))):n&&(r=e[a-1].levelNum,c=e[a].levelNum,o.buildNewNum=t-r,o.buildNumMax=c-r,o.buildObj=n,console.log("getCollectionUnlockData = "+JSON.stringify(o))),o},h.getRewardBoxData=function(t){var e={levelNewNum:0,levelNumMax:10,everLevelRewardObj:null,boxReward:null};e.everLevelRewardObj=this.gameConfigData.baseConfigData.everLevelReward;var o=this.gameConfigData.baseConfigData.rewardBox,n=Math.floor(3*Math.random());e.boxReward=o[n];for(var a=this.gameConfigData.baseConfigData.rewardBoxArray,i=0;i<a.length;i++)t>a[i]&&(e.levelNewNum=t-a[i],e.levelNumMax=a[i+1]-a[i]);return e},h.getClothesData=function(t,e){for(var o=h.getGameConfigData().baseConfigData.catClothesData["cat_"+t],n=0;n<o.length;n++)if(o[n].clothesID==e)return o[n];return null},h.getSprintRewardData=function(){if(cc.sys.localStorage.getItem(l.STORAGEKEY.SPRINTREWARDKEY)){var t=cc.sys.localStorage.getItem(l.STORAGEKEY.SPRINTREWARDKEY);return JSON.parse(t)}var e={winNum:0,rewardProgress:0,winBox:0,pastTime:Date.now(),isGameEd:0};return t=JSON.stringify(e),cc.sys.localStorage.setItem(l.STORAGEKEY.SPRINTREWARDKEY,t),e},h.setSprintRewardData=function(t){t=JSON.stringify(t),cc.sys.localStorage.setItem(l.STORAGEKEY.SPRINTREWARDKEY,t)},h.updateSprintRewardTime=function(){var t=this.getSprintRewardData(),e=t.pastTime,o=1e3*this.gameConfigData.baseConfigData.sprintRewardTime,n=Number(Date.now())-e,a=Math.floor(n/o);return e=0,1<=a?(console.log("\u91cd\u7f6e\u5012\u8ba1\u65f6 = "+a),t.pastTime=Date.now(),this.resetSprintReward(t),r.default.getInstance().sprintMark=!1,cc.game.emit(l.EMITKEY.MAINUPDATEUI)):e=o-(n-a*o),e},h.resetSprintReward=function(t){r.default.getInstance().gameType==l.GAMETYPE.GAMELEVEL&&(t?console.log("\u6d3b\u52a8\u7ed3\u675f\u4e2d\u65ad\u8fde\u80dc ######"):(t=this.getSprintRewardData(),console.log("\u666e\u901a\u73a9\u6cd5\u4e2d\u65ad\u8fde\u80dc ######")),t.winNum=0,t.winBox=0,t.rewardProgress=0,t.isGameEd=0,this.setSprintRewardData(t))},h.getCookieRewardData=function(){if(cc.sys.localStorage.getItem(l.STORAGEKEY.COOKIECOLLECTIONKEY)){var t=cc.sys.localStorage.getItem(l.STORAGEKEY.COOKIECOLLECTIONKEY);return JSON.parse(t)}var e={cookieNum:0,pastTime:Date.now(),progress:0};return t=JSON.stringify(e),cc.sys.localStorage.setItem(l.STORAGEKEY.COOKIECOLLECTIONKEY,t),e},h.setCookieRewardData=function(t){t=JSON.stringify(t),cc.sys.localStorage.setItem(l.STORAGEKEY.COOKIECOLLECTIONKEY,t)},h.updateCookieRewardTime=function(){var t=this.getCookieRewardData(),e=t.pastTime,o=1e3*this.gameConfigData.baseConfigData.cookieRewardTime,n=Number(Date.now())-e,a=Math.floor(n/o);return e=0,1<=a?(console.log("\u91cd\u7f6e\u5012\u8ba1\u65f6 = "+a),t.pastTime=Date.now(),t.cookieNum=0,t.progress=0,this.setCookieRewardData(t),cc.game.emit(l.EMITKEY.MAINUPDATEUI)):e=o-(n-a*o),e},h.setItem=function(t,e,o){(!o||o<=0)&&(o=-1),o={data:e,time:Date.now(),expire:1e3*o},o=JSON.stringify(o),cc.sys.localStorage.setItem(t,o)},h.getItem=function(t){var e=cc.sys.localStorage.getItem(t);if((e=e&&JSON.parse(e))&&e.time&&e.expire){if(!(0<e.expire&&Date.now()>e.time+e.expire))return e.data;localStorage.removeItem(t)}},h.removeItem=function(t){cc.sys.localStorage.removeItem(t)},h.getSheepClothesData=function(){var t=cc.sys.localStorage.getItem(l.STORAGEKEY.SHEEPCLOTHESDATA),e=h.gameConfigData.baseConfigData;if(!t)return e&&e.sheepClothesData&&this.setSheepClothesData(e.sheepClothesData),console.log("\u672c\u5730\u6ca1\u6709\u7f8a\u76ae\u80a4\u6570\u636e\uff0c\u8fdb\u884c\u7f13\u5b58 ###### "),e.sheepClothesData;var o=JSON.parse(t);if(e.sheepClothesData.length>o.length)for(var n=0;n<e.sheepClothesData.length;n++){for(var a=e.sheepClothesData[n],i=!1,r=0;r<o.length;r++)if("Sheeps"==(c=o[r]).spName&&(console.log("skin = ",c.spSkin.indexOf("skin_")),c.spSkin.indexOf("skin_")<0&&(c.spSkin="skin_"+c.spSkin)),a.clothesId==c.clothesId){i=!0;break}0==i&&o.push(a)}else if(e.sheepClothesData.length==o.length)for(n=0;n<e.sheepClothesData.length;n++)for(a=e.sheepClothesData[n],r=0;r<o.length;r++){var c=o[r];a.clothesId==c.clothesId&&(c.name=a.name)}return this.setSheepClothesData(o),o},h.setSheepClothesData=function(t){t=JSON.stringify(t),cc.sys.localStorage.setItem(l.STORAGEKEY.SHEEPCLOTHESDATA,t)},h.setLevelMapData=function(t,e){console.log("mapData:",e),e=JSON.stringify(e),console.log("data:",e),d.default.post({url:"/admin/game_map/upsert",data:{map_id:t,map_data:e},success:function(e){0==e.err_code?(cc.game.emit("showTips","\u4fdd\u5b58\u5730\u56fe\u6210\u529f"),console.log("\u4fdd\u5b58\u5730\u56fe\uff1a",t,e)):cc.game.emit("showTips","\u4fdd\u5b58\u5730\u56fe\u5931\u8d25")}})},h.getLevelMapData=function(t,e){cc.loader.loadRes("data/level/"+t,cc.JsonAsset,function(o,n){if(o)return cc.game.emit("showTips","\u8bfb\u53d6\u5730\u56fe\u5931\u8d25"),void console.log("\u8bfb\u53d6\u5730\u56fe\u5931\u8d25");t=n.json.map_data,e(t=JSON.parse(t))})},h.getOriginLevelMapData=function(t,e){cc.loader.loadRes("data/level/"+t,cc.JsonAsset,function(t,o){if(t)console.log("\u8bfb\u53d6\u5730\u56fe\u5931\u8d25");else{var n={err_code:0,err_msg:""};n.data=o.json,e(n)}})},h.getAllLevelMapData=function(t){cc.loader.loadRes("data/allLevel",cc.JsonAsset,function(e,o){for(var n=o.json,a=0;a<n.length;a++)n[a].map_id<=100&&console.log("mapId:",n[a].map_id);t(n)})},h.copy=function(t){return t=JSON.stringify(t),JSON.parse(t)},h.loadJsonData=function(t,e){cc.assetManager.loadBundle(cc.resources.name,function(o,n){o||n.load(t,cc.JsonAsset,function(t,o){t||(o=o.json,e(o))})})},h.isPlatform=function(t){switch(t){case i.android:return!(!cc.sys.isNative||cc.sys.os!=cc.sys.OS_ANDROID);case i.ios:return!(!cc.sys.isNative||cc.sys.os!=cc.sys.OS_IOS);case i.wx:return cc.sys.platform==cc.sys.WECHAT_GAME;case i.tt:return cc.sys.platform==cc.sys.BYTEDANCE_GAME;case i.oppo:return cc.sys.platform==cc.sys.OPPO_GAME;case i.vivo:return cc.sys.platform==cc.sys.VIVO_GAME;case i.web:return cc.sys.isBrowser}return!1},h.localKeyName="gameUserLocalData",h.VERSION="1_0_1",h.GAMEVERSION="",h.WXVedioID="adunit-e64f338bb42a2cf3",h.TTVedioID="2h8vke2e0oo3771fk4",h.AndroidVedioID="",h.OppoVedioID="",h.VivoVedioID="",h.langCode=l.LangEnum.zhCN,h.gameConfigData={baseConfigData:null,levelConfigData:null},h.gameUserLocalData={userData:{userID:"",openid:"",playLevelId:1,coin:0,love:5,fish:0,loveGetTime:0,registerTime:"",token:"",prop_remove:2,prop_cancel:2,prop_random:2,unlockHouseUserData:[],catClothesData:{},dailyData:{}},setUpData:{effectStatus:1,musicStatus:1,shockStatus:1},pictureData:{bgNum:1,brickNum:15}},h.registerData={userData:{userID:"",openid:"",playLevelId:1,coin:0,love:5,fish:0,loveGetTime:0,registerTime:"",token:"",prop_remove:2,prop_cancel:2,prop_random:2,unlockHouseUserData:[],catClothesData:{cat_1:[]},dailyData:{}},setUpData:{effectStatus:1,musicStatus:1,shockStatus:1},pictureData:{bgNum:1,brickNum:15}},a.default=n=h,cc._RF.pop()},{}],"decode-uri-component":[function(t,e){"use strict";cc._RF.push(e,"3a8633sEG9C34PTccq+d7HJ","decode-uri-component"),cc._RF.pop()},{}],editorGameLayer:[function(t,e,o){"use strict";cc._RF.push(e,"78513skn4pKeoASzaMTH+ai","editorGameLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("chessboard"),u=a("crushArea"),d=a("moveOutArea");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainLayer=null,t.chessboard=null,t.crushArea=null,t.moveOutArea=null,t.uiLayer=null,t.levelDataArray=null,t.gameIsWin=!1,t.popCallbackCollect=null,t.userData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){},h.prototype.initLevelLayer=function(t){t=(this.levelDataArray=t)[0],this.gameIsWin=!1,this.chessboard.getComponent(p.default).init(t,this),this.crushArea.getComponent(u.default).initCrushArea(this),this.moveOutArea.getComponent(d.default).initMoveOutArea(this),this.node.active=!0,this.popCallbackCollect={continueCallBack:this.playNextLevel.bind(this),returnMainCallBack:this.showMainLayer.bind(this),rebornGameCallBack:this.rebornGameFunc.bind(this),giveUpCallBack:this.giveUpFunc.bind(this),restartCallBack:this.restartNowLevel.bind(this)}},h.prototype.hideLayer=function(){this.node.active=!1},h.prototype.playNextLevel=function(){},h.prototype.restartNowLevel=function(){},h.prototype.showSetUpLayer=function(){},h.prototype.showMainLayer=function(){},h.prototype.gameWinFunc=function(){},h.prototype.gameOverFunc=function(){console.log("\u6e38\u620f\u5931\u8d25",this.levelDataArray);var t={popName:"failPop",showPopData:{popCallbackCollect:this.popCallbackCollect}};cc.game.emit("showPop",t)},h.prototype.giveUpFunc=function(){cc.game.emit("closeAllPop")},h.prototype.rebornGameFunc=function(){console.log("\u8fd9\u91cc\u6709\u4e2a\u770b\u89c6\u9891"),cc.game.emit("closeAllPop"),this.crushArea.getComponent(u.default).rebornGameFunc()},h.prototype.crushBlockNode=function(t){this.crushArea.getComponent("crushArea").addCrushAreaCardNode(t);var e=this.chessboard.getComponent(p.default).checkGameWin();t=this.moveOutArea.getComponent(d.default).checkGameWin(),e&&t&&(console.log("\u6e38\u620f\u80dc\u5229\uff01"),this.gameIsWin=!0)},h.prototype.crushAnimateCallback=function(){this.gameIsWin&&this.gameWinFunc()},s([i(cc.Node)],h.prototype,"mainLayer",void 0),s([i(cc.Node)],h.prototype,"chessboard",void 0),s([i(cc.Node)],h.prototype,"crushArea",void 0),s([i(cc.Node)],h.prototype,"moveOutArea",void 0),s([i(cc.Node)],h.prototype,"uiLayer",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],editorGameUiLayer:[function(t,e,o){"use strict";cc._RF.push(e,"74ee14/EMlALpPmiwWxivjL","editorGameUiLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("chessboard"),d=a("crushArea"),h=a("editorGameLayer");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.removeBtn=null,t.cancelBtn=null,t.randomBtn=null,t.setUpBtn=null,t.moveOutArea=null,t.chessboardNode=null,t.crushArea=null,t.paddingHeight=70,t.userData=null,t.isMoving=!1,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){p.default.addbtnTouchStartScale(this.removeBtn),p.default.addbtnTouchEndScale(this.removeBtn,this.removeEndFunc.bind(this)),p.default.addbtnTouchCancelScale(this.removeBtn),p.default.addbtnTouchStartScale(this.cancelBtn),p.default.addbtnTouchEndScale(this.cancelBtn,this.cancelEndFunc.bind(this)),p.default.addbtnTouchCancelScale(this.cancelBtn),p.default.addbtnTouchStartScale(this.randomBtn),p.default.addbtnTouchEndScale(this.randomBtn,this.randomEndFunc.bind(this)),p.default.addbtnTouchCancelScale(this.randomBtn),p.default.addbtnTouchStartScale(this.setUpBtn),p.default.addbtnTouchEndScale(this.setUpBtn,this.setUpEndFunc.bind(this)),p.default.addbtnTouchCancelScale(this.setUpBtn)},f.prototype.initGameUi=function(){this.isMoving=!1;var t=this.removeBtn.height+this.paddingHeight,e=-(cc.winSize.height/2+this.removeBtn.height/2);this.removeBtn.y=e,this.cancelBtn.y=e,this.randomBtn.y=e,cc.tween(this.removeBtn).by(.4,{y:t}).start(),cc.tween(this.cancelBtn).by(.4,{y:t}).start(),cc.tween(this.randomBtn).by(.4,{y:t}).start()},f.prototype.removeGameUiBtn=function(){var t=this;this.isMoving=!0,this.removeBtn.height,this.paddingHeight;var e=-(cc.winSize.height/2+this.removeBtn.height/2);cc.tween(this.removeBtn).to(.4,{y:e}).start(),cc.tween(this.cancelBtn).to(.4,{y:e}).start(),cc.tween(this.randomBtn).to(.4,{y:e}).call(function(){t.isMoving=!1},this).start()},f.prototype.setUpEndFunc=function(){this.node.parent.getComponent(h.default).hideLayer()},f.prototype.removeEndFunc=function(){this.crushArea.getComponent(d.default).moveOutBlock()},f.prototype.cancelEndFunc=function(){this.crushArea.getComponent(d.default).cancelOneStep()},f.prototype.randomEndFunc=function(){this.chessboardNode.getComponent(u.default).updateBlockArea()},s([i(cc.Node)],f.prototype,"removeBtn",void 0),s([i(cc.Node)],f.prototype,"cancelBtn",void 0),s([i(cc.Node)],f.prototype,"randomBtn",void 0),s([i(cc.Node)],f.prototype,"setUpBtn",void 0),s([i(cc.Node)],f.prototype,"moveOutArea",void 0),s([i(cc.Node)],f.prototype,"chessboardNode",void 0),s([i(cc.Node)],f.prototype,"crushArea",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],editorPopCommon:[function(t,e,o){"use strict";cc._RF.push(e,"ff5d494wMpLzo5RKnYVG0uZ","editorPopCommon");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var c,s=cc._decorator;function l(){return null!==c&&c.apply(this,arguments)||this}a=s.ccclass,s.property,r(l,c=cc.Component),l.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.starFunc,this),this.node.on(cc.Node.EventType.TOUCH_END,this.endFunc,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.moveFunc,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelFunc,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.mouseDown,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.mouseEnter,this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeave,this)},l.prototype.starFunc=function(t){t.stopPropagation()},l.prototype.endFunc=function(t){t.stopPropagation()},l.prototype.moveFunc=function(t){t.stopPropagation()},l.prototype.cancelFunc=function(t){t.stopPropagation()},l.prototype.mouseDown=function(t){t.stopPropagation()},l.prototype.mouseEnter=function(t){t.stopPropagation()},l.prototype.mouseMove=function(t){t.stopPropagation()},l.prototype.mouseLeave=function(t){t.stopPropagation()},a=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r}([a],l),i.default=a,cc._RF.pop()},{}],editorTips:[function(t,e,o){"use strict";cc._RF.push(e,"fd10fv9y+ZEtaYplTuo+/L4","editorTips");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.tipsLabel=null,t}r(p,s=cc.Component),p.prototype.start=function(){cc.game.on("showTips",this.showTips,this)},p.prototype.showTips=function(t){this.tipsLabel.node.active=!0,this.tipsLabel.string=t+"",cc.tween(this.tipsLabel.node).delay(1.5).call(function(){this.tipsLabel.node.active=!1},this).start()},c([l(cc.Label)],p.prototype,"tipsLabel",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],enumConfig:[function(t,e,o){"use strict";cc._RF.push(e,"4c6b3ttKLVHnrBFJtUOvdja","enumConfig");var n=e,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.RefreshType=a.ShownType=a.MODULETYPE=a.LangEnum=a.STORAGEKEY=a.EMITKEY=a.GAMEBLOCK=a.GAMEOVER=a.WEEK=a.CALENDAR=a.DAYTYPE=a.CALENDARNAMES=a.CALENDARITEM=a.ROOMTYPE=a.MAINPAGE=a.GAMETYPE=a.GAMEENV=void 0,(n=a.GAMEENV||(a.GAMEENV={}))[n.ENVDEVELOP=1]="ENVDEVELOP",n[n.ENVTRAIL=2]="ENVTRAIL",n[n.ENVRELEASE=3]="ENVRELEASE",(n=a.GAMETYPE||(a.GAMETYPE={}))[n.GAMEMAIN=0]="GAMEMAIN",n[n.GAMETOMB=1]="GAMETOMB",n[n.GAMELEVEL=2]="GAMELEVEL",n[n.GAMEDAILY=3]="GAMEDAILY",n[n.GAMETOPIC=4]="GAMETOPIC",(n=a.MAINPAGE||(a.MAINPAGE={}))[n.PAGERANK=0]="PAGERANK",n[n.PAGEHOUSE=1]="PAGEHOUSE",n[n.PAGEMAIN=2]="PAGEMAIN",n[n.PAGEDAILY=3]="PAGEDAILY",n[n.PAGECOLLECT=4]="PAGECOLLECT",(n=a.ROOMTYPE||(a.ROOMTYPE={}))[n.ROOMONE=1]="ROOMONE",n[n.ROOMTWO=2]="ROOMTWO",n[n.ROOMTHREE=3]="ROOMTHREE",(n=a.CALENDARITEM||(a.CALENDARITEM={}))[n.ITEMLAST=1]="ITEMLAST",n[n.ITEMOLD=2]="ITEMOLD",n[n.ITEMNOW=3]="ITEMNOW",n[n.ITEMFUTURE=4]="ITEMFUTURE",n[n.ITEMNEXT=5]="ITEMNEXT",n[n.ITEMNOR=6]="ITEMNOR",n[n.ITEMSELE=7]="ITEMSELE",n[n.ITEMSUC=8]="ITEMSUC",a.CALENDARNAMES=["yyyy\u5e74","yyyy\u5e74mm\u6708","yyyy\u5e74mm\u6708dd\u65e5","m-d","yyyy-m-d","yyyymm","yyyymmdd","yyyy-mm-dd","yyyy-mm-dd hh:mm:ss","hh:mm:ss"],(n=a.DAYTYPE||(a.DAYTYPE={}))[n.TODAY=0]="TODAY",n[n.YESTERDAY=1]="YESTERDAY",n[n.TOMORROW=2]="TOMORROW",n[n.NONE=3]="NONE",(n=a.CALENDAR||(a.CALENDAR={}))[n.YEAR=0]="YEAR",n[n.MONTH=1]="MONTH",n[n.DAY=2]="DAY",n[n.WEEK=3]="WEEK",(n=a.WEEK||(a.WEEK={}))[n.SUN=0]="SUN",n[n.MON=1]="MON",n[n.TUE=2]="TUE",n[n.WED=3]="WED",n[n.THU=4]="THU",n[n.FEI=5]="FEI",n[n.SAT=6]="SAT",(n=a.GAMEOVER||(a.GAMEOVER={}))[n.NONE=0]="NONE",n[n.LEVELWIN=1]="LEVELWIN",n[n.LEVELFAIL=2]="LEVELFAIL",n[n.DAILYWIN=3]="DAILYWIN",n[n.DAILYFAIL=4]="DAILYFAIL",(n=a.GAMEBLOCK||(a.GAMEBLOCK={}))[n.NONE=0]="NONE",n[n.BLOCKCOOKIE=1]="BLOCKCOOKIE",n[n.BLOCKGOLD=2]="BLOCKGOLD",(n=a.EMITKEY||(a.EMITKEY={})).MAINUPDATEUI="MAINUPDATEUI",n.UPDATETABBARRECEIVE="UPDATETABBARRECEIVE",n.UPDATETABBARSEND="UPDATETABBARSEND",n.SHOWMASKLAYER="SHOWMASKLAYER",n.HIDEMASKLAYER="HIDEMASKLAYER",n.UPDATEPICTURE="UPDATEPICTURE",n.SHOWMAINTIPS="showMainTips",n.SHOWTRANSITLAYER="showTransitLayer",n.RESTARTNOWLEVEL="restartNowLevel",n.SHOWMAINLAYER="showMainLayer",n.SHOWPOP="showPop",n.CLOSEALLPOP="closeAllPop",n.UPDATEPOPDATA="UPDATEPOPDATA",n.TTSTARTRECORD="TTSTARTRECORD",n.TTSTOPRECORD="TTSTOPRECORD",n.TTSHARERECORD="TTSHARERECORD",n.UPDATERANKDATA="UPDATERANKDATA",n.SHOWUSERNODE="SHOWUSERNODE",n.USERINFOSUCCESS="USERINFOSUCCESS",n.RANKUSERINFOSUCCESS="RANKUSERINFOSUCCESS",n.BULLETSEND="BULLETSEND",n.BULLETSTATE="BULLETSTATE",n.GAMEOVERRESTART="GAMEOVERRESTART",n.GAMEOVERSUCCESS="GAMEOVERSUCCESS",n.BEGINGAME="BEGINGAME",n.SHOWMODULE="SHOWMODULE",n.TOPICACCOUNT="TOPICACCOUNT",n.TOPICRANKINFO="TOPICRANKINFO",n.TOPICPOSITION="TOPICPOSITION",n.CHANGESHEEPCLOTHES="CHANGESHEEPCLOTHES",(n=a.STORAGEKEY||(a.STORAGEKEY={})).GAMEUSERLOCALDATA="gameUserLocalData",n.SPRINTREWARDKEY="SPRINTREWARDKEY",n.COOKIECOLLECTIONKEY="COOKIECOLLECTIONKEY",n.BULLETSWITCH="BULLETSWITCH",n.TAUSERINFO="TAUSERINFO",n.RANKDATA="RANKDATA",n.BULLETDATA="BULLETDATA",n.STAGEDATA="STAGEDATA",n.GAMEDAILYLEVELDATA="GAMEDAILYLEVELDATA",n.GAMETOPICLEVELDATA="GAMETOPICLEVELDATA",n.SHEEPCLOTHESDATA="SHEEPCLOTHESDATA",n.TOPICMATCHRECORD="TOPICMATCHRECORD",n.PROPGAMEDATA="PROPGAMEDATA",n.GAMELOADING="GAMELOADING",(n=a.LangEnum||(a.LangEnum={})).zhCN="zh",n.enUS="en",(n=a.MODULETYPE||(a.MODULETYPE={}))[n.COMMON=0]="COMMON",n[n.TOPIC=1]="TOPIC",(n=a.ShownType||(a.ShownType={})).friendRank="friendRank",n.todayRank="todayRank",(a.RefreshType||(a.RefreshType={})).add="add",cc._RF.pop()},{}],"export-helper":[function(t,e,o){"use strict";cc._RF.push(e,"c00e4AjhHVJqoY4uheCWzQM","export-helper");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.math=void 0;var a=cc.EPSILON,i=(r.approx=function(t,e,o){return o=o||a,Math.abs(t-e)<=o},r.lerp=function(t,e,o){return t+(e-t)*o},r.equals=function(t,e){return Math.abs(t-e)<=a*Math.max(1,Math.abs(t),Math.abs(e))},r);function r(){}n.math=i,cc._RF.pop()},{}],failPop:[function(t,e,o){"use strict";cc._RF.push(e,"015c33YCudGR46pDyw1Hejz","failPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("CcJsFunc"),h=a("dataTs"),f=a("enumConfig"),g=a("share"),y=a("tt-sdk"),m=a("sdk"),v=a("spine"),b=a("GameManager"),N=a("report-common"),_=a("data-manager"),w=a("uma-sdk"),C=a("api-sheep");function P(){var t=null!==l&&l.apply(this,arguments)||this;return t.fainNode=null,t.descLabel=null,t.failNumLabel=null,t.restartNode=null,t.backNode=null,t.tombNode=null,t.tombBubble=null,t.tombDesc=null,t.tombParticle=null,t.rankNode=null,t.rankPreLabel=null,t.rankNumLabel=null,t.rankLastLabel=null,t.shareNode=null,t.shareBtn=null,t.noShareBtn=null,t.shareCloseBtn=null,t.bottomShareBtn=null,t.rebornGameCallBack=null,t.giveUpCallBack=null,t.failNodeNum=400,t.popCallbackCollect=null,t.userData=null,t.showPopData=null,t.rankUserData=null,t.type=0,t}a=(i=cc._decorator).ccclass,i=i.property,c(P,l=cc.Component),P.prototype.start=function(){cc.game.on(f.EMITKEY.GAMEOVERSUCCESS,this.requestUserData.bind(this)),this.popCallbackCollect={buyCallBack:this.buyCallBackFunc.bind(this),freeCallBack:this.freeCallBackFunc.bind(this),exitCallBack:this.exitCallBackFunc.bind(this)},d.default.addTargetTouchUpInside(this.restartNode,this.restartNodeFunc.bind(this)),d.default.addTargetTouchUpInside(this.backNode,this.backNodeFunc.bind(this)),d.default.addbtnTouchStartScale(this.shareBtn),d.default.addbtnTouchEndScale(this.shareBtn,this.shareBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.shareBtn),d.default.addbtnTouchStartScale(this.noShareBtn),d.default.addbtnTouchEndScale(this.noShareBtn,this.noShareBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.noShareBtn),d.default.addbtnTouchStartScale(this.shareCloseBtn),d.default.addbtnTouchEndScale(this.shareCloseBtn,this.shareCloseBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.shareCloseBtn),d.default.addTargetTouchUpInside(this.bottomShareBtn,this.bottomShareBtnFunc.bind(this))},P.prototype.restartNodeFunc=function(){cc.game.emit(f.EMITKEY.RESTARTNOWLEVEL)},P.prototype.backNodeFunc=function(){cc.game.emit(f.EMITKEY.SHOWMAINLAYER)},P.prototype.bottomShareBtnFunc=function(){this.shareNode.active=!0,this.shareNode.stopAllActions(),cc.tween(this.shareNode).set({scale:0,opacity:0}).delay(1).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start()},P.prototype.shareBtnFunc=function(){var t=this;h.default.isPlatform(h.GDPlatform.tt)?y.default.shareTemplate(function(e){e&&(t.shareNode.active=!1,t.showButton())}):h.default.isPlatform(h.GDPlatform.wx)?g.default.shareMethod({success:function(){},fail:function(){},complete:function(){}}):this.node.active=!1},P.prototype.noShareBtnFunc=function(){this.shareNode.active=!1,this.showButton()},P.prototype.shareCloseBtnFunc=function(){this.shareNode.active=!1,this.showButton()},P.prototype.showFailPop=function(t){this.node.active=!0,(this.showPopData=t).popCallbackCollect&&(this.rebornGameCallBack=t.popCallbackCollect.rebornGameCallBack,this.giveUpCallBack=t.popCallbackCollect.giveUpCallBack),this.restartNode.active=!1,this.backNode.active=!1,this.tombNode.active=!1,this.rankNode.active=!1,this.tombParticle.active=!1,this.shareNode.active=!1,this.bottomShareBtn.active=!1,t=t.failType,this.failNumLabel.string="",console.log("failType = "+t),1==t?console.log("\u590d\u6d3b ###### "):2==t&&console.log("\u91cd\u65b0\u6311\u6218 ###### "),this.playShowAnimate()},P.prototype.requestUserData=function(){var t,e=this;this.failNumLabel.string="",b.default.getInstance().gameType==f.GAMETYPE.GAMEDAILY?C.default.getUserRankInfo(function(t){0==t.err_code&&t.data&&t.data.user&&(e.rankUserData=t.data.user,t=t.data.user.fail,e.failNumLabel.string="\u4eca\u65e5\u5df2\u6311\u6218 "+(t=t&&0!=t?t:1)+" \u6b21")}):b.default.getInstance().gameType==f.GAMETYPE.GAMETOPIC&&(t=h.default.getUserData().userID,C.default.getTopicUserInfo(t,function(t){0==t.err_code&&t.data&&t.data.user&&(e.rankUserData=t.data.user,t=t.data.user.fail,e.failNumLabel.string="\u4eca\u65e5\u5df2\u6311\u6218 "+(t=t&&0!=t?t:1)+" \u6b21")}))},P.prototype.getTeamName=function(){var t=_.default.topicModel.name.split("#");return 2<=t.length?1==_.default.topicModel.info.type?t[0]:t[1]:""},P.prototype.exitCallBackFunc=function(){},P.prototype.buyCallBackFunc=function(t,e){console.log("type = "+t),this.userData=h.default.getUserData(),this.userData.coin>=e?(this.userData.coin-=e,b.default.getInstance().reportProperty.resurrection_coin_cost+=e,b.default.getInstance().levelWinDict.coin+=e,h.default.saveUserData(this.userData),b.default.getInstance().coinNum+=30,this.showTipPop(t),4==t&&b.default.getInstance().gameType==f.GAMETYPE.GAMELEVEL&&(console.log("\u5e38\u89c4\u5173\u5361\u590d\u6d3b\u8d2d\u4e70"),w.default.trackEvent("game_life_buy",{coinNum:e+="",c_coinNum:Number(e)}))):cc.game.emit("showMainTips",u.default.instance.trans(p.GDLanguage.coin_inadequate))},P.prototype.freeCallBackFunc=function(t){var e=this;this.type=t,t=h.default.GetVedioID(),m.default.watchAdVideo({id:t,success:function(){e.watchSuc(1)},fail:function(){console.log("\u5931\u8d25")},nofit:function(){e.shareTTAction()}})},P.prototype.watchSuc=function(t){var e;this.showTipPop(),cc.game.emit(f.EMITKEY.CLOSEALLPOP),b.default.getInstance().reportProperty.resurrection_ad_frequency++,4==this.type&&(b.default.getInstance().sheepMark.resurgenceCount++,console.log("\u590d\u6d3b\u770b\u89c6\u9891"),e=_.default.getTAUserInfo(),1==t?N.default.reportTACommon("game_life_ad",e):2==t&&N.default.reportTACommon("game_life_share",e))},P.prototype.shareTTAction=function(){var t,e,o=this;m.default.isPlatform(m.Platform.wx)?(e=h.default.GetVedioID(),t=h.default.getUserData().openid,m.default.share(t,e,function(){o.shareCbMethod()},function(){cc.game.emit(f.EMITKEY.SHOWMAINTIPS,"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5fae\u4fe1\u7fa4\u4e0e\u597d\u53cbPK")})):m.default.isPlatform(m.Platform.tt)&&(e={popName:"shareNodePop",showPopData:{type:2,shareCb:this.shareCbMethod.bind(this)}},cc.game.emit("showPop",e))},P.prototype.shareCbMethod=function(){console.log("\u5206\u4eab\u6210\u529f ######"),this.watchSuc(2)},P.prototype.showTipPop=function(){this.rebornGameCallBack&&this.rebornGameCallBack(),cc.game.emit("showMainTips",u.default.instance.trans(p.GDLanguage.game_continue))},P.prototype.playShowAnimate=function(){var t=this;this.fainNode.y=0,cc.tween(this.fainNode).to(.8,{y:this.failNodeNum},{easing:cc.easing.cubicOut}).call(function(){},this).delay(.1).call(function(){t.showPopData&&2==t.showPopData.failType||1<=b.default.getInstance().sheepMark.resurgenceCount?t.showRestartNode():t.showPropPop(4)}).start()},P.prototype.showRestartNode=function(){console.log("\u91cd\u65b0\u6311\u6218");var t=_.default.getTAUserInfo();N.default.reportTACommon("game_over",t),cc.game.emit(f.EMITKEY.GAMEOVERRESTART),this.tombNode.active=!0,this.rankUserData?this.showFailTomb(this.rankUserData.fail):this.showFailTomb(1)},P.prototype.setupDescMethods=function(t){var e=["12345\uff0c\u4e0a\u5c71\u6253\u8001\u864e\uff0c\u8981\u60f3\u8fc7\u6b64\u5173\uff0c\u5c31\u8981\u809d\u809d\u809d","\u4eba\u751f\u5f97\u610f\u987b\u5c3d\u6b22\uff0c\u4e0d\u8fc7\u6b64\u5173\u5fc3\u4e0d\u7518\uff01","\u6211\u53ea\u662f\u4e3a\u4e86\u5792\u575f\u5934\uff0c\u5e76\u4e0d\u662f\u8981\u8fc7\u5173\uff01","\u4e3a\u6211\u7701\u4e89\u5149\uff0c\u5fc5\u987b\u62ff\u4e0b","\u4ee5\u6211\u7684\u667a\u6167\u62ff\u4e0b\u5b83\uff0c\u5e94\u8be5\u4e0d\u6210\u95ee\u9898","\u5931\u8d25\u662f\u6210\u529f\u4e4b\u6bcd\uff0c\u7f8a\u513f\u5b50\u8fd8\u5728\u7b49\u7740\u4f60\uff01","\u4e0d\u591f\uff01\u8fd8\u4e0d\u591f\uff01\u6211\u8fd8\u80fd\u518d\u809d100\u56de\u5408","\u6211\u90fd\u6b7b\u8fd9\u4e48\u591a\u6b21\u5566\uff0c\u65f6\u95f4\u8fc7\u7684\u771f\u5feb\uff01","\u9769\u547d\u5c1a\u672a\u6210\u529f\uff0c\u540c\u5fd7\u4ecd\u9700\u52aa\u529b\uff01","\u5dee\u4e00\u70b9\u5c31\u8fc7\u4e86\uff0c\u4f60\u8bf4\u6c14\u4eba\u4e0d\uff01","\u4f60\u786e\u5b9a\u8fd9\u4e48\u6c14\u4eba\u7684\u6e38\u620f\uff0c\u4e0d\u53bb\u6c14\u6c14\u670b\u53cb\uff1f","\u53c8\u5931\u8d25\u4e86\uff0c\u592a\u96be\u4e86","\u53c8\u53c8\u53c8\u5931\u8d25\u4e86\uff0c\u518d\u8bd5\u6700\u540e\u4e00\u6b21","\u53c8\u53c8\u53c8\u53c8\u53c8\u5931\u8d25\u4e86\uff0c\u8981\u4e0d\u653e\u5f03\u5427","\u53c8\u53c8\u53c8\u53c8\u53c8\u53c8\u5931\u8d25\u4e86\uff0c\u8fc7\u4e0d\u53bb\u5c31\u4e0d\u7761\u89c9\u4e86","**\u7b56\u5212\u786e\u5b9a\u8fd9\u662f\u53ef\u4ee5\u8fc7\u7684\u4e48\uff1f","*************\u7b56\u5212\uff0c******\u6bcd\uff01","\u653e\u5f03\u5427\uff0c\u4f55\u82e6\u4e3a\u96be\u81ea\u5df1\u5462","\u4e2d\u56fd\u4eba\u4e0d\u6b3a\u8d1f\u4e2d\u56fd\u4eba\uff0c\u7b56\u5212\u4f60*****","\u6d3b\u7740\u4e0d\u597d\u4e48\uff0c\u975e\u5f97\u8981\u6c14\u6b7b\u81ea\u5df1\u4e48\uff1f","\u751f\u5f53\u4f5c\u7f8a\u6770\uff0c\u6b7b\u4ea6\u4e3a\u7891\u96c4\uff01","\u6ee1\u773c\u5192\u91d1\u661f\uff0c\u6211\u7891\u4eae\u6676\u6676\uff01","\u5f53\u4e0d\u4e86\u7f8a\uff0c\u6211\u4e5f\u8981\u505a\u6211\u670b\u53cb\u5708\u6700\u4eae\u7684\u7891\uff01\u8036\uff01","\u8fd8\u5dee\u4e00\u70b9\uff1f\u6211\u4fe1\u4f60\u4e2a\u9b3c\uff0c\u4f60\u4e2a\u7cdf\u8001\u5934\u5b50***\uff01","\u554a\uff01\u554a\uff01\u554a\uff01\u554a\uff01\u554a\uff01wwwwww\uff01","\u6ca1\u4e8b\uff0c\u4ed6\u4eec\u4e5f\u8fc7\u4e0d\u4e86\uff01","\u4f60\u7ed9\u6211\u7b49\u7740\uff0c\u6211\u8ba9\u6211\u4e03\u5927\u59d1\u516b\u5927\u59e8\u90fd\u6765\uff0c\u6211\u5c31\u4e0d\u4fe1\u4e86\uff01"],o=["\u65e2\u7136\u9009\u62e9\u4e86\uff0c\u5c31\u9700\u8981\u65e0\u6761\u4ef6\u7684\u8fc7\u5173","\u7f8a\u7f8a\u4e91\u68af\uff0c\u6211\u6765\u4e86\uff01","\u6211\u4e5f\u8981\u7f8a\uff5e\u7f8a\uff5e\u7f8a\uff5e","\u4e3a\u4e86\u9635\u8425\u800c\u6218\uff0c\u8d25\u800c\u4e0d\u9981(nei)\uff01","\u5373\u4f7f\u7f8a\u7fa4\u6ca1\u6709\u6211\uff0c\u57fa\u5730\u4e5f\u9700\u8981\u6211\u53bb\u5efa\u8bbe\uff01","\u4e00\u6b21\u5c31\u597d\uff0c\u8ba9\u6211\u5f53\u7f8a\u53bb\u4ee3\u8868\u4ee3\u8868\u5427\uff01","\u4e24\u519b\u5bf9\u5792\u5c31\u662f\u5e72\uff0c\u4e0d\u80fd\u6002\uff0ccome\uff5eon\uff5e\u5317\u9f3b\uff01","\u4e0d\u80fd\u6da8\u4e86\u5bf9\u9762\u6c14\u52bf\uff0c\u706d\u4e86\u81ea\u5df1\u5a01\u98ce\uff01","\u5bf9\u9762\u662f\u4e2a\u5c41\uff01\u518d\u6765\u4e00\u6b21\uff0c\u6211\u4e0d\u80fd\u5f53\u5c41\uff01","\u5f53\u7f8a\u6211\u4e0d\u884c\uff0c\u5632\u8bbd\u5bf9\u65b9\u6211\u884c\uff01","\u91cd\u5728\u53c2\u4e0e\uff0c\u8f93\u8d62\u4e0d\u91cd\u8981\uff0c\u4e48\uff1f\u4e0d\u80fd\u8f93\uff01","\u4e0d\u4e89\u9992\u5934\u84b8\u53e3\u6c14\uff0c\u5144\u5f1f\u4eec\u7b49\u7740\u6211\uff01","\u8bf4\u670d\u81ea\u5df1\u518d\u6765\u4e00\u6b21\uff0c\u8bf4\u670d\u5bf9\u9762\u653e\u5f03\uff01","\u6211\u611f\u89c9\u6211\u5df2\u7ecf\u5c3d\u529b\u4e86\uff0c\u5144\u5f1f\u4eec\u52a0\u6cb9\uff01","\u8fd9\u4e5f\u592a\u96be\u4e86\uff0c\u7f8a\u961f\u8fdb\u5165\u592a\u7a7a\uff0c\u5c31\u5dee\u6211\u4e86\uff01","\u7f8a\u7f8a\u8fd9\u4e48\u53ef\u7231\uff0c\u7b56\u5212\u662f\u4e2a*****x\uff01","\u5173\u5361\u597d\u96be\uff01\u7b56\u5212\u597d\u574f\uff01\u4f46\u662f\u6211\u597d\u559c\u6b22\u554a\uff01\u54c8\u54c8\uff5e","\u4e0d\u96be\u4e0d\u80fd\u51f8\u663e\u6211\u7684\u667a\u6167\uff0c\u518d\u6765\u4e00\u6b21\uff01","\u4e0d\u96be\u4e0d\u80fd\u51f8\u663e\u6211\u7684\u667a\u6167\uff0c\u518d\u6765\u4e00\u6b21\uff01","\u4e0d\u96be\u4e0d\u80fd\u51f8\u663e\u6211\u7684\u667a\u6167\uff0c\u518d\u6765\u4e00\u6b21\uff01"];if(1<=t&&t<=8){var n=1;return 1==t?n=d.default.randomNum(0,5):2==t?n=d.default.randomNum(2,8):3==t?n=d.default.randomNum(3,10):4==t?n=d.default.randomNum(4,12):5==t?n=d.default.randomNum(8,14):6==t?n=d.default.randomNum(10,16):7==t?n=d.default.randomNum(14,18):8==t?n=d.default.randomNum(15,20):9==t?n=d.default.randomNum(15,21):10==t?n=d.default.randomNum(15,22):11==t&&(n=d.default.randomNum(15,27)),b.default.getInstance().gameType==f.GAMETYPE.GAMEDAILY?e[n=e.length<=n?e.length-1:n]:b.default.getInstance().gameType==f.GAMETYPE.GAMETOPIC?o[n=o.length<=n?o.length-1:n]:""}},P.prototype.showFailTomb=function(t){this.tombBubble.scale=0,cc.tween(this.tombBubble).to(.3,{scale:1},{easing:cc.easing.backOut}).start();var e=_.default.getDeadNum(t),o="Dead"+e;this.tombNode.getComponent(v.default).play(o,0),this.tombDesc.string=this.setupDescMethods(e),this.rankNode.active=!0,cc.tween(this.rankNode).to(.2,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).start(),this.rankPreLabel.string="",this.rankLastLabel.string="",this.rankNumLabel.string="",b.default.getInstance().gameType!==f.GAMETYPE.GAMEDAILY?(this.rankPreLabel.string="\u60a8\u6240\u5728\u5730\u533a\u4f9d\u7136\u662f\u7b2c ",this.rankLastLabel.string=" \u540d",e=b.default.getInstance().rankInfo.user.index,this.rankNumLabel.string=e+""):b.default.getInstance().gameType==f.GAMETYPE.GAMETOPIC&&(this.rankPreLabel.string=this.getTeamName()+"\u7f8a\u961f\u5df2\u6709 ",this.rankLastLabel.string=" \u7f8a",_.default.topicRankInfo&&_.default.topicModel&&(1==_.default.topicModel.info.type?this.rankNumLabel.string=_.default.topicRankInfo.tomb?_.default.topicRankInfo.tomb.length+"":"0":this.rankNumLabel.string=_.default.topicRankInfo.taoist?_.default.topicRankInfo.taoist.length+"":"0")),_.default.isUpgradeNum(t+1)?(this.tombParticle.active=!0,this.tombParticle.getComponent(cc.ParticleSystem).resetSystem(),this.shareNode.active=!0,cc.tween(this.shareNode).set({scale:0,opacity:0}).delay(1).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start()):this.showButton()},P.prototype.showButton=function(){var t=this;this.restartNode.activeInHierarchy&&this.backNode.activeInHierarchy&&this.bottomShareBtn.activeInHierarchy?console.log("\u5df2\u5c55\u793ashow button"):(this.restartNode.scale=0,this.backNode.scale=0,this.bottomShareBtn.scale=0,this.restartNode.active=!0,this.backNode.active=!0,this.bottomShareBtn.active=!0,setTimeout(function(){cc.tween(t.restartNode).to(.2,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).start(),cc.tween(t.backNode).to(.2,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).start(),cc.tween(t.bottomShareBtn).to(.2,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).start()},1e3))},P.prototype.hideFailPop=function(){this.node.active=!1},P.prototype.continueFunc=function(){this.showPropPop(4)},P.prototype.giveUpFunc=function(){this.giveUpCallBack&&this.giveUpCallBack()},P.prototype.showPropPop=function(t){t={popName:"getPropPop",showPopData:{popCallbackCollect:this.popCallbackCollect,popType:t,coinNum:b.default.getInstance().coinNum}},cc.game.emit("showPop",t)},s([i(cc.Node)],P.prototype,"fainNode",void 0),s([i(cc.Label)],P.prototype,"descLabel",void 0),s([i(cc.Label)],P.prototype,"failNumLabel",void 0),s([i({type:cc.Node,tooltip:"\u91cd\u65b0\u6311\u6218"})],P.prototype,"restartNode",void 0),s([i({type:cc.Node,tooltip:"\u8fd4\u56de\u7f8a\u7fa4"})],P.prototype,"backNode",void 0),s([i({type:cc.Node,tooltip:"\u5893\u7891spine"})],P.prototype,"tombNode",void 0),s([i({type:cc.Node,tooltip:"\u5893\u7891\u6c14\u6ce1"})],P.prototype,"tombBubble",void 0),s([i({type:cc.Label,tooltip:"\u5893\u7891\u63cf\u8ff0"})],P.prototype,"tombDesc",void 0),s([i({type:cc.Node,tooltip:"\u5893\u7891\u7c92\u5b50"})],P.prototype,"tombParticle",void 0),s([i({type:cc.Node,tooltip:"\u6392\u540dbase"})],P.prototype,"rankNode",void 0),s([i({type:cc.Label,tooltip:"\u6392\u540d"})],P.prototype,"rankPreLabel",void 0),s([i({type:cc.Label,tooltip:"\u6392\u540d"})],P.prototype,"rankNumLabel",void 0),s([i({type:cc.Label,tooltip:"\u6392\u540d"})],P.prototype,"rankLastLabel",void 0),s([i(cc.Node)],P.prototype,"shareNode",void 0),s([i(cc.Node)],P.prototype,"shareBtn",void 0),s([i(cc.Node)],P.prototype,"noShareBtn",void 0),s([i(cc.Node)],P.prototype,"shareCloseBtn",void 0),s([i({type:cc.Node,tooltip:"\u5e95\u90e8\u5206\u4eab\u6309\u94ae"})],P.prototype,"bottomShareBtn",void 0),a=s([a],P),r.default=a,cc._RF.pop()},{}],"filter-obj":[function(t,e){"use strict";cc._RF.push(e,"c6f63iK/OtEJbbBGLz/TlZt","filter-obj"),cc._RF.pop()},{}],"flying-item-pop-coin":[function(t,e,o){"use strict";cc._RF.push(e,"f8882Kqr8ZNno3Bla7FeEvc","flying-item-pop-coin");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(r,"__esModule",{value:!0});var u,d=a("audio"),h=a("spine");function f(){var t=null!==u&&u.apply(this,arguments)||this;return t.coinFlyNode=null,t.toNode=null,t.speed=500,t.diceNumLength=15,t.centerPoint=null,t.flyMiniNodeArr=[],t.parameter=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,u=cc.Component),f.prototype.start=function(){},f.prototype.flyTo=function(t,e,o){return l(this,void 0,Promise,function(){var n,a;return p(this,function(i){switch(i.label){case 0:this.toNode=t,this.parameter=e,this.centerPoint=cc.v2(this.node.parent.width*(this.node.parent.anchorX-.5)*-1,this.node.parent.height*(this.node.parent.anchorY-.5)*-1),o&&this.getNodePosition(o),n=this.getRandomPoint(),d.default.playAudioMusic("audio/sound/coin-fly.mp3",!1),a=0,i.label=1;case 1:return a<this.diceNumLength?a!=this.diceNumLength-1?[3,3]:[4,this.addMiniCoin(a,n[a])]:[3,5];case 2:return i.sent(),e&&e.callBack&&e.callBack(),[3,4];case 3:this.addMiniCoin(a,n[a]),i.label=4;case 4:return a++,[3,1];case 5:return[2]}})})},f.prototype.addMiniCoin=function(t,e){return l(this,void 0,Promise,function(){var o=this;return p(this,function(){return[2,new Promise(function(n){var a=o.getWorldPosition(o.toNode),i=o.getNodePosition(a),r=cc.instantiate(o.coinFlyNode);r.active=!0,r.getChildByName("goldPart").active=!1,r.setPosition(e),o.node.parent.addChild(r);var c=o.getRadiusPoint();a=.05*Math.abs(t-o.diceNumLength),cc.tween(r).set({scale:0}).delay(.1*t).call(function(){r.getChildByName("gold").getComponent(h.default).play("1Main_Coin1",0)}).to(.3,{scale:.6},{easing:cc.easing.backOut}).by(a,{x:c.x,y:c.y}).call(function(){r.getChildByName("goldPart").active=!0}).to(.3,{x:i.x,y:i.y},{easing:cc.easing.cubicOut}).call(function(){d.default.playAudioMusic("audio/sound/pop-fly-end.mp3",!1),r.destroy(),o.toNodeAnim(),n(),0==t&&o.parameter&&o.parameter.firstCallBack&&o.parameter.firstCallBack()},o).start()})]})})},f.prototype.random=function(t,e){return Math.floor(Math.random()*(e-t))+t},f.prototype.getRadiusPoint=function(){var t=this.random(40,80),e=this.random(0,t);return t=Math.sqrt(t*t-e*e),1==this.random(0,2)&&(e=-e),1==this.random(0,2)&&(t=-t),cc.v2(e,t)},f.prototype.getRandomPoint=function(){for(var t=[],e=0;e<this.diceNumLength;e++){var o=this.random(this.centerPoint.x-40,this.centerPoint.x+40),n=this.random(this.centerPoint.y-40,this.centerPoint.y+40);n=cc.v2(o,n),t.push(n)}return t.sort(function(t,e){return t.y-e.y}),t},f.prototype.toNodeAnim=function(){cc.Tween.stopAllByTarget(this.toNode),cc.tween(this.toNode).to(.1,{scale:1.5}).to(.1,{scale:1}).start()},f.prototype.getWorldPosition=function(t){return t.convertToWorldSpaceAR(cc.v2(0,0))},f.prototype.getNodePosition=function(t){return this.node.parent.convertToNodeSpaceAR(t)},f.prototype.getFlyTime=function(t,e){return Math.sqrt((e.x-this.node.x)*(e.x-this.node.x)+(e.y-this.node.y)*(e.y-this.node.y))/t},s([i({type:cc.Node,tooltip:"\u91d1\u5e01\u98de\u884c\u8282\u70b9"})],f.prototype,"coinFlyNode",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],"flying-item-pop-fish":[function(t,e,o){"use strict";cc._RF.push(e,"24b3aU5EKhEMYofjMDPEymV","flying-item-pop-fish");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(r,"__esModule",{value:!0});var u,d=a("audio"),h=a("GameManager");function f(){var t=null!==u&&u.apply(this,arguments)||this;return t.coinFlyNode=null,t.toNode=null,t.speed=500,t.diceNumLength=15,t.centerPoint=null,t.flyMiniNodeArr=[],t.parameter=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,u=cc.Component),f.prototype.start=function(){},f.prototype.flyTo=function(t,e,o){return l(this,void 0,Promise,function(){var n,a;return p(this,function(i){switch(i.label){case 0:this.toNode=t,this.parameter=e,h.default.getInstance().moneyDict&&h.default.getInstance().moneyDict.fish&&(a=Number(h.default.getInstance().moneyDict.fish),this.diceNumLength=a<1?this.diceNumLength:a),this.centerPoint=cc.v2(this.node.parent.width*(this.node.parent.anchorX-.5)*-1,this.node.parent.height*(this.node.parent.anchorY-.5)*-1),o&&this.getNodePosition(o),n=this.getRandomPoint(),d.default.playAudioMusic("audio/sound/fish-fly.mp3",!1),a=0,i.label=1;case 1:return a<this.diceNumLength?a!=this.diceNumLength-1?[3,3]:[4,this.addMiniCoin(a,n[a])]:[3,5];case 2:return i.sent(),e&&e.callBack&&e.callBack(),[3,4];case 3:this.addMiniCoin(a,n[a]),i.label=4;case 4:return a++,[3,1];case 5:return[2]}})})},f.prototype.addMiniCoin=function(t,e){return l(this,void 0,Promise,function(){var o=this;return p(this,function(){return[2,new Promise(function(n){var a=o.getWorldPosition(o.toNode),i=o.getNodePosition(a),r=cc.instantiate(o.coinFlyNode);r.active=!0,r.getChildByName("goldPart").active=!1,r.setPosition(e),o.node.parent.addChild(r);var c=o.getRadiusPoint();a=.05*Math.abs(t-o.diceNumLength),cc.tween(r).set({scale:0}).delay(.1*t).call(function(){r.getChildByName("gold").getComponent(cc.Animation).getAnimationState("fishAnimation").speed=2,r.getChildByName("gold").getComponent(cc.Animation).play()}).to(.3,{scale:.6},{easing:cc.easing.backOut}).by(a,{x:c.x,y:c.y}).call(function(){r.getChildByName("goldPart").active=!0}).to(.3,{x:i.x,y:i.y}).call(function(){d.default.playAudioMusic("audio/sound/pop-fly-end.mp3",!1),r.destroy(),o.toNodeAnim(),n(),0==t&&o.parameter&&o.parameter.firstCallBack&&o.parameter.firstCallBack()},o).start()})]})})},f.prototype.random=function(t,e){return Math.floor(Math.random()*(e-t))+t},f.prototype.getRadiusPoint=function(){var t=this.random(40,80),e=this.random(0,t);return t=Math.sqrt(t*t-e*e),1==this.random(0,2)&&(e=-e),1==this.random(0,2)&&(t=-t),cc.v2(e,t)},f.prototype.getRandomPoint=function(){for(var t=[],e=0;e<this.diceNumLength;e++){var o=this.random(this.centerPoint.x-40,this.centerPoint.x+40),n=this.random(this.centerPoint.y-40,this.centerPoint.y+40);n=cc.v2(o,n),t.push(n)}return t.sort(function(t,e){return t.y-e.y}),t},f.prototype.toNodeAnim=function(){cc.Tween.stopAllByTarget(this.toNode),cc.tween(this.toNode).to(.1,{scale:1.5}).to(.1,{scale:1}).start()},f.prototype.getWorldPosition=function(t){return t.convertToWorldSpaceAR(cc.v2(0,0))},f.prototype.getNodePosition=function(t){return this.node.parent.convertToNodeSpaceAR(t)},f.prototype.getFlyTime=function(t,e){return Math.sqrt((e.x-this.node.x)*(e.x-this.node.x)+(e.y-this.node.y)*(e.y-this.node.y))/t},s([i({type:cc.Node,tooltip:"\u91d1\u5e01\u98de\u884c\u8282\u70b9"})],f.prototype,"coinFlyNode",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],fontTipsLayer:[function(t,e,o){"use strict";cc._RF.push(e,"fddcdbtmuBJSauoEdki8uxT","fontTipsLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("enumConfig");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.tipsFontLabel=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){this.popNode.active=!1,cc.game.on(p.EMITKEY.SHOWMAINTIPS,this.showTips,this)},u.prototype.showTips=function(t){var e=this;this.popNode.stopAllActions(),this.popNode.active=!0,this.tipsFontLabel.string=t+"",this.popNode.y=-100,cc.tween(this.popNode).set({opacity:255}).to(.3,{y:0}).delay(1).to(.3,{opacity:0}).call(function(){e.popNode.active=!1},this).start()},s([i(cc.Node)],u.prototype,"popNode",void 0),s([i(cc.Label)],u.prototype,"tipsFontLabel",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],"game-top-ui":[function(t,e,o){"use strict";cc._RF.push(e,"011b2otLrtL36irPwLg72Hm","game-top-ui");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.cookieNode=null,t.cookieImg=null,t.cookieNum=null,t.cookiePrefab=null,t.cookieTrailing=null,t.cookieCurCount=0,t.cookieAllCount=0,t.goldBlockCoinCount=0,t.ribbonBoxCount=0,t}r(p,s=cc.Component),p.prototype.start=function(){},c([l(cc.Node)],p.prototype,"cookieNode",void 0),c([l(cc.Node)],p.prototype,"cookieImg",void 0),c([l(cc.Node)],p.prototype,"cookieNum",void 0),c([l(cc.Prefab)],p.prototype,"cookiePrefab",void 0),c([l(cc.Prefab)],p.prototype,"cookieTrailing",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],gameLayer:[function(t,e,o){"use strict";cc._RF.push(e,"4f0043pQOFO24XT2d3lGc3T","gameLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("audio"),h=a("mainLayer"),f=a("chessboard"),g=a("crushArea"),y=a("gameUiLayer"),m=a("moveOutArea"),v=a("spine"),b=a("enumConfig"),N=a("GameManager"),_=a("DateManager"),w=a("uma-sdk"),C=a("i18n"),P=a("gd_language"),S=a("native-bridge"),k=a("report-common"),D=a("data-manager"),A=a("api-sheep");function O(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainLayer=null,t.bgLayer=null,t.chessboard=null,t.crushArea=null,t.moveOutArea=null,t.uiLayer=null,t.gameTopUi=null,t.gameWin=null,t.gameNext=null,t.levelDataArray=null,t.gameIsWin=!1,t.popCallbackCollect=null,t.userData=null,t.playLevelNum=0,t.gameIsStop=!1,t.chessY=0,t.beginBGM=!1,t.timer=0,t.countdown=0,t}a=(i=cc._decorator).ccclass,i=i.property,c(O,l=cc.Component),O.prototype.onEnable=function(){cc.audioEngine.setMusicVolume(1),cc.game.setFrameRate(60),this.countdown=0,N.default.getInstance().playGameCount++;var t=_.default.format(b.CALENDARNAMES[6],new Date);N.default.getInstance().gameBeginDate=t},O.prototype.update=function(t){this.timer+=t,1<=this.timer&&0==this.gameIsStop&&(this.timer=0,this.countdown++)},O.prototype.start=function(){cc.game.on(b.EMITKEY.RESTARTNOWLEVEL,this.restartNowLevel,this),cc.game.on(b.EMITKEY.SHOWMAINLAYER,this.showMainLayer,this),cc.game.on(b.EMITKEY.GAMEOVERRESTART,this.gameOverRestartFunc,this),p.default.addbtnTouchStartScale(this.gameWin),p.default.addbtnTouchEndScale(this.gameWin,this.gameWinFunc.bind(this)),p.default.addbtnTouchCancelScale(this.gameWin),p.default.addbtnTouchStartScale(this.gameNext),p.default.addbtnTouchEndScale(this.gameNext,this.gameNextFunc.bind(this)),p.default.addbtnTouchCancelScale(this.gameNext),cc.sys.isBrowser?(this.gameWin.active=!0,this.gameNext.active=!0):(this.gameWin.active=!1,this.gameNext.active=!1)},O.prototype.onDisable=function(){this.chessY=0},O.prototype.adaptScreen=function(){var t=this;setTimeout(function(){N.default.getInstance().globalData.isFullScreen&&0==t.chessY&&400<t.chessboard.y&&(t.chessboard.y-=100,t.chessY=t.chessboard.y)},200),setTimeout(function(){t.onPointIsContains()},100),N.default.getInstance().gameType==b.GAMETYPE.GAMEDAILY?(this.bgLayer.color=new cc.Color(195,254,139),this.bgLayer.getChildByName("glassSP").getComponent(v.default).play("2Grass",0)):N.default.getInstance().gameType==b.GAMETYPE.GAMETOPIC&&(this.bgLayer.color=new cc.Color(65,167,143),this.bgLayer.getChildByName("glassSP").getComponent(v.default).play("2Grass2",0))},O.prototype.onPointIsContains=function(){this.chessboard.getBoundingBoxToWorld();for(var t=p.default.getWorldPosition(this.moveOutArea),e=this.chessboard.getBoundingBoxToWorld();e.contains(t);){if(this.chessboard.scale-=.05,this.chessboard.scale<.5){console.log("\u8d85\u51fa\u6700\u5c0fscale \u9000\u51fa ###### ");break}e=this.chessboard.getBoundingBoxToWorld(),console.log("\u6211\u5728\u8282\u70b9\u7684\u5185\u90e8 ###### ")}console.log("\u6211\u5728\u8282\u70b9\u7684\u5916\u90e8 ###### ",this.chessboard.scale)},O.prototype.gameNextFunc=function(){var t;this.playLevelNum<this.levelDataArray.length-1?this.playNextLevelMap():(cc.game.emit("showMainTips",C.default.instance.trans(P.GDLanguage.map_over)),N.default.getInstance().cookieDict.cookie+=12,(t=u.default.getCookieRewardData()).cookieNum=N.default.getInstance().cookieDict.cookie,u.default.setCookieRewardData(t))},O.prototype.initLevelLayer=function(t){for(var e in N.default.getInstance().coinNum=60,N.default.getInstance().levelWinDict.coin=0,N.default.getInstance().levelWinDict.cancel=0,N.default.getInstance().levelWinDict.remove=0,N.default.getInstance().levelWinDict.random=0,u.default.subLoveCount(1),console.log("\u5f53\u524d\u5173\u5361\u7c7b\u578b ###### = ",N.default.getInstance().gameType),N.default.getInstance().reportProperty)N.default.getInstance().reportProperty[e]=0;N.default.getInstance().reportProperty.challenge_count++,console.log("challenge_count = "+N.default.getInstance().reportProperty.challenge_count),this.playLevelNum=0;var o=(this.levelDataArray=t)[this.playLevelNum];this.gameIsWin=!1,this.node.active=!0,this.mainLayer.active=!1,this.gameIsStopFunc(!1),this.chessboard.getComponent(f.default).init(o,this),this.crushArea.getComponent(g.default).initCrushArea(this),this.moveOutArea.getComponent(m.default).initMoveOutArea(this),this.uiLayer.getComponent(y.default).initGameUi(t),0<this.levelDataArray.length&&this.uiLayer.getComponent(y.default).setLevelStage(this.playLevelNum),this.adaptScreen(),this.popCallbackCollect={continueCallBack:this.playNextLevel.bind(this),returnMainCallBack:this.showMainLayer.bind(this),rebornGameCallBack:this.rebornGameFunc.bind(this),giveUpCallBack:this.giveUpFunc.bind(this),restartCallBack:this.restartNowLevel.bind(this),resumeCallBack:this.resumeCallBackFunc.bind(this)},this.playGameBgMusic(),N.default.getInstance().gameType==b.GAMETYPE.GAMELEVEL?((t=u.default.getSprintRewardData()).isGameEd=1,u.default.setSprintRewardData(t),console.log("\u51b2\u523a\u5956\u52b1 = "+JSON.stringify(t))):N.default.getInstance().gameType==b.GAMETYPE.GAMEDAILY&&this.updateTodayWin(!1)},O.prototype.resumeCallBackFunc=function(){this.gameIsStopFunc(!1)},O.prototype.gameIsStopFunc=function(t){this.gameIsStop=t,this.uiLayer.getComponent(y.default).gameIsStopFunc(t)},O.prototype.playNextLevelMap=function(){var t="\u6bcf\u65e5\u6311\u6218";N.default.getInstance().gameType==b.GAMETYPE.GAMEDAILY?t="\u6bcf\u65e5\u6311\u6218":N.default.getInstance().gameType==b.GAMETYPE.GAMETOPIC&&(t="\u8bdd\u9898\u6311\u6218"),k.default.reportTACommon("level_2",{game_type:t}),this.playLevelNum+=1,t=this.levelDataArray[this.playLevelNum],this.gameIsWin=!1,this.gameIsStopFunc(!1),this.adaptScreen(),this.chessboard.getComponent(f.default).initNextLevelMap(t,this),this.uiLayer.getComponent(y.default).setLevelStage(this.playLevelNum),N.default.getInstance().todayState<0&&(N.default.getInstance().todayState=0,setTimeout(function(){cc.game.emit("showPop",{popName:"nextLevelPop",showPopData:{}})},1e3))},O.prototype.playNextLevel=function(){console.log("\u6253\u5f00\u4e0b\u4e00\u5173\u5361"),this.userData=u.default.getUserData();var t=this.userData.playLevelId;this.playLevelfunc(t)},O.prototype.restartNowLevel=function(){var t;console.log("\u91cd\u65b0\u5f00\u59cb\u672c\u5173\u5361 type = "+N.default.getInstance().gameType),this.countdown=0,this.gameIsStopFunc(!1),N.default.getInstance().gameType==b.GAMETYPE.GAMEDAILY||N.default.getInstance().gameType==b.GAMETYPE.GAMETOPIC?this.playNumberfunc():(this.userData=u.default.getUserData(),t=this.userData.playLevelId,this.playLevelfunc(t))},O.prototype.playLevelfunc=function(t){var e=this,o=_.default.format(b.CALENDARNAMES[4],new Date);!o||3<=(o=o.split("-")).length&&(t=Number(o[2])),u.default.getLevelByID(t,function(t){return t.length<1?(cc.game.emit("showMainTips",C.default.instance.trans(P.GDLanguage.level_inadequate)),void e.showMainLayer(b.GAMEOVER.NONE)):(cc.game.emit("closeAllPop"),void e.initLevelLayer(t))})},O.prototype.playNumberfunc=function(){var t;this.levelDataArray.length<1?this.showMainLayer(b.GAMEOVER.NONE):(cc.game.emit("closeAllPop"),N.default.getInstance().gameType!=b.GAMETYPE.GAMEDAILY&&N.default.getInstance().gameType!=b.GAMETYPE.GAMETOPIC||this.uiLayer.getComponent(y.default).recoverTime(1),(t=D.default.getGameLevelData())?(console.log("\u83b7\u53d6\u5173\u5361\u7f13\u5b58\u6570\u636e ###### "),this.initLevelLayer(t)):this.initLevelLayer(this.levelDataArray))},O.prototype.showSetUpLayer=function(){console.log("\u6253\u5f00\u8bbe\u7f6e\u9875\u9762");var t={popName:"setupPop",showPopData:{popCallbackCollect:this.popCallbackCollect,setupType:2}};cc.game.emit("showPop",t),this.gameIsStopFunc(!0)},O.prototype.showMainLayer=function(t){void 0===t&&(t=b.GAMEOVER.NONE),console.log("\u6253\u5f00\u4e3b\u9875\u9762 = "+t);var e=this;cc.game.emit(b.EMITKEY.SHOWTRANSITLAYER,function(o){console.log("\u53ef\u4ee5\u6253\u5f00\u4e86 gamelayer"),cc.game.emit("closeAllPop"),e.gameIsStopFunc(!0),e.mainLayer.getComponent(h.default).showMainLayer(t),e.node.active=!1,o()})},O.prototype.gameOverFunc=function(t){void 0===t&&(t=1),this.gameOverState(2),console.log("\u6e38\u620f\u5931\u8d25 failType = ",t),t={popName:"failPop",showPopData:{popCallbackCollect:this.popCallbackCollect,failType:t}},cc.game.emit("showPop",t),this.gameIsStopFunc(!0)},O.prototype.gameOverState=function(t){1==(N.default.getInstance().game_over=t)&&this.reportData(t)},O.prototype.gameOverRestartFunc=function(){this.reportData(2)},O.prototype.reportData=function(t){var e,o=this,n=1;for(e in N.default.getInstance().sheepMark){var a=N.default.getInstance().sheepMark[e];if(0<Number(a)){n=2;break}}for(var i=u.default.getSheepClothesData(),r=1,c=0;c<i.length;c++){var s=i[c];if(s.dressing){r=s.clothesId;break}}if(t={rank_score:1,rank_state:t,rank_time:this.countdown,rank_role:n,skin:r},console.log("parms = "+JSON.stringify(t),JSON.stringify(N.default.getInstance().sheepMark)),0==this.checkIsTodayWin())return console.log("checkIsTodayWin  gameover ######## false"),cc.game.emit(b.EMITKEY.SHOWMAINTIPS,"\u6bcf\u65e5\u5173\u5361\u5df2\u66f4\u65b0, \u5feb\u53bb\u6311\u6218\u4eca\u65e5\u5173\u5361\u5427"),void setTimeout(function(){o.showMainLayer(),cc.game.emit(b.EMITKEY.SHOWMODULE,b.MODULETYPE.COMMON)},1500);N.default.getInstance().gameType==b.GAMETYPE.GAMEDAILY?D.default.rankUserInfo&&1==D.default.rankUserInfo.state?console.log("\u6570\u636e\u91cd\u590d = ",JSON.stringify(D.default.rankUserInfo)):A.default.gameOver(t,function(){cc.game.emit(b.EMITKEY.GAMEOVERSUCCESS)}):N.default.getInstance().gameType==b.GAMETYPE.GAMETOPIC&&A.default.topicGameOver(t,function(){cc.game.emit(b.EMITKEY.GAMEOVERSUCCESS)})},O.prototype.checkIsTodayWin=function(){var t=_.default.format(b.CALENDARNAMES[6],new Date);return N.default.getInstance().gameEndDate=t,console.log("time ###### = ",N.default.getInstance().gameBeginDate,"------",N.default.getInstance().gameEndDate),N.default.getInstance().gameBeginDate==N.default.getInstance().gameEndDate?(console.log("\u8fdb\u5165\u6e38\u620f\u548c\u7ed3\u675f\u6e38\u620f\u65f6\u95f4\u76f8\u7b49 ###### "),!0):(console.log("\u8fdb\u5165\u6e38\u620f\u548c\u7ed3\u675f\u6e38\u620f\u65f6\u95f4\u4e0d\u76f8\u7b49\uff0c\u4e0d\u4e0a\u62a5\u6570\u636e ###### "),!1)},O.prototype.gameWinFunc=function(){if(this.gameOverState(1),this.uiLayer.getComponent(y.default).gameIsWin(),N.default.getInstance().gameType==b.GAMETYPE.GAMELEVEL){var t=u.default.gameConfigData.baseConfigData.sprintRewardLevel;if(u.default.getUserData().playLevelId>=t){var e=u.default.getSprintRewardData();e.winNum+=1,e.rewardProgress<3?(e.rewardProgress+=1,3==e.rewardProgress&&(e.winBox+=1)):e.rewardProgress=1,e.isGameEd=0,u.default.setSprintRewardData(e);var o=[3,6,9,12,15,25,50,100];for(r in o)if(e.winNum==o[r]){var n="richroad_level"+e.winNum,a={levelNum:a=u.default.getUserData().playLevelId+"",c_levelNum:Number(a)};w.default.trackEvent(n,a),console.log("\u8fde\u80dc ########",n,a);break}}this.userData=u.default.getUserData(),console.log("\u6e38\u620f\u83b7\u80dc\uff0c\u5173\u5361\u4e3a\uff1a",this.levelDataArray,this.userData.playLevelId);var i={af_level:this.userData.playLevelId};S.default.leitingReport("af_levels_achieved",i);var r,c=[10,20,30,40,50,60,70,80,90,100,120,150,200];for(r in c)if(this.userData.playLevelId==c[r]){var s={af_level:this.userData.playLevelId};S.default.leitingReport("af_level"+this.userData.playLevelId,s),console.log("af_level"+this.userData.playLevelId);break}this.crushArea.getComponent(g.default).hideCrushArea(),this.uiLayer.getComponent(y.default).removeGameUiBtn();var l=u.default.getRewardBoxData(this.userData.playLevelId);t=5<=this.userData.playLevelId,u.default.gameLevelWin(t,l),i=u.default.getCollectionUnlockData(),console.log("unlockObj:",i),t={popName:"winPop",showPopData:{popCallbackCollect:this.popCallbackCollect,winRewardObj:l,unlockObj:i,time:this.countdown}},cc.game.emit(b.EMITKEY.SHOWPOP,t),this.gameIsStopFunc(!0)}else N.default.getInstance().gameType==b.GAMETYPE.GAMEDAILY?(this.userData=u.default.getUserData(),l=u.default.getRewardBoxData(this.userData.playLevelId),u.default.gameLevelWin(!0,l),i=u.default.getCollectionUnlockData(),t={popName:"winPop",showPopData:{popCallbackCollect:this.popCallbackCollect,winRewardObj:l,unlockObj:i,time:this.countdown}},cc.game.emit(b.EMITKEY.SHOWPOP,t),this.crushArea.getComponent(g.default).hideCrushArea(),this.uiLayer.getComponent(y.default).removeGameUiBtn(),this.gameIsStopFunc(!0),this.updateTodayWin(!0)):N.default.getInstance().gameType==b.GAMETYPE.GAMETOPIC&&(t={popName:"winPop",showPopData:{popCallbackCollect:this.popCallbackCollect,time:this.countdown}},cc.game.emit(b.EMITKEY.SHOWPOP,t),this.crushArea.getComponent(g.default).hideCrushArea(),this.uiLayer.getComponent(y.default).removeGameUiBtn(),this.gameIsStopFunc(!0))},O.prototype.updateTodayWin=function(t){var e,o,n;console.log("isWin = ",t),0!=this.checkIsTodayWin()?(e=_.default.format(b.CALENDARNAMES[5],new Date),o=_.default.format(b.CALENDARNAMES[6],new Date),(n=u.default.getDailyData(e,o))?n.isWin=t:n={dailyID:o,isWin:t,unLimitVideo:0,sheepNum:-1},u.default.saveDailyData(e,o,n)):console.log("checkIsTodayWin update cache ######## false")},O.prototype.giveUpFunc=function(t){void 0===t&&(t=0),N.default.getInstance().gameType==b.GAMETYPE.GAMELEVEL&&(0<u.default.getSprintRewardData().winNum&&cc.game.emit("showPop",{popName:"sprintRewardPop",showPopData:{popCallbackCollect:null,popType:2}}),0<N.default.getInstance().cookieDict.cookieCurCount&&cc.game.emit("showPop",{popName:"loseCookiePop",showPopData:{popCallbackCollect:null,popType:0}})),t={popName:"loseLovePop",showPopData:{popCallbackCollect:this.popCallbackCollect,popType:t}},cc.game.emit("showPop",t),this.gameIsStopFunc(!0)},O.prototype.rebornGameFunc=function(){console.log("\u8fd9\u91cc\u6709\u4e2a\u770b\u89c6\u9891"),cc.game.emit("closeAllPop"),this.gameIsStopFunc(!1),N.default.getInstance().gameType==b.GAMETYPE.GAMEDAILY&&this.uiLayer.getComponent(y.default).recoverTime(),this.crushArea.getComponent(g.default).rebornGameFunc()},O.prototype.crushBlockNode=function(t){this.crushArea.getComponent("crushArea").addCrushAreaCardNode(t);var e=this.chessboard.getComponent(f.default).checkGameWin();t=this.moveOutArea.getComponent(m.default).checkGameWin(),e&&t&&(console.log("\u6e38\u620f\u80dc\u5229\uff01"),this.gameIsWin=!0,this.gameIsStopFunc(!0))},O.prototype.crushAnimateCallback=function(){this.gameIsWin&&(this.playLevelNum<this.levelDataArray.length-1?this.playNextLevelMap():this.gameWinFunc())},O.prototype.playGameBgMusic=function(){var t,e;u.default.getUserSetupData().musicStatus<0?cc.audioEngine.stopAll():0==this.beginBGM?(t=this,e="audio/music/game_begin.mp3",N.default.getInstance().gameType!=b.GAMETYPE.GAMEDAILY&&N.default.getInstance().gameType!=b.GAMETYPE.GAMETOPIC||(e="audio/music/game_begin.mp3"),cc.loader.loadRes(e,function(e,o){o=cc.audioEngine.playMusic(o,!1),cc.audioEngine.getCurrentTime(o),cc.audioEngine.getDuration(o),cc.audioEngine.setFinishCallback(o,function(){t.beginBGM=!0,console.log("\u64ad\u653e\u5b8c\u6210\u8fdb\u573a\u97f3\u4e50 ###### "),t.playBg()})})):this.playBg()},O.prototype.playBg=function(){d.default.playBGM()},s([i(cc.Node)],O.prototype,"mainLayer",void 0),s([i(cc.Node)],O.prototype,"bgLayer",void 0),s([i(cc.Node)],O.prototype,"chessboard",void 0),s([i(cc.Node)],O.prototype,"crushArea",void 0),s([i(cc.Node)],O.prototype,"moveOutArea",void 0),s([i(cc.Node)],O.prototype,"uiLayer",void 0),s([i(cc.Node)],O.prototype,"gameTopUi",void 0),s([i(cc.Node)],O.prototype,"gameWin",void 0),s([i(cc.Node)],O.prototype,"gameNext",void 0),a=s([a],O),r.default=a,cc._RF.pop()},{}],gameUiLayer:[function(t,e,o){"use strict";cc._RF.push(e,"91b87hBI4pAa6NOoAiPYA2X","gameUiLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("enumConfig"),h=a("audio"),f=a("sdk"),g=a("DateManager"),y=a("GameManager"),m=a("chessboard"),v=a("crushArea"),b=a("gameLayer"),N=a("prop-prefab"),_=a("uma-sdk"),w=a("report-common"),C=a("i18n"),P=a("gd_language"),S=a("data-manager");function k(){var t=null!==l&&l.apply(this,arguments)||this;return t.removeBtn=null,t.removeBg1=null,t.removeMask=null,t.removeNumLabel=null,t.removeVedio=null,t.cancelBtn=null,t.cancelBg1=null,t.cancelMask=null,t.cancelNumLabel=null,t.cancelVedio=null,t.randomBtn=null,t.randomBg1=null,t.randomMask=null,t.randomNumLabel=null,t.randomVedio=null,t.setUpBtn=null,t.moveOutArea=null,t.chessboardNode=null,t.crushArea=null,t.levelNode=null,t.levelNumLabel=null,t.stageOneNode=null,t.stageTwoNode=null,t.maskStage=null,t.propPrefab=null,t.paddingHeight=25,t.userData=null,t.isMoving=!1,t.timer=0,t.countdownOrogin=0,t.countdown=0,t.countdownAdd=60,t.gameIsStop=!1,t.popCallbackCollect=null,t.getPropType=0,t}a=(i=cc._decorator).ccclass,i=i.property,c(k,l=cc.Component),k.prototype.start=function(){p.default.addbtnTouchStartScale(this.removeBtn),p.default.addbtnTouchEndScale(this.removeBtn,this.removeEndFunc.bind(this)),p.default.addbtnTouchCancelScale(this.removeBtn),p.default.addbtnTouchStartScale(this.cancelBtn),p.default.addbtnTouchEndScale(this.cancelBtn,this.cancelEndFunc.bind(this)),p.default.addbtnTouchCancelScale(this.cancelBtn),p.default.addbtnTouchStartScale(this.randomBtn),p.default.addbtnTouchEndScale(this.randomBtn,this.randomEndFunc.bind(this)),p.default.addbtnTouchCancelScale(this.randomBtn),p.default.addbtnTouchStartScale(this.setUpBtn),p.default.addbtnTouchEndScale(this.setUpBtn,this.setUpEndFunc.bind(this)),p.default.addbtnTouchCancelScale(this.setUpBtn),this.popCallbackCollect={buyCallBack:this.buyCallBackFunc.bind(this),freeCallBack:this.freeCallBackFunc.bind(this),exitCallBack:this.exitCallBackFunc.bind(this)}},k.prototype.exitCallBackFunc=function(){this.gameIsStopFunc(!1)},k.prototype.setTimeByLevel=function(t,e){e>(t=t.timeArray).length?cc.game.emit("showMainTips",C.default.instance.trans(P.GDLanguage.level_inadequate)):(e=t[e-1],this.countdown=e,this.countdownOrogin=e,console.log("countdowm = "+e),this.updateTime(this.countdown))},k.prototype.update=function(t){y.default.getInstance().gameType==d.GAMETYPE.GAMEDAILY&&0==this.gameIsStop&&(this.timer+=t,1<=this.timer&&(this.timer=0,this.countdown--,this.updateTime(this.countdown)))},k.prototype.updateTime=function(){},k.prototype.gameIsWin=function(){var t,e,o;y.default.getInstance().gameType==d.GAMETYPE.GAMELEVEL?(0<y.default.getInstance().levelWinDict.remove&&(t=y.default.getInstance().levelWinDict.remove+"",_.default.trackEvent("game_finish_skill_1",{num:t,c_num:Number(t)})),0<y.default.getInstance().levelWinDict.cancel&&(e=y.default.getInstance().levelWinDict.cancel+"",_.default.trackEvent("game_finish_skill_2",{num:e,c_num:Number(e)})),0<y.default.getInstance().levelWinDict.random&&(o=y.default.getInstance().levelWinDict.random+"",_.default.trackEvent("game_finish_skill_3",{num:o,c_num:Number(o)}))):(o=(e=this.countdown<=0?0:this.countdown)+"",y.default.getInstance().reportProperty.dailyWin_time_remaining=e,_.default.trackEvent("daily_finishtime",{remainTime:o,c_remainTime:Number(o)}))},k.prototype.gameIsStopFunc=function(t){this.gameIsStop=t},k.prototype.recoverTime=function(t){void 0===t&&(t=0),this.countdown<=0&&(this.countdown=this.countdownAdd),1==t&&(this.countdown=this.countdownOrogin),this.updateTime(this.countdown)},k.prototype.initGameUi=function(t){for(var e in this.userData=u.default.getUserData(),this.userData.prop_cancel=0,this.userData.prop_random=0,this.userData.prop_remove=0,u.default.saveUserData(this.userData),y.default.getInstance().sheepMark)y.default.getInstance().sheepMark[e]=0;this.isMoving=!1;var o=this.removeBtn.height+this.paddingHeight,n=-(cc.winSize.height/2+this.removeBtn.height/2);this.removeBtn.y=n,this.cancelBtn.y=n,this.randomBtn.y=n,cc.tween(this.removeBtn).by(.4,{y:o}).start(),cc.tween(this.cancelBtn).by(.4,{y:o}).start(),cc.tween(this.randomBtn).by(.4,{y:o}).start(),this.setGameLayerUiData(),1<t.length?this.stageTwoNode.active=!0:this.stageTwoNode.active=!1,this.stageOneNode.active=!1},k.prototype.setLevelStage=function(t){var e;0==t?this.stageOneNode.active=!1:1==t&&(this.stageOneNode.active=!0),this.levelNode.active=!0,y.default.getInstance().gameType==d.GAMETYPE.GAMEDAILY?g.default.format(d.CALENDARNAMES[4],g.default.getInstance().selDate).split("-").length<3||(e=cc.sys.localStorage.getItem("unlocklevel11111")||"0",e=Number.parseInt(e),this.levelNumLabel.string="\u7b2c"+(e+1)+"\u5173"):this.levelNode.active=!0},k.prototype.setGameLayerUiData=function(){var t=cc.sys.localStorage.getItem("unlocklevel11111")||"0";t=Number.parseInt(t),this.levelNumLabel.string="\u7b2c"+(t+1)+"\u5173",this.userData=u.default.getUserData(),g.default.format(d.CALENDARNAMES[4],g.default.getInstance().selDate).split("-").length<3||(1<=this.userData.prop_remove?(this.removeNumLabel.string=""+this.userData.prop_remove,this.removeNumLabel.node.active=!0,this.removeBg1.active=!0,this.removeVedio.active=!1,this.removeMask.active=!1):(this.removeNumLabel.node.active=!1,this.removeVedio.active=!0,1<=y.default.getInstance().sheepMark.propRemoveCount?(this.removeMask.active=!0,this.removeBg1.active=!1):(this.removeMask.active=!1,this.removeBg1.active=!0)),1<=this.userData.prop_cancel?(this.cancelNumLabel.string=""+this.userData.prop_cancel,this.cancelNumLabel.node.active=!0,this.cancelBg1.active=!0,this.cancelVedio.active=!1,this.cancelMask.active=!1):(this.cancelNumLabel.node.active=!1,this.cancelVedio.active=!0,1<=y.default.getInstance().sheepMark.propCancelCount?(this.cancelMask.active=!0,this.cancelBg1.active=!1):(this.cancelMask.active=!1,this.cancelBg1.active=!0)),1<=this.userData.prop_random?(this.randomNumLabel.string=""+this.userData.prop_random,this.randomNumLabel.node.active=!0,this.randomBg1.active=!0,this.randomVedio.active=!1,this.randomMask.active=!1):(this.randomNumLabel.node.active=!1,this.randomVedio.active=!0,1<=y.default.getInstance().sheepMark.propRandomCount?(this.randomMask.active=!0,this.randomBg1.active=!1):(this.randomMask.active=!1,this.randomBg1.active=!0)))},k.prototype.removeGameUiBtn=function(){var t=this;console.log("\u79fb\u9664\u6309\u94ae ###### "),this.isMoving=!0,this.removeBtn.height,this.paddingHeight;var e=-(cc.winSize.height/2+this.removeBtn.height);cc.tween(this.removeBtn).to(.4,{y:e}).start(),cc.tween(this.cancelBtn).to(.4,{y:e}).start(),cc.tween(this.randomBtn).to(.4,{y:e}).call(function(){t.isMoving=!1},this).start()},k.prototype.setUpEndFunc=function(){this.node.parent.getComponent(b.default).showSetUpLayer()},k.prototype.removeEndFunc=function(){var t;this.isMoving||(this.removeMask.activeInHierarchy?cc.game.emit(d.EMITKEY.SHOWMAINTIPS,"\u6bcf\u5173\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\u54e6"):1<=this.userData.prop_remove?this.crushArea.getComponent(v.default).moveOutBlock()&&(h.default.playAudioMusic("audio/sound/moveOut.mp3",!1),this.userData.prop_remove--,y.default.getInstance().reportProperty.remove_use++,y.default.getInstance().sheepMark.propRemoveCount++,0==y.default.getInstance().reportProperty.remove_ad&&console.log("\u4f7f\u7528\u521d\u59cb\u9053\u5177 ###### propRemove"),(t=S.default.getTAUserInfo()).item_name="\u79fb\u51fa\u9053\u5177",w.default.reportTACommon("prop_initial",t),u.default.saveUserData(this.userData),this.setGameLayerUiData(),y.default.getInstance().levelWinDict.remove+=1,this.userData.prop_remove):(console.log("\u79fb\u51fa\u9053\u5177\u4e0d\u8db3"),this.showPropPop(1,60)))},k.prototype.cancelEndFunc=function(){var t;this.cancelMask.activeInHierarchy?cc.game.emit(d.EMITKEY.SHOWMAINTIPS,"\u6bcf\u5173\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\u54e6"):1<=this.userData.prop_cancel?this.crushArea.getComponent(v.default).cancelOneStep()&&(h.default.playAudioMusic("audio/sound/moveOut.mp3",!1),this.userData.prop_cancel--,y.default.getInstance().reportProperty.cancel_use++,y.default.getInstance().sheepMark.propCancelCount++,0==y.default.getInstance().reportProperty.cancel_ad&&console.log("\u4f7f\u7528\u521d\u59cb\u9053\u5177 ###### propCancel"),(t=S.default.getTAUserInfo()).item_name="\u64a4\u9500\u9053\u5177",w.default.reportTACommon("prop_initial",t),u.default.saveUserData(this.userData),this.setGameLayerUiData(),y.default.getInstance().levelWinDict.cancel+=1,this.userData.prop_cancel):(console.log("\u64a4\u9500\u9053\u5177\u4e0d\u8db3"),this.showPropPop(2,20))},k.prototype.randomEndFunc=function(){var t;this.isMoving||(this.randomMask.activeInHierarchy?cc.game.emit(d.EMITKEY.SHOWMAINTIPS,"\u6bcf\u5173\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\u54e6"):1<=this.userData.prop_random?(t=this.chessboardNode.getComponent(m.default).updateBlockArea(),console.log("isOk ###### ",t),t&&(h.default.playAudioMusic("audio/sound/random.mp3",!1),this.userData.prop_random--,y.default.getInstance().reportProperty.random_use++,y.default.getInstance().sheepMark.propRandomCount++,0==y.default.getInstance().reportProperty.random_ad&&console.log("\u4f7f\u7528\u521d\u59cb\u9053\u5177 ###### propRandom"),(t=S.default.getTAUserInfo()).item_name="\u6d17\u724c\u9053\u5177",w.default.reportTACommon("prop_initial",t),u.default.saveUserData(this.userData),this.setGameLayerUiData(),y.default.getInstance().levelWinDict.random+=1,this.userData.prop_random)):(console.log("\u6d17\u724c\u9053\u5177\u4e0d\u8db3"),this.showPropPop(3,10)))},k.prototype.buyCallBackFunc=function(t,e){console.log("coin = "+e),this.userData=u.default.getUserData(),this.userData.coin>=e?(this.userData.coin-=e,y.default.getInstance().levelWinDict.coin+=e,this.showTipPop(t,1),y.default.getInstance().gameType==d.GAMETYPE.GAMELEVEL&&_.default.trackEvent("game_skill_buy",{coinNum:e+="",c_coinNum:Number(e)}),this.userData.coin):cc.game.emit("showMainTips",C.default.instance.trans(P.GDLanguage.coin_inadequate))},k.prototype.freeCallBackFunc=function(t){var e=this;if(this.getPropType=t,console.log("type = "+t),f.default.isPlatform(f.Platform.wx)){var o=S.default.getPropData(),n=0;if(y.default.getInstance().gameType==d.GAMETYPE.GAMEDAILY?1==t?n=o.daily.prop_remove:2==t?n=o.daily.prop_cancel:3==t&&(n=o.daily.prop_random):y.default.getInstance().gameType==d.GAMETYPE.GAMETOPIC&&(1==t?n=o.topic.prop_remove:2==t?n=o.topic.prop_cancel:3==t&&(n=o.topic.prop_random)),0<n)return void e.shareTTAction(t);if("shareValue"==f.default.wxValue)return void e.shareTTAction(t)}n=u.default.GetVedioID(),f.default.watchAdVideo({id:n,success:function(){console.log("\u6210\u529f sdk"),cc.game.emit(d.EMITKEY.CLOSEALLPOP),e.showTipPop(t,2),y.default.getInstance().gameType==d.GAMETYPE.GAMELEVEL&&_.default.trackEvent("game_skill_ad")},fail:function(t){console.log("\u5931\u8d25 ###### = ",t),e.gameIsStopFunc(!1)},nofit:function(){e.shareTTAction(t)}})},k.prototype.shareTTAction=function(t){var e,o,n=this;f.default.isPlatform(f.Platform.wx)?(o=u.default.GetVedioID(),e=u.default.getUserData().openid,f.default.share(e,o,function(){n.shareCbMethod(),n.updateShareCount(t)},function(){cc.game.emit(d.EMITKEY.SHOWMAINTIPS,"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5fae\u4fe1\u7fa4\u4e0e\u597d\u53cbPK")})):f.default.isPlatform(f.Platform.tt)&&(o={popName:"shareNodePop",showPopData:{type:2,shareCb:this.shareCbMethod.bind(this)}},cc.game.emit("showPop",o))},k.prototype.updateShareCount=function(t){var e=S.default.getPropData();y.default.getInstance().gameType==d.GAMETYPE.GAMEDAILY?1==t?e.daily.prop_remove--:2==t?e.daily.prop_cancel--:3==t&&e.daily.prop_random--:y.default.getInstance().gameType==d.GAMETYPE.GAMETOPIC&&(1==t?e.topic.prop_remove--:2==t?e.topic.prop_cancel--:3==t&&e.topic.prop_random--),S.default.setPropData(e)},k.prototype.shareCbMethod=function(){console.log("\u5206\u4eab\u6210\u529f ######"),cc.game.emit(d.EMITKEY.CLOSEALLPOP),this.showTipPop(this.getPropType,3)},k.prototype.showTipPop=function(t,e){var o="",n=null,a="";1==t?(o=C.default.instance.trans(P.GDLanguage.props_remove_claim),n=this.removeBtn,a="\u79fb\u51fa\u9053\u5177",this.userData.prop_remove=1,this.userData.prop_remove,1==e?y.default.getInstance().reportProperty.remove_buy++:2==e&&y.default.getInstance().reportProperty.remove_ad++):2==t?(o=C.default.instance.trans(P.GDLanguage.props_cancel_claim),n=this.cancelBtn,a="\u64a4\u9500\u9053\u5177",this.userData.prop_cancel=1,this.userData.prop_cancel,1==e?y.default.getInstance().reportProperty.cancel_buy++:2==e&&y.default.getInstance().reportProperty.cancel_ad++):3==t&&(o=C.default.instance.trans(P.GDLanguage.props_random_claim),n=this.randomBtn,a="\u6d17\u724c\u9053\u5177",this.userData.prop_random=1,this.userData.prop_random,1==e?y.default.getInstance().reportProperty.random_buy++:2==e&&y.default.getInstance().reportProperty.random_ad++);var i="\u6bcf\u65e5\u6311\u6218";y.default.getInstance().gameType==d.GAMETYPE.GAMEDAILY?i="\u6bcf\u65e5\u6311\u6218":y.default.getInstance().gameType==d.GAMETYPE.GAMETOPIC&&(i="\u8bdd\u9898\u6311\u6218"),2==e?w.default.reportTACommon("game_skill_ad",{item_name:a,game_type:i}):3==e&&w.default.reportTACommon("game_skill_share",{item_name:a,game_type:i}),u.default.saveUserData(this.userData),this.setGameLayerUiData(),cc.game.emit("showMainTips",o),(o=cc.instantiate(this.propPrefab)).getComponent(N.default).showWithType(t,n,this.movePropFunc.bind(this)),this.node.addChild(o),this.node.setSiblingIndex(20)},k.prototype.movePropFunc=function(){this.gameIsStopFunc(!1)},k.prototype.showPropPop=function(t,e){this.gameIsStopFunc(!0),e={popName:"getPropPop",showPopData:{popCallbackCollect:this.popCallbackCollect,popType:t,coinNum:e}},cc.game.emit("showPop",e)},s([i(cc.Node)],k.prototype,"removeBtn",void 0),s([i(cc.Node)],k.prototype,"removeBg1",void 0),s([i(cc.Node)],k.prototype,"removeMask",void 0),s([i(cc.Label)],k.prototype,"removeNumLabel",void 0),s([i(cc.Node)],k.prototype,"removeVedio",void 0),s([i(cc.Node)],k.prototype,"cancelBtn",void 0),s([i(cc.Node)],k.prototype,"cancelBg1",void 0),s([i(cc.Node)],k.prototype,"cancelMask",void 0),s([i(cc.Label)],k.prototype,"cancelNumLabel",void 0),s([i(cc.Node)],k.prototype,"cancelVedio",void 0),s([i(cc.Node)],k.prototype,"randomBtn",void 0),s([i(cc.Node)],k.prototype,"randomBg1",void 0),s([i(cc.Node)],k.prototype,"randomMask",void 0),s([i(cc.Label)],k.prototype,"randomNumLabel",void 0),s([i(cc.Node)],k.prototype,"randomVedio",void 0),s([i(cc.Node)],k.prototype,"setUpBtn",void 0),s([i(cc.Node)],k.prototype,"moveOutArea",void 0),s([i(cc.Node)],k.prototype,"chessboardNode",void 0),s([i(cc.Node)],k.prototype,"crushArea",void 0),s([i(cc.Node)],k.prototype,"levelNode",void 0),s([i(cc.Label)],k.prototype,"levelNumLabel",void 0),s([i(cc.Node)],k.prototype,"stageOneNode",void 0),s([i(cc.Node)],k.prototype,"stageTwoNode",void 0),s([i(cc.Node)],k.prototype,"maskStage",void 0),s([i(cc.Prefab)],k.prototype,"propPrefab",void 0),a=s([a],k),r.default=a,cc._RF.pop()},{}],gd_language:[function(t,e,o){"use strict";cc._RF.push(e,"82e75ge7rlLCb24BwrY9eZO","gd_language");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.GDLanguage=void 0,(n=n.GDLanguage||(n.GDLanguage={})).main_screen="1",n.leaderboard="2",n.daily_challenge="3",n.collect="4",n.level_1="5",n.coin_more="6",n.claim_level="7",n.life_more="8",n.life_countdown="9",n.life_more_play="10",n.life_full="11",n.life_1="12",n.unlock_all="13",n.set_up="14",n.set_up_sound_effect="15",n.set_up_music="16",n.set_up_shock="17",n.set_up_contact_service="18",n.set_up_id="19",n.set_up_share="20",n.game_version="21",n.fully="22",n.upgrade_coin="23",n.coin_inadequate="24",n.upgrade="25",n.daily_play="26",n.daily_start="27",n.win_frequency="28",n.collect_title="29",n.wallpaper="30",n.wallpaper_dinner="31",n.wallpaper_lighthouse="32",n.wallpaper_lazy_time="33",n.wallpaper_waiting_alone="34",n.wallpaper_meteor_shower="35",n.wallpaper_quiet_night="36",n.wallpaper_road="37",n.wallpaper_snow="38",n.wallpaper_starry="39",n.wallpaper_commuter_road="40",n.wallpaper_moon="41",n.wallpaper_stay_tuned="42",n.block_bricks="43",n.block_remove="44",n.block_cancel="45",n.block_random="46",n.props_get="47",n.props_buy="48",n.props_free="49",n.chest_level_treasure="50",n.chest_journey="51",n.continue="52",n.pop_claim="53",n.playing_continue="54",n.version_view="55",n.not_enough_space="56",n.time_over="57",n.give_up="58",n.pop_sure="59",n.life_lose="60",n.props_remove_claim="61",n.draw_back="62",n.withdraw="63",n.put_recent="64",n.props_disrupt="65",n.shuffle_unused="66",n.revive_remove="67",n.challenge_unlocked_level="68",n.pop_restart="69",n.pop_quit="70",n.life_run_out="71",n.streak_award="72",n.streak_lose="73",n.challenge_pass="74",n.function_1="75",n.home_return="76",n.pop_player="77",n.life_more_2="78",n.full_1="79",n.pop_stacked="80",n.not_unlocked="81",n.level_new_tomorrow="82",n.level_inadequate="83",n.life_inadequate="84",n.video_see="85",n.map_over="86",n.props_remove_inadequate="87",n.props_cancel_inadequate="88",n.props_random_inadequate="89",n.props_random_claim="90",n.share_fail="91",n.coin_claim_play="92",n.life_full_play="93",n.sprint_level_3="94",n.game_continue="95",n.life_full_already="96",n.tomorrow_play="97",n.more_time="98",n.life_lose_ed="99",n.lose_cookies="100",n.resurrection="101",n.collect_cookie="102",n.ok_title="103",n.wallpaper_harbour="104",n.wallpaper_lamp="105",n.props_cancel_claim="106",cc._RF.pop()},{}],getLovePop:[function(t,e,o){"use strict";cc._RF.push(e,"ed619JcknNAHJiwu50VgegD","getLovePop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("CcJsFunc"),h=a("dataTs"),f=a("util"),g=a("uma-sdk");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.getLoveBtn=null,t.closeBtn=null,t.titleLabel=null,t.getLoveDescLabel=null,t.getLoveTimeLabel=null,t.descLabel=null,t.receiveLabel=null,t.popNode=null,t.showPopData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(y,l=cc.Component),y.prototype.start=function(){d.default.addbtnTouchStartScale(this.getLoveBtn),d.default.addbtnTouchEndScale(this.getLoveBtn,this.getLoveFunc.bind(this)),d.default.addbtnTouchCancelScale(this.getLoveBtn),d.default.addbtnTouchStartScale(this.closeBtn),d.default.addbtnTouchEndScale(this.closeBtn,this.hideGetLovePop.bind(this)),d.default.addbtnTouchCancelScale(this.closeBtn),this.titleLabel.string=u.default.instance.trans(p.GDLanguage.life_more),this.getLoveDescLabel.string=u.default.instance.trans(p.GDLanguage.life_countdown),this.descLabel.string=u.default.instance.trans(p.GDLanguage.life_more_play),this.receiveLabel.string=u.default.instance.trans(p.GDLanguage.life_1)},y.prototype.showGetLovePop=function(t){this.node.active=!0,this.showPopData=t,console.log("\u83b7\u5f97\u7231\u5fc3\u5f39\u7a97",this.showPopData),cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start();var e=h.default.updateLoveTime();0==e?this.getLoveTimeLabel.string="play":(e=(t=f.default.formatTime(e))[2]<10?"0"+t[2]:t[2]+"",t=t[3]<10?"0"+t[3]:t[3]+"",this.getLoveTimeLabel.string=e+":"+t)},y.prototype.getLoveFunc=function(){},y.prototype.hideGetLovePop=function(){this.node.active=!1,g.default.trackEvent("life_refuse")},s([i(cc.Node)],y.prototype,"getLoveBtn",void 0),s([i(cc.Node)],y.prototype,"closeBtn",void 0),s([i(cc.Label)],y.prototype,"titleLabel",void 0),s([i(cc.Label)],y.prototype,"getLoveDescLabel",void 0),s([i(cc.Label)],y.prototype,"getLoveTimeLabel",void 0),s([i(cc.Label)],y.prototype,"descLabel",void 0),s([i(cc.Label)],y.prototype,"receiveLabel",void 0),s([i(cc.Node)],y.prototype,"popNode",void 0),a=s([a],y),r.default=a,cc._RF.pop()},{}],getPropPop:[function(t,e,o){"use strict";cc._RF.push(e,"5d202skrZlNSY1om5DswGw5","getPropPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("CcJsFunc"),h=a("dataTs"),f=a("enumConfig"),g=a("sdk"),y=a("data-manager"),m=a("GameManager"),v=a("report-common");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.mask=null,t.closeBtn=null,t.freePropBtn=null,t.popNode=null,t.titleLabel=null,t.descLabel=null,t.buyLabel=null,t.freeLabel=null,t.freeDescLabel=null,t.propImage=null,t.noBlockBtn=null,t.noWhiteBtn=null,t.beginBtn=null,t.freeBtnVideo=null,t.beginBtnVideo=null,t.timeNode=null,t.showPopData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(b,l=cc.Component),b.prototype.start=function(){d.default.addbtnTouchEndScale(this.mask,this.maskBtnFunc.bind(this)),d.default.addbtnTouchStartScale(this.closeBtn),d.default.addbtnTouchEndScale(this.closeBtn,this.closeBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.closeBtn),d.default.addbtnTouchStartScale(this.noBlockBtn),d.default.addbtnTouchEndScale(this.noBlockBtn,this.noBlockBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.noBlockBtn),d.default.addbtnTouchStartScale(this.noWhiteBtn),d.default.addbtnTouchEndScale(this.noWhiteBtn,this.noWhiteBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.noWhiteBtn),d.default.addbtnTouchStartScale(this.freePropBtn),d.default.addbtnTouchEndScale(this.freePropBtn,this.freePropBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.freePropBtn),d.default.addbtnTouchStartScale(this.beginBtn),d.default.addbtnTouchEndScale(this.beginBtn,this.beginBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.beginBtn)},b.prototype.maskBtnFunc=function(){4!=this.showPopData.popType&&5!=this.showPopData.popType&&(this.node.active=!1)},b.prototype.closeBtnFunc=function(){this.node.active=!1,this.showPopData&&this.showPopData.popCallbackCollect&&this.showPopData.popCallbackCollect.exitCallBack()},b.prototype.noBlockBtnFunc=function(){this.node.active=!1,4==this.showPopData.popType?cc.game.emit("showPop",{popName:"failPop",showPopData:{popCallbackCollect:null,failType:2}}):5==this.showPopData.popType&&cc.game.emit(f.EMITKEY.SHOWMAINLAYER)},b.prototype.noWhiteBtnFunc=function(){this.node.active=!1,4!=this.showPopData.popType&&5!=this.showPopData.popType||cc.game.emit(f.EMITKEY.SHOWMAINLAYER)},b.prototype.freePropBtnFunc=function(){console.log("beginBtnFunc ### unLimitVideo = "+m.default.getInstance().unLimitVideo),4==this.showPopData.popType&&1<=m.default.getInstance().sheepMark.resurgenceCount?cc.game.emit(f.EMITKEY.SHOWMAINTIPS,"\u65e0\u590d\u6d3b\u673a\u4f1a"):(this.showPopData&&this.showPopData.popCallbackCollect&&this.showPopData.popCallbackCollect.freeCallBack(this.showPopData.popType),this.updateWxUI())},b.prototype.beginBtnFunc=function(){if(console.log("beginBtnFunc ### unLimitVideo = "+m.default.getInstance().unLimitVideo),m.default.getInstance().unLimitVideo)return cc.game.emit(f.EMITKEY.RESTARTNOWLEVEL),v.default.reportTACommon("challenge_again",{}),void(this.node.active=!1);if(6==this.showPopData.popType)return this.showPopData&&this.showPopData.popCallbackCollect&&this.showPopData.popCallbackCollect.freeCallBack(this.showPopData.popType),void(this.node.active=!1);var t=this,e=h.default.GetVedioID();g.default.watchAdVideo({id:e,success:function(){cc.game.emit(f.EMITKEY.RESTARTNOWLEVEL),v.default.reportTACommon("challenge_again",{}),t.node.active=!1},fail:function(){console.log("\u5931\u8d25")},nofit:function(){t.shareTTAction()}})},b.prototype.shareTTAction=function(){var t,e,o=this;g.default.isPlatform(g.Platform.wx)?(e=h.default.GetVedioID(),t=h.default.getUserData().openid,g.default.share(t,e,function(){o.shareCbMethod()},function(){cc.game.emit(f.EMITKEY.SHOWMAINTIPS,"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5fae\u4fe1\u7fa4\u4e0e\u597d\u53cbPK")})):g.default.isPlatform(g.Platform.tt)&&(e={popName:"shareNodePop",showPopData:{type:2,shareCb:this.shareCbMethod.bind(this)}},cc.game.emit("showPop",e))},b.prototype.shareCbMethod=function(){console.log("\u5206\u4eab\u6210\u529f ######"),cc.game.emit(f.EMITKEY.RESTARTNOWLEVEL),v.default.reportTACommon("challenge_again_share",{}),this.node.active=!1},b.prototype.showGetPropPop=function(t){this.node.active=!0,this.showPopData=t,this.noBlockBtn.active=!1,this.noWhiteBtn.active=!0,this.closeBtn.active=!0,this.freePropBtn.active=!0,this.beginBtn.active=!1,this.beginBtnVideo.active=!0,this.noWhiteBtn.getChildByName("label").getComponent(cc.Label).string="\u4e0d,\u8c22\u8c22",cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start();var e,o=t.popType,n="",a="";t="Buy props",this.freeLabel.string="\u83b7\u5f97",this.updateWxUI(),1==o?(n="rewardIcon/prop_remove.png",t="\u79fb\u51fa\u9053\u5177",a=u.default.instance.trans(p.GDLanguage.draw_back),(e=1-m.default.getInstance().sheepMark.propRemoveCount)<0&&(e=0),this.freeDescLabel.string="("+e+"/1)"):2==o?(n="rewardIcon/prop_cancel.png",t="\u64a4\u56de\u9053\u5177",a=u.default.instance.trans(p.GDLanguage.put_recent),(e=1-m.default.getInstance().sheepMark.propCancelCount)<0&&(e=0),this.freeDescLabel.string="("+e+"/1)"):3==o?(n="rewardIcon/prop_random.png",t="\u6d17\u724c\u9053\u5177",a=u.default.instance.trans(p.GDLanguage.shuffle_unused),(e=1-m.default.getInstance().sheepMark.propRandomCount)<0&&(e=0),this.freeDescLabel.string="("+e+"/1)"):4==o?(n="rewardIcon/prop_life_remove.png",t="\u590d\u6d3b\u5417?",a="\u590d\u6d3b\u5e76\u4f7f\u7528\u79fb\u51fa\u9053\u5177",this.noBlockBtn.active=!0,this.noWhiteBtn.active=!1,this.closeBtn.active=!1,this.freeLabel.string="\u590d\u6d3b",console.log(m.default.getInstance().sheepMark.resurgenceCount),(e=1-m.default.getInstance().sheepMark.resurgenceCount)<0&&(e=0),this.freeDescLabel.string="("+e+"/1)"):5==o?(this.closeBtn.active=!(t="\u518d\u6b21\u6311\u6218"),this.freeDescLabel.string="",this.freeLabel.string="\u91cd\u65b0\u6311\u6218",this.noWhiteBtn.getChildByName("label").getComponent(cc.Label).string="\u8fd4\u56de\u7f8a\u7fa4",a="\u89c2\u770b\u89c6\u9891\uff0c\u4ee5\u83b7\u5f971\u6b21\n\u989d\u5916\u7684\u6311\u6218\u673a\u4f1a\u3002",this.freePropBtn.active=!(n="rewardIcon/prop_life_one.png"),this.beginBtn.active=!0,m.default.getInstance().unLimitVideo?(this.beginBtnVideo.active=!1,a="\u5df2\u83b7\u5f97\u65e0\u9650\u6b21\u6570\u6311\u6218\n\u8d76\u7d27\u8bd5\u8bd5\u5427",n="rewardIcon/prop_nolimit.png"):this.beginBtnVideo.active=!0):6==o&&(t="\u518d\u6b21\u6311\u6218",this.freeDescLabel.string="",this.freeLabel.string="\u6311\u6218\u4e00\u6b21",this.noWhiteBtn.getChildByName("label").getComponent(cc.Label).string="\u4e0d,\u8c22\u8c22",a="\u89c2\u770b\u89c6\u9891\uff0c\u4ee5\u83b7\u5f971\u6b21\n\u989d\u5916\u7684\u6311\u6218\u673a\u4f1a\u3002",this.freePropBtn.active=!(n="rewardIcon/prop_life_one.png"),this.beginBtn.active=!0),d.default.changeSpriteFrame(this.propImage,n),this.descLabel.string=a,this.titleLabel.string=t},b.prototype.updateWxUI=function(){var t,e,o=this.showPopData.popType;h.default.isPlatform(h.GDPlatform.wx)&&(t=y.default.getPropData(),console.log("propData = ",t),e=0,m.default.getInstance().gameType==f.GAMETYPE.GAMEDAILY?1==o?e=t.daily.prop_remove:2==o?e=t.daily.prop_cancel:3==o&&(e=t.daily.prop_random):m.default.getInstance().gameType==f.GAMETYPE.GAMETOPIC&&(1==o?e=t.topic.prop_remove:2==o?e=t.topic.prop_cancel:3==o&&(e=t.topic.prop_random)),0<e||"shareValue"==g.default.wxValue?d.default.changeSpriteFrame(this.freeBtnVideo,"rewardIcon/reward_share_black.png"):d.default.changeSpriteFrame(this.freeBtnVideo,"rewardIcon/reward_video_block.png"),y.default.setPropData(t))},s([i(cc.Node)],b.prototype,"mask",void 0),s([i(cc.Node)],b.prototype,"closeBtn",void 0),s([i(cc.Node)],b.prototype,"freePropBtn",void 0),s([i(cc.Node)],b.prototype,"popNode",void 0),s([i(cc.Label)],b.prototype,"titleLabel",void 0),s([i(cc.Label)],b.prototype,"descLabel",void 0),s([i(cc.Label)],b.prototype,"buyLabel",void 0),s([i(cc.Label)],b.prototype,"freeLabel",void 0),s([i(cc.Label)],b.prototype,"freeDescLabel",void 0),s([i(cc.Node)],b.prototype,"propImage",void 0),s([i(cc.Node)],b.prototype,"noBlockBtn",void 0),s([i(cc.Node)],b.prototype,"noWhiteBtn",void 0),s([i(cc.Node)],b.prototype,"beginBtn",void 0),s([i(cc.Node)],b.prototype,"freeBtnVideo",void 0),s([i(cc.Node)],b.prototype,"beginBtnVideo",void 0),s([i(cc.Node)],b.prototype,"timeNode",void 0),a=s([a],b),r.default=a,cc._RF.pop()},{}],giftLayerAnimate:[function(t,e,o){"use strict";cc._RF.push(e,"fb227UOAFRM+a9fREJ/Svyr","giftLayerAnimate");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("brickSubPrefab"),h=a("wallpaperSubPrefab"),f=a("rewardPrefab"),g=a("CcJsFunc"),y=a("dataTs"),m=a("audio"),v=a("spine");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.maskNode=null,t.lightBg=null,t.titleNode=null,t.gift1Node=null,t.gift2Node=null,t.getBtn=null,t.getBtnLabel=null,t.giftBg=null,t.rewardPrefab=null,t.brickSubPrefab=null,t.wallpaperSubPrefab=null,t.rewardNodeArray=[],t.rewardData=null,t.collectionItem=null,t.ribbonBoxData=null,t.btnCb=null,t.collectionCb=null,t.ribbonCb=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(b,l=cc.Component),b.prototype.start=function(){g.default.addbtnTouchStartScale(this.getBtn),g.default.addbtnTouchEndScale(this.getBtn,this.btnEndFunc.bind(this)),g.default.addbtnTouchCancelScale(this.getBtn),this.getBtnLabel.string=u.default.instance.trans(p.GDLanguage.pop_claim)},b.prototype.showRewardLayer=function(t,e,o,n,a,i){if(this.rewardData=t,this.collectionItem=e,this.ribbonBoxData=o,this.node.active=!0,this.titleNode.active=!1,this.gift1Node.active=!1,this.giftBg.active=!1,this.lightBg.active=!1,this.getBtn.scale=0,this.rewardNodeArray=[],this.btnCb=n,this.collectionCb=a,this.ribbonCb=i,t){console.log("\u91d1\u5e01\u5956\u52b1",JSON.stringify(t));for(var r=0;r<2;r++)(c=cc.instantiate(this.rewardPrefab)).x=0,c.y=0,c.scale=0,c.getComponent(f.default).setRewardNode(this.rewardData[r]),this.rewardNodeArray.push(c),this.node.addChild(c);this.playGift1Anim()}else if(e)console.log("\u6536\u85cf\u5956\u52b1"),i=e.wallpaper,t=e.brick,e=y.default.getPictureData(),0<i&&((i=cc.instantiate(this.wallpaperSubPrefab)).x=0,i.y=0,i.scale=0,i.getComponent(h.default).rewardNodeData(e.bgNum),this.rewardNodeArray.push(i),this.node.addChild(i)),0<t&&((t=cc.instantiate(this.brickSubPrefab)).x=0,t.y=0,t.scale=0,t.getComponent(d.default).rewardNodeData(e.brickNum),this.rewardNodeArray.push(t),this.node.addChild(t)),this.playGift2Anim();else if(o){for(console.log("Ribbon\u5956\u52b1",JSON.stringify(o)),r=0;r<o.length;r++){var c;(c=cc.instantiate(this.rewardPrefab)).x=0,c.y=0,c.scale=0,c.getComponent(f.default).setRewardNode(o[r]),this.rewardNodeArray.push(c),this.node.addChild(c)}this.playGift3Anim()}else console.log("\u6682\u65e0\u5956\u52b1")},b.prototype.playGift1Anim=function(){var t=this;t.gift1Node.active=!0,t.gift1Node.getComponent(v.default).setFrameEventCb("Open1",function(){m.default.playAudioMusic("audio/sound/Open1.mp3",!1)}),t.gift1Node.getComponent(v.default).setFrameEventCb("Eff_Sheen1",function(){t.titleNode.active=!0,m.default.playAudioMusic("audio/sound/Words1.mp3",!1),t.titleNode.getComponent(v.default).play("Award1_Words1",1),cc.tween(t.giftBg).to(.3,{scale:1.5}).call(function(){cc.tween(t.giftBg).by(40,{angle:360}).repeatForever().start()},t).start()}),t.gift1Node.getComponent(v.default).setFrameEventCb("Treasure1",function(){t.giftBg.active=!0,cc.tween(t.giftBg).by(40,{angle:360}).repeatForever().start(),t.playRewardNode()}),t.gift1Node.getComponent(v.default).play("Ref1_Open1",1)},b.prototype.playGift2Anim=function(){var t=this;this.gift1Node.active=!0,this.gift1Node.getComponent(v.default).setFrameEventCb("Open1",function(){console.log("1"),m.default.playAudioMusic("audio/sound/Open1.mp3",!1)}),this.gift1Node.getComponent(v.default).setFrameEventCb("Eff_Sheen1",function(){t.titleNode.active=!0,m.default.playAudioMusic("audio/sound/Words2.mp3",!1),t.titleNode.getComponent(v.default).play("Award1_Words4",1),cc.tween(t.lightBg).to(.3,{scale:1.5}).call(function(){cc.tween(t.lightBg).by(40,{angle:360}).repeatForever().start()},t).start()}),this.gift1Node.getComponent(v.default).setFrameEventCb("Treasure1",function(){console.log("3"),t.lightBg.active=!0,cc.tween(t.lightBg).by(40,{angle:360}).repeatForever().start(),t.playCollectionNode()}),this.gift1Node.getComponent(v.default).play("Ref1_Open2",1,function(){console.log("4")})},b.prototype.playGift3Anim=function(){var t=this;this.gift1Node.active=!0,this.gift1Node.getComponent(v.default).setFrameEventCb("Open1",function(){console.log("1"),m.default.playAudioMusic("audio/sound/Open1.mp3",!1)}),this.gift1Node.getComponent(v.default).setFrameEventCb("Eff_Sheen1",function(){t.titleNode.active=!0,m.default.playAudioMusic("audio/sound/Words1.mp3",!1),t.titleNode.getComponent(v.default).play("Award1_Words1",1),cc.tween(t.lightBg).to(.3,{scale:1.5}).call(function(){cc.tween(t.lightBg).by(40,{angle:360}).repeatForever().start()},t).start()}),this.gift1Node.getComponent(v.default).setFrameEventCb("Treasure1",function(){console.log("3"),t.lightBg.active=!0,cc.tween(t.lightBg).by(40,{angle:360}).repeatForever().start(),t.playRibbonAnimationNode()}),this.gift1Node.getComponent(v.default).play("Ref1_Open5",1,function(){console.log("4")})},b.prototype.btnEndFunc=function(){this.getBtn.stopAllActions();for(var t=0;t<this.rewardNodeArray.length;t++)this.rewardNodeArray[t].destroy();this.rewardNodeArray=[],this.node.active=!1,!this.btnCb||this.collectionItem||this.ribbonBoxData?this.collectionItem?(this.collectionCb&&this.collectionCb(),console.log("collectionCb")):this.ribbonBoxData?(this.ribbonCb&&this.ribbonCb(),console.log("ribbonCb")):console.log("else"):(console.log("btnCb"),this.btnCb())},b.prototype.playAnimationFloat=function(t,e){var o=this;cc.tween(t).by(1,{y:e}).call(function(){o.playAnimationFloat(t,-e)}).start()},b.prototype.playRewardNode=function(){var t=this;cc.tween(this.rewardNodeArray[0]).to(.1,{scale:1.4,x:-150}).to(.1,{scale:1}).to(.1,{scale:1.2}).to(.1,{scale:1}).start(),cc.tween(this.rewardNodeArray[1]).delay(.1).to(.1,{scale:1.4,x:150}).to(.1,{scale:1}).call(function(){cc.tween(t.getBtn).to(.1,{scale:1.3}).to(.1,{scale:1}).start()},this).to(.1,{scale:1.2}).to(.1,{scale:1}).start()},b.prototype.playCollectionNode=function(){var t=this;0<this.collectionItem.wallpaper&&cc.tween(this.rewardNodeArray[0]).to(.1,{scale:1.4,y:200}).to(.1,{scale:1}).to(.1,{scale:1.2}).to(.1,{scale:1}).call(function(){t.playAnimationFloat(t.rewardNodeArray[0],10),cc.tween(t.getBtn).to(.1,{scale:1.3}).to(.1,{scale:1}).start()}).start(),0<this.collectionItem.brick&&cc.tween(this.rewardNodeArray[0]).to(.1,{scale:1.4,y:200}).to(.1,{scale:1}).to(.1,{scale:1.2}).to(.1,{scale:1}).call(function(){t.playAnimationFloat(t.rewardNodeArray[0],10),cc.tween(t.getBtn).to(.1,{scale:1.3}).to(.1,{scale:1}).start()}).start()},b.prototype.playRibbonAnimationNode=function(){var t=this;if(console.log(this.rewardNodeArray.length),4<=this.rewardNodeArray.length)for(var e=this,o=0;o<this.rewardNodeArray.length;o++)!function(o){cc.tween(e.rewardNodeArray[o]).delay(.1).to(.1,{scale:1,x:o%2*240-120,y:250+-200*Math.floor(o/2)}).to(.1,{scale:.8}).to(.1,{scale:1}).to(.1,{scale:.8}).call(function(){t.playAnimationFloat(t.rewardNodeArray[o],10),cc.tween(t.getBtn).to(.1,{scale:1.3}).to(.1,{scale:1}).start()}).start()}(o);else 1==this.rewardNodeArray.length&&cc.tween(this.rewardNodeArray[0]).to(.1,{scale:1.4,y:200}).to(.1,{scale:1}).to(.1,{scale:1.2}).to(.1,{scale:1}).call(function(){t.playAnimationFloat(t.rewardNodeArray[0],10),cc.tween(t.getBtn).to(.1,{scale:1.3}).to(.1,{scale:1}).start()}).start()},s([i(cc.Node)],b.prototype,"maskNode",void 0),s([i(cc.Node)],b.prototype,"lightBg",void 0),s([i(cc.Node)],b.prototype,"titleNode",void 0),s([i(cc.Node)],b.prototype,"gift1Node",void 0),s([i(cc.Node)],b.prototype,"gift2Node",void 0),s([i(cc.Node)],b.prototype,"getBtn",void 0),s([i(cc.Label)],b.prototype,"getBtnLabel",void 0),s([i(cc.Node)],b.prototype,"giftBg",void 0),s([i(cc.Prefab)],b.prototype,"rewardPrefab",void 0),s([i(cc.Prefab)],b.prototype,"brickSubPrefab",void 0),s([i(cc.Prefab)],b.prototype,"wallpaperSubPrefab",void 0),a=s([a],b),r.default=a,cc._RF.pop()},{}],houseLayer:[function(t,e,o){"use strict";cc._RF.push(e,"cba24z/7chDBLdHt1z34v1a","houseLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("enumConfig");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainCultivateLayer=null,t.wardrobeLayer=null,t.touchStartPoint=null,t.pointLength=0,t.scaleCoef=.05*.05,t.touchNum=0,t.maxScale=1,t.moveBigScale=1.5,t.disLength=50,t.oldPosit=null,t.oldScale=1,t.changeClothes=null,t}c(d,l=cc.Component),d.prototype.start=function(){this.node.on("touchstart",this.touchStartFunc,this),this.node.on("touchmove",this.touchMoveFunc,this),this.node.on("touchend",this.touchEndFunc,this),this.node.on("touchcancel",this.touchCancelFunc,this),this.changeClothes=this.wardrobeLayer.getChildByName("changeClothes")},d.prototype.moveWithRoomId=function(t){var e=this.node.width*this.node.scale/2-cc.winSize.width/2,o=0;t==u.ROOMTYPE.ROOMONE?o=0:t==u.ROOMTYPE.ROOMTWO?o=-e:t==u.ROOMTYPE.ROOMTHREE&&(o=e),cc.tween(this.node).to(.3,{x:o,y:0}).start()},d.prototype.toBigMiddle=function(t){this.oldPosit=this.node.position,this.oldScale=this.node.scale;var e=t.convertToWorldSpaceAR(cc.v2(0,0));t=cc.winSize.width/2-e.x,e=cc.winSize.height/2-this.disLength-e.y,t=(this.node.x+t)*this.moveBigScale,e=(this.node.y+e)*this.moveBigScale,cc.tween(this.node).to(.3,{x:t,y:e,scale:this.moveBigScale},{easing:cc.easing.cubicOut}).start()},d.prototype.toMinDefault=function(){this.oldPosit&&cc.tween(this.node).to(.2,{x:this.oldPosit.x,y:this.oldPosit.y,scale:this.oldScale}).start(),this.oldPosit=null},d.prototype.touchStartFunc=function(t){t=t.getLocation(),this.touchStartPoint=t,this.pointLength=0,this.touchNum++},d.prototype.touchMoveFunc=function(t){var e,o;this.changeClothes.activeInHierarchy?console.log("changeClothes \u5b58\u5728\u4e0d\u8d70\u6ed1\u52a8\u903b\u8f91"):1==t.getTouches().length?(this.moveActionFunc(t.getLocation()),this.touchStartPoint=t.getLocation()):2==t.getTouches().length&&(this.touchStartPoint=t.getLocation(),e=t.getTouches()[0].getLocation(),o=t.getTouches()[1].getLocation(),0==this.pointLength?this.pointLength=e.sub(o).mag():(e=(t=e.sub(o).mag())-this.pointLength,o=Math.abs(e),0!=e&&1<o&&(this.scaleNode(e),this.pointLength=t)))},d.prototype.touchEndFunc=function(){this.touchNum--,this.pointLength=0},d.prototype.touchCancelFunc=function(){this.touchNum--},d.prototype.scaleNode=function(t){var e,o,n=null;0<t?(o=this.maxScale,this.node.scale<o&&(n=(n=this.node.scale+this.scaleCoef*t)>o?o:n)):(e=1,this.node.x<0&&(e=-1),(o=this.node.width*this.node.scale/2)<Math.abs(this.node.x)+cc.winSize.width/2&&(this.node.x=e*(o-cc.winSize.width/2)),e=1,this.node.y<0&&(e=-1),(o=this.node.height*this.node.scale/2)<Math.abs(this.node.y)+cc.winSize.height/2&&(this.node.y=e*(o-cc.winSize.height/2)),1<this.node.scale&&(n=(n=this.node.scale+this.scaleCoef*t)<1?1:n)),null!=n&&(this.node.scale=n)},d.prototype.moveActionFunc=function(t){var e=t.x-this.touchStartPoint.x;t=t.y-this.touchStartPoint.y,this.node.x=this.node.x+e,this.node.y=this.node.y+t,e=this.node.width*this.node.scale/2-cc.winSize.width/2,t=this.node.height*this.node.scale/2-cc.winSize.height/2,this.node.x<-e&&(this.node.x=-e),this.node.x>e&&(this.node.x=e),this.node.y<-t&&(this.node.y=-t),this.node.y>t&&(this.node.y=t)},s([p(cc.Node)],d.prototype,"mainCultivateLayer",void 0),s([p(cc.Node)],d.prototype,"wardrobeLayer",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],http:[function(t,e,o){"use strict";cc._RF.push(e,"0c9d6/yg2FJlZ/64VA6Vfe9","http");var n=t,a=o,i=function(){return(i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},r=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},c=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(a,"__esModule",{value:!0}),a.Method=void 0;var s,l=n("query-string");function p(){}(n=s=a.Method||(a.Method={})).OPTIONS="OPTIONS",n.GET="GET",n.HEAD="HEAD",n.POST="POST",n.PUT="PUT",n.DELETE="DELETE",n.TRACE="TRACE",n.CONNECT="CONNECT",p.requestBefore=function(t){this.requestBeforeFunc=t},p.queryString=function(t){var e,o="?",n=!1;for(e in t)n?o+="&":n=!0,o+=e+"="+t[e];return o},p.get=function(t){return r(this,void 0,Promise,function(){var e,o,n,a,i;return c(this,function(r){switch(r.label){case 0:return t.baseParams.t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2OTQyNDg4NzMsIm5iZiI6MTY2MzE0NjY3MywiaWF0IjoxNjYzMTQ0ODczLCJqdGkiOiJDTTpjYXRfbWF0Y2g6bHQxMjM0NTYiLCJvcGVuX2lkIjoiIiwidWlkIjoxNDk4NjcyLCJkZWJ1ZyI6IiIsImxhbmciOiIifQ.QTjxTKWEmU3GDPgwCZv5XOQP9XrrEKEns-AgXJgE8i8",e=t.host,o=t.url,n=t.params,a=t.baseParams,i=t.header,i={method:s.GET,url:e+o,params:n,baseParams:a,header:i,success:t.success,fail:t.fail},[4,this.requestSync(i)];case 1:return[2,r.sent()]}})})},p.post=function(t){return r(this,void 0,Promise,function(){var e,o,n,a,i,r,l,p,u,d;return c(this,function(c){switch(c.label){case 0:if(e=t.host,o=t.url,n=t.params,a=t.baseParams,i=t.data,r=t.header,d=t.type,l={},"file"==d){for(u in p=new FormData,i)p.append(u,i[u]);l=p}else l=i;return d={method:s.POST,url:e+o,data:l,params:n,baseParams:a,header:r,type:d,success:t.success,fail:t.fail},[4,this.requestSync(d)];case 1:return[2,c.sent()]}})})},p.wxRequest=function(t){wx.request({url:t.url+this.queryString(t.params),data:t.data,method:t.method,header:i({},t.header),success:function(e){t.success&&t.success(e.data)},fail:function(e){t.fail&&t.fail(e)}})},p.h5Request=function(t){var e=t.success,o=t.fail,n=t.type,a=t.contentType||t.header["Content-type"]||"";try{var r=t.method,c="",s=null,p=i(i({},t.baseParams),t.params);"POST"===r?s="file"==n?(c=t.url+this.queryString(p),t.data):(c=t.url+this.queryString(p),""==a&&(a="application/x-www-form-urlencoded"),l.stringify(t.data)):c=t.url+this.queryString(i(i({},t.data),p));var u=t.timeout||0,d=new XMLHttpRequest;0<u&&(d.timeout=u),d.onreadystatechange=function(){if(4==d.readyState)if(200<=d.status&&d.status<400){var t={},n="";try{t=JSON.parse(d.responseText)}catch(t){n=t}""==n?e&&e(t):o&&o(n)}else o&&o("status: "+d.status)},d.open(r,c,!0),a&&d.setRequestHeader("Content-Type",a),d.send(s),d.ontimeout=function(){o&&o("request timeout"),console.log("%c>> %c\u8fde\u63a5\u8d85\u65f6 %c<<","color:red","color:purple","color:red")},d.onerror=function(t){console.warn("request error",t),o&&o(t)}}catch(t){console.warn("request err",t),o&&o(t)}},p.request=function(t){(t=this.requestBeforeFunc?this.requestBeforeFunc(t):t).header=t.header?i(i({},t.baseParams),t.header):t.baseParams,cc.sys.platform==cc.sys.WECHAT_GAME?this.wxRequest(t):this.h5Request(t)},p.requestSync=function(t){var e=this;return new Promise(function(o,n){var a=t.success,r=t.fail;try{e.request(i(i({},t),{success:function(t){a&&a(t),o(t)},fail:function(t){r&&r(t),n(t)}}))}catch(t){r&&r(t),n(t)}})},p.requestBeforeFunc=null,a.default=n=p,cc._RF.pop()},{}],i18n:[function(t,e,o){"use strict";cc._RF.push(e,"1f5a5kEJdNJPatq/K4Gvl0i","i18n");var n=t,a=o,i=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},r=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},c=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),a=0;for(e=0;e<o;e++)for(var i=arguments[e],r=0,c=i.length;r<c;r++,a++)n[a]=i[r];return n};Object.defineProperty(a,"__esModule",{value:!0});var s=n("dataTs"),l=n("enumConfig"),p=n("str-utils"),u=["en","id","zh","ar","hi","sp","ru"],d=[];function h(){this._landCodeDefault=l.LangEnum.zhCN,this._langMap=null,this._langCode=l.LangEnum.zhCN}Object.defineProperty(h,"instance",{get:function(){return this._instance||(this._instance=new h),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"langCode",{get:function(){return this._langCode},enumerable:!1,configurable:!0}),h.prototype.getLanguageCode=function(){var t,e=cc.sys.languageCode.toLowerCase();console.log("\u5f53\u524d\u7cfb\u7edf\u8bed\u8a00\u7801\uff1a",e),e=(e=e&&0!=e.length?e:this._landCodeDefault).toLowerCase().replace("-","_"),!(-1<d.indexOf(e))&&0<(t=e.indexOf("_"))?(t=e.substring(0,t),-1<u.indexOf(t)&&(this._langCode=t)):this._langCode=e,console.log("\u5b9e\u9645\u4f7f\u7528\u8bed\u8a00\u7801\uff1a",this._langCode),s.default.langCode=this._langCode,this._langMap={}},h.prototype.init=function(){return i(this,void 0,Promise,function(){var t=this;return r(this,function(){return this.getLanguageCode(),[2,new Promise(function(e){cc.assetManager.loadBundle(cc.resources.name,function(o,n){o||n.load("data/gd_language",cc.JsonAsset,function(o,a){if(!o){var i,r=a.json;for(i in r){var c=r[i];t._langMap[i]=c[t.langCode]&&0<c[t.langCode].length?c[t.langCode]:c[t._landCodeDefault]}n.release("data/gd_language",cc.JsonAsset),e()}})})})]})})},h.prototype.trans=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=this._langMap[t];if(n)return p.default.formatStr.apply(p.default,c([n],e));console.error("!!!\u9519\u8bef\u7ffb\u8bd1\u952e\u503c\uff1a",t)},h._instance=null,n=h,a.default=n,cc._RF.pop()},{}],"key-map":[function(t,e,o){"use strict";cc._RF.push(e,"197c5Ibx59IfbkkbvaEx9/i","key-map");var n,a=o,i=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},r=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};function c(){}Object.defineProperty(a,"__esModule",{value:!0}),c.onKeyDown=function(t,e,o){t=""+this.getCharCode(t),this.downList[t]||(this.downList[t]=[]),o&&(e=e.bind(o)),this.downList[t].push(e)},c.onKeyUp=function(t,e,o){t=""+this.getCharCode(t),this.upList[t]||(this.upList[t]=[]),o&&(e=e.bind(o)),this.upList[t].push(e)},c.onKeyDownWithMeta=function(t,e){var o="meta";o=this.getCharCode(t)+"+"+(cc.sys.os==cc.sys.OS_WINDOWS?"ctrl":o),this.downList[o]||(this.downList[o]=[]),this.downList[o].push(e)},c.onKeyDownWithCtrl=function(t,e){t=this.getCharCode(t)+"+ctrl",this.downList[t]||(this.downList[t]=[]),this.downList[t].push(e)},c.keyDown=function(t){var e=t.keyCode;this.funcKey(e,!0),t=""+e,this.isMetaDown&&(t=e+"+meta"),this.isCtrlDown&&(t=e+"+ctrl"),this.downList[t]&&this.downList[t].forEach(function(t){t&&t()})},c.keyUp=function(t){return i(this,void 0,Promise,function(){var e,o;return r(this,function(){return e=t.keyCode,o=""+e,this.funcKey(e,!1),this.upList[o]&&this.upList[o].forEach(function(t){t&&t()}),[2]})})},c.funcKey=function(t,e){return i(this,void 0,Promise,function(){return r(this,function(){return this.updateFuncKey(t,e),[2]})})},c.updateFuncKey=function(t,e){18==t?this.isAltDown=e:16==t?this.isShiftDown=e:91==t?this.isMetaDown=e:17==t&&(this.isCtrlDown=e)},c.isTrue=function(t){return t?"\u2705":"\u274c"},c.print=function(){this.isTrue(this.isAltDown),this.isTrue(this.isShiftDown),this.isTrue(this.isCtrlDown),this.isTrue(this.isMetaDown)},c.getCharCode=function(t){return t.toUpperCase().charCodeAt(0)},c.downList={},c.upList={},c.isMetaDown=!1,c.isCtrlDown=!1,c.isAltDown=!1,c.isShiftDown=!1,c.funcKeyUpDelayTimer=0,a.default=n=c,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,n.keyDown,n),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,n.keyUp,n),cc._RF.pop()},{}],loadCanvas:[function(t,e,o){"use strict";cc._RF.push(e,"29c5c6pohNMuIwinCm1KXPJ","loadCanvas");var n,a,i=t,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("dataTs"),p=i("enumConfig"),u=i("DateManager"),d=i("network-tool");function h(){return null!==s&&s.apply(this,arguments)||this}i=(a=cc._decorator).ccclass,a.property,c(h,s=cc.Component),h.prototype.start=function(){var t=u.default.format(p.CALENDARNAMES[8],new Date);console.log("monthKey = ",t)},h.prototype.insertAllMap=function(){var t;l.default.loadJsonData("data/map_ids",function(e){t=e,console.log("maps = "+e.length);for(var o=0;o<t.length;o++)l.default.getOriginLevelMapData(t[o],function(t){var e;t&&(console.log("push=>",t.data.map_id),e=t.data.map_id,t=t.data.map_data,d.default.setLevelMapData(e,t))})})},i=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r}([i],h),r.default=i,cc._RF.pop()},{}],loadLayer:[function(t,e,o){"use strict";cc._RF.push(e,"4d645A+CV5DRYYMx0geEXPK","loadLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(){return(s=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},l=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},p=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},u=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(r,"__esModule",{value:!0}),cc.macro.CLEANUP_IMAGE_CACHE=!1,cc.dynamicAtlasManager.enabled=!0;var d,h=a("i18n"),f=a("CcJsFunc"),g=a("dataTs"),y=a("native-bridge"),m=a("native-def"),v=a("native-event"),b=a("share"),N=a("sdk"),_=a("spine"),w=a("player-head-atlas"),C=a("GameManager"),P=a("report-common"),S=a("register-head-image"),k=a("uma-sdk");function D(){var t=null!==d&&d.apply(this,arguments)||this;return t.bgLayer=null,t.loadProgressBar=null,t.descNode=null,t.userNode=null,t.privacyNode=null,t.chooseNode=null,t.chooseBg=null,t.beginNode=null,t.tipsNode=null,t.arrowBgBase=null,t.userNodeBase=null,t.loadNum=0,t.loadOverNum=2,t.initX=250,t.initY=-60,t.progressCurrent=0,t.progressAll=2,t.sceneLoadEd=!1,t.loginStatusEd=!1,t}a=(i=cc._decorator).ccclass,i=i.property,c(D,d=cc.Component),D.prototype.update=function(t){this.isNeedLogin()&&!this.loginStatusEd||this.progressAction(t)},D.prototype.progressAction=function(t){this.progressCurrent+=t,this.progressCurrent<=this.progressAll?this.loadProgressBar.progress=this.progressCurrent/this.progressAll:this.progressCurrent>this.progressAll&&(this.loadProgressBar.progress=1,this.loadNum>=this.loadOverNum&&!this.sceneLoadEd&&(console.log("PUSH=>\u52a0\u8f7d\u6210\u529f update"),this.getInfoMainScene()))},D.prototype.start=function(){var t;cc.game.on(v.NativeEvent.LeitingGetDeviceInfo,this.leitingGetDeviceInfo,this),cc.game.on(v.NativeEvent.LeitingLoginInfo,this.onLeitingLoginInfo,this),cc.game.on(v.NativeEvent.LeitingLoginErr,this.onLeitingLoginErr,this),this.bgLayer.getChildByName("sp").getComponent(_.default).play("2Grass",0),this.isNeedLogin()?(this.descNode.active=!0,t=cc.sys.localStorage.getItem("gameloading"),console.log("loading = ",t),t?(this.beginNode.active=!1,this.arrowBgBase.active=!1,this.userNodeBase.active=!1,this.loginStatusEd=!0):(this.beginNode.active=!0,this.arrowBgBase.active=!0,this.userNodeBase.active=!0)):this.descNode.active=!1,C.default.getInstance().initData(),this.loadNum=0,this.loadMainScene(),b.default.init(),this.loadCfg(),w.default.instance.init(2048,2048,100),S.registerHeadImgLoader(),f.default.addbtnTouchOriginEndScale(this.userNode,this.userNodeFunc.bind(this)),f.default.addbtnTouchOriginEndScale(this.privacyNode,this.privacyNodeFunc.bind(this)),f.default.addbtnTouchOriginEndScale(this.chooseBg,this.chooseBgFunc.bind(this)),f.default.addbtnTouchOriginEndScale(this.beginNode,this.beginNodeFunc.bind(this)),this.tipsNode.active=!1},D.prototype.userNodeFunc=function(){console.log("\u7528\u6237\u534f\u8bae")},D.prototype.privacyNodeFunc=function(){console.log("\u9690\u79c1\u653f\u7b56")},D.prototype.chooseBgFunc=function(){this.chooseNode.active=!this.chooseNode.active,console.log("\u9009\u62e9 = ",this.chooseNode.activeInHierarchy)},D.prototype.beginNodeFunc=function(){var t=this;if(console.log("\u5f00\u59cb\u6e38\u620f = ",this.chooseNode.activeInHierarchy),!this.chooseNode.activeInHierarchy)return this.tipsNode.active=!0,void setTimeout(function(){t.tipsNode.active=!1},2e3);cc.sys.localStorage.setItem("gameloading","gameloading"),this.loginStatusEd=!0,this.loadCfg()},D.prototype.leitingGetDeviceInfo=function(){var t=g.default.getUserData();t&&t.userID&&0<t.userID.length&&y.default.callNative(m.NativeFun.publicParamsInfo,{userId:t.userID}),y.default.deviceInfo&&(t={androidid:y.default.deviceInfo.androidId,chennal:"310001",gameCode:"59"},y.default.leitingReport("af_before_login",t))},D.prototype.onLeitingLoginInfo=function(){this.loginStatusEd=!0,this.loadJson(),P.default.reportTACommon("login",{login_type:"\u6b63\u5e38\u767b\u5f55"}),y.default.loginInfo&&(y.default.loginInfo.userId,y.default.media);var t,e={};y.default.deviceInfo&&(t=g.default.getUserData(),e={androidid:y.default.deviceInfo.androidId,chennal:"310001",gameCode:"59",userId:t.userID,type:2,roldId:y.default.deviceInfo.gaid});var o={};y.default.loginInfo&&(t=g.default.getUserData(),o={loginType:"1",chennal:y.default.loginInfo.channelNo,gameCode:"59",userId:t.userID,type:2,serviceName:"\u6d77\u5916\u6d4b\u8bd5\u670d",serviceId:"1",loginMode:"1",playLevelId:t.playLevelId}),o=s(s({},e),o),y.default.leitingReport("af_login",o)},D.prototype.onLeitingLoginErr=function(){this.loginStatusEd=!0,this.loadJson()},D.prototype.loadCfg=function(){return p(this,void 0,Promise,function(){return u(this,function(t){switch(t.label){case 0:return[4,h.default.instance.init()];case 1:return t.sent(),this.isNeedLogin()&&!this.loginStatusEd||this.loadJson(),[2]}})})},D.prototype.isNeedLogin=function(){return!!(N.default.isPlatform(N.Platform.android)||N.default.isPlatform(N.Platform.oppo)||N.default.isPlatform(N.Platform.vivo))},D.prototype.loadJson=function(){var t=this;g.default.initData(function(){console.log("JSON\u52a0\u8f7d\u5b8c\u6210");var e=g.default.getUserData();k.default.setUserid(e.userID);var o,n=g.default.getHourseUnlockData(),a=0;if(n.length){var i,r=n[n.length-1];for(i in r)if(!r[i].unlock){a=r[i].unlockID;break}}for(o in a||n.length,e.dailyData)for(var c in e.dailyData[o])e.dailyData[o][c].isWin;t.loadScene()}),P.default.initTA()},D.prototype.loadMainScene=function(){var t=this;cc.director.preloadScene("game",function(){},function(){console.log("PUSH=>\u4e3b\u573a\u666f\u52a0\u8f7d\u5b8c\u6210"),t.loadScene()})},D.prototype.loadScene=function(){this.loadNum+=1,console.log("PUSH=>",this.loadNum),this.loadNum>=this.loadOverNum&&this.progressCurrent>=this.progressAll&&!this.sceneLoadEd&&(console.log("PUSH=>loadScene\u52a0\u8f7d\u6210\u529f"),this.getInfoMainScene())},D.prototype.getInfoMainScene=function(){this.sceneLoadEd=!0,P.default.reportTACommon("app_start",{step:"\u542f\u52a8"}),cc.director.loadScene("game",function(){console.log("PUSH=>\u8fdb\u5165\u4e3b\u573a\u666f")})},l([i(cc.Node)],D.prototype,"bgLayer",void 0),l([i(cc.ProgressBar)],D.prototype,"loadProgressBar",void 0),l([i(cc.Node)],D.prototype,"descNode",void 0),l([i(cc.Node)],D.prototype,"userNode",void 0),l([i(cc.Node)],D.prototype,"privacyNode",void 0),l([i(cc.Node)],D.prototype,"chooseNode",void 0),l([i(cc.Node)],D.prototype,"chooseBg",void 0),l([i(cc.Node)],D.prototype,"beginNode",void 0),l([i(cc.Node)],D.prototype,"tipsNode",void 0),l([i(cc.Node)],D.prototype,"arrowBgBase",void 0),l([i(cc.Node)],D.prototype,"userNodeBase",void 0),a=l([a],D),r.default=a,cc._RF.pop()},{}],loseCookiePop:[function(t,e,o){"use strict";cc._RF.push(e,"8756cpkvkBHlIyfdBoS6jSg","loseCookiePop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("CcJsFunc"),h=a("GameManager");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainLayer=null,t.popNode=null,t.titleLabel=null,t.descLabel=null,t.numLabel=null,t.exitLabel=null,t.restartLabel=null,t.mainLabel=null,t.restartBtn=null,t.closeBtn=null,t.mainMenuBtn=null,t.exitBtn=null,t.heartNode=null,t.cookieNumLabel=null,t.showPopData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){cc.game.on("blowupHeartAnim",this.blowupHeartAnimFunc,this),d.default.addbtnTouchStartScale(this.closeBtn),d.default.addbtnTouchEndScale(this.closeBtn,this.hideLoseLovePop.bind(this)),d.default.addbtnTouchCancelScale(this.closeBtn),d.default.addbtnTouchStartScale(this.restartBtn),d.default.addbtnTouchEndScale(this.restartBtn,this.restartFunc.bind(this)),d.default.addbtnTouchCancelScale(this.restartBtn),d.default.addbtnTouchStartScale(this.mainMenuBtn),d.default.addbtnTouchEndScale(this.mainMenuBtn,this.returnMainMenuFunc.bind(this)),d.default.addbtnTouchCancelScale(this.mainMenuBtn),d.default.addbtnTouchStartScale(this.exitBtn),d.default.addbtnTouchEndScale(this.exitBtn,this.exitBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.exitBtn),this.setupFonts()},f.prototype.setupFonts=function(){this.titleLabel.string=u.default.instance.trans(p.GDLanguage.pop_sure),this.restartLabel.string=u.default.instance.trans(p.GDLanguage.pop_restart),this.exitLabel.string=u.default.instance.trans(p.GDLanguage.pop_quit),this.mainLabel.string=u.default.instance.trans(p.GDLanguage.main_screen),this.descLabel.string=u.default.instance.trans(p.GDLanguage.lose_cookies)},f.prototype.blowupHeartAnimFunc=function(t){0==t?this.node.active=!1:1==t&&cc.tween(this.heartNode).to(.2,{scale:1.2}).to(.1,{scale:1}).start()},f.prototype.showPop=function(t){this.node.active=!0,this.showPopData=t,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),this.restartBtn.active=!1,this.mainMenuBtn.active=!1,this.exitBtn.active=!1,0==this.showPopData.popType?(this.restartBtn.active=!0,this.mainMenuBtn.active=!0,this.popNode.height=700):1==this.showPopData.popType&&(this.exitBtn.active=!0,this.popNode.height=600),this.cookieNumLabel.getComponent(cc.Label).string="x"+h.default.getInstance().cookieDict.cookieCurCount},f.prototype.hideLoseLovePop=function(){this.node.active=!1,cc.game.emit("blowupHeartAnim",0)},f.prototype.restartFunc=function(){this.exitBtnFunc()},f.prototype.returnMainMenuFunc=function(){this.exitBtnFunc()},f.prototype.exitBtnFunc=function(){this.node.active=!1,cc.game.emit("blowupHeartAnim",1)},s([i(cc.Node)],f.prototype,"mainLayer",void 0),s([i(cc.Node)],f.prototype,"popNode",void 0),s([i(cc.Label)],f.prototype,"titleLabel",void 0),s([i(cc.Label)],f.prototype,"descLabel",void 0),s([i(cc.Label)],f.prototype,"numLabel",void 0),s([i(cc.Label)],f.prototype,"exitLabel",void 0),s([i(cc.Label)],f.prototype,"restartLabel",void 0),s([i(cc.Label)],f.prototype,"mainLabel",void 0),s([i(cc.Node)],f.prototype,"restartBtn",void 0),s([i(cc.Node)],f.prototype,"closeBtn",void 0),s([i(cc.Node)],f.prototype,"mainMenuBtn",void 0),s([i(cc.Node)],f.prototype,"exitBtn",void 0),s([i(cc.Node)],f.prototype,"heartNode",void 0),s([i(cc.Node)],f.prototype,"cookieNumLabel",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],loseLovePop:[function(t,e,o){"use strict";cc._RF.push(e,"86deeGjM+dBbIIFyxI9LHFp","loseLovePop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("enumConfig"),d=a("data-manager"),h=a("report-common");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.mask=null,t.popNode=null,t.titleNode=null,t.titleLabel=null,t.descNode=null,t.closeBtn=null,t.giveupBtn=null,t.noGiveupBtn=null,t.showPopData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){p.default.addbtnTouchEndScale(this.mask,this.hideLoseLovePop.bind(this)),p.default.addbtnTouchStartScale(this.closeBtn),p.default.addbtnTouchEndScale(this.closeBtn,this.hideLoseLovePop.bind(this)),p.default.addbtnTouchCancelScale(this.closeBtn),p.default.addbtnTouchStartScale(this.giveupBtn),p.default.addbtnTouchEndScale(this.giveupBtn,this.giveupBtnFunc.bind(this)),p.default.addbtnTouchCancelScale(this.giveupBtn),p.default.addbtnTouchStartScale(this.noGiveupBtn),p.default.addbtnTouchEndScale(this.noGiveupBtn,this.noGiveupBtnFunc.bind(this)),p.default.addbtnTouchCancelScale(this.noGiveupBtn)},f.prototype.showLoseLovePop=function(t){this.node.active=!0,this.showPopData=t,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),0==this.showPopData.popType?(this.popNode.height=715,this.descNode.active=!0):1==this.showPopData.popType&&(this.popNode.height=601,this.descNode.active=!1)},f.prototype.hideLoseLovePop=function(){this.node.active=!1},f.prototype.giveupBtnFunc=function(){console.log("\u6253\u5f00\u4e3b\u9875\u9762"),cc.game.emit(u.EMITKEY.SHOWMAINLAYER);var t=d.default.getTAUserInfo();h.default.reportTACommon("game_give_up",t)},f.prototype.noGiveupBtnFunc=function(){this.node.active=!1},s([i(cc.Node)],f.prototype,"mask",void 0),s([i(cc.Node)],f.prototype,"popNode",void 0),s([i(cc.Node)],f.prototype,"titleNode",void 0),s([i(cc.Label)],f.prototype,"titleLabel",void 0),s([i(cc.Node)],f.prototype,"descNode",void 0),s([i(cc.Node)],f.prototype,"closeBtn",void 0),s([i(cc.Node)],f.prototype,"giveupBtn",void 0),s([i(cc.Node)],f.prototype,"noGiveupBtn",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],"main-cookie-reward":[function(t,e,o){"use strict";cc._RF.push(e,"98ef1B9rVlIgINOcS1NN8Sh","main-cookie-reward");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("cookiePrefab"),u=a("CcJsFunc"),d=a("dataTs"),h=a("enumConfig"),f=a("spine"),g=a("util"),y=a("GameManager"),m=a("report-common");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.clickBtn=null,t.cookieImg=null,t.progressBar=null,t.progressLabel=null,t.rewardImage=null,t.rewardNumLabel=null,t.clockSpine=null,t.timeLabel=null,t.cookiePrefab=null,t.startNode=null,t.updateTime=0,t.progressOld=0,t.progressNew=0,t.isUpdate=!1,t.rewardData=null,t.cookieNum=0,t.rewardCallback=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(v,l=cc.Component),v.prototype.update=function(t){this.updateTime+=t,1<=this.updateTime&&(--this.updateTime,this.updateTimeNum()),this.isUpdate&&(this.progressOld+=15*t,this.progressOld<this.progressNew&&this.rewardData?this.progressBar.progress=this.progressOld/this.rewardData.cookieNum:(this.isUpdate=!1,this.checkProgressFunc()))},v.prototype.updateTimeNum=function(){var t=d.default.gameConfigData.baseConfigData.cookieRewardLevel;d.default.getUserData().playLevelId<t||(0==(t=d.default.updateCookieRewardTime())?(console.log("\u5df2\u6ee1"),this.timeLabel.string="End"):0<(t=g.default.formatTime(t))[0]?this.timeLabel.string=t[0]+"d"+t[1]+"h":0<t[1]?this.timeLabel.string=t[1]+"h"+t[2]+"m":(0<t[2]||0<t[3])&&(this.timeLabel.string=t[2]+"m"+t[3]+"s"))},v.prototype.start=function(){this.clockSpine.getComponent(f.default).play("5Clock1",0),this.updateSubViewFunc(),this.updateTimeNum()},v.prototype.updateSubViewFunc=function(){var t=d.default.gameConfigData.baseConfigData.cookieReward;console.log("cookieReward",JSON.stringify(t));var e=d.default.getCookieRewardData();console.log("cookieData",JSON.stringify(e)),console.log("cookieDict",JSON.stringify(y.default.getInstance().cookieDict)),this.progressNew=e.cookieNum,this.progressOld=e.cookieNum-y.default.getInstance().cookieDict.cookie,this.progressOld<0&&(this.progressOld=0);var o=e.progress;3<=o&&(e.progress=o=0,d.default.setCookieRewardData(e)),this.rewardData=t[o],console.log("rewardData",JSON.stringify(this.rewardData)),(o=e.cookieNum)>=this.rewardData.cookieNum&&(o=this.rewardData.cookieNum),this.progressLabel.string=o+"/"+this.rewardData.cookieNum,this.rewardNumLabel.string=this.rewardData.rewardCount+"",this.progressBar.progress=this.progressOld/this.rewardData.cookieNum,e="rewardIcon/"+this.rewardData.rewardType+".png",u.default.changeSpriteFrame(this.rewardImage,e),y.default.getInstance().cookieDict.cookie=0,y.default.getInstance().cookieDict.cookieCurCount=0,console.log("\u6e05\u7a7acookieDict",y.default.getInstance().cookieDict),this.cookieNum=o},v.prototype.checkProgressFunc=function(){var t;this.cookieNum>=this.rewardData.cookieNum?(this.getRewardFunc(),(t=d.default.getCookieRewardData()).progress+=1,3<t.progress&&(t.progress=0),t.cookieNum>this.rewardData.cookieNum?(console.log("\u591a\u7684\u997c\u5e72\u8ba1\u5165\u4e0b\u4e00\u5956\u52b1",t.cookieNum-this.rewardData.cookieNum),t.cookieNum=t.cookieNum-this.rewardData.cookieNum,y.default.getInstance().cookieDict.cookie=t.cookieNum):t.cookieNum=0,d.default.setCookieRewardData(t),this.updateSubViewFunc(),this.isUpdate=!0):cc.game.emit(h.EMITKEY.HIDEMASKLAYER)},v.prototype.callbackFunc=function(){console.log("\u5956\u52b1\u64ad\u653e\u6210\u529f ######"),cc.game.emit(h.EMITKEY.HIDEMASKLAYER),cc.game.emit(h.EMITKEY.MAINUPDATEUI)},v.prototype.rewardCallbackFunc=function(){this.rewardCallback&&this.rewardCallback()},v.prototype.getRewardFunc=function(){console.log("\u9886\u53d6\u5956\u52b1",JSON.stringify(this.rewardData));var t,e,o=d.default.getUserData(),n=this.rewardData.rewardType;"reward_fish"==n?o.fish+=this.rewardData.rewardCount:(o[n]+=this.rewardData.rewardCount,t=0,e="","prop_remove"==n?(t=1,e="\u79fb\u51fa\u9053\u5177"):"prop_cancel"==n?(t=2,e="\u64a4\u9500\u9053\u5177"):"prop_random"==n&&(t=3,e="\u6d17\u724c\u9053\u5177"),n=o[n],m.default.reportTACommon("item_get",{item_id:t,item_type:"\u6d88\u8017\u9053\u5177",item_name:e,change_num:1,num_before:n-1,num_after:n,action:"\u997c\u5e72\u6d3b\u52a8\u5f00\u542f\u5b9d\u7bb1",reason:"\u5b9d\u7bb1\u83b7\u5f97\u9053\u5177"})),d.default.saveUserData(o),o={popName:"showRewardPop",showPopData:{popCallbackCollect:null,rewardData:this.rewardData,startNode:this.rewardImage,endNode:this.startNode,popType:1,callback:this.callbackFunc.bind(this),rewardCallback:this.rewardCallbackFunc.bind(this)}},cc.game.emit("showPop",o)},v.prototype.checkCookie=function(t,e){if(this.rewardCallback=e,console.log("cookieDict",y.default.getInstance().cookieDict),y.default.getInstance().cookieDict.cookie<=0)return console.log("cookie <= 0 ######"),void(t&&t());var o=this,n=u.default.getWorldPosition(this.startNode),a=(e=u.default.getNodePosition(this.node,n),n=u.default.getWorldPosition(this.cookieImg),n=u.default.getNodePosition(this.node,n),cc.instantiate(this.cookiePrefab));this.node.addChild(a),a.getComponent(p.default).showData(1,y.default.getInstance().cookieDict.cookie),a.position=cc.v3(e),a.scale=0,cc.tween(a).to(.2,{scale:1.2}).to(.2,{scale:1}).delay(.2).to(.3,{position:cc.v3(e.x+10,e.y-10)}).to(.3,{position:cc.v3(e.x-12,e.y-12)}).to(.5,{position:cc.v3(n)}).call(function(){a.destroy(),cc.tween(o.cookieImg).to(.1,{scale:1.2}).to(.1,{scale:1}).call(function(){t&&t(),o.updateSubViewFunc(),cc.game.emit(h.EMITKEY.HIDEMASKLAYER),o.isUpdate=!0}).start()}).start()},s([i(cc.Node)],v.prototype,"clickBtn",void 0),s([i(cc.Node)],v.prototype,"cookieImg",void 0),s([i(cc.ProgressBar)],v.prototype,"progressBar",void 0),s([i(cc.Label)],v.prototype,"progressLabel",void 0),s([i(cc.Node)],v.prototype,"rewardImage",void 0),s([i(cc.Label)],v.prototype,"rewardNumLabel",void 0),s([i(cc.Node)],v.prototype,"clockSpine",void 0),s([i(cc.Label)],v.prototype,"timeLabel",void 0),s([i(cc.Prefab)],v.prototype,"cookiePrefab",void 0),s([i(cc.Node)],v.prototype,"startNode",void 0),a=s([a],v),r.default=a,cc._RF.pop()},{}],"main-rank":[function(t,e,o){"use strict";cc._RF.push(e,"9b6efOXGmVLpb6Xc/L4u6Jt","main-rank");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},u=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),a=0;for(e=0;e<o;e++)for(var i=arguments[e],r=0,c=i.length;r<c;r++,a++)n[a]=i[r];return n};Object.defineProperty(r,"__esModule",{value:!0});var d,h=a("api-sheep"),f=a("CcJsFunc"),g=a("dataTs"),y=a("enumConfig"),m=a("spine"),v=a("GameManager"),b=a("report-common"),N=a("data-manager"),_=a("mainUiLayer"),w=a("ScrollMsg"),C=a("sheep-flock"),P=a("audio"),S=a("ApiTool");function k(){var t=null!==d&&d.apply(this,arguments)||this;return t.mainUILayer=null,t.bgSp=null,t.capSp=null,t.sunglassesSp=null,t.hairSp=null,t.sheepFlock=null,t.positionNode=null,t.positionNodeIcon=null,t.positionNodeCycle=null,t.scrollMsg=null,t.iconNode=null,t.catNodeIcon=null,t.sunNodeIcon=null,t.hairNodeIcon=null,t.catNodeIconWoman=null,t.sunNodeIconWoman=null,t.hairNodeIconWoman=null,t.dataArray=[],t.sheepArray=[],t.marginH=0,t.contentH=0,t.contentY=0,t.curIdx=0,t.userIdx=0,t.winSuccess=!1,t.stageInfo=null,t.scrollToPosition=!1,t.isFirstEnter=!0,t}a=(i=cc._decorator).ccclass,i=i.property,c(k,d=cc.Component),k.prototype.playSpAnimation=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){t=t.touch.getDelta(),this.moveActionFunc(t.y)},this),this.bgSp.active=!1,this.bgSp.getComponent(m.default).play("Stage1",0),this.capSp.getComponent(m.default).play("Stage1",0),this.sunglassesSp.getComponent(m.default).setNewSkin("00"),this.sunglassesSp.getComponent(m.default).play("Stage1",0),this.hairSp.getComponent(m.default).play("Stage1",0);var t=this.capSp.getChildByName("click"),e=this.sunglassesSp.getChildByName("click"),o=this.hairSp.getChildByName("click");f.default.addbtnTouchEndScale(t,this.capClickFunc.bind(this,1)),f.default.addbtnTouchEndScale(e,this.capClickFunc.bind(this,2)),f.default.addbtnTouchEndScale(o,this.capClickFunc.bind(this,3)),this.catNodeIcon=this.iconNode.getChildByName("cat-icon"),this.sunNodeIcon=this.iconNode.getChildByName("sun-icon"),this.hairNodeIcon=this.iconNode.getChildByName("hair-icon"),this.catNodeIconWoman=this.iconNode.getChildByName("cat-icon-woman"),this.sunNodeIconWoman=this.iconNode.getChildByName("sun-icon-woman"),this.hairNodeIconWoman=this.iconNode.getChildByName("hair-icon-woman"),this.capSp.active=!1,this.sunglassesSp.active=!1,this.hairSp.active=!1,this.catNodeIcon.opacity=0,this.sunNodeIcon.opacity=0,this.hairNodeIcon.opacity=0,this.catNodeIconWoman.opacity=0,this.sunNodeIconWoman.opacity=0,this.hairNodeIconWoman.opacity=0},k.prototype.capClickFunc=function(t){console.log("idx = "+t),t={popName:"stagePop",showPopData:{idx:t,stageInfo:this.stageInfo}},cc.game.emit("showPop",t)},k.prototype.start=function(){cc.game.on(y.EMITKEY.USERINFOSUCCESS,this.showUserInfoFunc,this),this.playSpAnimation(),this.positionNode.zIndex=100,this.positionNode.on(cc.Node.EventType.TOUCH_END,function(){b.default.reportTACommon("fast_indexing_click",{}),this.scrollToPosition=!0,this.positionNodeFunc()},this),this.positionNode.active=!1},k.prototype.showUserInfoFunc=function(){console.log(" Data.user.avatar = "+N.default.user.avatar,N.default.user.uid),f.default.setAvatar(this.positionNodeIcon,N.default.user.avatar)},k.prototype.update=function(){this.scrollToPosition&&this.showOrHide()},k.prototype.positionNodeFunc=function(){var t=this;this.positionNode.active=!1,this.node.stopAllActions();var e=this.contentY+750*this.userIdx,o=.3*this.userIdx;2<=(o=0==o?.5:o)&&(o=2),cc.tween(this.node).to(o,{y:e},{easing:cc.easing.cubicOut}).call(function(){cc.game.emit(y.EMITKEY.SHOWUSERNODE),t.scrollToPosition=!1},this).start()},k.prototype.onEnable=function(){var t=this;this.scheduleOnce(function(){t.requestData()},.1),cc.audioEngine.setMusicVolume(1),cc.game.setFrameRate(30),v.default.setGameType(y.GAMETYPE.GAMEMAIN),P.default.playBGM()},k.prototype.requestData=function(){return l(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return this.positionNode.active=!1,g.default.isLogin()?[4,h.default.requestRankUserInfo()]:[3,2];case 1:t.sent(),console.log("PUSH=>\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f = ",N.default.rankUserInfo),t.label=2;case 2:return console.log("PUSH=>\u8bf7\u6c42\u7f51\u7edc\u6570\u636e ######"),this.getStageInfo(),this.getRankInfo(),[2]}})})},k.prototype.orderby=function(t,e){if(t.length<=1)return t;for(var o=Math.floor(t.length/2),n=t.splice(o,1)[0],a=[],i=[],r=0,c=t;r<c.length;r++){var s=c[r];(e(s)<e(n)?a:i).push(s)}return this.orderby(a,e).concat([n],this.orderby(i,e))},k.prototype.bubbleSort=function(t){for(var e,o=u(t),n=0,a=o.length;n<a;n++)for(var i=0;i<a-1-n;i++)0<o[i].win_score||o[i].fail_score<o[i+1].fail_score&&(e=[o[i+1],o[i]],o[i]=e[0],o[i+1]=e[1]);return o},k.prototype.getStageInfo=function(){var t=this,e=N.default.getStageData();e?(console.log("\u4f7f\u7528\u7f13\u5b58\u6570\u636e->\u821e\u53f0"),t.setInfoData(e)):(console.log("\u7f13\u5b58\u6570\u636e\u8fc7\u671f->\u821e\u53f0"),h.default.getStageInfoData(function(e){t.setInfoData(e),N.default.setStageData(e)}))},k.prototype.setInfoData=function(t){this.stageInfo=t.data,this.setStageInfo()},k.prototype.getRankInfo=function(){0<v.default.getInstance().game_over&&v.default.getInstance().playGameCount<2&&g.default.removeItem(y.STORAGEKEY.RANKDATA);var t=this,e=N.default.getRankData();e?(console.log("\u4f7f\u7528\u672c\u5730\u7f13\u5b58\u6570\u636e->\u6392\u884c\u699c\u6570\u636e"),t.setRankData(e)):(console.log("\u672c\u5730\u7f13\u5b58\u6570\u636e\u4e0d\u5b58\u5728\u6216\u5df2\u8fc7\u671f->\u6392\u884c\u699c\u6570\u636e"),h.default.getRankInfoData(function(e){t.setRankData(e),N.default.setRankData(e)}))},k.prototype.setRankData=function(t){this.setSubViewData(t.data.list),v.default.getInstance().rankInfo=t.data,this.mainUILayer.getComponent(_.default).showBottomRankNode(t.data.user)},k.prototype.setStageInfo=function(){var t=this.stageInfo;this.capSp.active=!1,this.sunglassesSp.active=!1,this.hairSp.active=!1,this.catNodeIcon.opacity=0,this.sunNodeIcon.opacity=0,this.hairNodeIcon.opacity=0,this.catNodeIconWoman.opacity=0,this.sunNodeIconWoman.opacity=0,this.hairNodeIconWoman.opacity=0,t.firstWin&&t.firstWin.nick_name&&t.firstWin.nick_name.length&&(this.capSp.active=!0,console.log("info.firstWin.gender = "+t.firstWin.gender),0==t.firstWin.gender?(this.catNodeIcon.opacity=255,f.default.setAvatar(this.catNodeIcon,t.firstWin.avatar)):(this.catNodeIconWoman.opacity=255,f.default.setAvatar(this.catNodeIconWoman,t.firstWin.avatar))),t.iqWin&&t.iqWin.nick_name&&t.iqWin.nick_name.length?(this.sunglassesSp.active=!0,this.sunglassesSp.getComponent(m.default).play("Stage1",0),console.log("info.iqWin.gender = "+t.iqWin.gender),0==t.iqWin.gender?(this.sunNodeIcon.opacity=255,f.default.setAvatar(this.sunNodeIcon,t.iqWin.avatar)):(this.sunNodeIconWoman.opacity=255,f.default.setAvatar(this.sunNodeIconWoman,t.iqWin.avatar))):(this.sunglassesSp.active=!0,this.sunglassesSp.getComponent(m.default).play("Stage0",0)),t.timeWin&&t.timeWin.nick_name&&t.timeWin.nick_name.length&&(this.hairSp.active=!0,console.log("info.firstWin.gender = "+t.firstWin.gender),0==t.timeWin.gender?(this.hairNodeIcon.opacity=255,f.default.setAvatar(this.hairNodeIcon,t.timeWin.avatar)):(this.hairNodeIconWoman.opacity=255,f.default.setAvatar(this.hairNodeIconWoman,t.timeWin.avatar)))},k.prototype.onDisable=function(){this.node.stopAllActions()},k.prototype.setSubViewData=function(t){var e=this;void 0===t&&(t=[]);var o=this,n=g.default.getUserData().userID,a=!1;for(s in t)if((l=(h=t[s]).result)&&l.length){var i,r=JSON.parse(l);for(i in r)if(r[i].uid==Number(n)){a=!0;break}}if(0==a){var c=N.default.rankUserInfo;if(c&&c.region&&c.region.length)for(var s in t){var l=(h=t[s]).result;if(c.region==h.name){if(l&&l.length){var p=[];36<=(r=JSON.parse(l)).length&&(r[18]=c);for(var u=0;u<r.length;u++)u<36&&p.push(r[u]);h.result=JSON.stringify(p),t[s]=h}break}}}for(s in this.dataArray=t,this.sheepArray)this.sheepArray[s].destroy();var d=this.dataArray.length;if(0!=d){var h,f=0,m=0;for(s in this.dataArray)f+=(h=this.dataArray[s]).all_score,m+=h.win_score;var b="\u4eca\u65e5\u6311\u6218 "+f+" \u7f8a\uff0c\u901a\u5173 "+m+" \u7f8a";for(S.default.dailyAllNumber=f,S.default.dailywinNumber=m,S.default.avatar=N.default.user.avatar,this.scrollMsg.getComponent(w.default).showMsg({msg:b}),b=(cc.winSize.height-cc.winSize.width)/2,console.log(b),this.node.height=750*(d+1),this.marginH=(this.node.height-cc.winSize.height)/2,this.node.y=-this.marginH,console.log(this.node.y),console.log(this.node.height),this.contentY=this.node.y,this.contentH=this.node.height,this.updatePositionNode(this.dataArray),this.sheepArray=[],u=0;u<d;u++)!function(t){setTimeout(function(){e.addSheepShock(e.dataArray,t,750)},100*t)}(u);1==v.default.getInstance().game_over&&(cc.game.emit(y.EMITKEY.SHOWMASKLAYER),setTimeout(function(){e.scrollToPosition=!0,e.positionNodeFunc()},100)),setTimeout(function(){cc.game.emit(y.EMITKEY.HIDEMASKLAYER)},7e3),this.isFirstEnter&&(this.node.y+=cc.winSize.width,this.isFirstEnter=!1,cc.tween(this.node).delay(.5).call(function(){o.bgSp.active=!0}).to(1,{y:o.node.y-cc.winSize.width},{easing:cc.easing.quadOut}).start())}},k.prototype.updatePositionNode=function(t){var e,o=g.default.getUserData().userID,n=0;for(e in this.winSuccess=!1,t){var a=t[e].result;if(a&&a.length){var i,r=JSON.parse(a);for(i in r){var c=r[i];if(c.uid==Number(o)){this.userIdx=n,this.winSuccess=!0,console.log("\u627e\u5230\u540d\u5b57\u4e86 ###### "+n+" res = "+JSON.stringify(c)),this.curIdx=Math.floor(this.node.y/750+this.dataArray.length/2),console.log("\u7528\u6237\u6240\u5728\u4f4d\u7f6e = "+this.userIdx+" - \u5f53\u524d\u4f4d\u7f6e = "+this.curIdx),this.curIdx==this.userIdx?this.positionNode.active=!1:this.positionNode.active=!0;break}}if(this.winSuccess)break;n++}}},k.prototype.addSheepShock=function(t,e,o){var n=cc.instantiate(this.sheepFlock);2<e&&(n.opacity=0),this.node.addChild(n),this.sheepArray[e]=n,t={type:0==e?1:e<3?2:3,num:e+1,item:t[e]},n.getComponent(C.default).setupData(t),n.x=0,v.default.getInstance().globalData.isFullScreen?n.y=this.marginH-e*o-150:n.y=this.marginH-e*o-250},k.prototype.moveActionFunc=function(t){if(!(this.dataArray.length<2)){for(var e in this.sheepArray)this.sheepArray[e].opacity=0;5<this.sheepArray.length&&this.showOrHide(),this.node.y+=t,this.node.y>=this.marginH?this.node.y=this.marginH:this.node.y<=-this.marginH&&(this.node.y=-this.marginH),this.winSuccess&&(this.curIdx==this.userIdx?this.positionNode.active=!1:this.positionNode.active=!0,this.curIdx<this.userIdx?this.positionNodeCycle.scaleY=1:this.curIdx>this.userIdx&&(this.positionNodeCycle.scaleY=-1))}},k.prototype.showOrHide=function(){this.curIdx=Math.floor(this.node.y/750+this.dataArray.length/2),this.curIdx>=this.sheepArray.length&&(this.curIdx=this.sheepArray.length-1),1<=this.curIdx?this.curIdx<this.sheepArray.length-1?(this.sheepArray[this.curIdx-1].opacity=255,this.sheepArray[this.curIdx].opacity=255,this.sheepArray[this.curIdx+1].opacity=255):(this.sheepArray[this.sheepArray.length-3].opacity=255,this.sheepArray[this.sheepArray.length-2].opacity=255,this.sheepArray[this.sheepArray.length-1].opacity=255):2<this.sheepArray.length&&(this.sheepArray[0].opacity=255,this.sheepArray[1].opacity=255,this.sheepArray[2].opacity=255)},k.prototype.containFunc=function(t,e){for(var o="",n=0;n<e.length;n++){var a=e[n];if(o+=a,!(0<=t.indexOf(o)||(o=o.slice(0,o.length-1),o+=this.IsUpper(a)?a.toLowerCase():a.toUpperCase(),0<=t.indexOf(o))))return!1}return!0},k.prototype.IsUpper=function(t){return t===t.toUpperCase()},s([i({type:cc.Node,tooltip:"mainUILayer"})],k.prototype,"mainUILayer",void 0),s([i({type:cc.Node,tooltip:"\u80cc\u666fspine"})],k.prototype,"bgSp",void 0),s([i({type:cc.Node,tooltip:"\u5e3d\u5b50\u7f8aspine"})],k.prototype,"capSp",void 0),s([i({type:cc.Node,tooltip:"\u58a8\u955c\u7f8aspine"})],k.prototype,"sunglassesSp",void 0),s([i({type:cc.Node,tooltip:"\u957f\u53d1\u7f8aspine"})],k.prototype,"hairSp",void 0),s([i({type:cc.Prefab,tooltip:"\u7f8a\u7fa4"})],k.prototype,"sheepFlock",void 0),s([i({type:cc.Node,tooltip:"\u5b9a\u4f4d\u6309\u94ae"})],k.prototype,"positionNode",void 0),s([i({type:cc.Node,tooltip:"\u5b9a\u4f4d\u6309\u94ae\u5934\u50cf"})],k.prototype,"positionNodeIcon",void 0),s([i({type:cc.Node,tooltip:"\u5b9a\u4f4d\u6309\u94ae\u56fe\u6807"})],k.prototype,"positionNodeCycle",void 0),s([i({type:cc.Node,tooltip:"\u8dd1\u9a6c\u706f"})],k.prototype,"scrollMsg",void 0),s([i({type:cc.Node,tooltip:"\u5934\u50cf"})],k.prototype,"iconNode",void 0),a=s([a],k),r.default=a,cc._RF.pop()},{}],"main-tabbar":[function(t,e,o){"use strict";cc._RF.push(e,"66a40jaUH5JALG1+2y2R2kp","main-tabbar");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("CcJsFunc"),h=a("dataTs"),f=a("enumConfig"),g=a("GameManager"),y=a("report-common"),m=a("uma-sdk");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainPage=null,t.pageMain=null,t.pageDaily=null,t.pageCollect=null,t.tabbarMain=null,t.tabbarDaily=null,t.tabbarCollect=null,t.pageContent=null,t.tabbarArr=[],t.updateTime=0,t}a=(i=cc._decorator).ccclass,i=i.property,c(v,l=cc.Component),v.prototype.update=function(t){this.updateTime+=t,this.updateTime},v.prototype.start=function(){cc.game.on(f.EMITKEY.MAINUPDATEUI,this.setMainLayerData,this),cc.game.on(f.EMITKEY.UPDATETABBARRECEIVE,this.updateTabbar,this),this.pageContent=this.mainPage.getChildByName("pageContent"),d.default.addbtnTouchEndScale(this.tabbarCollect,this.tabbarAction.bind(this,0)),d.default.addbtnTouchEndScale(this.tabbarMain,this.tabbarAction.bind(this,1)),d.default.addbtnTouchEndScale(this.tabbarDaily,this.tabbarAction.bind(this,2)),this.tabbarArr.push(this.tabbarCollect),this.tabbarArr.push(this.tabbarMain),this.tabbarArr.push(this.tabbarDaily),this.pageCollect.x=0,this.pageMain.x=750,this.pageDaily.x=1500,this.updateTabbar(1,!1),this.setMainLayerData(),this.setupFonts()},v.prototype.setupFonts=function(){var t=u.default.instance.trans(p.GDLanguage.collect);this.tabbarCollect.getChildByName("icon-label").getComponent(cc.Label).string=t,t=u.default.instance.trans(p.GDLanguage.main_screen),this.tabbarMain.getChildByName("icon-label").getComponent(cc.Label).string=t,t=u.default.instance.trans(p.GDLanguage.daily_challenge),this.tabbarDaily.getChildByName("icon-label").getComponent(cc.Label).string=t},v.prototype.onEnable=function(){this.setMainLayerData()},v.prototype.setMainLayerData=function(){var t=g.default.getInstance().collectionMark;0==t.bgNum&&0==t.brickNum&&(g.default.getInstance().collectionMark.tabbarCollection=!1),g.default.getInstance().collectionMark.tabbarCollection?this.tabbarCollect.getChildByName("icon-mark").active=!0:this.tabbarCollect.getChildByName("icon-mark").active=!1},v.prototype.tabbarAction=function(t){d.default.addClickAudio(),this.updateTabbar(t),t!=f.MAINPAGE.PAGEDAILY?g.default.getInstance().tabbarIsDaily&&(console.log("\u70b9\u51fb\u4e86\u6bcf\u65e5\u6311\u6218\uff0c\u6ca1\u73a9"),m.default.trackEvent("daily_return"),y.default.reportTACommon("daily_return",{})):g.default.getInstance().tabbarIsDaily=!0},v.prototype.updateTabbar=function(t,e){void 0===e&&(e=!0);var o=this;if(2==t&&h.default.getUserData().playLevelId<14)cc.game.emit("showPop",{popName:"nothingPop",showPopData:{popCallbackCollect:null,popType:3}});else{for(var n in g.default.getInstance().mainPage=t,this.tabbarArr){var a=this.tabbarArr[n];t==Number(n)?(a.getChildByName("bg-icon-nor").active=!1,a.getChildByName("bg-icon-sel").active=!0,a.getChildByName("icon-nor").active=!1,a.getChildByName("icon-sel").active=!0):(a.getChildByName("bg-icon-nor").active=!0,a.getChildByName("bg-icon-sel").active=!1,a.getChildByName("icon-nor").active=!0,a.getChildByName("icon-sel").active=!1)}e=e?.3:0;var i=0,r=null;switch(t){case 0:i=0,r=this.pageCollect;break;case 1:i=-750,r=this.pageMain;break;case 2:i=-1500,r=this.pageDaily}r&&(r.active=!0),this.pageContent.stopAllActions(),cc.tween(this.pageContent).to(e,{x:i}).call(function(){o.hideOtherNode(r)}).start(),cc.game.emit(f.EMITKEY.UPDATETABBARSEND,t),this.setMainLayerData()}},v.prototype.hideOtherNode=function(t){var e,o=this.mainPage.getChildByName("pageContent").children;for(e in o)t&&t!=o[e]&&(o[e].active=!1)},s([i(cc.Node)],v.prototype,"mainPage",void 0),s([i(cc.Node)],v.prototype,"pageMain",void 0),s([i(cc.Node)],v.prototype,"pageDaily",void 0),s([i(cc.Node)],v.prototype,"pageCollect",void 0),s([i(cc.Node)],v.prototype,"tabbarMain",void 0),s([i(cc.Node)],v.prototype,"tabbarDaily",void 0),s([i(cc.Node)],v.prototype,"tabbarCollect",void 0),a=s([a],v),r.default=a,cc._RF.pop()},{}],mainCanvas:[function(t,e,o){"use strict";cc._RF.push(e,"53853D2Qg1AFKoc4UUFQ6nI","mainCanvas");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p,u,d=a("enumConfig"),h=a("audio"),f=a("tt-sdk"),g=a("sdk"),y=a("GameManager"),m=a("report-common"),v=cc._decorator;function b(){var t=null!==u&&u.apply(this,arguments)||this;return t.mainLayer=null,t.gameLayer=null,t.status=l.ready,t.recordFinishAction=p.RestartRecord,t.timer=0,t}i=v.ccclass,a=v.property,(v=l=l||{})[v.ready=0]="ready",v[v.recording=1]="recording",v[v.stop=2]="stop",v[v.pause=3]="pause",(v=p=p||{})[v.RestartRecord=0]="RestartRecord",v[v.ShareMessage=1]="ShareMessage",c(b,u=cc.Component),b.prototype.start=function(){var t=this;this.mainLayer.active=!0,this.gameLayer.active=!1,cc.game.on(d.EMITKEY.TTSTARTRECORD,this.beginRecordFunc,this),cc.game.on(d.EMITKEY.TTSTOPRECORD,this.stopRecordFunc,this),cc.game.on(d.EMITKEY.TTSHARERECORD,this.shareRecordFunc,this),this.ttRewardInit(),this.scheduleOnce(function(){t.beginRecord()},2),g.default.setOnShow(function(){console.log("on Show"),h.default.playBGM()}),g.default.setOnHide(function(){console.log("on Hide"),h.default.playBGM()})},b.prototype.beginRecordFunc=function(){this.status!=l.recording&&this.beginRecord()},b.prototype.stopRecordFunc=function(){this.stopRecord()},b.prototype.ttRewardInit=function(){var t;cc.sys.platform==cc.sys.BYTEDANCE_GAME&&((t=tt.getGameRecorderManager()).onStart(this.recordStart.bind(this)),t.onStop(this.recordStop.bind(this)),t.onPause(this.recordPause.bind(this)),t.onResume(this.recordResume.bind(this)))},b.prototype.beginRecord=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(console.log("beginRecord ###### "),y.default.getInstance().videoDuration=0,f.default.recorderStart())},b.prototype.stopRecord=function(){f.default.recorderStop()},b.prototype.recordStart=function(){console.log("record start"),y.default.getInstance().videoDuration=0,this.status=l.recording,this.initStatus()},b.prototype.recordStop=function(t){console.log("record stop",t.videoPath),f.default.setVideoPath(t.videoPath),y.default.getInstance().videoPath=t.videoPath,this.status=l.stop,this.initStatus()},b.prototype.recordPause=function(){console.log("record pause"),this.status=l.pause,this.initStatus()},b.prototype.recordResume=function(){console.log("record resume"),this.status=l.recording,this.initStatus()},b.prototype.update=function(t){this.timer+=t,y.default.getInstance().bulletTime+=t,this.status==l.recording&&(y.default.getInstance().videoDuration+=t),1<=this.timer&&(this.timer=0,this.status==l.recording&&this.initStatus())},b.prototype.initStatus=function(){var t;if(300<=y.default.getInstance().videoDuration&&(f.default.recorderStop(),(t=this).scheduleOnce(function(){t.beginRecord()},2)),y.default.getInstance().videoDuration<1)switch(this.status){case l.ready:console.log("\u5f55\u5236 ###### ");break;case l.recording:console.log("\u5f55\u5236\u4e2d...... ###### ");break;case l.pause:console.log("\u6682\u505c\u5f55\u5236...... ###### ");break;case l.stop:console.log("\u5f55\u5236...... ###### ")}},b.prototype.recordBtnAction=function(){switch(console.log("video tip status:",this.status,l[this.status]),this.status){case l.ready:y.default.getInstance().videoDuration=0,f.default.recorderStart();break;case l.recording:f.default.recorderPause();break;case l.pause:f.default.recorderResume();break;case l.stop:f.default.recorderStart(),this.status=l.recording,y.default.getInstance().videoDuration=0}this.initStatus()},b.prototype.shareRecordFunc=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(m.default.reportTACommon("share_click",{}),y.default.getInstance().videoDuration<3?cc.game.emit(d.EMITKEY.SHOWMAINTIPS,"\u5f55\u5c4f\u5c0f\u4e8e3s\uff0c\u65e0\u6cd5\u5206\u4eab"):(f.default.recorderStop(),this.showPop()))},b.prototype.showPop=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(console.log("\u6211\u8981\u70ab\u8000 = ",y.default.getInstance().videoPath),y.default.getInstance().videoPath&&0!=y.default.getInstance().videoPath.length?f.default.shareAppMessage({url:y.default.getInstance().videoPath,success:function(){f.default.recorderStart()},fail:function(){f.default.recorderStart()}}):f.default.recorderStart())},s([a(cc.Node)],b.prototype,"mainLayer",void 0),s([a(cc.Node)],b.prototype,"gameLayer",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],mainCultivateLayer:[function(t,e,o){"use strict";cc._RF.push(e,"a504aoDOgxNhZMyOCq1oDJZ","mainCultivateLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("catClawPrefabs"),u=a("CcJsFunc"),d=a("dataTs"),h=a("enumConfig"),f=a("audio"),g=a("spine"),y=a("GameManager"),m=a("uma-sdk"),v=a("catNode"),b=a("houseLayer"),N=a("upgrade-tip"),_=a("wardrobeLayer");function w(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainUILayer=null,t.wholeBuildHouse=null,t.wardrobeLayer=null,t.houseLayer=null,t.topUiLayer=null,t.particlePrefab=null,t.upgradeTip=null,t.clawPrefab=null,t.clawNode=null,t.catObj=null,t.upgradeArr=[],t.popCallbackCollect=null,t.isShowHouse=!1,t}a=(i=cc._decorator).ccclass,i=i.property,c(w,l=cc.Component),w.prototype.start=function(){(window.xuxu=this).node.on("touchstart",this.touchStartFunc,this),this.node.on("touchend",this.hideWardrobelLayer,this),cc.game.on(h.EMITKEY.UPDATETABBARSEND,this.updateTabbar,this),this.initMainCultivateLayer(),this.popCallbackCollect={playGameCallBack:this.playGameFunc.bind(this)}},w.prototype.playGameFunc=function(){},w.prototype.updateTabbar=function(t){t==h.MAINPAGE.PAGEHOUSE?(this.showUpgrade(),this.isShowHouse=!0):this.hideUpgrade()},w.prototype.initMainCultivateLayer=function(){this.nextRoomIsUnloack(),this.clawNode=cc.instantiate(this.clawPrefab),this.wholeBuildHouse.addChild(this.clawNode),this.clawNode.active=!1},w.prototype.setClawNodeWithNode=function(t){cc.isValid(this.clawNode)?t?(t=u.default.getWorldPosition(t),t=u.default.getNodePosition(this.wholeBuildHouse,t),this.clawNode.position=cc.v3(t.x,t.y,0),this.clawNode.getComponent(p.default).playClawAnimation()):this.clawNode.active=!1:console.log("\u732b\u722a\u5b50\u5df2\u91ca\u653e ###### ")},w.prototype.unlockNewHouse=function(){this.nextRoomIsUnloack(!0),cc.game.emit(h.EMITKEY.MAINUPDATEUI)},w.prototype.updateLayout=function(){this.catObj={};var t=d.default.getGameConfigData().baseConfigData.unlockHouseDataArray;for(n in t)for(var e in t[n]){var o=t[n][e];this.setBuildStatus(o,!1,!1)}var n,a=d.default.getUserData().unlockHouseUserData;for(n in a)for(var e in a[n])(o=a[n][e]).unlock?this.setBuildStatus(o,!0,!1):o.show&&this.addUpgradeTip(o)},w.prototype.addUpgradeTip=function(t){var e="house_"+t.house,o="room_"+t.room,n="mask_room_"+t.room,a="";"cat"==t.buildType?a=t.buildType:"build"==t.buildType?a=t.buildType+"_"+t.buildid:"skin"==t.buildType&&(a="cat"),o=(e=this.wholeBuildHouse.getChildByName(e)).getChildByName(o),n=e.getChildByName(n),a=(o=o.getChildByName(a)).getChildByName("lock"),o.getChildByName("unLock"),o=a.getChildByName("lockImg"),n.active=!1,a=cc.instantiate(this.upgradeTip),n=o.convertToWorldSpaceAR(cc.v2(0,0)),n=e.convertToNodeSpaceAR(n),a.x=n.x,a.y=n.y+o.height/2,"build"==t.buildType&&1==t.house&&1==t.room&&1==t.buildid&&(a.x+=50,a.y+=50),"build"==t.buildType&&3==t.house&&2==t.room&&2==t.buildid&&(a.y+=50),"skin"==t.buildType&&3==t.house&&2==t.room&&9==t.buildid&&(a.y-=50),"build"==t.buildType&&3==t.house&&3==t.room?1==t.buildid?a.x-=70:2==t.buildid?(a.x+=50,a.y+=50):3==t.buildid?a.x+=50:10==t.buildid&&(a.x-=50,a.y-=50):"skin"==t.buildType&&3==t.house&&3==t.room&&10==t.buildid&&(a.x-=50,a.y-=50),e.addChild(a),a.getComponent(N.default).showPoint(t,this,!0),this.upgradeArr.push(a),y.default.getInstance().mainPage!=h.MAINPAGE.PAGEHOUSE&&(a.active=!1)},w.prototype.clickUpgradePoint=function(t){for(var e in this.upgradeArr)this.upgradeArr[e].getComponent(N.default).showPoint();t.getComponent(N.default).showFish()},w.prototype.clickUpgradeFish=function(t,e){for(var o in console.log("houseData = "+JSON.stringify(t)),this.upgradeArr)this.upgradeArr[o].getComponent(N.default).showPoint();var n=d.default.getUserData(),a=n.unlockHouseUserData;if(n.fish>=t.fish){for(var i in a)for(var r in a[i])t.unlockID==a[i][r].unlockID&&(a[i][r].unlock=!0),a[i][r].show=!0;var c,s,l=!1;if(a.length){var p=a[a.length-1];for(o in p)p[o].unlock||(l=!0)}n.fish-=t.fish,n.unlockHouseUserData=a,"cat"!=t.buildType&&"skin"!=t.buildType||(u={clothesID:t.clothesID,clothRank:t.clothesID%1e3==0?3:1,isWear:t.clothesID%1e3==0},(c=n.catClothesData)[s="cat_"+t.buildid]||(console.log("userCldata clKey\u4e3a\u7a7a\uff0c\u9700\u8981\u521d\u59cb\u5316\u6570\u7ec4 ### "),c[s]=[]),c[s].push(u),y.default.getInstance().collectionMark.tabbarCollection=!0,"cat"==t.buildType?y.default.getInstance().collectionMark.catNum=t.clothesID:(y.default.getInstance().collectionMark.catNum=t.clothesID,y.default.getInstance().collectionMark.catSkinNum=t.clothesID)),d.default.saveUserData(n),e.getComponent(N.default).hide(),cc.game.emit(h.EMITKEY.SHOWMASKLAYER,7),this.playFlyFishAnimation(t,e.node),l||(console.log("\u5237\u65b0\u89e3\u9501\u6c14\u6ce1"),this.updateLayout());var u=t.unlockID+"";m.default.trackEvent("house_unlock",{houseID:u}),cc.isValid(this.clawNode)&&(console.log("\u91ca\u653e\u732b\u722a\u5b50 ###### "),this.clawNode.destroy())}else u={popName:"nothingPop",showPopData:{popCallbackCollect:this.popCallbackCollect,popType:0}},cc.game.emit("showPop",u)},w.prototype.playFlyFishAnimation=function(t){var e="house_"+t.house,o="room_"+t.room,n="mask_room_"+t.room,a="";"cat"==t.buildType?a=t.buildType:"build"==t.buildType?a=t.buildType+"_"+t.buildid:"skin"==t.buildType&&(a="cat"),o=(e=this.wholeBuildHouse.getChildByName(e)).getChildByName(o),n=e.getChildByName(n),a=(o=o.getChildByName(a)).getChildByName("lock"),o.getChildByName("unLock"),a.getChildByName("lockImg"),n.active=!1},w.prototype.flyUnlockFishFunc=function(t,e){this.removeFunc(this.upgradeArr,e),this.setBuildStatus(t,!0,!0),cc.game.emit(h.EMITKEY.MAINUPDATEUI)},w.prototype.indexOfFunc=function(t,e){for(var o=0;o<t.length;o++)if(t[o]==e)return o;return-1},w.prototype.removeFunc=function(t,e){-1<(e=this.indexOfFunc(t,e))&&t.splice(e,1)},w.prototype.nextRoomIsUnloack=function(t){(t=d.default.getHourseUnlockData(t=void 0!==t&&t))&&(console.log("unlockData ### = "+JSON.stringify(t)),0==this.upgradeArr.length&&(this.updateLayout(),t.length<=4?this.houseLayer.getComponent(b.default).moveWithRoomId(h.ROOMTYPE.ROOMONE):4<t.length&&t.length<8?this.houseLayer.getComponent(b.default).moveWithRoomId(h.ROOMTYPE.ROOMTWO):8<=t.length&&t.length<11&&this.houseLayer.getComponent(b.default).moveWithRoomId(h.ROOMTYPE.ROOMTHREE)))},w.prototype.setBuildStatus=function(t,e,o){var n="house_"+t.house,a="room_"+t.room,i="mask_room_"+t.room,r="";"cat"==t.buildType?r=t.buildType:"build"==t.buildType?r=t.buildType+"_"+t.buildid:"skin"==t.buildType&&(r="cat"),a=(n=this.wholeBuildHouse.getChildByName(n)).getChildByName(a),i=n.getChildByName(i);var c,s=(r=a.getChildByName(r)).getChildByName("lock"),l=r.getChildByName("unLock");e&&(i.active=!1),i=s.convertToWorldSpaceAR(cc.v2(0,0)),i=n.convertToNodeSpaceAR(i),e&&o?(o=cc.instantiate(this.particlePrefab),n.addChild(o),o.x=i.x,o.y=i.y,e&&"cat"==t.buildType?f.default.playAudioMusic("audio/sound/Unlock_Cat.mp3",!1):e&&"build"==t.buildType?f.default.playAudioMusic("audio/sound/Unlock_Furniture.mp3",!1):e&&"skin"==t.buildType&&f.default.playAudioMusic("audio/sound/Unlock_Cat.mp3",!1),c=this,cc.tween(s).to(.1,{scale:0}).call(function(){s.active=!e,l.active=e,cc.tween(l).set({scale:0}).to(.1,{scale:1.2}).to(.1,{scale:1}).to(.1,{scale:1.1}).to(.1,{scale:1}).call(function(){var o;console.log("\u5bb6\u5177\u52a8\u753b\u64ad\u653e\u5b8c\u6210"),c.nextRoomIsUnloack(),e&&"cat"==t.buildType?(o="1_Standby1",l.getChildByName("unLockImg").getComponent(g.default).play(o,0),cc.game.emit("unlockBuildBtn",t.buildid)):e&&"skin"==t.buildType&&(o="1_Standby_CloUnlock1",l.getChildByName("unLockImg").getComponent(g.default).play(o,0),l.getChildByName("unLockImg").getComponent(v.default).playClothesAnimation(!0)),cc.game.emit(h.EMITKEY.HIDEMASKLAYER,12)},c).start()},c).start()):(s.active=!e,l.active=e),e&&"cat"==t.buildType&&(l.getChildByName("unLockImg").getComponent(g.default).play("1_Standby1",0),l.getChildByName("unLockImg").getComponent(v.default).setCatData(t.buildid,this),this.catObj["cat_"+t.buildid]=l.getChildByName("unLockImg"),this.catObj["particle_"+t.buildid]=l.getChildByName("Particle_Unlock1"))},w.prototype.refreshCatCloth=function(t,e,o){this.catObj["cat_"+t].getComponent(v.default).updateSkin(o),e&&this.catObj["particle_"+t].getComponent(cc.ParticleSystem).resetSystem()},w.prototype.touchStartFunc=function(){u.default.addClickAudio()},w.prototype.hideWardrobelLayer=function(){this.wardrobeLayer.getComponent(_.default).hideWardrobelLayer(),this.houseToMinDefault();var t=this.wardrobeLayer.getChildByName("changeClothes").active;if(y.default.getInstance().mainPage==h.MAINPAGE.PAGEHOUSE&&t)console.log("\u663e\u793a\u5347\u7ea7\u5149\u6807"),this.showUpgrade();else if(y.default.getInstance().mainPage==h.MAINPAGE.PAGEHOUSE)for(var e in this.upgradeArr)if(this.upgradeArr[e].getChildByName("icon-dish").active){console.log("\u6709\u9c7c ######"),this.upgradeArr[e].getComponent(N.default).show();break}},w.prototype.showUpgrade=function(){var t=d.default.getUserData();if(!(t.playLevelId<=2&&t.fish<2)){for(var e in this.upgradeArr)this.upgradeArr[e].getComponent(N.default).show();this.upgradeArr.length&&(t=this.upgradeArr[0],this.setClawNodeWithNode(t))}},w.prototype.hideUpgrade=function(){for(var t in this.upgradeArr)this.upgradeArr[t].getComponent(N.default).hide();this.upgradeArr.length&&(this.upgradeArr[0],this.setClawNodeWithNode()),cc.isValid(this.clawNode)&&this.isShowHouse&&(console.log("\u91ca\u653e\u732b\u722a\u5b50 ###### "),this.clawNode.destroy())},w.prototype.touchCatFunc=function(t){y.default.getInstance().mainPage==h.MAINPAGE.PAGEHOUSE&&this.hideUpgrade(),this.wardrobeLayer.getComponent(_.default).showWardrobelLayer(t,this)},w.prototype.houseToBigMiddle=function(t){t=this.catObj["cat_"+t],this.houseLayer.getComponent(b.default).toBigMiddle(t)},w.prototype.houseToMinDefault=function(){this.houseLayer.getComponent(b.default).toMinDefault()},s([i(cc.Node)],w.prototype,"mainUILayer",void 0),s([i(cc.Node)],w.prototype,"wholeBuildHouse",void 0),s([i(cc.Node)],w.prototype,"wardrobeLayer",void 0),s([i(cc.Node)],w.prototype,"houseLayer",void 0),s([i(cc.Node)],w.prototype,"topUiLayer",void 0),s([i(cc.Prefab)],w.prototype,"particlePrefab",void 0),s([i(cc.Prefab)],w.prototype,"upgradeTip",void 0),s([i(cc.Prefab)],w.prototype,"clawPrefab",void 0),s([i(cc.Node)],w.prototype,"clawNode",void 0),a=s([a],w),r.default=a,cc._RF.pop()},{}],mainLayer:[function(t,e,o){"use strict";cc._RF.push(e,"b8c45Z6zn1ISr2PENniP8fC","mainLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("api-sheep"),h=a("dataTs"),f=a("enumConfig"),g=a("audio"),y=a("sdk"),m=a("gameLayer"),v=a("data-manager"),b=a("DateManager"),N=a("GameManager");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.gameLayer=null,t.commonUIPrefab=null,t.commonUI=null,t.topicUIPrefab=null,t.topicUI=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(_,l=cc.Component),_.prototype.start=function(){cc.game.on(f.EMITKEY.BEGINGAME,this.beginGameFunc,this),cc.game.on(f.EMITKEY.SHOWMODULE,this.showModuleFunc,this),this.setupSubviews(),this.updateSubUI(),y.default.isPlatform(y.Platform.web)||this.preLoadVedio(),this.requestData()},_.prototype.requestData=function(){h.default.isLogin()&&this.requestMatchResult()},_.prototype.requestMatchResult=function(){var t;v.default.getMatchResultData()||(v.default.setMatchResultData(),t=this,setTimeout(function(){d.default.getMatchResult(2,function(e){t.showMatch(e)})},1e3))},_.prototype.showMatch=function(t){t&&t.data&&t.data.topic&&0<t.data.topic.id&&t.data.topic.info&&0<t.data.topic.info.uid&&(t={popName:"topicLastWinPop",showPopData:t.data},cc.game.emit("showPop",t))},_.prototype.onEnable=function(){this.updateSubUI()},_.prototype.beginGameFunc=function(){this.beginGame()},_.prototype.showModuleFunc=function(t){switch(t=void 0===t?f.MODULETYPE.COMMON:t){case f.MODULETYPE.COMMON:this.commonUI.active=!0,this.topicUI.active=!1;break;case f.MODULETYPE.TOPIC:this.commonUI.active=!1,this.topicUI.active=!0}},_.prototype.setupSubviews=function(){this.topicUI=cc.instantiate(this.topicUIPrefab),this.topicUI.active=!1,this.node.addChild(this.topicUI),this.commonUI=cc.instantiate(this.commonUIPrefab),this.commonUI.active=!0,this.node.addChild(this.commonUI)},_.prototype.updateSubUI=function(){this.node.active=!0,this.gameLayer.active=!1,this.playMainBgMusic(),cc.game.emit(f.EMITKEY.MAINUPDATEUI)},_.prototype.showMainLayer=function(t){void 0===t&&(t=f.GAMEOVER.NONE),cc.game.emit(f.EMITKEY.TTSTOPRECORD),cc.game.emit(f.EMITKEY.TTSTARTRECORD),console.log("\u56de\u5230\u4e3b\u9875\u9762 = "+t),this.node.active=!0,this.gameLayer.active=!1,this.updateRewardData(t),this.playMainBgMusic(),cc.game.emit(f.EMITKEY.MAINUPDATEUI),N.default.getInstance().gameType==f.GAMETYPE.GAMEDAILY?cc.game.emit(f.EMITKEY.UPDATETABBARRECEIVE,2):cc.game.emit(f.EMITKEY.UPDATETABBARRECEIVE,1)},_.prototype.preLoadVedio=function(){var t=h.default.GetVedioID();y.default.preloadVideoAd(t,function(){console.log("\u9884\u52a0\u8f7d\u89c6\u9891\u6210\u529f")},function(){console.log("\u9884\u52a0\u8f7d\u89c6\u9891\u5931\u8d25")},function(){},!0)},_.prototype.updateRewardData=function(t){t===f.GAMEOVER.LEVELFAIL&&N.default.getInstance().gameType==f.GAMETYPE.GAMELEVEL&&h.default.resetSprintReward()},_.prototype.playMainBgMusic=function(){g.default.playBGM()},_.prototype.beginGame=function(){cc.game.emit(f.EMITKEY.TTSTARTRECORD);var t=this,e=b.default.format(f.CALENDARNAMES[4],new Date);!e||3<=(e=e.split("-")).length&&Number(e[2]);var o=cc.sys.localStorage.getItem("unlocklevel11111")||"0";o=Number.parseInt(o),cc.loader.loadRes("data/level_ids",cc.JsonAssets,function(e,n){var a=n.json[o%n.json.length];cc.loader.loadRes("data/level/"+a,cc.JsonAssets,function(e,o){var n=[JSON.parse(o.json.map_data)];t.gameLayer.activeInHierarchy?console.log("\u5df2\u7ecf\u6253\u5f00 mainLayer 1"):n.length<1?cc.game.emit("showMainTips",u.default.instance.trans(p.GDLanguage.level_inadequate)):(t.beginGameData(n),v.default.setGameLevelData(n))})})},_.prototype.beginGameData=function(t){var e=this;cc.game.emit(f.EMITKEY.SHOWTRANSITLAYER,function(o){e.gameLayer.activeInHierarchy?console.log("\u5df2\u7ecf\u6253\u5f00 mainLayer 2"):(console.log("\u53ef\u4ee5\u6253\u5f00\u4e86 mainLayer"),e.gameLayer.getComponent(m.default).initLevelLayer(t),e.node.active=!1,o())})},s([i({type:cc.Node,tooltip:"\u6e38\u620f\u8282\u70b9"})],_.prototype,"gameLayer",void 0),s([i({type:cc.Prefab,tooltip:"common\u9875\u9762\u8282\u70b9"})],_.prototype,"commonUIPrefab",void 0),s([i({type:cc.Prefab,tooltip:"topic\u8282\u70b9"})],_.prototype,"topicUIPrefab",void 0),a=s([a],_),r.default=a,cc._RF.pop()},{}],mainUiLayer:[function(t,e,o){"use strict";cc._RF.push(e,"4db0ejDPE9I06u2DuGNxPAb","mainUiLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(r,"__esModule",{value:!0});var u,d=a("CcJsFunc"),h=a("dataTs"),f=a("util"),g=a("enumConfig"),y=a("report-common"),m=a("GameManager"),v=a("DateManager"),b=a("sdk"),N=a("api-sheep"),_=a("tt-sdk"),w=a("data-manager"),C=a("audio");function P(){var t=null!==u&&u.apply(this,arguments)||this;return t.beginBtn=null,t.setupBtn=null,t.rankBtn=null,t.meBtn=null,t.focusBtn=null,t.childBtn=null,t.deskBtn=null,t.timeNode=null,t.timeLabel=null,t.bottomRankNode=null,t.levelNumLabel=null,t.bulletNode=null,t.bulletBtn=null,t.collectBtn=null,t.topicBtn=null,t.friendBtn=null,t.ttRankBtn=null,t.popCallbackCollect=null,t.beginButtonDuration=0,t.updateTime=0,t}a=(i=cc._decorator).ccclass,i=i.property,c(P,u=cc.Component),P.prototype.update=function(t){this.beginButtonDuration+=t,this.updateTime+=t,1<=this.updateTime&&(this.updateTime=0,this.updateTimeFunc())},P.prototype.updateTimeFunc=function(){var t=v.default.format(g.CALENDARNAMES[8],new Date).split(" ");t.length<2||(t=t[1].split(":")).length<3||(t=3600*(24-Number(t[0])-1)+60*(60-Number(t[1])-1)+(60-Number(t[2])),this.timeNode.activeInHierarchy&&(t=((t=f.default.formatTime(1e3*t))[1]<10?"0"+t[1]:t[1])+":"+(t[2]<10?"0"+t[2]:t[2])+":"+(t[3]<10?"0"+t[3]:t[3])+" \u91cd\u7f6e",this.timeLabel.string=t),this.setMainLayerData())},P.prototype.onEnable=function(){this.topicBtn.getChildByName("tag_icon").active=!w.default.getMatchResultData(),0<m.default.getInstance().collectionMark.topicClothesNum?this.collectBtn.getChildByName("tag_icon").active=!0:this.collectBtn.getChildByName("tag_icon").active=!1},P.prototype.start=function(){cc.game.on(g.EMITKEY.MAINUPDATEUI,this.setMainLayerData,this),cc.game.on(g.EMITKEY.RANKUSERINFOSUCCESS,this.rankUserInfoFunc,this),cc.game.on(g.EMITKEY.BULLETSTATE,this.bulletStateFunc,this),this.bulletStateFunc(),d.default.addTargetTouchUpInside(this.setupBtn,this.setupTouchEnd.bind(this)),d.default.addTargetTouchUpInside(this.rankBtn,this.rankBtnFunc.bind(this)),d.default.addTargetTouchUpInside(this.ttRankBtn,this.rankBtnFunc.bind(this)),d.default.addTargetTouchUpInside(this.beginBtn,this.beginBtnEnd.bind(this)),d.default.addTargetTouchUpInside(this.focusBtn,this.focusBtnFunc.bind(this)),d.default.addTargetTouchUpInside(this.childBtn,this.childBtnFunc.bind(this)),d.default.addTargetTouchUpInside(this.deskBtn,this.deskBtnFunc.bind(this)),d.default.addTargetTouchUpInside(this.bulletBtn,this.bulletBtnFunc.bind(this)),d.default.addTargetTouchUpInside(this.collectBtn,this.collectBtnFunc.bind(this)),d.default.addTargetTouchUpInside(this.topicBtn,this.topicBtnFunc.bind(this)),d.default.addTargetTouchUpInside(this.friendBtn,this.friendBtnFunc.bind(this)),d.default.addTargetTouchUpInside(this.meBtn,this.meBtnFunc.bind(this)),h.default.isLogin()?(this.bulletBtn.active=!0,this.meBtn.active=!0):(this.bulletBtn.active=!1,this.meBtn.active=!1),this.childBtn.active=!1,this.deskBtn.active=!1,this.focusBtn.active=!1,_.default.isSupportFocusDouYin()&&(this.focusBtn.active=!0),this.setMainLayerData(),this.updateTimeFunc(),this.popCallbackCollect={freeCallBack:this.freeCallBackFunc.bind(this),exitCallBack:this.exitCallBackFunc.bind(this)},this.bottomRankNode.active=!1,this.requestData(),h.default.isPlatform(h.GDPlatform.wx)||h.default.isPlatform(h.GDPlatform.web)?(this.friendBtn.active=!0,this.rankBtn.active=!0):(this.friendBtn.active=!1,this.rankBtn.active=!1),h.default.isPlatform(h.GDPlatform.tt)||h.default.isPlatform(h.GDPlatform.oppo)||h.default.isPlatform(h.GDPlatform.vivo)?this.ttRankBtn.active=!0:this.ttRankBtn.active=!1},P.prototype.meBtnFunc=function(){console.log("\u4e2a\u4eba\u8d44\u6599"),cc.game.emit("showPop",{popName:"personalPop",showPopData:{}})},P.prototype.friendBtnFunc=function(){console.log("\u670b\u53cb\u5708"),cc.game.emit("showPop",{popName:"todayRankPop",showPopData:{}})},P.prototype.beginBtnEnd=function(){console.log("\u5f00\u59cb\u6e38\u620f"),this.beginTouchEnd(1)},P.prototype.topicBtnFunc=function(){console.log("\u4eca\u65e5\u8bdd\u9898"),this.beginTouchEnd(2)},P.prototype.collectBtnFunc=function(){console.log("\u6536\u85cf");var t={popName:"topicCollectPop",showPopData:{topicClothesNum:m.default.getInstance().collectionMark.topicClothesNum,changeClothesCb:this.changeClothesFunc.bind(this)}};cc.game.emit("showPop",t),this.collectBtn.getChildByName("tag_icon").active=!1,m.default.getInstance().collectionMark.topicClothesNum=0},P.prototype.changeClothesFunc=function(t){N.default.updateUserSkin(t,function(){}),setTimeout(function(){cc.game.emit(g.EMITKEY.CHANGESHEEPCLOTHES)},1e3)},P.prototype.bulletStateFunc=function(){var t=h.default.getItem(g.STORAGEKEY.BULLETSWITCH);if(!t)return console.log("bullet = "+t),void h.default.setItem(g.STORAGEKEY.BULLETSWITCH,1);this.bulletNode.opacity=1==t?255:0},P.prototype.rankUserInfoFunc=function(){h.default.isLogin()?(this.bulletBtn.active=!0,this.meBtn.active=!0):(this.bulletBtn.active=!1,this.meBtn.active=!1)},P.prototype.bulletBtnFunc=function(){m.default.getInstance().bulletTime<=0?cc.game.emit(g.EMITKEY.SHOWMAINTIPS,"\u4e00\u5206\u949f\u53ea\u80fd\u53d1\u4e00\u6761\u5f39\u5e55\u54e6~"):(console.log("\u53d1\u5f39\u5e55"),cc.game.emit("showPop",{popName:"bulletScreenPop",showPopData:{}}))},P.prototype.focusBtnFunc=function(){console.log("\u5173\u6ce8"),_.default.focusDouYin()},P.prototype.childBtnFunc=function(){console.log("\u8f6c\u8df3"),_.default.gameBox()},P.prototype.deskBtnFunc=function(){console.log("\u684c\u9762"),_.default.addShortcut()},P.prototype.requestData=function(){h.default.isLogin()&&N.default.requestUserInfo()},P.prototype.exitCallBackFunc=function(){},P.prototype.showBottomRankNode=function(t){t.index?(this.bottomRankNode.active=!0,this.bottomRankNode.getChildByName("rank").getComponent(cc.Label).string="\u7b2c"+t.index+"\u540d"):this.bottomRankNode.active=!1},P.prototype.freeCallBackFunc=function(){console.log("\u89c2\u770b\u5e7f\u544a ###### ");var t=this,e=h.default.GetVedioID();b.default.watchAdVideo({id:e,success:function(){console.log("\u6210\u529f sdk"),t.beginTouchCallbackFunc()},fail:function(){console.log("\u5931\u8d25")},nofit:function(){t.shareTTAction()}})},P.prototype.shareTTAction=function(){var t,e,o=this;b.default.isPlatform(b.Platform.wx)?(e=h.default.GetVedioID(),t=h.default.getUserData().openid,b.default.share(t,e,function(){o.shareCbMethod()},function(){cc.game.emit(g.EMITKEY.SHOWMAINTIPS,"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5fae\u4fe1\u7fa4\u4e0e\u597d\u53cbPK")})):b.default.isPlatform(b.Platform.tt)&&(e={popName:"shareNodePop",showPopData:{type:2,shareCb:this.shareCbMethod.bind(this)}},cc.game.emit("showPop",e))},P.prototype.shareCbMethod=function(){console.log("\u5206\u4eab\u6210\u529f ######"),this.beginTouchCallbackFunc()},P.prototype.rankBtnFunc=function(){console.log("\u6392\u884c\u699c"),cc.game.emit("showPop",{popName:"sheepRankPop",showPopData:{popCallbackCollect:null}})},P.prototype.setMainLayerData=function(){var t=cc.sys.localStorage.getItem("unlocklevel11111")||"0";t=Number.parseInt(t),this.timeNode.active=!1,this.levelNumLabel.string="\u7b2c"+(t+1)+"\u5173"},P.prototype.setupTouchEnd=function(){console.log("\u6253\u5f00\u8bbe\u7f6e\u5f39\u7a97"),cc.game.emit("showPop",{popName:"setupPop",showPopData:{popCallbackCollect:null,setupType:1}})},P.prototype.beginTouchEnd=function(t){return l(this,void 0,Promise,function(){var e;return p(this,function(o){switch(o.label){case 0:return b.default.isPlatform(b.Platform.tt)?0!=h.default.isLogin()?[3,5]:[4,N.default.ttLogin()]:[3,6];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,N.default.getUserInfo()];case 3:return o.sent(),[3,5];case 4:return e=o.sent(),cc.warn("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff0c\u53ef\u80fd\u7528\u6237\u62d2\u7edd\u6388\u6743",e),[3,5];case 5:return[3,17];case 6:return b.default.isPlatform(b.Platform.wx)?0!=h.default.isLogin()?[3,11]:[4,N.default.wxLogin()]:[3,12];case 7:o.sent(),o.label=8;case 8:return o.trys.push([8,10,,11]),[4,N.default.getWxUserInfo()];case 9:return o.sent(),[3,11];case 10:return e=o.sent(),cc.warn("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff0c\u53ef\u80fd\u7528\u6237\u62d2\u7edd\u6388\u6743",e),[3,11];case 11:return[3,17];case 12:return b.default.isPlatform(b.Platform.oppo)?0!=h.default.isLogin()?[3,14]:[4,N.default.oppoLogin()]:[3,15];case 13:o.sent(),o.label=14;case 14:return[3,17];case 15:return b.default.isPlatform(b.Platform.vivo)&&0==h.default.isLogin()?[4,N.default.vivoLogin()]:[3,17];case 16:o.sent(),o.label=17;case 17:return console.log("\u767b\u5f55\u6210\u529f\uff0c\u6216\u8005\u5df2\u767b\u5f55 ###### "),1!=t?[3,18]:(this.beginGameStatus(),[3,20]);case 18:return 2!=t?[3,20]:[4,N.default.getTopicData(function(){})];case 19:o.sent(),y.default.reportTACommon("game_start",{type:"\u8bdd\u9898\u6311\u6218"}),w.default.topicModel&&w.default.topicModel.info&&0!=w.default.topicModel.info.type?this.enterTopicGame():(this.showChoosePop(0),console.log("\u52a0\u5165\u8bdd\u9898")),o.label=20;case 20:return[2]}})})},P.prototype.showChoosePop=function(t){t={popName:"topicChoosePop",showPopData:{type:t,chooseCallback:this.chooseCallbackFunc.bind(this)}},cc.game.emit("showPop",t)},P.prototype.chooseCallbackFunc=function(){var t=this;this.enterTopicGame(),setTimeout(function(){t.showTeamPop()},1500)},P.prototype.enterTopicGame=function(){y.default.reportTACommon("topic_join_ad",{}),cc.game.emit(g.EMITKEY.SHOWTRANSITLAYER,function(){cc.game.emit(g.EMITKEY.SHOWMODULE,g.MODULETYPE.TOPIC)})},P.prototype.showTeamPop=function(){cc.game.emit("showPop",{popName:"topicJoinedPop",showPopData:{}})},P.prototype.beginGameStatus=function(){var t=w.default.todayIsWin();m.default.getInstance().todayState=t,console.log("state = ",t),y.default.reportTACommon("game_start",{type:"\u6bcf\u65e5\u6311\u6218"}),m.default.getInstance().unLimitVideo=!0,-1==t?this.gotoGame():this.videoGotoGame()},P.prototype.gotoGame=function(){var t={popName:"nothingPop",showPopData:{beginTouchCallback:this.beginTouchCallbackFunc.bind(this),popType:0}};cc.game.emit("showPop",t)},P.prototype.videoGotoGame=function(){var t=v.default.format(g.CALENDARNAMES[5],new Date),e=v.default.format(g.CALENDARNAMES[6],new Date);t=h.default.getDailyData(t,e),e=0,3<=(e=t&&t.unLimitVideo?t.unLimitVideo:e)||m.default.getInstance().unLimitVideo?(m.default.getInstance().unLimitVideo=!0,this.beginTouchCallbackFunc(),console.log("\u514d\u5e7f\u544a ###### = "+e)):(m.default.getInstance().unLimitVideo=!1,t={popName:"noLimitPop",showPopData:{playVideoFunc:this.playVideoFunc.bind(this),noPlayVideoFunc:this.noPlayVideoFunc.bind(this),videoCount:e}},cc.game.emit(g.EMITKEY.SHOWPOP,t),console.log("\u4e0d\u514d\u5e7f\u544a ###### = "+e))},P.prototype.playVideoFunc=function(){console.log("\u89c2\u770b\u5e7f\u544a");var t=this,e=h.default.GetVedioID();b.default.watchAdVideo({id:e,success:function(){console.log("\u6210\u529f sdk");var e=v.default.format(g.CALENDARNAMES[5],new Date),o=v.default.format(g.CALENDARNAMES[6],new Date),n=h.default.getDailyData(e,o),a=1;n?(a=Number(n.unLimitVideo)+1,3<=(n.unLimitVideo=a)&&y.default.reportTACommon("unlimited_challenges_ad",{})):n={dailyID:o,isWin:!1,unLimitVideo:a,sheepNum:-1},h.default.saveDailyData(e,o,n),3<=a?(m.default.getInstance().unLimitVideo=!0,t.beginTouchCallbackFunc(),cc.game.emit(g.EMITKEY.CLOSEALLPOP)):t.videoGotoGame()},fail:function(){console.log("\u5931\u8d25")},nofit:function(){t.shareTTAction()}})},P.prototype.noPlayVideoFunc=function(){var t={popName:"getPropPop",showPopData:{popCallbackCollect:this.popCallbackCollect,popType:6}};cc.game.emit(g.EMITKEY.SHOWPOP,t)},P.prototype.beginTouchCallbackFunc=function(){1<=this.beginButtonDuration?(this.beginButtonDuration=0,m.default.setGameType(g.GAMETYPE.GAMEDAILY),C.default.playBGM(),cc.game.emit(g.EMITKEY.BEGINGAME)):console.log("\u4e0d\u80fd\u8fde\u7eed\u70b9\u51fb")},s([i({type:cc.Node,tooltip:"\u5f00\u59cb\u6e38\u620f"})],P.prototype,"beginBtn",void 0),s([i(cc.Node)],P.prototype,"setupBtn",void 0),s([i({type:cc.Node,tooltip:"wx\u6392\u884c\u699c"})],P.prototype,"rankBtn",void 0),s([i({type:cc.Node,tooltip:"\u4e2a\u4eba\u8d44\u6599"})],P.prototype,"meBtn",void 0),s([i({type:cc.Node,tooltip:"\u5173\u6ce8\u6296\u97f3\u53f7"})],P.prototype,"focusBtn",void 0),s([i({type:cc.Node,tooltip:"\u6258\u513f\u6240"})],P.prototype,"childBtn",void 0),s([i({type:cc.Node,tooltip:"\u6dfb\u52a0\u5230\u684c\u9762"})],P.prototype,"deskBtn",void 0),s([i(cc.Node)],P.prototype,"timeNode",void 0),s([i(cc.Label)],P.prototype,"timeLabel",void 0),s([i(cc.Node)],P.prototype,"bottomRankNode",void 0),s([i(cc.Label)],P.prototype,"levelNumLabel",void 0),s([i({type:cc.Node,tooltip:"\u5f39\u5e55\u9875\u9762"})],P.prototype,"bulletNode",void 0),s([i({type:cc.Node,tooltip:"\u5f39\u5e55"})],P.prototype,"bulletBtn",void 0),s([i({type:cc.Node,tooltip:"\u6362\u88c5"})],P.prototype,"collectBtn",void 0),s([i({type:cc.Node,tooltip:"\u4eca\u65e5\u8bdd\u9898\u9875\u9762"})],P.prototype,"topicBtn",void 0),s([i({type:cc.Node,tooltip:"\u597d\u53cb\u6392\u884c\u699c"})],P.prototype,"friendBtn",void 0),s([i({type:cc.Node,tooltip:"tt\u6392\u884c\u699c"})],P.prototype,"ttRankBtn",void 0),a=s([a],P),r.default=a,cc._RF.pop()},{}],mapArea:[function(t,e,o){"use strict";cc._RF.push(e,"67f71SJOXZGlKQEcc+5J3rk","mapArea");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.blackLine=null,t.widthNum=0,t.heightNum=0,t.minBlockNum=0,t}r(p,s=cc.Component),p.prototype.start=function(){},p.prototype.refreshMap=function(t,e,o){this.widthNum=t,this.heightNum=e,this.minBlockNum=o,this.node.removeAllChildren();var n=this.widthNum*this.minBlockNum,a=this.heightNum*this.minBlockNum,i=this.node.width/n;this.node.height=i*a;for(var r=0;r<=n;r++){var c=r*i,s=0,l=0;l=r%(this.minBlockNum/2)==0?1:0,r%this.minBlockNum==0&&(l=2),this.addBlackLine(c,s,l,!0)}for(var p=0;p<=a;p++)l=p%(this.minBlockNum/2)==(c=0)?1:0,p%this.minBlockNum==0&&(l=2),this.addBlackLine(c,s=-p*i,l,!1)},p.prototype.addBlackLine=function(t,e,o,n){var a=cc.instantiate(this.blackLine);2==o?(a.height=6,a.opacity=50):1==o?(a.height=4,a.opacity=40):(a.height=2,a.opacity=20),n?(a.angle=-90,a.width=this.node.height):(a.angle=0,a.width=this.node.width),a.x=t,a.y=e,this.node.addChild(a)},c([l(cc.Prefab)],p.prototype,"blackLine",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],mapEditor:[function(t,e,o){"use strict";cc._RF.push(e,"d6b62YDoXJBjYP9NnAI8e6T","mapEditor");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("blockEditorPrefab"),u=a("config"),d=a("key-map"),h=a("mapArea");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.mapArea=null,t.blockArea=null,t.blockEditorNode=null,t.blockEditorPrefab=null,t.widthNum=0,t.heightNum=0,t.moveBlockType=0,t.moldType=1,t.levelID=0,t.blockNodeObj={},t.isDeleteBlock=!1,t.minBlockNum=8,t.blockMaxWidth=120,t.blockMaxHeight=135,t.moveMinBlockNum=1,t.newLevelDataObj=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){window.xuxu=this,cc.game.on("refreshMapSizeData",this.refreshMapSizeData,this),cc.game.on("setBlockTypeData",this.setBlockTypeData,this),cc.game.on("initLevelData",this.initLevelData,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.mouseDown,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.mouseEnter,this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeave,this),d.default.onKeyDownWithMeta("a",this.changeMouseStatus.bind(this)),d.default.onKeyDownWithMeta("1",this.changeBlockVoid.bind(this)),d.default.onKeyDownWithMeta("2",this.changeBlockType.bind(this)),d.default.onKeyDownWithMeta("3",this.changeRandomBlockType.bind(this)),d.default.onKeyDownWithMeta("4",this.changeMoveMinBlockNum.bind(this)),d.default.onKeyDownWithMeta("z",this.changeMouseStatus.bind(this)),d.default.onKeyDownWithMeta("x",this.changeBlockVoid.bind(this)),d.default.onKeyDownWithMeta("c",this.changeRandomBlockType.bind(this)),d.default.onKeyDownWithMeta("v",this.changeMoveMinBlockNum.bind(this))},f.prototype.initLevelData=function(t){console.log("\u65b0\u5730\u56fe\u6570\u636e\uff1a",t),this.newLevelDataObj=t.newLevelData,this.levelID=this.newLevelDataObj.levelKey,this.setLevelMapData()},f.prototype.setBlockTypeData=function(t){if(!this.newLevelDataObj)return!1;this.newLevelDataObj.blockTypeData=t,console.log("\u8bbe\u7f6e\u5173\u5361\u56fe\u5757\u6570\u636e\uff1a",t)},f.prototype.refreshMapSizeData=function(t){if(!this.newLevelDataObj)return!1;this.newLevelDataObj.widthNum=t.width,this.newLevelDataObj.heightNum=t.height,this.setLevelMapData()},f.prototype.setLevelMapData=function(){this.initLevelAllBlock(),this.mapArea.getComponent(h.default).refreshMap(this.newLevelDataObj.widthNum,this.newLevelDataObj.heightNum,this.minBlockNum)},f.prototype.mouseDown=function(t){if(!this.newLevelDataObj||this.isDeleteBlock)return!1;t=t.getLocation(),t=this.node.convertToNodeSpaceAR(t),t=this.getMouseBlockPoint(t),t=this.getMouseBlockArea(t),this.clickAddMapBlockNode(t),console.log("lineObj:",t.rolNum,t.rowNum)},f.prototype.mouseEnter=function(t){if(!this.newLevelDataObj||this.isDeleteBlock)return!1;this.blockEditorNode.active=!0,t=t.getLocation(),t=this.node.convertToNodeSpaceAR(t),this.blockEditorNode.x=t.x,this.blockEditorNode.y=t.y,t=this.node.width/this.newLevelDataObj.widthNum,this.blockEditorNode.scale=t/this.blockMaxWidth,this.blockEditorNode.getComponent(p.default).setBlockImgType(this.moveBlockType,this.moldType)},f.prototype.mouseMove=function(t){if(!this.newLevelDataObj||this.isDeleteBlock)return!1;t=t.getLocation(),t=this.node.convertToNodeSpaceAR(t),t=this.getMouseBlockPoint(t),this.blockEditorNode.x=t.x,this.blockEditorNode.y=t.y},f.prototype.mouseLeave=function(){if(!this.newLevelDataObj||this.isDeleteBlock)return!1;this.blockEditorNode.active=!1},f.prototype.getMouseBlockArea=function(t){var e=this.newLevelDataObj.widthNum*this.minBlockNum;return this.heightNum,this.minBlockNum,e=this.node.width/e,{rolNum:Math.floor(t.x/e),rowNum:Math.floor(Math.abs(t.y)/e)}},f.prototype.getMouseBlockPoint=function(t){var e=this.newLevelDataObj.widthNum*this.minBlockNum,o=(this.heightNum,this.minBlockNum,this.node.width/e*this.moveMinBlockNum);return e=Math.floor(t.x/o)*o,o=-Math.floor(Math.abs(t.y)/o)*o,cc.v2(e,o)},f.prototype.clickAddMapBlockNode=function(t){var e=this.getBlockLayerIndex(t),o={id:e+"-"+t.rolNum+"-"+t.rowNum,type:this.moveBlockType,rolNum:t.rolNum,rowNum:t.rowNum,layerNum:e,moldType:this.moldType,blockNode:null};this.newLevelDataObj.levelData[e]||(this.newLevelDataObj.levelData[e]=[]),this.newLevelDataObj.levelData[e].push(o),console.log("\u6dfb\u52a0\u5b8c\u6570\u636e\uff1a",this.newLevelDataObj.levelData),this.addBlockEditorNode(t.rolNum,t.rowNum,e,this.moveBlockType,this.moldType)},f.prototype.initLevelAllBlock=function(){this.blockNodeObj={},this.blockArea.removeAllChildren();var t,e=this.newLevelDataObj.levelData;for(t in e)for(var o in e[t])this.addBlockEditorNode(e[t][o].rolNum,e[t][o].rowNum,e[t][o].layerNum,e[t][o].type,e[t][o].moldType)},f.prototype.addBlockEditorNode=function(t,e,o,n,a){var i=cc.instantiate(this.blockEditorPrefab),r=this.newLevelDataObj.widthNum*this.minBlockNum,c=t*(s=this.node.width/r),s=(r=-e*s,this.node.width/this.newLevelDataObj.widthNum);i.scale=s/this.blockMaxWidth,i.x=c,i.y=r,i.getComponent(p.default).setBlockImgType(n,this.moldType),i.getComponent(p.default).setBlockLayerNum(t,e,o,a,this.deleteBlock.bind(this)),this.blockNodeObj[t+"-"+e+"-"+o]=i,this.blockArea.addChild(i),cc.game.emit("setBlockNum")},f.prototype.deleteBlock=function(t,e,o){if(this.isDeleteBlock){var n=t+"-"+e+"-"+o;this.blockNodeObj[n]&&(this.blockNodeObj[n].destroy(),delete this.blockNodeObj[n]);var a=this.newLevelDataObj.levelData;if(a[o])for(var i=0;i<a[o].length;i++)a[o][i].rolNum==t&&a[o][i].rowNum==e&&a[o].splice(i,1);cc.game.emit("setBlockNum")}},f.prototype.getBlockLayerIndex=function(t){var e,o,n,a,i,r,c=this.newLevelDataObj.levelData,s=1;for(e in c)for(var l=c[e],p=0;p<l.length;p++)l[p]&&(o=t.rolNum-this.minBlockNum,n=t.rolNum+this.minBlockNum,a=t.rowNum-this.minBlockNum,i=t.rowNum+this.minBlockNum,(r=l[p]).rolNum>o&&r.rolNum<n&&r.rowNum>a&&r.rowNum<i&&r.layerNum+1>s&&(s=r.layerNum+1));return s},f.prototype.changeMoveMinBlockNum=function(){1==this.moveMinBlockNum?this.moveMinBlockNum=4:this.moveMinBlockNum=1},f.prototype.changeRandomBlockType=function(){this.moldType=2,this.moveBlockType=0,this.blockEditorNode.getComponent(p.default).setBlockImgType(this.moveBlockType,this.moldType)},f.prototype.changeBlockVoid=function(){this.moldType=1,this.moveBlockType=0,this.blockEditorNode.getComponent(p.default).setBlockImgType(this.moveBlockType,this.moldType)},f.prototype.changeBlockType=function(){this.moveBlockType++,this.moldType=1,this.moveBlockType>u.default.blockTypeConfig[u.default.blockTypeConfig.length-1]&&(this.moveBlockType=0),this.blockEditorNode.getComponent(p.default).setBlockImgType(this.moveBlockType,this.moldType)},f.prototype.changeMouseStatus=function(){var t;console.log("command+a"),this.isDeleteBlock?(console.log("this.isDeleteBlock",this.isDeleteBlock),this.isDeleteBlock=!1,this.blockEditorNode.active=!0,t=this.node.width/this.newLevelDataObj.widthNum,this.blockEditorNode.scale=t/this.blockMaxWidth):(console.log("this.isDeleteBlock",this.isDeleteBlock),this.isDeleteBlock=!0,this.blockEditorNode.active=!1)},s([i(cc.Node)],f.prototype,"mapArea",void 0),s([i(cc.Node)],f.prototype,"blockArea",void 0),s([i(cc.Node)],f.prototype,"blockEditorNode",void 0),s([i(cc.Prefab)],f.prototype,"blockEditorPrefab",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],maskLayer:[function(t,e,o){"use strict";cc._RF.push(e,"5fe07xHyi5IB5UwR8crAg1t","maskLayer");var n,a,i=t,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=i("enumConfig");function p(){return null!==s&&s.apply(this,arguments)||this}i=(a=cc._decorator).ccclass,a.property,c(p,s=cc.Component),p.prototype.start=function(){this.node.active=!1,cc.game.on(l.EMITKEY.SHOWMASKLAYER,this.showMaskLayer,this),cc.game.on(l.EMITKEY.HIDEMASKLAYER,this.hideMaskLayer,this),this.node.on(cc.Node.EventType.TOUCH_START,this.starFunc,this),this.node.on(cc.Node.EventType.TOUCH_END,this.endFunc,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.moveFunc,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelFunc,this)},p.prototype.showMaskLayer=function(){this.node.active=!1},p.prototype.hideMaskLayer=function(){this.node.active=!1},p.prototype.starFunc=function(t){t.stopPropagation()},p.prototype.endFunc=function(t){t.stopPropagation()},p.prototype.moveFunc=function(t){t.stopPropagation()},p.prototype.cancelFunc=function(t){t.stopPropagation()},i=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r}([i],p),r.default=i,cc._RF.pop()},{}],mask:[function(t,e,o){"use strict";cc._RF.push(e,"29fbe5db7JFWJL2hqkjASq4","mask");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var c,s=cc._decorator;function l(){return null!==c&&c.apply(this,arguments)||this}a=s.ccclass,s.property,r(l,c=cc.Component),l.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.starFunc,this),this.node.on(cc.Node.EventType.TOUCH_END,this.endFunc,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.moveFunc,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelFunc,this)},l.prototype.starFunc=function(t){t.stopPropagation()},l.prototype.endFunc=function(t){t.stopPropagation()},l.prototype.moveFunc=function(t){t.stopPropagation()},l.prototype.cancelFunc=function(t){t.stopPropagation()},a=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r}([a],l),i.default=a,cc._RF.pop()},{}],"mesh-vertex":[function(t,e,o){"use strict";cc._RF.push(e,"a29abOYIg9Li5/yGTvFnVbF","mesh-vertex");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.MeshVertex=void 0,n.MeshVertex=function(t,e,o){this.position=t,this.normal=e,this.uv=o},cc._RF.pop()},{}],moveOutArea:[function(t,e,o){"use strict";cc._RF.push(e,"f88d3tXmpFFjbC+QpZh+Ueh","moveOutArea");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("enumConfig"),u=a("crushArea");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.crushAreaNode=null,t.crushAreaArgs=null,t.blockMaxWidth=120,t.parentComp=null,t.newScale=.8,t.newAddY=8,t.moveOutObj={1:[],2:[],3:[]},t}a=(i=cc._decorator).ccclass,i=i.property,c(d,l=cc.Component),d.prototype.start=function(){},d.prototype.initMoveOutArea=function(t){this.node.removeAllChildren(),this.parentComp=t,this.moveOutObj={1:[],2:[],3:[]}},d.prototype.addThreeOutBlock=function(t){for(var e=0;e<t.length;e++){this.moveOutObj[e+1].push(t[e]);var o=t[e],n=o.node.convertToWorldSpaceAR(cc.v2(0,0));n=this.node.convertToNodeSpaceAR(n),o.node.removeFromParent(!1),o.node.x=n.x,o.node.y=n.y,o.cardDataObj.moldType=1,o.updateBlockNodeData(o.cardDataObj,this.removeCardNode.bind(this)),this.node.addChild(o.node)}this.updateBlockPosStatus()},d.prototype.cancelAddBlockFunc=function(t){this.moveOutObj[t.moveOutKey].push(t);var e=t.node.convertToWorldSpaceAR(cc.v2(0,0));e=this.node.convertToNodeSpaceAR(e),t.node.removeFromParent(!1),t.node.x=e.x,t.node.y=e.y,this.node.addChild(t.node),this.updateBlockPosStatus()},d.prototype.checkGameWin=function(){for(var t in this.moveOutObj)if(0<this.moveOutObj[t].length)return!1;return!0},d.prototype.updateBlockPosStatus=function(){for(var t in this.moveOutObj)for(var e=Number(t)*this.blockMaxWidth*this.newScale-this.blockMaxWidth*this.newScale/2,o=this,n=0;n<this.moveOutObj[t].length;n++)!function(n){var a=o.moveOutObj[t][n],i=n*o.newAddY;n<o.moveOutObj[t].length-1?a.setStatus(!1,o.newScale):a.setStatus(!0,o.newScale),a.node.x!=e||a.node.y!=i?(a.node.stopAllActions(),cc.tween(a.node).to(.15,{x:e,y:i,scale:o.newScale}).call(function(){a.isChoosed=!1,cc.game.emit(p.EMITKEY.HIDEMASKLAYER,8)},o).start()):(a.isChoosed=!1,cc.game.emit(p.EMITKEY.HIDEMASKLAYER,9))}(n)},d.prototype.removeCardNode=function(t){if(!(7<=this.crushAreaNode.getComponent(u.default).getCrushBlockNum())){this.crushAreaNode.setSiblingIndex(10),this.crushAreaArgs.setSiblingIndex(10);var e,o=1;for(e in this.moveOutObj)for(var n=0;n<this.moveOutObj[e].length;n++){var a=t.cardDataObj;if(this.moveOutObj[e][n].cardDataObj.layerNum==a.layerNum&&this.moveOutObj[e][n].cardDataObj.rolNum==a.rolNum&&this.moveOutObj[e][n].cardDataObj.rowNum==a.rowNum){o=Number(e),this.moveOutObj[e].splice(n,1),this.updateBlockPosStatus();break}}this.parentComp.crushBlockNode(t),t.comeParent="moveOutArea",t.moveOutKey=o}},s([i(cc.Node)],d.prototype,"crushAreaNode",void 0),s([i(cc.Node)],d.prototype,"crushAreaArgs",void 0),a=s([a],d),r.default=a,cc._RF.pop()},{}],"native-bridge":[function(t,e,o){"use strict";cc._RF.push(e,"2c85cEMdLpBjqoP7dN6ARgY","native-bridge");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var i=n("sdk"),r=n("native-def"),c=n("native-event");function s(){}s.leitingShareReq=function(t){s.shareInfo=t,s.callNative(r.NativeFun.leitingShare,{manner:t.manner,params:JSON.stringify(t.param)})},s.leitingLogin=function(t){s.loginInfo=t,cc.director.getScene().name,cc.game.emit(c.NativeEvent.LeitingLoginInfo,t)},s.leitingShare=function(t){s.shareInfo&&("1"==t.status?s.shareInfo.success&&s.shareInfo.success(!0):s.shareInfo.fail&&s.shareInfo.fail(!0),s.shareInfo.complete&&s.shareInfo.complete("1"==t.status),s.shareInfo=null)},s.leitingReport=function(t,e){void 0===e&&(e={}),e=JSON.stringify(e),s.callNative(r.NativeFun.leitingEventReport,{plugName:"FF",eventKey:t+","+t,eventValue:e})},s.callNative=function(t,e){void 0===e&&(e={}),console.log("callNative","method",t,"param",e),window.jsb?i.default.isPlatform(i.Platform.android)?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/CocosBridge","callNative","(Ljava/lang/String;Ljava/lang/String;)V",t,JSON.stringify(e)):i.default.isPlatform(i.Platform.ios)&&jsb.reflection.callStaticMethod("CocosBridge","callNative:withParam:",t,JSON.stringify(e)):console.log(t," support on jsb only")},s.CocosCaller=function(t,e){console.log("CocosCaller",t,e);var o=JSON.parse(e);switch(t){case r.CocosFun.androidParamsInfo:s.androidInfo=o;break;case r.CocosFun.setMedia:s.media=o.value;break;case r.CocosFun.leitingLogin:s.leitingLogin(o);break;case r.CocosFun.leitingShare:s.leitingShare(o);break;case r.CocosFun.leitingGetDeviceInfo:s.deviceInfo=o,cc.game.emit(c.NativeEvent.LeitingGetDeviceInfo);break;case r.CocosFun.outAppPayNotify:s.loginInfo=o;break;case r.CocosFun.overseasUserBindCallback:cc.game.emit(c.NativeEvent.OverseasUserBindCallback);break;case r.CocosFun.leitingLoginErr:s.loginInfo=null,cc.game.emit(c.NativeEvent.LeitingLoginErr);break;case r.CocosFun.showRewardVideoAdRst:cc.game.emit("ad-reward-video-native-callback",0,o&&0==o.code);break;case r.CocosFun.productInfoRecv:"0"!=(n=o).code&&console.warn("\u8bf7\u6c42\u5546\u54c1\u4ef7\u683c\u4fe1\u606f\u5931\u8d25"),cc.game.emit(c.NativeEvent.ProductInfoRst,n.productInfo);break;case r.CocosFun.leitingPayCb:var n=o;cc.game.emit(c.NativeEvent.PayRst,n);default:cc.error("native call cocos err",t)}},s.loginInfo=null,s.deviceInfo=null,s.androidInfo=null,s.media="",n=s,a.default=n,window.CocosCaller=n.CocosCaller,cc._RF.pop()},{}],"native-def":[function(t,e,o){"use strict";cc._RF.push(e,"b1a045iF8FPGbssaev6oGNm","native-def");var n=e,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.CocosFun=a.NativeFun=a.shareType=a.sharePlatform=a.reportType=a.afReportList=a.BindType=void 0,(n=a.BindType||(a.BindType={})).googleplay="1",n.facebook="2",n.gamecenter="3",a.afReportList=[10,20,30,40,50,60,70,80,90,100,200,400,600],(n=a.reportType||(a.reportType={})).Regiser="2",n.CreateRole="3",n.Loginout="4",n.Pay="5",n.FinishGuide="6",n.addCart="7",(n=a.sharePlatform||(a.sharePlatform={})).googleplay="googleplay",n.facebook="facebook",n.lineins="lineins",(n=a.shareType||(a.shareType={})).link="link",n.photo="photo",n.video="video",n.text="text",(n=a.NativeFun||(a.NativeFun={})).InitLeitingSdk="initLeitingSdk",n.leitingLogin="leitingLogin",n.leitingAccountCenter="leitingAccountCenter",n.leitingShare="leitingShare",n.leitingShowBindAccountPage="leitingShowBindAccountPage",n.leitingEventReport="leitingEventReport",n.showRewardVideoAd="showRewardVideoAd",n.reqProductInfo="reqProductInfo",n.reqPay="reqPay",n.shushuEventReport="shushuEventReport",n.publicParamsInfo="publicParamsInfo",(a=a.CocosFun||(a.CocosFun={})).setMedia="setMedia",a.leitingLogin="leitingLogin",a.leitingLoginErr="leitingLoginErr",a.leitingPay="leitingPay",a.leitingShare="leitingShare",a.leitingGetDeviceInfo="leitingGetDeviceInfo",a.outAppPayNotify="outAppPayNotify",a.overseasUserBindCallback="overseasUserBindCallback",a.showRewardVideoAdRst="showRewardVideoAdRst",a.productInfoRecv="productInfoRecv",a.leitingPayCb="leitingPayCb",a.androidParamsInfo="androidParamsInfo",cc._RF.pop()},{}],"native-event":[function(t,e,o){"use strict";cc._RF.push(e,"4b33ap2W0tF+qCVSawt7vjA","native-event");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.NativeEvent=void 0,(n=n.NativeEvent||(n.NativeEvent={})).LeitingGetDeviceInfo="NativeEvent.LeitingGetDeviceInfo",n.LeitingLoginInfo="NativeEvent.LeitingLoginInfo",n.OverseasUserBindCallback="NativeEvent.OverseasUserBindCallback",n.LeitingLoginErr="NativeEvent.LeitingLoginErr",n.ProductInfoRst="NativeEvent.ProductInfoRst",n.PayRst="NativeEvent.PayRst",cc._RF.pop()},{}],"network-tool":[function(t,e,o){"use strict";cc._RF.push(e,"cd03faX39hArqKnt5t/dSp9","network-tool");var n=t,a=e,i=o,r=function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var c=n("http");function s(){}a=n("data-env"),n=n("data-type"),n=a.getLocalEnvConfig(n.ENV.local),s.setLevelMapData=function(t,e){0<=this.host.indexOf("easygame2021")?console.log("\u7ebf\u4e0a\u73af\u5883\u505c\u6b62\u6d4b\u8bd5 ###### "):s.post({url:"/admin/game_map/upsert",data:{map_id:t,map_data:e},success:function(e){0==e.err_code?console.log("\u4fdd\u5b58\u5730\u56fe\uff1a",t,e):console.log("\u4fdd\u5b58\u5730\u56fe\u5931\u8d25:",t,e)}})},s.get=function(t){return c.default.get(r({host:this.host,baseParams:{}},t))},s.post=function(t){return c.default.post(r({host:this.host,baseParams:{}},t))},s.GETURL=function(t){return c.default.get(r({baseParams:{}},t))},s.POSTURL=function(t){return c.default.post(r({baseParams:{}},t))},s.GET=function(t,e,o){void 0===e&&(e={});var n="";Object.keys(e).forEach(function(t){n+=t+"="+encodeURIComponent(e[t])+"&"}),""!==n&&(t=t+"?"+(n=n.substr(0,n.lastIndexOf("&"))));var a=cc.loader.getXMLHttpRequest();a.open("GET",t,!0),a.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),a.onreadystatechange=function(){var t;4===a.readyState&&(t=a.responseText,200<=a.status&&a.status<300?(a.statusText,o(!0,t)):o(!1,t))},a.timeout=this.TimeOut,a.send()},s.POST=function(t,e,o){void 0===e&&(e={});var n=cc.loader.getXMLHttpRequest(),a="";Object.keys(e).forEach(function(t){a+=t+"="+encodeURIComponent(e[t])+"&"}),""!==a&&(a=a.substr(0,a.lastIndexOf("&"))),n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){var t;4===n.readyState&&(t=n.responseText,200<=n.status&&n.status<300?(n.statusText,o(!0,t)):o(!1,t))},n.send(a)},s.host=n.host,s.TimeOut=200,n=s,i.default=n,cc._RF.pop()},{}],newLevelPop:[function(t,e,o){"use strict";cc._RF.push(e,"da3caVMFQ5HlYmVp5lat/E1","newLevelPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("config");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.inputLevelNum=null,t.closeNode=null,t}c(d,l=cc.Component),d.prototype.start=function(){this.closeNode.on(cc.Node.EventType.TOUCH_END,this.closeFunc,this)},d.prototype.showNewLevelPop=function(){this.node.active=!0,this.inputLevelNum.string=""},d.prototype.newLevelFunc=function(){var t=Number(this.inputLevelNum.string);0<t?(this.node.active=!1,this.emitNewLevel(t),console.log("\u8bbe\u7f6e\u5173\u5361\u6570",this.inputLevelNum.string)):console.log("error:\u4e66\u5199\u9519\u8bef")},d.prototype.emitNewLevel=function(t){var e=cc.instantiate(u.default.baseMapObj);e.levelKey=t,cc.game.emit("initLevelData",{newLevelData:e})},d.prototype.closeFunc=function(){this.node.active=!1},s([p({type:cc.EditBox,tooltip:"\u8f93\u5165\u5bf9\u5e94\u5173\u5361\u6570"})],d.prototype,"inputLevelNum",void 0),s([p(cc.Node)],d.prototype,"closeNode",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],nextLevelPop:[function(t,e,o){"use strict";cc._RF.push(e,"b49fdZpjJtCJY67qY7JG6Ry","nextLevelPop");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.maskNode=null,t.fainNode=null,t}r(p,s=cc.Component),p.prototype.start=function(){},p.prototype.showPop=function(){var t=this;this.maskNode.opacity=0,this.node.active=!0,cc.tween(this.maskNode).to(0,{opacity:0}).to(.2,{opacity:178}).start();var e=cc.winSize.width;this.fainNode.x=e,this.fainNode.y=100,cc.tween(this.fainNode).to(1,{x:0,y:100},{easing:cc.easing.cubicOut}).delay(1).call(function(){cc.tween(t.maskNode).to(.8,{opacity:0}).start()}).to(1,{x:-e,y:100},{easing:cc.easing.quadOut}).call(function(){t.node.active=!1}).start()},c([l(cc.Node)],p.prototype,"maskNode",void 0),c([l(cc.Node)],p.prototype,"fainNode",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],noLimitPop:[function(t,e,o){"use strict";cc._RF.push(e,"86b2eck/b9Nv5kDApWcxh9L","noLimitPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("enumConfig");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.mask=null,t.popNode=null,t.closeBtn=null,t.videoBtn=null,t.noVideoBtn=null,t.limitVideoLabel=null,t.showPopData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(d,l=cc.Component),d.prototype.start=function(){cc.game.on(u.EMITKEY.UPDATEPOPDATA,this.updatePopDataFunc,this),p.default.addbtnTouchEndScale(this.mask,this.closeBtnFunc.bind(this)),p.default.addbtnTouchStartScale(this.closeBtn),p.default.addbtnTouchEndScale(this.closeBtn,this.closeBtnFunc.bind(this)),p.default.addbtnTouchCancelScale(this.closeBtn),p.default.addbtnTouchStartScale(this.videoBtn),p.default.addbtnTouchEndScale(this.videoBtn,this.videoBtnFunc.bind(this)),p.default.addbtnTouchCancelScale(this.videoBtn),p.default.addbtnTouchStartScale(this.noVideoBtn),p.default.addbtnTouchEndScale(this.noVideoBtn,this.noVideoBtnFunc.bind(this)),p.default.addbtnTouchCancelScale(this.noVideoBtn)},d.prototype.updatePopDataFunc=function(){},d.prototype.closeBtnFunc=function(){this.node.active=!1,this.showPopData&&this.showPopData.noPlayVideoFunc&&this.showPopData.noPlayVideoFunc()},d.prototype.noVideoBtnFunc=function(){this.node.active=!1,this.showPopData&&this.showPopData.noPlayVideoFunc&&this.showPopData.noPlayVideoFunc()},d.prototype.videoBtnFunc=function(){this.node.active=!1,this.showPopData&&this.showPopData.playVideoFunc&&this.showPopData.playVideoFunc()},d.prototype.showNoLimitPop=function(t){this.node.active=!0,this.showPopData=t,this.limitVideoLabel.string=t.videoCount+"/3",cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start()},s([i(cc.Node)],d.prototype,"mask",void 0),s([i(cc.Node)],d.prototype,"popNode",void 0),s([i(cc.Node)],d.prototype,"closeBtn",void 0),s([i(cc.Node)],d.prototype,"videoBtn",void 0),s([i(cc.Node)],d.prototype,"noVideoBtn",void 0),s([i(cc.Label)],d.prototype,"limitVideoLabel",void 0),a=s([a],d),r.default=a,cc._RF.pop()},{}],nothingPop:[function(t,e,o){"use strict";cc._RF.push(e,"f9f03C5IqJPgrwEd50J+8g+","nothingPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("enumConfig"),d=a("DateManager");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.mask=null,t.popNode=null,t.closeBtn=null,t.goBtn=null,t.titleLabel=null,t.descLabel=null,t.goLabel=null,t.showPopData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){p.default.addbtnTouchEndScale(this.mask,this.closeBtnFunc.bind(this)),p.default.addbtnTouchStartScale(this.closeBtn),p.default.addbtnTouchEndScale(this.closeBtn,this.closeBtnFunc.bind(this)),p.default.addbtnTouchCancelScale(this.closeBtn),p.default.addbtnTouchStartScale(this.goBtn),p.default.addbtnTouchEndScale(this.goBtn,this.goBtnFunc.bind(this)),p.default.addbtnTouchCancelScale(this.goBtn)},h.prototype.closeBtnFunc=function(){this.node.active=!1},h.prototype.goBtnFunc=function(){this.showPopData&&this.showPopData.beginTouchCallback&&this.showPopData.beginTouchCallback(),this.closeBtnFunc()},h.prototype.showNothingPop=function(t){this.node.active=!0,this.showPopData=t,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),!(t=d.default.format(u.CALENDARNAMES[4],new Date))||3<=(t=t.split("-")).length&&(this.titleLabel.string=t[1]+"\u6708"+t[2]+"\u65e5")},s([i(cc.Node)],h.prototype,"mask",void 0),s([i(cc.Node)],h.prototype,"popNode",void 0),s([i(cc.Node)],h.prototype,"closeBtn",void 0),s([i(cc.Node)],h.prototype,"goBtn",void 0),s([i(cc.Label)],h.prototype,"titleLabel",void 0),s([i(cc.Label)],h.prototype,"descLabel",void 0),s([i(cc.Label)],h.prototype,"goLabel",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],"page-house":[function(t,e,o){"use strict";cc._RF.push(e,"c7dfaR+FBhOv4WArlgOZb10","page-house");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("enumConfig");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.showMain=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){cc.game.on(d.EMITKEY.MAINUPDATEUI,this.updateSubUI,this),p.default.addbtnTouchStartScale(this.showMain),p.default.addbtnTouchEndScale(this.showMain,this.showMainFunc.bind(this)),p.default.addbtnTouchCancelScale(this.showMain),this.updateSubUI()},h.prototype.updateSubUI=function(){console.log("page-house MAINUPDATEUI"),1==u.default.currentHouseUnlockAll()?this.showMain.getChildByName("mark").active=!0:this.showMain.getChildByName("mark").active=!1},h.prototype.showMainFunc=function(){cc.game.emit(d.EMITKEY.UPDATETABBARRECEIVE,1)},s([i(cc.Node)],h.prototype,"showMain",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],"page-main":[function(t,e,o){"use strict";cc._RF.push(e,"df8f95zulFCI6iyRCXBRejZ","page-main");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("CcJsFunc"),h=a("dataTs"),f=a("enumConfig"),g=a("sdk"),y=a("spine"),m=a("util"),v=a("GameManager");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainLayer=null,t.nextBtn=null,t.sprintReward=null,t.sprintWinLabel=null,t.sprintWinLabelShadow=null,t.sprintTimeLabel=null,t.cookieReward=null,t.updateTime=0,t.popCallbackCollect=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(b,l=cc.Component),b.prototype.update=function(t){this.updateTime+=t,1<=this.updateTime&&(--this.updateTime,this.updateTimeNum())},b.prototype.updateTimeNum=function(){var t;h.default.getUserData().playLevelId<3||(0==(t=h.default.updateSprintRewardTime())?(console.log("\u5df2\u6ee1"),this.sprintTimeLabel.string="End"):0<(t=m.default.formatTime(t))[0]?this.sprintTimeLabel.string=t[0]+"d "+t[1]+"h":0<t[1]?this.sprintTimeLabel.string=t[1]+"h "+t[2]+"m":(0<t[2]||0<t[3])&&(this.sprintTimeLabel.string=t[2]+"m "+t[3]+"s"))},b.prototype.start=function(){cc.game.on(f.EMITKEY.MAINUPDATEUI,this.updateUiDataFunc,this),v.default.getInstance().gameEnv==f.GAMEENV.ENVRELEASE?(this.nextBtn.active=!1,cc.sys.isBrowser&&(this.nextBtn.active=!0),g.default.isPlatform(g.Platform.ios)&&(this.nextBtn.active=!0)):this.nextBtn.active=!0,d.default.addbtnTouchStartScale(this.nextBtn),d.default.addbtnTouchEndScale(this.nextBtn,this.nextBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.nextBtn),d.default.addbtnTouchStartScale(this.sprintReward),d.default.addbtnTouchEndScale(this.sprintReward,this.sprintRewardFunc.bind(this)),d.default.addbtnTouchCancelScale(this.sprintReward);var t=this.cookieReward.getChildByName("click-btn");d.default.addbtnTouchEndScale(t,this.cookieRewardFunc.bind(this)),this.updateTimeNum(),this.updateUiDataFunc(),this.popCallbackCollect={playGameCallBack:this.playGameCallBackFunc.bind(this)}},b.prototype.playGameCallBackFunc=function(){},b.prototype.cookieRewardFunc=function(){var t={popName:"nothingPop",showPopData:{popCallbackCollect:this.popCallbackCollect,popType:4}};cc.game.emit("showPop",t)},b.prototype.updateUiDataFunc=function(){console.log("page-main MAINUPDATEUI");var t=h.default.getSprintRewardData();this.sprintWinLabel.string=t.winNum+"",this.sprintWinLabelShadow.string=t.winNum+"",this.sprintReward.getChildByName("mark").active=v.default.getInstance().sprintMark,this.sprintReward.getComponent(y.default).play("4Icon_RichRoad1",0,function(){console.log("4Icon_RichRoad1 ######")}),h.default.getUserData().playLevelId<h.default.gameConfigData.baseConfigData.sprintRewardLevel?this.sprintReward.active=!1:this.sprintReward.active=!0,h.default.getUserData().playLevelId<h.default.gameConfigData.baseConfigData.cookieRewardLevel?this.cookieReward.active=!1:this.cookieReward.active=!0},b.prototype.nextBtnFunc=function(){h.default.gameLevelWin(!0,null),(e=h.default.checkCollectionData())&&console.log("\u89e3\u9501\u6536\u85cf\u6570\u636e###### = "+JSON.stringify(e)),v.default.getInstance().sprintMark=!0;var t,e=h.default.gameConfigData.baseConfigData.sprintRewardLevel;h.default.getUserData().playLevelId>=e&&((t=h.default.getSprintRewardData()).winNum+=1,t.rewardProgress<3?(t.rewardProgress+=1,3==t.rewardProgress&&(t.winBox+=1)):t.rewardProgress=1,h.default.setSprintRewardData(t)),3<=h.default.getSprintRewardData().rewardProgress&&(e=12,1<(t=5<(t=h.default.getSprintRewardData().winBox)?5:t)&&(e+=11*(t-1)),(t=h.default.getUserData()).coin+=e,t.prop_remove+=1,h.default.saveUserData(t)),cc.game.emit(f.EMITKEY.MAINUPDATEUI)},b.prototype.sprintRewardFunc=function(){console.log("\u51b2\u523a\u5956\u52b1");var t=h.default.gameConfigData.baseConfigData.sprintRewardLevel;h.default.getUserData().playLevelId>=t?cc.game.emit("showPop",{popName:"sprintRewardPop",showPopData:{popCallbackCollect:null,popType:0}}):cc.game.emit("showMainTips",u.default.instance.trans(p.GDLanguage.challenge_unlocked_level,3))},s([i(cc.Node)],b.prototype,"mainLayer",void 0),s([i(cc.Node)],b.prototype,"nextBtn",void 0),s([i(cc.Node)],b.prototype,"sprintReward",void 0),s([i(cc.Label)],b.prototype,"sprintWinLabel",void 0),s([i(cc.Label)],b.prototype,"sprintWinLabelShadow",void 0),s([i(cc.Label)],b.prototype,"sprintTimeLabel",void 0),s([i(cc.Node)],b.prototype,"cookieReward",void 0),a=s([a],b),r.default=a,cc._RF.pop()},{}],picturePop:[function(t,e,o){"use strict";cc._RF.push(e,"e955bv+WvlGDIiibEKuUWDZ","picturePop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("CcJsFunc"),d=a("GameManager"),h=a("i18n");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.wallpaperBtn=null,t.brickBtn=null,t.wallpaperSv=null,t.brickSv=null,t.topUIBtnArr=[],t.contentSvArr=[],t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.hideRankPop=function(){this.node.active=!1},f.prototype.onLoad=function(){},f.prototype.onEnable=function(){this.updateMarkClot()},f.prototype.updateMarkClot=function(){var t=d.default.getInstance().collectionMark;this.wallpaperBtn.getChildByName("mark").active=0<t.bgNum,this.brickBtn.getChildByName("mark").active=0<t.brickNum},f.prototype.start=function(){u.default.addbtnTouchStartScale(this.wallpaperBtn),u.default.addbtnTouchEndScale(this.wallpaperBtn,this.topUIButtonAction.bind(this,"wallpaper",0)),u.default.addbtnTouchCancelScale(this.wallpaperBtn),u.default.addbtnTouchStartScale(this.brickBtn),u.default.addbtnTouchEndScale(this.brickBtn,this.topUIButtonAction.bind(this,"brick",1)),u.default.addbtnTouchCancelScale(this.brickBtn),this.setupSubNode(),this.wallpaperBtn.getChildByName("label").getComponent(cc.Label).string=h.default.instance.trans(p.GDLanguage.wallpaper),this.brickBtn.getChildByName("label").getComponent(cc.Label).string=h.default.instance.trans(p.GDLanguage.block_bricks)},f.prototype.setupSubNode=function(){for(var t=0;t<this.topUIBtnArr.length;t++)0==t?(this.topUIBtnArr[t].getChildByName("imgSel").active=!0,this.topUIBtnArr[t].getChildByName("imgNor").active=!1):(this.topUIBtnArr[t].getChildByName("imgSel").active=!1,this.topUIBtnArr[t].getChildByName("imgNor").active=!0);for(t=0;t<this.contentSvArr.length;t++)this.contentSvArr[t].active=0==t},f.prototype.topUIButtonAction=function(t,e){for(var o=0;o<this.topUIBtnArr.length;o++)o==e?(this.topUIBtnArr[o].getChildByName("imgSel").active=!0,this.topUIBtnArr[o].getChildByName("imgNor").active=!1):(this.topUIBtnArr[o].getChildByName("imgSel").active=!1,this.topUIBtnArr[o].getChildByName("imgNor").active=!0);for(o=0;o<this.contentSvArr.length;o++)this.contentSvArr[o].active=o==e;this.updateMarkClot()},s([i(cc.Node)],f.prototype,"popNode",void 0),s([i(cc.Node)],f.prototype,"wallpaperBtn",void 0),s([i(cc.Node)],f.prototype,"brickBtn",void 0),s([i(cc.Node)],f.prototype,"wallpaperSv",void 0),s([i(cc.Node)],f.prototype,"brickSv",void 0),s([i([cc.Node])],f.prototype,"topUIBtnArr",void 0),s([i([cc.Node])],f.prototype,"contentSvArr",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],"player-head-atlas":[function(t,e,o){"use strict";cc._RF.push(e,"d3fb2TeqiZHiZ2RxiW6S6RM","player-head-atlas");var n=o;function a(){this._texture=null,this._width=0,this._height=0,this._row=0,this._col=0,this._posList=null,this._unusingIdxs=[],this._count=0,this._dirty=!1,this._headSize=46,this._urlMap=null,this._idxMap=null}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(a,"instance",{get:function(){return this._instance||(this._instance=new a),this._instance},enumerable:!1,configurable:!0}),a.prototype.init=function(t,e,o){this._headSize=o,(o=new cc.RenderTexture).initWithSize(t,e),o.update(null),this._texture=o,this._idxMap={},this._urlMap={},this._width=t,this._height=e,this._posList=[],this._col=Math.floor((t-4)/(this._headSize+2)),this._row=Math.ceil(400/this._col);for(var n=0;n<this._row;n++)for(var a=0;a<this._col;a++){var i=cc.v2((this._headSize+2)*a+2,(this._headSize+2)*n+2);this._posList.push(i)}for(this.reset(),n=0;n<400;n++)this._unusingIdxs.push(n);this._count=0},Object.defineProperty(a.prototype,"texture",{get:function(){return this._texture},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"cellSize",{get:function(){return this._headSize},enumerable:!1,configurable:!0}),a.prototype.insertSpriteFrame=function(t,e){var o=e._rect,n=e.getTexture(),a=this._urlMap[t],i=o.x,r=o.y,c=-1;if(a)i+=a.x,r+=a.y,c=a.idx;else{if(0==this._unusingIdxs.length)return console.error("\u5934\u50cf\u5408\u96c6id\u7528\u5b8c\u4e86\u3002\u3002\u3002"),null;c=this._unusingIdxs.pop(),o=this._posList[c],this._texture.drawTextureAt(n,o.x,o.y),this._count++,i+=o.x,r+=o.y,this._dirty=!0,a={x:i,y:r,texture:this._texture,spriteFrame:e,idx:c,url:t}}return a},a.prototype.update=function(){this._dirty&&(this._texture.update(null),this._dirty=!1)},a.prototype.deleteInnerTextureByIdx=function(t){t=this._idxMap[t],this.deleteInnerTexture(t)},a.prototype.deleteInnerTextureByPath=function(t){t=this._urlMap[t],this.deleteInnerTexture(t)},a.prototype.deleteInnerTexture=function(t){t&&(delete this._urlMap[t.url],delete this._idxMap[t.idx],t.spriteFrame._resetDynamicAtlasFrame(),this._count--,this._unusingIdxs.indexOf(t.idx)<0&&this._unusingIdxs.push(t.idx))},a.prototype.isEmpty=function(){return this._count<=0},a.prototype.packToDynamicAtlas=function(t,e,o){var n=this._urlMap[t]||this.insertSpriteFrame(t,o);return n&&(o._setDynamicAtlasFrame(n),this._urlMap[t]=n,this._idxMap[n.idx]=n),n},a.prototype.reset=function(){if(this._idxMap){this._unusingIdxs=[];for(var t=0;t<400;t++){this._unusingIdxs.push(t);var e=this._idxMap[t];e&&e.spriteFrame.isValid&&e.spriteFrame._resetDynamicAtlasFrame()}this._idxMap={},this._urlMap={}}},a.prototype.destroy=function(){this.reset(),this._texture.destroy()},a.DEFAULT="default",a._instance=null,n.default=a,cc._RF.pop()},{}],popManager:[function(t,e,o){"use strict";cc._RF.push(e,"3798fTcqOJGqIPq3Alhl8FP","popManager");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("enumConfig"),u=a("bullet-screen-pop"),d=a("challengeSucPop"),h=a("failPop"),f=a("FriendRankPop"),g=a("getPropPop"),y=a("loseLovePop"),m=a("nextLevelPop"),v=a("noLimitPop"),b=a("nothingPop"),N=a("PersonalPop"),_=a("setupPop"),w=a("shareNodePop"),C=a("sheep-rank-pop"),P=a("show-daily-pop"),S=a("stagePop"),k=a("TodayRankPop"),D=a("topicChoosePop"),A=a("topicCollectPop"),O=a("topicJoinedPop"),I=a("topicLastWinPop"),T=a("topicNewPop"),E=a("winPop");function L(){var t=null!==l&&l.apply(this,arguments)||this;return t.showDailyPrefab=null,t.showDailyPop=null,t.setupPopPrefab=null,t.setupPop=null,t.getPropPopPrefab=null,t.getPropPop=null,t.nothingPopPrefab=null,t.nothingPop=null,t.failPopPrefab=null,t.failPop=null,t.loseLovePopPrefab=null,t.loseLovePop=null,t.winPopPrefab=null,t.winPop=null,t.noLimitPopPrefab=null,t.noLimitPop=null,t.sheepRankPopPrefab=null,t.sheepRankPop=null,t.stagePopPrefab=null,t.stagePop=null,t.bulletScreenPopPrefab=null,t.bulletScreenPop=null,t.nextLevelPopPrefab=null,t.nextLevelPop=null,t.shareNodePopPrefab=null,t.shareNodePop=null,t.topicChoosePopPrefab=null,t.topicChoosePop=null,t.topicCollectPopPrefab=null,t.topicCollectPop=null,t.topicLastWinPopPrefab=null,t.topicLastWinPop=null,t.topicNewPopPrefab=null,t.topicNewPop=null,t.todayRankPopPrefab=null,t.todayRankPop=null,t.firendRankPopPrefab=null,t.firendRankPop=null,t.personalPopPrefab=null,t.personalPop=null,t.topicJoinedPopPrefab=null,t.topicJoinedPop=null,t.challengeSucPopPrefab=null,t.challengeSucPop=null,t.showPopArray=[],t}a=(i=cc._decorator).ccclass,i=i.property,c(L,l=cc.Component),L.prototype.start=function(){cc.game.on(p.EMITKEY.SHOWPOP,this.showPop,this),cc.game.on(p.EMITKEY.CLOSEALLPOP,this.closeAllPop,this),this.initPop(),this.closeAllPop()},L.prototype.initPop=function(){this.todayRankPop=this.ifHaveNode(this.todayRankPop,this.todayRankPopPrefab)},L.prototype.showPop=function(t){var e=t.popName;t=t.showPopData,"winPop"==e?(this.winPop=this.ifHaveNode(this.winPop,this.winPopPrefab),this.winPop.getComponent(E.default).showWinPop(t)):"failPop"==e?(this.failPop=this.ifHaveNode(this.failPop,this.failPopPrefab),this.failPop.getComponent(h.default).showFailPop(t)):"loseLovePop"==e?(this.loseLovePop=this.ifHaveNode(this.loseLovePop,this.loseLovePopPrefab),this.loseLovePop.getComponent(y.default).showLoseLovePop(t)):"setupPop"==e?(this.setupPop=this.ifHaveNode(this.setupPop,this.setupPopPrefab),this.setupPop.getComponent(_.default).showSetupPop(t)):"getPropPop"==e?(this.getPropPop=this.ifHaveNode(this.getPropPop,this.getPropPopPrefab),this.getPropPop.getComponent(g.default).showGetPropPop(t)):"nothingPop"==e?(this.nothingPop=this.ifHaveNode(this.nothingPop,this.nothingPopPrefab),this.nothingPop.getComponent(b.default).showNothingPop(t)):"showDailyPop"==e?(this.showDailyPop=this.ifHaveNode(this.showDailyPop,this.showDailyPrefab),this.showDailyPop.getComponent(P.default).showPop(t)):"noLimitPop"==e?(this.noLimitPop=this.ifHaveNode(this.noLimitPop,this.noLimitPopPrefab),this.noLimitPop.getComponent(v.default).showNoLimitPop(t)):"sheepRankPop"==e?(this.sheepRankPop=this.ifHaveNode(this.sheepRankPop,this.sheepRankPopPrefab),this.sheepRankPop.getComponent(C.default).sheepRankPop(t)):"stagePop"==e?(this.stagePop=this.ifHaveNode(this.stagePop,this.stagePopPrefab),this.stagePop.getComponent(S.default).showPop(t)):"bulletScreenPop"==e?(this.bulletScreenPop=this.ifHaveNode(this.bulletScreenPop,this.bulletScreenPopPrefab),this.bulletScreenPop.getComponent(u.default).showPop(t)):"nextLevelPop"==e?(this.nextLevelPop=this.ifHaveNode(this.nextLevelPop,this.nextLevelPopPrefab),this.nextLevelPop.getComponent(m.default).showPop(t)):"shareNodePop"==e?(this.shareNodePop=this.ifHaveNode(this.shareNodePop,this.shareNodePopPrefab),this.shareNodePop.getComponent(w.default).showPop(t)):"topicChoosePop"==e?(this.topicChoosePop=this.ifHaveNode(this.topicChoosePop,this.topicChoosePopPrefab),this.topicChoosePop.getComponent(D.default).showPop(t)):"topicCollectPop"==e?(this.topicCollectPop=this.ifHaveNode(this.topicCollectPop,this.topicCollectPopPrefab),this.topicCollectPop.getComponent(A.default).showPop(t)):"topicLastWinPop"==e?(this.topicLastWinPop=this.ifHaveNode(this.topicLastWinPop,this.topicLastWinPopPrefab),this.topicLastWinPop.getComponent(I.default).showPop(t)):"topicNewPop"==e?(this.topicNewPop=this.ifHaveNode(this.topicNewPop,this.topicNewPopPrefab),this.topicNewPop.getComponent(T.default).showPop(t)):"friendRankPop"==e?(this.firendRankPop=this.ifHaveNode(this.firendRankPop,this.firendRankPopPrefab),this.firendRankPop.getComponent(f.default).showPop(t)):"todayRankPop"==e?(this.todayRankPop=this.ifHaveNode(this.todayRankPop,this.todayRankPopPrefab),this.todayRankPop.getComponent(k.default).showPop(t)):"personalPop"==e?(this.personalPop=this.ifHaveNode(this.personalPop,this.personalPopPrefab),this.personalPop.getComponent(N.default).showPop(t)):"topicJoinedPop"==e?(this.topicJoinedPop=this.ifHaveNode(this.topicJoinedPop,this.topicJoinedPopPrefab),this.topicJoinedPop.getComponent(O.default).showPop(t)):"challengeSucPop"==e&&(this.challengeSucPop=this.ifHaveNode(this.challengeSucPop,this.challengeSucPopPrefab),this.challengeSucPop.getComponent(d.default).showPop(t))},L.prototype.ifHaveNode=function(t,e){return t||(t=cc.instantiate(e),this.node.addChild(t)),t.setSiblingIndex(-1),t},L.prototype.closeAllPop=function(){var t,e=this.node.children;for(t in e){var o=e[t];o.setSiblingIndex(0),o.active=!1}},s([i({type:cc.Prefab,tooltip:"\u6bcf\u65e5\u6311\u6218\u83b7\u53d6\u793c\u5305"})],L.prototype,"showDailyPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u8bbe\u7f6e\u9875\u9762"})],L.prototype,"setupPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u83b7\u53d6\u9053\u5177\u9875\u9762"})],L.prototype,"getPropPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u4e00\u4e9b\u901a\u7528\u9875\u9762"})],L.prototype,"nothingPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u5931\u8d25\u9875\u9762"})],L.prototype,"failPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u653e\u5f03\u6311\u6218\u754c\u9762"})],L.prototype,"loseLovePopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u80dc\u5229\u754c\u9762"})],L.prototype,"winPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u65e0\u9650\u751f\u547d\u9875\u9762"})],L.prototype,"noLimitPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u6392\u884c\u5f39\u6846\u9875\u9762"})],L.prototype,"sheepRankPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u821e\u53f0\u5f39\u6846\u9875\u9762"})],L.prototype,"stagePopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u5f39\u5e55\u5f39\u6846\u9875\u9762"})],L.prototype,"bulletScreenPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u4e0b\u4e00\u7b49\u7ea7\u63d0\u793a"})],L.prototype,"nextLevelPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u5206\u4eab\u5f39\u6846"})],L.prototype,"shareNodePopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u9009\u62e9\u7f8a\u961f"})],L.prototype,"topicChoosePopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u6536\u85cf\u9875\u9762"})],L.prototype,"topicCollectPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u6628\u65e5\u83b7\u80dc\u9875\u9762"})],L.prototype,"topicLastWinPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u6628\u65e5\u83b7\u80dc\u9875\u9762\u5956\u52b1\u5f39\u6846"})],L.prototype,"topicNewPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u4eca\u65e5\u670b\u53cb\u5708"})],L.prototype,"todayRankPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u597d\u53cb\u6392\u884c\u699c"})],L.prototype,"firendRankPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u4e2a\u4eba\u8d44\u6599"})],L.prototype,"personalPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"\u961f\u4f0d\u5206\u914d\u5f39\u7a97"})],L.prototype,"topicJoinedPopPrefab",void 0),s([i({type:cc.Prefab,tooltip:"wx\u83b7\u80dc\u5f39\u6846"})],L.prototype,"challengeSucPopPrefab",void 0),a=s([a],L),r.default=a,cc._RF.pop()},{}],"prop-prefab":[function(t,e,o){"use strict";cc._RF.push(e,"78621mmfFZP3p0KRuVUnueB","prop-prefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("audio");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.propImage=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(d,l=cc.Component),d.prototype.start=function(){},d.prototype.showWithType=function(t,e,o){var n="",a=e.position;1==t?n="rewardIcon/prop_remove.png":2==t?n="rewardIcon/prop_cancel.png":3==t&&(n="rewardIcon/prop_random.png"),p.default.changeSpriteFrame(this.propImage,n);var i=this;cc.tween(this.node).to(.1,{scale:1.1}).to(.1,{scale:1}).to(.1,{scale:.9}).to(.1,{scale:.9}).to(.1,{angle:10}).to(.1,{angle:-10}).to(.1,{angle:10}).to(.1,{angle:-10}).to(.1,{angle:0}).to(.3,{position:a,scale:0}).call(function(){i.node.destroy(),cc.tween(e).to(.1,{scale:1.5}).to(.1,{scale:1}).start(),u.default.playAudioMusic("audio/sound/pop-fly-end.mp3",!1),o&&o()}).start()},s([i(cc.Node)],d.prototype,"propImage",void 0),a=s([a],d),r.default=a,cc._RF.pop()},{}],"query-string":[function(t,e,o){"use strict";function n(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=a(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"==typeof t)return i(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}cc._RF.push(e,"e8d51593uZA2arjLqSKnsEs","query-string");var r=t,c=o,s=r("strict-uri-encode"),l=r("decode-uri-component"),p=r("split-on-first"),u=r("filter-obj"),d=Symbol("encodeFragmentIdentifier");function h(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function f(t,e){return e.encode?(e.strict?s:encodeURIComponent)(t):t}function g(t,e){return e.decode?l(t):t}function y(t){var e=t.indexOf("#");return-1!==e?t.slice(0,e):t}function m(t){var e=(t=y(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function v(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function b(t,e){h((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);var o=function(t){var e;switch(t.arrayFormat){case"index":return function(t,o,n){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=o):n[t]=o};case"bracket":return function(t,o,n){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],o):n[t]=[o]:n[t]=o};case"colon-list-separator":return function(t,o,n){e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],o):n[t]=[o]:n[t]=o};case"comma":case"separator":return function(e,o,n){var a="string"==typeof o&&o.includes(t.arrayFormatSeparator),i="string"==typeof o&&!a&&g(o,t).includes(t.arrayFormatSeparator);o=i?g(o,t):o,o=a||i?o.split(t.arrayFormatSeparator).map(function(e){return g(e,t)}):null===o?o:g(o,t),n[e]=o};case"bracket-separator":return function(e,o,n){var a=/(\[\])$/.test(e);e=e.replace(/\[\]$/,""),a?(a=null===o?[]:o.split(t.arrayFormatSeparator).map(function(e){return g(e,t)}),void 0!==n[e]?n[e]=[].concat(n[e],a):n[e]=a):n[e]=o&&g(o,t)};default:return function(t,e,o){void 0!==o[t]?o[t]=[].concat(o[t],e):o[t]=e}}}(e),a=Object.create(null);if("string"!=typeof t)return a;if(!(t=t.trim().replace(/^[?#&]/,"")))return a;for(var i,r=n(t.split("&"));!(i=r()).done;){var c=i.value;if(""!==c){var s=p(e.decode?c.replace(/\+/g," "):c,"="),l=s[0],u=s[1];u=void 0===u?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?u:g(u,e),o(g(l,e),u,a)}}for(var d=0,f=Object.keys(a);d<f.length;d++){var y=f[d],m=a[y];if("object"==typeof m&&null!==m)for(var b=0,N=Object.keys(m);b<N.length;b++){var _=N[b];m[_]=v(m[_],e)}else a[y]=v(m,e)}return!1===e.sort?a:(!0===e.sort?Object.keys(a).sort():Object.keys(a).sort(e.sort)).reduce(function(t,e){var o=a[e];return Boolean(o)&&"object"==typeof o&&!Array.isArray(o)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(o):t[e]=o,t},Object.create(null))}c.extract=m,c.parse=b,c.stringify=function(t,e){if(!t)return"";h((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);for(var o,n=function(t){switch(t.arrayFormat){case"index":return function(e){return function(o,n){var a=o.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?o:[].concat(o,null===n?[[f(e,t),"[",a,"]"].join("")]:[[f(e,t),"[",f(a,t),"]=",f(n,t)].join("")])}};case"bracket":return function(e){return function(o,n){return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?o:[].concat(o,null===n?[[f(e,t),"[]"].join("")]:[[f(e,t),"[]=",f(n,t)].join("")])}};case"colon-list-separator":return function(e){return function(o,n){return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?o:[].concat(o,null===n?[[f(e,t),":list="].join("")]:[[f(e,t),":list=",f(n,t)].join("")])}};case"comma":case"separator":case"bracket-separator":var e="bracket-separator"===t.arrayFormat?"[]=":"=";return function(o){return function(n,a){return void 0===a||t.skipNull&&null===a||t.skipEmptyString&&""===a?n:(a=null===a?"":a,0===n.length?[[f(o,t),e,f(a,t)].join("")]:[[n,f(a,t)].join(t.arrayFormatSeparator)])}};default:return function(e){return function(o,n){return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?o:[].concat(o,null===n?[f(e,t)]:[[f(e,t),"=",f(n,t)].join("")])}}}}(e),a={},i=0,r=Object.keys(t);i<r.length;i++){var c=r[i];o=c,e.skipNull&&null==t[o]||e.skipEmptyString&&""===t[o]||(a[c]=t[c])}var s=Object.keys(a);return!1!==e.sort&&s.sort(e.sort),s.map(function(o){var a=t[o];return void 0===a?"":null===a?f(o,e):Array.isArray(a)?0===a.length&&"bracket-separator"===e.arrayFormat?f(o,e)+"[]":a.reduce(n(o),[]).join("&"):f(o,e)+"="+f(a,e)}).filter(function(t){return 0<t.length}).join("&")},c.parseUrl=function(t,e){e=Object.assign({decode:!0},e);var o=p(t,"#"),n=o[0],a=o[1];return Object.assign({url:n.split("?")[0]||"",query:b(m(t),e)},e&&e.parseFragmentIdentifier&&a?{fragmentIdentifier:g(a,e)}:{})},c.stringifyUrl=function(t,e){var o;e=Object.assign(((o={encode:!0,strict:!0})[d]=!0,o),e);var n=y(t.url).split("?")[0]||"",a=c.extract(t.url),i=(a=c.parse(a,{sort:!1}),a=Object.assign(a,t.query),c.stringify(a,e));i=i&&"?"+i;var r=function(t){var e="",o=t.indexOf("#");return-1!==o&&(e=t.slice(o)),e}(t.url);return t.fragmentIdentifier&&(r="#"+(e[d]?f(t.fragmentIdentifier,e):t.fragmentIdentifier)),""+n+i+r},c.pick=function(t,e,o){var n;o=Object.assign(((n={parseFragmentIdentifier:!0})[d]=!1,n),o);var a=c.parseUrl(t,o),i=a.url,r=a.query;return t=a.fragmentIdentifier,c.stringifyUrl({url:i,query:u(r,e),fragmentIdentifier:t},o)},c.exclude=function(t,e,o){var n=Array.isArray(e)?function(t){return!e.includes(t)}:function(t,o){return!e(t,o)};return c.pick(t,n,o)},cc._RF.pop()},{}],"register-head-image":[function(t,e,o){"use strict";cc._RF.push(e,"8f94axQML9NUKBkQZXk81kh","register-head-image");var n=o;function a(t,e,o){var n=new Image;function a(){n.removeEventListener("load",a),n.removeEventListener("error",i),o&&o(null,n)}function i(){n.removeEventListener("load",a),n.removeEventListener("error",i),o&&o(new Error(t))}return"file:"!==window.location.protocol&&(n.crossOrigin="anonymous"),n.addEventListener("load",a),n.addEventListener("error",i),n.src=t,n}Object.defineProperty(n,"__esModule",{value:!0}),n.registerHeadImgLoader=n.headImgExt=void 0,n.headImgExt=".head",n.registerHeadImgLoader=function(){cc.assetManager.downloader.register(n.headImgExt,function(t,e,o){o(null,t)}),cc.assetManager.parser.register(n.headImgExt,a),cc.assetManager.factory.register(n.headImgExt,function(t,e,o,n){var a=null,i=null;try{(a=new cc.Texture2D)._uuid=t,a._nativeUrl=t,a._nativeAsset=e}catch(t){i=t}n&&n(i,a)})},cc._RF.pop()},{}],"report-common":[function(t,e,o){"use strict";cc._RF.push(e,"cdaf1e/eKZNDKb4XXuwbreu","report-common");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),n("sdk"),n("native-bridge"),n("native-def");var i=n("enumConfig");function r(){}n=n("data-env").getEnvConfig(),Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r),this._instance},enumerable:!1,configurable:!0}),r.initTA=function(){},r.getUserData=function(){var t=cc.sys.localStorage.getItem(i.STORAGEKEY.GAMEUSERLOCALDATA);return JSON.parse(t).userData},r.reportTACommon=function(){},r._instance=null,r._ta=null,r.publicInfo={},r.reportPrefix=n.reportPrefix,n=r,a.default=n,cc._RF.pop()},{}],"reward-emitter":[function(t,e,o){"use strict";cc._RF.push(e,"eded8SCVetL/rNMC74RIvnT","reward-emitter");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.RewardEmitterName=void 0;var u,d,h=a("CoinEmitter");function f(){var t=null!==d&&d.apply(this,arguments)||this;return t.coinEmitter=null,t.prefabList=[],t}(i=u=r.RewardEmitterName||(r.RewardEmitterName={})).coin="coin",i.diamond="diamond",i.dice="dice",i.clover="clover",i=(a=cc._decorator).ccclass,a=a.property,c(f,d=cc.Component),f.prototype.send=function(t,e,o,n){return void 0===o&&(o=!1),l(this,void 0,Promise,function(){return p(this,function(){return t<=0||this.setPrefab(e,t,o,n),[2]})})},f.prototype.start=function(){},f.prototype.resetAnimation=function(){this.send(.1,u.coin,!0)},f.prototype.setPrefab=function(t,e,o,n){var a=null;switch(e=o?e:this.computeDiceNodeNum(e),t){case u.coin:a=this.prefabList[0];break;case u.diamond:a=this.prefabList[1];break;case u.dice:a=this.prefabList[2];break;case u.clover:a=this.prefabList[3]}t=!0,this.currentPrefab==a&&(t=!1),this.currentPrefab=a,this.coinEmitter.prefab=this.currentPrefab,this.coinEmitter.fire(e,t,n)},f.prototype.computeDiceNodeNum=function(t){return 100<=t?80:50<=t?50:30<=t?30:20<=t?20:10<=t?10:5},s([a({type:h.CoinEmitter,tooltip:"\u53d1\u5c04\u5668 \u63a7\u5236\u8282\u70b9"})],f.prototype,"coinEmitter",void 0),s([a({type:[cc.Prefab],tooltip:"\u53d1\u5c04\u5668\u9884\u5236\u4f53"})],f.prototype,"prefabList",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],rewardPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"a121afwuuhFa6IKfrPvi+zw","rewardPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.icon=null,t.rewardNum=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){},u.prototype.setRewardNode=function(t){var e="rewardIcon/"+t.propType+".png";p.default.changeSpriteFrame(this.icon,e),this.rewardNum.string=""+t.num},s([i(cc.Node)],u.prototype,"icon",void 0),s([i(cc.Label)],u.prototype,"rewardNum",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],saveAsPop:[function(t,e,o){"use strict";cc._RF.push(e,"79458xlXgdFfJ/BI3F5BmEK","saveAsPop");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.inputLevelNum=null,t.closeNode=null,t}r(p,s=cc.Component),p.prototype.start=function(){this.closeNode.on(cc.Node.EventType.TOUCH_END,this.closeFunc,this)},p.prototype.showSaveAsPop=function(){this.node.active=!0,this.inputLevelNum.string=""},p.prototype.selectLevelFunc=function(){var t=Number(this.inputLevelNum.string);0<t?(this.node.active=!1,this.emitSelectLevel(t),console.log("\u8bbe\u7f6e\u5173\u5361\u6570",this.inputLevelNum.string)):console.log("error:\u4e66\u5199\u9519\u8bef")},p.prototype.emitSelectLevel=function(t){cc.game.emit("saveAsNewMap",t)},p.prototype.closeFunc=function(){this.node.active=!1},c([l({type:cc.EditBox,tooltip:"\u8f93\u5165\u53e6\u5b58\u4e3a\u5173\u5361\u6570"})],p.prototype,"inputLevelNum",void 0),c([l(cc.Node)],p.prototype,"closeNode",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],sdk:[function(t,e,o){"use strict";cc._RF.push(e,"e267eKhDStMpaYZFC42eefy","sdk");var n=t,a=e,i=o,r=function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0}),i.Platform=i.VibrateType=i.SHARE_CALLBACK_RATE=i.SHARE_CALLBACK_TIME=void 0;var c,s,l=n("wx-sdk"),p=n("tt-sdk"),u=n("http"),d=n("android-sdk"),h=(a=n("data-env"),n("audio")),f=n("enumConfig"),g=n("share");function y(){}n=a.getEnvConfig(),i.SHARE_CALLBACK_TIME=3,i.SHARE_CALLBACK_RATE=0,(a=c=i.VibrateType||(i.VibrateType={}))[a.Light=15]="Light",a[a.Medium=20]="Medium",a[a.Heavy=30]="Heavy",a[a.Long=400]="Long",(a=s=i.Platform||(i.Platform={}))[a.android=0]="android",a[a.ios=1]="ios",a[a.wx=2]="wx",a[a.tt=3]="tt",a[a.web=4]="web",a[a.oppo=5]="oppo",a[a.vivo=6]="vivo",Object.defineProperty(y,"baseParams",{get:function(){var t=cc.sys.localStorage.getItem(f.STORAGEKEY.GAMEUSERLOCALDATA);return{t:JSON.parse(t).userData.token}},enumerable:!1,configurable:!0}),y.get=function(t){return u.default.get(r({host:this.host,baseParams:this.baseParams},t))},y.post=function(t){return u.default.post(r({host:this.host,baseParams:this.baseParams},t))},y.save=function(t,e){cc.sys.localStorage.setItem(t,e)},y.load=function(t){return cc.sys.localStorage.getItem(t)},y.vibrateShort=function(t){void 0===t&&(t=c.Light);var e=cc.sys.localStorage.getItem(f.STORAGEKEY.GAMEUSERLOCALDATA);(e=e&&JSON.parse(e))&&e.setUpData&&e.setUpData.shockStatus<1?console.log("shockStatus = "+e.setUpData.shockStatus):this.isPlatform(s.wx)&&wx.vibrateShort?t==c.Light?l.default.vibrateShort("light"):t==c.Medium?l.default.vibrateShort("medium"):l.default.vibrateShort("heavy"):cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt&&tt.vibrateShort?p.default.vibrateShort():this.isPlatform(s.android)&&d.default.vibrateShort(t)},y.vibrateLong=function(t){void 0===t&&(t=c.Long),this.isPlatform(s.wx)&&wx.vibrateLong?l.default.vibrateLong():cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt&&tt.vibrateLong?p.default.vibrateLong():this.isPlatform(s.android)&&d.default.vibrateShort(t)},y.checkUpdateManager=function(){this.isPlatform(s.wx)?l.default.checkUpdateManager():cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt||this.isPlatform(s.android)},y.onShareAppMessageQuery=function(){if(this.isPlatform(s.wx))return l.default.onShareAppMessageQuery();cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt||this.isPlatform(s.android)},y.setOnShow=function(t){this.isPlatform(s.wx)||this.isPlatform(s.tt)||this.isPlatform(s.android),cc.game.on(cc.game.EVENT_SHOW,t)},y.setOffShow=function(t){this.isPlatform(s.wx)||cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt||this.isPlatform(s.android),cc.game.off(cc.game.EVENT_SHOW,t)},y.setOnShowOnce=function(t){if(this.isPlatform(s.wx))return l.default.setOnShowOnce(t);cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt||this.isPlatform(s.android)},y.setOnHide=function(t){if(this.isPlatform(s.wx))return l.default.setOnHide(t);this.isPlatform(s.tt)||this.isPlatform(s.android),cc.game.on(cc.game.EVENT_HIDE,t)},y.setOffHide=function(t){this.isPlatform(s.wx)?l.default.setOffHide(t):cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt||(this.isPlatform(s.android),cc.game.off(cc.game.EVENT_HIDE,t))},y.setOnHideOnce=function(t){if(this.isPlatform(s.wx))return l.default.setOnHideOnce(t);cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt||this.isPlatform(s.android)},y.setOnShareAppMessage=function(t){this.isPlatform(s.wx)?l.default.onShareAppMessage(t):cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt||this.isPlatform(s.android)},y.weiBoJump=function(){if(this.isPlatform(s.wx))return l.default.weiBoJump();cc.sys.platform==cc.sys.BYTEDANCE_GAME&&window.tt||this.isPlatform(s.android)},y.copyToClipboard=function(t){if(this.isPlatform(s.wx))l.default.setClipboardData(t);else if(cc.sys.platform==cc.sys.BYTEDANCE_GAME)p.default.setClipboardData(t);else if(cc.sys.isBrowser){var e=t+"",o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",o.style.fontSize="12pt";var n=getSelection();t=null,0<n.rangeCount&&(t=n.getRangeAt(0)),document.body.appendChild(o),o.select(),o.selectionStart=0,o.selectionEnd=e.length,e=!1;try{e=document.execCommand("copy")}catch(t){cc.warn("[sdk] copy to clipboard err",t)}document.body.removeChild(o),t&&(n.removeAllRanges(),n.addRange(t)),e?cc.log("h5 copy to clipboard success"):cc.log("h5 copy to clipboard failed")}},y.chooseImage=function(){this.isPlatform(s.wx)?cc.log("---wxChooseImage---"):cc.sys.platform==cc.sys.BYTEDANCE_GAME?cc.log("---ttChooseImage---"):cc.sys.isBrowser&&cc.log("---h5ChooseImage---")},y.preloadVideoAd=function(t,e,o,n,a){var i=this;void 0===a&&(a=!0),cc.log("[sdk] video ad",t);var r=t;if(console.log("cc.sys.os:",cc.sys.os),console.log("adID:",r),console.log("this.videoAdMap:",this.videoAdMap),""!=r){var c=null;if(this.videoAdMap[r]){if(!a)return console.log("[video ad] \u4f7f\u7528\u5df2\u6709\u56de\u8c03\u65b9\u6cd5"),this.videoAdMap[r];var l=(p=this.videoAdMap[r]).video,p=(a=p.close,p.error);l.offClose(a),l.offError(p),c=l,console.log("[video ad] \u6e05\u7a7a\u56de\u8c03\u65b9\u6cd5")}else console.log("\u521b\u5efa\u5b9e\u529b"),this.isPlatform(s.wx)?c=wx.createRewardedVideoAd({adUnitId:r,multiton:!0}):this.isPlatform(s.tt)?c=tt.createRewardedVideoAd({adUnitId:r,multiton:!0}):this.isPlatform(s.oppo)?c=qg.createRewardedVideoAd({adUnitId:r}):this.isPlatform(s.vivo)&&(c=ad.createRewardedVideoAd({adUnitId:r}));if(p=function(t){t&&t.isEnded||void 0===t?(console.log("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1 ++++"),e&&e(),i.isPlatform(s.wx)&&i.reportRewardBehavior(4,r,c)):(cc.game.emit("showMainTips","\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1 ----"),o&&o("quit","\u4e2d\u9014\u9000\u51fa"),i.isPlatform(s.wx)&&i.reportRewardBehavior(3,r,c)),h.default.playBGM(),i._canShowRewardedVideoAd=!0},l=function(t){1004==t.errCode||1005==t.errCode||1006==t.errCode?n&&n("no-fit","\u6ca1\u6709\u5408\u9002\u7684\u5e7f\u544a"):o&&o(t.errCode,t.errMsg),i.reportRewardBehavior(5,r,c),console.log("\u6ca1\u6709\u5408\u9002\u7684\u5e7f\u544a = ",t.errCode,t.errMsg),cc.game.emit("showMainTips","\u5e7f\u544a\u62c9\u53d6\u5931\u8d25",t.errCode),h.default.playBGM(),i._canShowRewardedVideoAd=!0},null!=c)return c.onClose(p),c.onError(l),this.isPlatform(s.wx)&&c.onLoad(function(t){t&&(1==t.shareValue?i.wxValue="shareValue":1==t.rewardValue?i.wxValue="rewardValue":i.wxValue=""),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f = ",t,"wxValue = ",i.wxValue)}),cc.log("[video ad] \u6ce8\u518c\u65b0\u7684\u56de\u8c03\u65b9\u6cd5"),this.videoAdMap[r]={video:c,close:p,error:l},this.videoAdMap[r]}},y.share=function(t,e,o,n){var a=this;this.isPlatform(s.wx)?g.default.shareMethod({success:function(){o&&o()},fail:function(){n&&n()},complete:function(){var o;a.videoAdMap[e]&&(o=a.videoAdMap[e].video,a.reportShareBehavior(t,e,o))}}):o&&o()},y.createCanvas=function(){var t;this.isPlatform(s.wx)?(t=canvas.toTempFilePathSync({x:0,y:0,width:cc.winSize.width,height:cc.winSize.height,destWidth:cc.winSize.width,destHeight:cc.winSize.height,fileType:"png",quality:"1.0"}),this.wxSave(t)):this.isPlatform(s.tt)&&(t=canvas.toTempFilePathSync({x:0,y:0,width:cc.winSize.width,height:cc.winSize.height,destWidth:cc.winSize.width,destHeight:cc.winSize.height}),tt.shareAppMessage({imageUrl:t}))},y.wxSave=function(t){wx.authorize({scope:"scope.writePhotosAlbum",success:function(){wx.saveImageToPhotosAlbum({filePath:t,success:function(){wx.showToast({title:"\u622a\u56fe\u5df2\u4fdd\u5b58\u81f3\u76f8\u518c,\u5feb\u5feb\u5206\u4eab\u5230\u670b\u53cb\u5708\u5427",icon:"none",image:"",duration:1500})},fail:function(){}})},fail:function(){var e={title:"\u5fae\u4fe1\u6388\u6743",content:"\u4fdd\u5b58\u5230\u76f8\u518c\u9700\u8981\u60a8\u7684\u6388\u6743\uff0c\u8bf7\u7ed9\u4e88\u6211\u4eec\u6388\u6743",showCancel:!0,canelColor:"#666",confirmText:"\u53bb\u6388\u6743",confirmColor:"#666",success:function(e){1==e.confirm&&wx.openSetting({success:function(){wx.saveImageToPhotosAlbum({filePath:t,success:function(){wx.showToast({title:"\u622a\u56fe\u5df2\u4fdd\u5b58\u81f3\u76f8\u518c,\u5feb\u5feb\u5206\u4eab\u5230\u670b\u53cb\u5708\u5427",icon:"none",image:"",duration:1500})},fail:function(){}})}})}};wx.showModal(e)}})},y.reportRewardBehavior=function(t,e,o){o.reportShareBehavior({operation:t,currentShow:0,strategy:1,adunit:e,scenelD:1,shareValue:0,rewardValue:1})},y.reportShareBehavior=function(t,e,o){o.reportShareBehavior({operation:6,inviteUser:t,strategy:1,adunit:e,scenelD:1,shareValue:1,rewardValue:0})},y.watchAdVideo=function(t){var e,o,n,a,i=this,r=t.id,c=t.tag,l=t.success,p=t.fail;if(t=t.nofit,0!=this._canShowRewardedVideoAd)if(cc.log("[sdk] watch ad video",c),cc.sys.isBrowser)l&&l();else{if(""!=r)return this.isPlatform(s.android)?d.default.showRewardVideoAd(r,l,p):this.isPlatform(s.wx)?(e=this.preloadVideoAd(r,l,p,t,!0).video).show().then(function(){return e.show(),i.reportRewardBehavior(1,r,e),!0}).catch(function(t){return console.log("[sdk] \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5931\u8d25",t),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),e.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),e.show()}),"can't invoke load() while video-ad is showed"!=t.errMsg?(p&&p(t),!1):void console.warn("[sdk] can't invoke load() while video-ad is showed, ignore operation.")}):this.isPlatform(s.tt)?(console.log("[\u5b57\u8282sdk]"),(o=this.preloadVideoAd(r,l,p,t,!0).video).show().then(function(){return console.log("[sdk] \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u6210\u529f"),!0}).catch(function(t){return console.log("[sdk] \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5931\u8d25",t),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),o.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.show()}),"can't invoke load() while video-ad is showed"!=t.errMsg?(p&&p(t),!1):void console.warn("[sdk] can't invoke load() while video-ad is showed, ignore operation.")})):this.isPlatform(s.oppo)?(console.log("[oppo sdk]"),(n=this.preloadVideoAd(r,l,p,t,!0).video).show().then(function(){return console.log("[sdk] \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u6210\u529f"),!0}).catch(function(t){return console.log("[sdk] \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5931\u8d25",t),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),n.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),n.show()}),"can't invoke load() while video-ad is showed"!=t.errMsg?(p&&p(t),!1):void console.warn("[sdk] can't invoke load() while video-ad is showed, ignore operation.")})):this.isPlatform(s.vivo)&&(console.log("[vivo sdk]"),(a=this.preloadVideoAd(r,l,p,t,!0).video).show().then(function(){return console.log("[sdk] \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u6210\u529f"),!0}).catch(function(t){return console.log("[sdk] \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5931\u8d25",t),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),a.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),a.show()}),"can't invoke load() while video-ad is showed"!=t.errMsg?(p&&p(t),!1):void console.warn("[sdk] can't invoke load() while video-ad is showed, ignore operation.")})),!0;l&&l()}},y.showInterstitialAd=function(t){this.isPlatform(s.wx)?l.default.showInterstitialAd():cc.sys.platform==cc.sys.BYTEDANCE_GAME?p.default.showInterstitialAd():this.isPlatform(s.android)&&d.default.showInterstitialAd(t.tag)},y.showFullScreenAd=function(t){this.isPlatform(s.android)&&d.default.showFullScreenAd(t)},y.showBigImageAd=function(t){this.isPlatform(s.android)&&d.default.showBigImageAd(t)},y.hideBigImageAd=function(t){this.isPlatform(s.android)&&d.default.hideBigImageAd(t)},y.showBannerAd=function(){this.isPlatform(s.wx)?l.default.showBannerAd():cc.sys.platform==cc.sys.BYTEDANCE_GAME&&p.default.showBannerAd()},y.hideBannerAd=function(){this.isPlatform(s.wx)?l.default.hideBannerAd():cc.sys.platform==cc.sys.BYTEDANCE_GAME&&p.default.hideBannerAd()},y.showToast=function(t){this.isPlatform(s.wx)?l.default.showToast(t):(cc.sys.platform,cc.sys.BYTEDANCE_GAME)},y.getDeviceId=function(){return""},y.uploadFile=function(t){var e=this.host;cc.sys.platform==cc.sys.BYTEDANCE_GAME&&tt.uploadFile({url:e+t.url,filePath:t.file,name:"image_file",formData:t.data,success:t.success,fail:t.fail,complete:t.complete})},y.on=function(t,e,o){return cc.systemEvent.on(t,e,o)},y.once=function(t,e,o){return cc.systemEvent.once(t,e,o)},y.off=function(t,e,o){return cc.systemEvent.off(t,e,o)},y.targetOff=function(t){return cc.systemEvent.targetOff(t)},y.createAuthorizeBtn=function(t,e){var o=t.getBoundingBoxToWorld(),n=cc.view.getFrameSize(),a=cc.winSize,i=o.xMin/a.width*n.width,r=(a.height-o.yMax)/a.height*n.height;return t=o.width/a.width*n.width,n=o.height/a.height*n.height,(n=this.createUserInfoButton({type:"text",text:"        ",style:{left:i,top:r,width:t,height:n,lineHeight:0,backgroundColor:"",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}})).onTap(function(t){t.iv||t.signature?e(!0):e(!1)}),n},y.rankScoreUpdate=function(t,e,o){this.isPlatform(s.wx)&&l.default.wxRankScoreUpdate(t,e,o)},y.rankScoreRemove=function(t){this.isPlatform(s.wx)&&l.default.wxRankScoreRemove(t)},y.showSubContext=function(t,e,o,n){this.isPlatform(s.wx)&&l.default.wxShowSubContext(t,e,o,n)},y.getAppVersion=function(){return""},y.isPlatform=function(t){switch(t){case s.android:return!(!cc.sys.isNative||cc.sys.os!=cc.sys.OS_ANDROID);case s.ios:return!(!cc.sys.isNative||cc.sys.os!=cc.sys.OS_IOS);case s.wx:return cc.sys.platform==cc.sys.WECHAT_GAME;case s.tt:return cc.sys.platform==cc.sys.BYTEDANCE_GAME;case s.oppo:return cc.sys.platform==cc.sys.OPPO_GAME;case s.vivo:return cc.sys.platform==cc.sys.VIVO_GAME;case s.web:return cc.sys.isBrowser}return!1},y.getPlatform=function(){return cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?s.android:cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?s.ios:cc.sys.platform==cc.sys.WECHAT_GAME?s.wx:s.web},y.createUserInfoButton=function(t){return wx.createUserInfoButton?wx.createUserInfoButton(t):(cc.log("[sdk] createUserInfoButton"),null)},y._shareNum=0,y._shareCount=0,y._canShowRewardedVideoAd=!0,y.host=n.host,y.wxValue="",y.videoAdMap={},(i.default=n=y).checkUpdateManager(),cc._RF.pop()},{}],selectLevelPop:[function(t,e,o){"use strict";cc._RF.push(e,"20c37kr4K9IaaKo8NFkM2dj","selectLevelPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("dataTs");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.inputLevelNum=null,t.closeNode=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){this.closeNode.on(cc.Node.EventType.TOUCH_END,this.closeFunc,this)},u.prototype.showSelectLevelPop=function(){this.node.active=!0,this.inputLevelNum.string=""},u.prototype.selectLevelFunc=function(){var t=Number(this.inputLevelNum.string);0<t?(this.node.active=!1,this.emitSelectLevel(t),console.log("\u8bbe\u7f6e\u5173\u5361\u6570",this.inputLevelNum.string)):console.log("error:\u4e66\u5199\u9519\u8bef")},u.prototype.emitSelectLevel=function(t){p.default.getLevelMapData(t,function(t){console.log("data:",t),t?cc.game.emit("initLevelData",{newLevelData:t}):console.log("error:\u627e\u4e0d\u5230\u5bf9\u5e94\u5173\u5361")})},u.prototype.closeFunc=function(){this.node.active=!1},s([i({type:cc.EditBox,tooltip:"\u8f93\u5165\u5bf9\u5e94\u5173\u5361\u6570"})],u.prototype,"inputLevelNum",void 0),s([i(cc.Node)],u.prototype,"closeNode",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],setBloackNumPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"adc65qZJIVBEbnAGo5PKVIz","setBloackNumPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.blockImg=null,t.typeID=null,t.inputBlockNum=null,t.blockType=0,t.parentCallbackFunc=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){},u.prototype.initBlockNumNode=function(t,e,o){this.blockType=t,this.parentCallbackFunc=o,(e=e[t])&&(this.inputBlockNum.string=""+e),p.default.changeSpriteFrame(this.blockImg,"block/block_"+t+".png")},u.prototype.setBlockNumFun=function(){var t=Number(this.inputBlockNum.string);this.parentCallbackFunc(this.blockType,t)},s([i(cc.Node)],u.prototype,"blockImg",void 0),s([i(cc.Label)],u.prototype,"typeID",void 0),s([i({type:cc.EditBox,tooltip:"\u5757\u7684\u4f7f\u7528\u7ec4\u6570"})],u.prototype,"inputBlockNum",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],setBlockNumPop:[function(t,e,o){"use strict";cc._RF.push(e,"223a5iixK9JDqi/hb6BvmvY","setBlockNumPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("setBloackNumPrefab"),u=a("config");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.setBlockNumPrefab=null,t.closeNode=null,t.blockContent=null,t.groupNumLabel=null,t.blockTypeConfig=u.default.blockTypeConfig,t.blockDataObj={},t.newScale=.5,t.blockPreWidth=60,t.blockPreHeight=110,t.groupMax=0,t.hengNum=10,t}a=(i=cc._decorator).ccclass,i=i.property,c(d,l=cc.Component),d.prototype.start=function(){this.closeNode.on(cc.Node.EventType.TOUCH_END,this.closeFunc,this)},d.prototype.showSetBlockPop=function(t,e){for(var o in console.log("groupMax = ",t),this.node.active=!0,this.blockDataObj=e,this.groupMax=t,this.updateGroupNum(),this.blockContent.removeAllChildren(),this.blockTypeConfig)this.addSetBlockNumNode(o,this.blockTypeConfig[o],e);this.blockContent.height=(Math.ceil(this.blockTypeConfig.length/this.hengNum)+1)*this.blockPreHeight},d.prototype.addSetBlockNumNode=function(t,e,o){var n=cc.instantiate(this.setBlockNumPrefab),a=this.blockPreWidth/2+t%this.hengNum*(this.blockPreWidth+5)-this.blockContent.width/2;t=this.blockPreHeight/2+Math.floor(t/this.hengNum)*(this.blockPreHeight+40),n.x=a,n.y=-t,n.scale=this.newScale,n.getComponent(p.default).initBlockNumNode(e,o,this.chileSetBlockNum.bind(this)),this.blockContent.addChild(n)},d.prototype.chileSetBlockNum=function(t,e){e?this.blockDataObj[t]=e:delete this.blockDataObj[t],this.updateGroupNum()},d.prototype.updateGroupNum=function(){var t,e=0;for(t in this.blockDataObj)e+=this.blockDataObj[t];this.groupNumLabel.string="\u7ec4\u6570\uff1a"+e+"/"+this.groupMax},d.prototype.closeFunc=function(){this.node.active=!1},d.prototype.confirmFunc=function(){var t,e=0;for(t in this.blockDataObj)e+=this.blockDataObj[t];e==this.groupMax?(console.log("\u914d\u7f6e\u65e0\u8bef"),cc.game.emit("showTips","\u914d\u7f6e\u6210\u529f"),this.node.active=!1,cc.game.emit("setBlockTypeData",this.blockDataObj)):(console.log("\u914d\u7f6e\u6709\u9519"),cc.game.emit("showTips","\u914d\u7f6e\u6709\u9519"))},s([i(cc.Prefab)],d.prototype,"setBlockNumPrefab",void 0),s([i(cc.Node)],d.prototype,"closeNode",void 0),s([i(cc.Node)],d.prototype,"blockContent",void 0),s([i(cc.Label)],d.prototype,"groupNumLabel",void 0),a=s([a],d),r.default=a,cc._RF.pop()},{}],setupPop:[function(t,e,o){"use strict";cc._RF.push(e,"71b23kHj7xHS5zCkm73iIBG","setupPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("CcJsFunc"),h=a("dataTs"),f=a("enumConfig"),g=a("audio"),y=a("wx-sdk"),m=a("sdk"),v=a("GameManager"),b=a("report-common"),N=a("uma-sdk");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.mask=null,t.popNode=null,t.userIdLabel=null,t.titleLabel=null,t.soundLabel=null,t.musicLabel=null,t.shakeLabel=null,t.backLabel=null,t.closeBtn=null,t.returnMainBtn=null,t.shareBtn=null,t.shareVideo=null,t.shareLabel=null,t.effectBtn=null,t.effectBg=null,t.musicBtn=null,t.musicBg=null,t.shockBtn=null,t.shockBg=null,t.bulletBtn=null,t.bulletBg=null,t.whiteCycle=null,t.greenCycle=null,t.userNode=null,t.privacyNode=null,t.showPopData=null,t.setupData=null,t.whiteBtnX=27,t}a=(i=cc._decorator).ccclass,i=i.property,c(_,l=cc.Component),_.prototype.start=function(){this.effectBtn.on("touchend",this.setEffectFunc,this),this.musicBtn.on("touchend",this.setMusicFunc,this),this.shockBtn.on("touchend",this.setShockFunc,this),this.bulletBtn.on("touchend",this.setBulletFunc,this),d.default.addbtnTouchEndScale(this.mask,this.hideSetupPop.bind(this)),d.default.addbtnTouchStartScale(this.closeBtn),d.default.addbtnTouchEndScale(this.closeBtn,this.hideSetupPop.bind(this)),d.default.addbtnTouchCancelScale(this.closeBtn),d.default.addbtnTouchStartScale(this.returnMainBtn),d.default.addbtnTouchEndScale(this.returnMainBtn,this.returnMainFunc.bind(this)),d.default.addbtnTouchCancelScale(this.returnMainBtn),d.default.addbtnTouchStartScale(this.shareBtn),d.default.addbtnTouchEndScale(this.shareBtn,this.shareBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.shareBtn),d.default.addTargetTouchUpInside(this.userNode,this.userNodeFunc.bind(this)),d.default.addTargetTouchUpInside(this.privacyNode,this.privacyNodeFunc.bind(this)),this.setupFonts(),m.default.isPlatform(m.Platform.oppo)||m.default.isPlatform(m.Platform.vivo)?(this.userNode.active=!0,this.privacyNode.active=!0):(this.userNode.active=!1,this.privacyNode.active=!1)},_.prototype.userNodeFunc=function(){console.log("\u7528\u6237\u534f\u8bae"),cc.sys.openURL("https://www.52shenbian.com/yinsi/yinsi.html")},_.prototype.privacyNodeFunc=function(){console.log("\u9690\u79c1\u653f\u7b56"),cc.sys.openURL("https://www.52shenbian.com/yinsi/fuwu.html")},_.prototype.setupFonts=function(){this.titleLabel.string=u.default.instance.trans(p.GDLanguage.set_up),this.soundLabel.string=u.default.instance.trans(p.GDLanguage.set_up_sound_effect),this.musicLabel.string=u.default.instance.trans(p.GDLanguage.set_up_music),this.shakeLabel.string=u.default.instance.trans(p.GDLanguage.set_up_shock);var t=h.default.getItem(f.STORAGEKEY.BULLETSWITCH);console.log("bullet = "+t),-1==t?(this.bulletBg.stopAllActions(),cc.tween(this.bulletBg).to(.2,{opacity:0}).start()):(this.bulletBg.stopAllActions(),cc.tween(this.bulletBg).delay(.1).to(.2,{opacity:255}).start())},_.prototype.showSetupPop=function(t){this.node.active=!0,this.showPopData=t,this.returnMainBtn.active=!1,this.shareBtn.active=!1;var e=h.default.getUserData();e.userID.length?(this.userIdLabel.string="UID: "+e.userID,this.userIdLabel.node.active=!0):this.userIdLabel.node.active=!1,2==t.setupType?this.returnMainBtn.active=!0:1==t.setupType&&(this.shareBtn.active=!0,h.default.isPlatform(h.GDPlatform.wx)?(this.shareLabel.getComponent(cc.Label).string="\u5b98\u65b9\u5fae\u535a",d.default.changeSpriteFrame(this.shareVideo,"rewardIcon/reward_weibo_icon.png")):(h.default.isPlatform(h.GDPlatform.oppo)||h.default.isPlatform(h.GDPlatform.oppo))&&(this.shareBtn.active=!1)),cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),this.setSetupStatus()},_.prototype.hideSetupPop=function(){this.showPopData&&this.showPopData.popCallbackCollect&&this.showPopData.popCallbackCollect.resumeCallBack(),this.node.active=!1},_.prototype.setSetupStatus=function(){this.setupData=h.default.getUserSetupData(),1==this.setupData.effectStatus?this.effectBg.opacity=255:this.effectBg.opacity=0,1==this.setupData.musicStatus?this.musicBg.opacity=255:this.musicBg.opacity=0,1==this.setupData.shockStatus?this.shockBg.opacity=255:this.shockBg.opacity=0},_.prototype.setEffectFunc=function(){1==this.setupData.effectStatus?(this.effectBg.stopAllActions(),cc.tween(this.effectBg).to(.2,{opacity:0}).start()):(this.effectBg.stopAllActions(),cc.tween(this.effectBg).delay(.1).to(.2,{opacity:255}).start()),this.setupData.effectStatus=-this.setupData.effectStatus,h.default.saveUserSetupData(this.setupData),g.default.playBGM()},_.prototype.setMusicFunc=function(){1==this.setupData.musicStatus?(this.musicBg.stopAllActions(),cc.tween(this.musicBg).to(.2,{opacity:0}).start()):(this.musicBg.stopAllActions(),cc.tween(this.musicBg).delay(.1).to(.2,{opacity:255}).start()),this.setupData.musicStatus=-this.setupData.musicStatus,h.default.saveUserSetupData(this.setupData),g.default.playBGM(),1==this.setupData.musicStatus?g.default.playBGM():b.default.reportTACommon("music_close",{})},_.prototype.setShockFunc=function(){1==this.setupData.shockStatus?(this.shockBg.stopAllActions(),cc.tween(this.shockBg).to(.2,{opacity:0}).start()):(this.shockBg.stopAllActions(),cc.tween(this.shockBg).delay(.1).to(.2,{opacity:255}).start()),this.setupData.shockStatus=-this.setupData.shockStatus,h.default.saveUserSetupData(this.setupData)},_.prototype.setBulletFunc=function(){var t=h.default.getItem(f.STORAGEKEY.BULLETSWITCH);console.log("bullet = "+t),1==t?(this.bulletBg.stopAllActions(),cc.tween(this.bulletBg).to(.2,{opacity:0}).start()):(t=-1,this.bulletBg.stopAllActions(),cc.tween(this.bulletBg).delay(.1).to(.2,{opacity:255}).start()),h.default.setItem(f.STORAGEKEY.BULLETSWITCH,t=-t),cc.game.emit(f.EMITKEY.BULLETSTATE)},_.prototype.shareBtnFunc=function(){h.default.isPlatform(h.GDPlatform.tt)?cc.game.emit(f.EMITKEY.TTSHARERECORD):h.default.isPlatform(h.GDPlatform.wx)&&y.default.weiBoJump()},_.prototype.returnMainFunc=function(){v.default.getInstance().gameType==f.GAMETYPE.GAMELEVEL&&(0<h.default.getSprintRewardData().winNum&&(t={popName:"sprintRewardPop",showPopData:{popCallbackCollect:null,popType:1}},cc.game.emit("showPop",t)),0<v.default.getInstance().cookieDict.cookieCurCount&&(t={popName:"loseCookiePop",showPopData:{popCallbackCollect:null,popType:1}},cc.game.emit("showPop",t)));var t=0==v.default.getInstance().sheepMark.resurgenceCount?0:1;console.log("\u5c55\u793a\u5931\u53bb\u7231\u5fc3\u5f39\u6846"),cc.game.emit("showPop",{popName:"loseLovePop",showPopData:{popCallbackCollect:null,popType:t}}),this.node.active=!1},_.prototype.contactFunc=function(){console.log("\u8054\u7cfb\u5ba2\u670d"),N.default.trackEvent("setting_service")},s([i(cc.Node)],_.prototype,"mask",void 0),s([i(cc.Node)],_.prototype,"popNode",void 0),s([i(cc.Label)],_.prototype,"userIdLabel",void 0),s([i(cc.Label)],_.prototype,"titleLabel",void 0),s([i(cc.Label)],_.prototype,"soundLabel",void 0),s([i(cc.Label)],_.prototype,"musicLabel",void 0),s([i(cc.Label)],_.prototype,"shakeLabel",void 0),s([i(cc.Label)],_.prototype,"backLabel",void 0),s([i(cc.Node)],_.prototype,"closeBtn",void 0),s([i(cc.Node)],_.prototype,"returnMainBtn",void 0),s([i(cc.Node)],_.prototype,"shareBtn",void 0),s([i(cc.Node)],_.prototype,"shareVideo",void 0),s([i(cc.Node)],_.prototype,"shareLabel",void 0),s([i(cc.Node)],_.prototype,"effectBtn",void 0),s([i(cc.Node)],_.prototype,"effectBg",void 0),s([i(cc.Node)],_.prototype,"musicBtn",void 0),s([i(cc.Node)],_.prototype,"musicBg",void 0),s([i(cc.Node)],_.prototype,"shockBtn",void 0),s([i(cc.Node)],_.prototype,"shockBg",void 0),s([i(cc.Node)],_.prototype,"bulletBtn",void 0),s([i(cc.Node)],_.prototype,"bulletBg",void 0),s([i(cc.SpriteFrame)],_.prototype,"whiteCycle",void 0),s([i(cc.SpriteFrame)],_.prototype,"greenCycle",void 0),s([i(cc.Node)],_.prototype,"userNode",void 0),s([i(cc.Node)],_.prototype,"privacyNode",void 0),a=s([a],_),r.default=a,cc._RF.pop()},{}],shareNodePop:[function(t,e,o){"use strict";cc._RF.push(e,"a0bd2kRDllJoo/euhMYhvFy","shareNodePop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("enumConfig"),h=a("share"),f=a("tt-sdk");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.shareNodeVideo=null,t.shareNodeUrl=null,t.closeVideoBtn=null,t.shareVideoBtn=null,t.exitVideoBtn=null,t.closeUrlBtn=null,t.shareUrlBtn=null,t.exitUrlBtn=null,t.popData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(g,l=cc.Component),g.prototype.start=function(){p.default.addTargetTouchUpInside(this.closeVideoBtn,this.closeVideoBtnFunc.bind(this)),p.default.addTargetTouchUpInside(this.shareVideoBtn,this.shareVideoBtnFunc.bind(this)),p.default.addTargetTouchUpInside(this.exitVideoBtn,this.exitVideoBtnFunc.bind(this)),p.default.addTargetTouchUpInside(this.closeUrlBtn,this.closeUrlBtnFunc.bind(this)),p.default.addTargetTouchUpInside(this.shareUrlBtn,this.shareUrlBtnFunc.bind(this)),p.default.addTargetTouchUpInside(this.exitUrlBtn,this.exitUrlBtnFunc.bind(this))},g.prototype.closeVideoBtnFunc=function(){this.node.active=!1},g.prototype.shareVideoBtnFunc=function(){cc.game.emit(d.EMITKEY.TTSHARERECORD)},g.prototype.exitVideoBtnFunc=function(){this.node.active=!1},g.prototype.closeUrlBtnFunc=function(){this.node.active=!1},g.prototype.shareUrlBtnFunc=function(){var t=this,e=this;u.default.isPlatform(u.GDPlatform.tt)?f.default.shareTemplate(function(o){console.log("shareTemplate = ",o),o&&(e.node.active=!1),t.popData&&t.popData.shareCb&&(e.popData.shareCb(o),e.node.active=!1)}):u.default.isPlatform(u.GDPlatform.wx)?h.default.shareMethod({success:function(){},fail:function(){},complete:function(){}}):this.node.active=!1},g.prototype.exitUrlBtnFunc=function(){this.node.active=!1},g.prototype.showPop=function(t){this.popData=t,this.shareNodeVideo.active=!1,this.shareNodeUrl.active=!1,this.node.active=!0,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),u.default.isPlatform(u.GDPlatform.tt)?1==t.type?this.shareNodeVideo.active=!0:2==t.type&&(this.shareNodeUrl.active=!0):(u.default.isPlatform(u.GDPlatform.wx),this.shareNodeUrl.active=!0)},s([i(cc.Node)],g.prototype,"popNode",void 0),s([i(cc.Node)],g.prototype,"shareNodeVideo",void 0),s([i(cc.Node)],g.prototype,"shareNodeUrl",void 0),s([i(cc.Node)],g.prototype,"closeVideoBtn",void 0),s([i(cc.Node)],g.prototype,"shareVideoBtn",void 0),s([i(cc.Node)],g.prototype,"exitVideoBtn",void 0),s([i(cc.Node)],g.prototype,"closeUrlBtn",void 0),s([i(cc.Node)],g.prototype,"shareUrlBtn",void 0),s([i(cc.Node)],g.prototype,"exitUrlBtn",void 0),a=s([a],g),r.default=a,cc._RF.pop()},{}],share:[function(t,e,o){"use strict";cc._RF.push(e,"cc74eL1jO5JXILJM8B5nOu3","share");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.ShareType=void 0;var i=n("sdk");function r(){}(n=a.ShareType||(a.ShareType={})).share="share",n.addFriend="addFriend",n.getReward="getReward",r.init=function(){i.default.setOnShow(function(){}),i.default.setOnShow(function(){});var t={title:(t=this.getShareParams()).title,imageUrl:t.imageUrl,query:"1"};i.default.setOnShareAppMessage(t)},r.getRewardShare=function(t){var e={title:(e=this.getShareParams()).title,imageUrl:e.imageUrl,success:function(e){console.log("Share","success",e),e&&(t.success(),console.log("\u5206\u4eab\u6210\u529f"))},fail:function(e){console.log("Share","success",e),e&&(t.fail(),console.log("\u5206\u4eab\u5931\u8d25"))},query:"2",validate:!0};this.initiativeShare(e,!0)},r.shareMethod=function(t){var e=t.success,o=t.fail,n=t.complete;t=this.getShareParams(),this.initiativeShare({title:t.title,imageUrl:t.imageUrl,success:function(t){console.log("\u5206\u4eab success = ",t),e&&e(t)},fail:function(t){console.log("\u5206\u4eab fail = ",t),o&&o(t)},complete:function(t){console.log("\u5206\u4eab complete = ",t),n&&n(t)},validate:!0},!0)},r.initiativeShare=function(t,e){if(i.default.isPlatform(i.Platform.web))return t.success&&t.success(!0),void(t.complete&&t.complete(!1));var o=!1,n=(new Date).getTime(),a=!0;1==t.validate?e?(console.log("\u5206\u4eab 111"),i.default.setOnShowOnce(function(){a?(o=2500<=(new Date).getTime()-n,console.log("\u5206\u4eab 222 result = ",o,"startTime = ",n),0==o?(t.fail&&t.fail(!0),t.complete&&t.complete(!1),console.log("\u5206\u4eab 333")):(n=(new Date).getTime(),console.log("\u5206\u4eab 444 result = ",o,"startTime = ",n),a=!1,t.success&&t.success(!0),t.complete&&t.complete(!0))):console.log("\u591a\u6b21\u8fdb\u5165\u540e\u53f0 ###### ")})):(console.log("\u5206\u4eab 555"),i.default.setOnShow(function(){0==(o=2500<=(new Date).getTime()-n)?(t.fail&&t.fail(!0),t.complete&&t.complete(!1)):(t.success&&t.success(!0),t.complete&&t.complete(!0))})):(t.success(!0),t.complete&&t.complete(!0)),e="",t.query&&(e=t.query),wx.shareAppMessage({title:t.title,imageUrl:t.imageUrl,query:e})},r.getShareParams=function(){var t=[{title:"\u6700\u65b0\u51fa\u7089\u5168\u56fd\u7701\u4efd\u667a\u529b\u6392\u884c\uff01",imageUrl:"https://cat-match-static.easygame2021.com/images/wx_1.jpg"},{title:"\u5e26\u85aa\u4e0a\u5395\u6240\u7684\u65f6\u5019\u90fd\u5728\u73a9\u5565\uff1f",imageUrl:"https://cat-match-static.easygame2021.com/images/wx_2.jpg"},{title:"\u636e\u8bf4\u901a\u5173\u7684\u90fd\u80fd\u8fbe\u5230\u7231\u56e0\u65af\u5766\u7684IQ\uff01",imageUrl:"https://cat-match-static.easygame2021.com/images/wx_3.jpg"},{title:"\u6562\u4e0d\u6562\u7761\u89c9\u524d\u73a9\u8fd9\u4e2a\u6e38\u620f\uff1f",imageUrl:"https://cat-match-static.easygame2021.com/images/wx_4.jpg"},{title:"\u4ec0\u4e48\u80fd\u963b\u6b62\u6211\u7761\u89c9\uff1f\u5c31\u662f\u8fd9\u5934\u7f8a\uff01\uff01",imageUrl:"https://cat-match-static.easygame2021.com/images/wx_5.jpg"},{title:"\u667a\u529b\u4e0d\u591f\uff0c\u5c31\u4e0d\u8981\u6765\u6311\u6218\u8fd9\u4e2a\u6e38\u620f\u4e86\uff01",imageUrl:"https://cat-match-static.easygame2021.com/images/wx_6.jpg"},{title:"\u6562\u4e0d\u6562\u6765\u6d4b\u7b97\u4e0b\u4f60\u7684\u667a\u5546\u591f\u4e0d\u591f\uff1f",imageUrl:"https://cat-match-static.easygame2021.com/images/wx_7.jpg"},{title:"\u636e\u8bf4\u53ea\u67090.01%\u7684\u4eba\u53ef\u4ee5\u901a\u5173\uff01\u73bb\u7483\u5fc3\u52ff\u8fdb\uff01",imageUrl:"https://cat-match-static.easygame2021.com/images/wx_8.jpg"}];return t[Math.floor(Math.random()*t.length)]},r.shareId=0,r.parsedId="",a.default=n=r,cc._RF.pop()},{}],"sheep-card":[function(t,e,o){"use strict";cc._RF.push(e,"a4c42prjHtESYEMJNr5MQAH","sheep-card");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.redbgNode=null,t.bluebgNode=null,t.graybgNode=null,t}r(p,s=cc.Component),p.prototype.start=function(){},p.prototype.setupData=function(t){this.redbgNode.active=!1,this.bluebgNode.active=!1;var e,o,n,a=null,i=this.graybgNode.active=!1;1==t.type?(this.redbgNode.active=!0,a=this.redbgNode,i=!0):2==t.type?(this.bluebgNode.active=!0,a=this.bluebgNode):3==t.type&&(this.graybgNode.active=!0,a=this.graybgNode),a&&(e=a.getChildByName("num-label").getComponent(cc.Label),o=a.getChildByName("count-label").getComponent(cc.Label),n=a.getChildByName("name-label").getComponent(cc.Label),e.string="\u7b2c "+t.num+" \u540d",o.string=t.item.win_score+" \u7f8a",n.string=t.item.name+"\u7f8a\u961f",i&&(i=a.getChildByName("flash_1"),a=a.getChildByName("flash_2"),this.playAnimationFloat(i,255),this.playAnimationFloat(a,-255)))},p.prototype.playAnimationFloat=function(t,e){var o=this;cc.tween(t).delay(.5).by(.1,{opacity:e}).call(function(){o.playAnimationFloat(t,-e)}).start()},c([l(cc.Node)],p.prototype,"redbgNode",void 0),c([l(cc.Node)],p.prototype,"bluebgNode",void 0),c([l(cc.Node)],p.prototype,"graybgNode",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],"sheep-flock-icon":[function(t,e,o){"use strict";cc._RF.push(e,"a441bXbKtZDx6Z6u1Z9IX7r","sheep-flock-icon");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.iconHeader=null,t.purpleNode=null,t.blueNode=null,t.regionNode=null,t.cityNode=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){},u.prototype.showData=function(t){var e=this;t?(this.node.stopAllActions(),this.node.active=!0,cc.tween(this.node).delay(3).call(function(){e.node.active=!1},this).start(),0==t.gender||1==t.gender?(this.purpleNode.active=!1,this.blueNode.active=!0):(this.purpleNode.active=!0,this.blueNode.active=!1),t.nick_name?this.regionNode.getComponent(cc.Label).string=t.nick_name:this.regionNode.getComponent(cc.Label).string="",t.city?this.cityNode.getComponent(cc.Label).string=t.city:this.cityNode.getComponent(cc.Label).string="",p.default.setAvatar(this.iconHeader,t.avatar)):this.node.active=!1},s([i(cc.Node)],u.prototype,"iconHeader",void 0),s([i(cc.Node)],u.prototype,"purpleNode",void 0),s([i(cc.Node)],u.prototype,"blueNode",void 0),s([i(cc.Node)],u.prototype,"regionNode",void 0),s([i(cc.Node)],u.prototype,"cityNode",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],"sheep-flock":[function(t,e,o){"use strict";cc._RF.push(e,"9c2fby18nZLPpABsAs/z6CS","sheep-flock");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),a=0;for(e=0;e<o;e++)for(var i=arguments[e],r=0,c=i.length;r<c;r++,a++)n[a]=i[r];return n};Object.defineProperty(r,"__esModule",{value:!0});var p,u=a("CcJsFunc"),d=a("dataTs"),h=a("enumConfig"),f=a("spine"),g=a("DateManager"),y=a("GameManager"),m=a("data-manager"),v=a("sheep-card"),b=a("sheep-flock-icon");function N(){var t=null!==p&&p.apply(this,arguments)||this;return t.sheepSp=null,t.sheepNode=null,t.sheepCard=null,t.sheepCardNode=null,t.sheepIcon=null,t.sheepIconNode=null,t.manSheepHeader=null,t.manSheepHeaderNode=null,t.womanSheepheader=null,t.womanSheepheaderNode=null,t.zIndexList=null,t.userRankInfo=null,t.userPosItem=null,t.sheepNodeArr=[],t.angle=0,t.radius=0,t.iconNode=null,t.sheepUserNode=null,t.clothesData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(N,p=cc.Component),N.prototype.start=function(){cc.game.on(h.EMITKEY.SHOWUSERNODE,this.showUserNode,this),cc.game.on(h.EMITKEY.CHANGESHEEPCLOTHES,this.changeSheepClothesFunc,this)},N.prototype.changeSheepClothesFunc=function(){if(this.sheepUserNode&&this.userRankInfo&&1==this.userRankInfo.state){for(var t=this,e="sheep/Sheeps",o="skin_00",n=d.default.getSheepClothesData(),a=0;a<n.length;a++){var i=n[a];if(i.dressing){e="sheep/"+i.spName,o=i.spSkin;break}}this.sheepUserNode.getChildByName("sheepSp").getComponent(f.default).loadSpine(e,function(){t.sheepUserNode.getChildByName("sheepSp").getComponent(f.default).setNewSkin(o),t.sheepUserNode.getChildByName("sheepSp").getComponent(f.default).play("Jump2",0)})}},N.prototype.showUserNode=function(){var t=this;this.userRankInfo&&this.sheepIconNode&&this.userPosItem&&(console.log("game_over = "+y.default.getInstance().game_over),1==y.default.getInstance().game_over&&this.sheepUserNode?(this.sheepUserNode.opacity=255,this.sheepUserNode.getChildByName("sheepSp").getComponent(f.default).play("Drop1",1,function(){t.sheepUserNode.getChildByName("flashSp").opacity=255,t.sheepUserNode.getChildByName("flashSp").getComponent(f.default).play("3Ray1",1,function(){t.sheepUserNode.getChildByName("flashSp").opacity=0}),setTimeout(function(){d.default.isPlatform(d.GDPlatform.tt)?t.showSharePop():d.default.isPlatform(d.GDPlatform.web)&&t.showWxSharePop()},500),t.sheepUserNode.getChildByName("sheepSp").getComponent(f.default).play("Jump2",0)}),y.default.getInstance().game_over=0):(this.sheepIconNode.x=this.userPosItem.x,this.sheepIconNode.y=this.userPosItem.y+20,this.sheepIconNode.getComponent(b.default).showData(this.userRankInfo)))},N.prototype.showSharePop=function(){cc.game.emit("showPop",{popName:"shareNodePop",showPopData:{type:1}})},N.prototype.showWxSharePop=function(){cc.game.emit("showPop",{popName:"challengeSucPop",showPopData:{}}),setTimeout(function(){cc.game.emit(h.EMITKEY.HIDEMASKLAYER)},2e3)},N.prototype.setupData=function(t){if(t){this.angle=240,this.radius=100,this.sheepNodeArr=[];try{this.clothesData=d.default.gameConfigData.baseConfigData.sheepClothesData}catch(t){}var e=g.default.format(h.CALENDARNAMES[5],new Date),o=g.default.format(h.CALENDARNAMES[6],new Date),n=-1;n=(n=(o=d.default.getDailyData(e,o))&&o.sheepNum?Number(o.sheepNum):n)<0?0:n,this.zIndexList=[29,28,27,26,28,28,30,29,28,27,26,25,18,25,24,25,26,27,40,39,38,37,36,35,34,33,22,17,16,15,22,23,24,25,26,27],this.sheepNode||(this.sheepNode=this.sheepSp),this.sheepCardNode||(this.sheepCardNode=this.sheepCard),this.sheepIconNode||(this.sheepIconNode=this.sheepIcon),this.manSheepHeader||(this.manSheepHeaderNode=this.manSheepHeader),this.womanSheepheader||(this.womanSheepheaderNode=this.womanSheepheader),this.node.removeAllChildren(),this.iconNode=new cc.Node,this.iconNode.width=this.node.width,this.iconNode.height=this.node.height,this.iconNode.name="iconNode",this.iconNode.zIndex=100,this.node.addChild(this.iconNode),o=cc.instantiate(this.sheepCardNode),this.node.addChild(o),o.zIndex=49,o.y+=70,o.getComponent(v.default).setupData(t);var a=[];if(t.item&&t.item.result&&0<t.item.result.length&&"null"!=t.item.result){this.node.addChild(this.sheepIconNode),this.sheepIconNode.zIndex=200,this.sheepIconNode.active=!1,o=JSON.parse(t.item.result),a=this.bubbleSort(o);var i,r=d.default.getUserData().userID;for(i in a)Number(r)==a[i].uid&&(this.userRankInfo=a[i])}var c=t.item.all_score;(c=36<c?36:c)<=0&&(c=0);for(var s=0;s<c;s++)setTimeout(function(){},0*s),this.setSheep(a,s,n)}},N.prototype.bubbleSort=function(t){for(var e,o=l(t),n=0,a=o.length;n<a;n++)for(var i=0;i<a-1-n;i++)(o[i].state>o[i+1].state||o[i].state==o[i+1].state&&o[i].fail<o[i+1].fail)&&(e=[o[i+1],o[i]],o[i]=e[0],o[i+1]=e[1]);return o},N.prototype.setSheep=function(t,e){if(!(e>=t.length)){var o=cc.instantiate(this.sheepNode);this.node.addChild(o),this.sheepNodeArr.push(o);var n=0;e<6?(n=6,this.radius=100):e<18?(n=12,this.radius=200):(n=18,this.radius=300);var a=this.angle/180*Math.PI,i=this.radius*Math.cos(a),r=this.radius*Math.sin(a);a=0,e<this.zIndexList.length&&(a=this.zIndexList[e]),o.x=i,o.y=r,o.zIndex=a,this.angle+=360/n;var c=t[e];1==c.state&&(n=null,(n=0==c.gender?cc.instantiate(this.manSheepHeader):cc.instantiate(this.womanSheepheader)).zIndex=a,this.iconNode.addChild(n),n.x=i,n.y=95+r,e<t.length&&u.default.setAvatar(n,t[e].avatar));var s="sheep/Sheeps",l="skin_00";if(Number(d.default.getUserData().userID)==c.uid){if(this.userPosItem=cc.v2(i,r),this.userRankInfo){for(var p=d.default.getSheepClothesData(),h=0;h<p.length;h++){var f=p[h];if(f.dressing){s="sheep/"+f.spName,l=f.spSkin;break}}this.sheepUserNode=o,1==y.default.getInstance().game_over&&(this.sheepUserNode.opacity=0)}}else if(this.clothesData&&c.skin&&0<c.skin)for(var g in this.clothesData)if(this.clothesData[g].clothesId==c.skin){s="sheep/"+this.clothesData[g].spName,l=this.clothesData[g].spSkin;break}1!=c.state&&(s="sheep/Dead1"),this.setUpSheepNode(o,s,c,l);var m=o.getChildByName("clickNode");m.on(cc.Node.EventType.TOUCH_END,function(){var o;console.log(m.parent.getPosition().x,m.parent.getPosition().y),this.sheepIconNode&&(o=t[e],this.sheepIconNode.x=m.parent.getPosition().x,this.sheepIconNode.y=m.parent.getPosition().y+20,this.sheepIconNode.getComponent(b.default).showData(o))},this)}},N.prototype.setUpSheepNode=function(t,e,o,n){t.getChildByName("flashSp").opacity=0,t.getChildByName("sheepSp").getComponent(f.default).loadSpine(e,function(){var a="Jump2";"sheep/Dead1"==e?(o.fail||(o.fail=1),a="Dead"+m.default.getDeadNum(o.fail)):t.getChildByName("sheepSp").getComponent(f.default).setNewSkin(n),t.getChildByName("sheepSp").getComponent(f.default).play(a,0)})},s([i({type:cc.Node,tooltip:"\u7f8a"})],N.prototype,"sheepSp",void 0),s([i({type:cc.Node,tooltip:"\u540d\u6b21\u724c\u5b50"})],N.prototype,"sheepCard",void 0),s([i({type:cc.Node,tooltip:"\u5361\u7247"})],N.prototype,"sheepIcon",void 0),s([i({type:cc.Node,tooltip:"\u7537\u5934\u50cf"})],N.prototype,"manSheepHeader",void 0),s([i({type:cc.Node,tooltip:"\u5973\u5934\u50cf"})],N.prototype,"womanSheepheader",void 0),a=s([a],N),r.default=a,cc._RF.pop()},{}],"sheep-rank-pop":[function(t,e,o){"use strict";cc._RF.push(e,"4f1e6q1O4ZIM6jxip+/6cgl","sheep-rank-pop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("api-sheep"),u=a("CcJsFunc"),d=a("GameManager"),h=a("sheepRankItem");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.sheepRankItem=null,t.rankItem=null,t.contentView=null,t.closeBtn=null,t.bottomNode=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){u.default.addbtnTouchStartScale(this.closeBtn),u.default.addbtnTouchEndScale(this.closeBtn,this.closeBtnFunc.bind(this)),u.default.addbtnTouchCancelScale(this.closeBtn)},f.prototype.closeBtnFunc=function(){this.node.active=!1},f.prototype.sheepRankPop=function(){this.node.active=!0,this.requestData()},f.prototype.requestData=function(){var t;cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),this.rankItem||(this.rankItem=cc.instantiate(this.sheepRankItem)),this.contentView.removeAllChildren(),this.bottomNode.active=!1,d.default.getInstance().rankInfo?this.setSubViews(d.default.getInstance().rankInfo):(t=this,p.default.getRankInfoData(function(e){t.setSubViews(e.data)}))},f.prototype.setSubViews=function(t){for(var e=0;e<t.list.length;e++){var o=t.list[e];o.index=e;var n=cc.instantiate(this.rankItem);this.contentView.addChild(n),n.getComponent(h.default).setupData(o)}t.user.index&&(this.bottomNode.getComponent(h.default).setBottomData(t.user),this.bottomNode.active=!0)},s([i({type:cc.Node,tooltip:"popNode"})],f.prototype,"popNode",void 0),s([i({type:cc.Node,tooltip:"item \u5b50View"})],f.prototype,"sheepRankItem",void 0),s([i({type:cc.Node,tooltip:"item \u7236\u89c6\u56fe"})],f.prototype,"contentView",void 0),s([i({type:cc.Node,tooltip:"\u5173\u95ed\u6309\u94ae"})],f.prototype,"closeBtn",void 0),s([i({type:cc.Node,tooltip:"bottom View"})],f.prototype,"bottomNode",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],sheepRankItem:[function(t,e,o){"use strict";cc._RF.push(e,"3fc70swD4FHKLdy7tN3hR6f","sheepRankItem");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.imgNode=null,t.labelNode=null,t.numNode=null,t.nameNode=null,t.countNode=null,t}r(p,s=cc.Component),p.prototype.start=function(){},p.prototype.setupData=function(t){var e=t.index+1;this.numNode.getComponent(cc.Label).string=e+"",this.nameNode.getComponent(cc.Label).string=t.name,this.countNode.getComponent(cc.Label).string=t.win_score+"";var o,n=null,a=null,i=null,r=null,c=null,s=null,l=this.imgNode.children;for(o in l){var p=l[o];"text-black"==p.name||"text-sheep-black"==p.name?p.active=!0:p.active=!1,"num-yellow"==p.name?n=p:"num-sliver"==p.name?a=p:"num-orange"==p.name?i=p:"num-blue"==p.name?r=p:"num-black"==p.name||("img-yellow"==p.name?c=p:"img-white"==p.name?s=p:p.name)}s.active=!0,1==e?(n.active=!0,c.active=!0,s.active=!1):2==e?a.active=!0:3==e?i.active=!0:r.active=!0},p.prototype.setBottomData=function(t){this.numNode.getComponent(cc.Label).string=t.index+"",this.nameNode.getComponent(cc.Label).string=t.item.name,this.countNode.getComponent(cc.Label).string=t.item.win_score+""},c([l(cc.Node)],p.prototype,"imgNode",void 0),c([l(cc.Node)],p.prototype,"labelNode",void 0),c([l(cc.Node)],p.prototype,"numNode",void 0),c([l(cc.Node)],p.prototype,"nameNode",void 0),c([l(cc.Node)],p.prototype,"countNode",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],"show-daily-pop":[function(t,e,o){"use strict";cc._RF.push(e,"3a139KaoTJPZKuR6HDW3cfD","show-daily-pop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("rewardPrefab"),h=a("CcJsFunc"),f=a("audio"),g=a("spine");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.maskNode=null,t.titleSpine=null,t.boxSpine=null,t.flashNode=null,t.receiveBtn=null,t.receiveLabel=null,t.rewardPrefab=null,t.popData=null,t.rewardNodeArray=[],t.rewardDataArray=[],t}a=(i=cc._decorator).ccclass,i=i.property,c(y,l=cc.Component),y.prototype.start=function(){h.default.addbtnTouchStartScale(this.receiveBtn),h.default.addbtnTouchEndScale(this.receiveBtn,this.receiveBtnFunc.bind(this)),h.default.addbtnTouchCancelScale(this.receiveBtn)},y.prototype.receiveBtnFunc=function(){this.node.active=!1,this.receiveBtn.stopAllActions();for(var t=0;t<this.rewardNodeArray.length;t++)this.rewardNodeArray[t].destroy();this.rewardNodeArray=[]},y.prototype.showPop=function(t){var e;this.popData=t,this.node.active=!0,this.titleSpine.active=!1,this.boxSpine.active=!1,this.receiveBtn.active=!1,this.flashNode.active=!1,this.receiveLabel.string=u.default.instance.trans(p.GDLanguage.pop_claim),"daily"==t.popName?(e={},1==t.popType?(e.propType="prop_random",e.num=3):2==t.popType?(e.propType="prop_cancel",e.num=3):3==t.popType&&(e.propType="prop_remove",e.num=3),this.rewardDataArray.push(e),this.addRewardNode(),this.playAnimation()):this.node.active=!1},y.prototype.playAnimation=function(){var t=this;t.boxSpine.active=!0,t.boxSpine.getComponent(g.default).setFrameEventCb("Open1",function(){console.log("1"),f.default.playAudioMusic("audio/sound/Open1.mp3",!1)}),t.boxSpine.getComponent(g.default).setFrameEventCb("Eff_Sheen1",function(){t.titleSpine.active=!0,f.default.playAudioMusic("audio/sound/Words1.mp3",!1),t.titleSpine.getComponent(g.default).play("Award1_Words1",1),console.log("2"),t.flashNode.active=!0,cc.tween(t.flashNode).by(40,{angle:360}).repeatForever().start(),t.playRewardNode()}),t.boxSpine.getComponent(g.default).setFrameEventCb("Treasure1",function(){t.flashNode.active=!0,cc.tween(t.flashNode).by(40,{angle:360}).repeatForever().start(),t.playRewardNode(),console.log("3")}),t.boxSpine.getComponent(g.default).play("4Daily_Open"+this.popData.popType,1,function(){console.log("4"),t.receiveBtn.active=!0})},y.prototype.addRewardNode=function(){for(var t=0;t<this.rewardDataArray.length;t++){var e=cc.instantiate(this.rewardPrefab);e.x=0,e.y=0,e.scale=0,e.getComponent(d.default).setRewardNode(this.rewardDataArray[t]),this.rewardNodeArray.push(e),this.node.addChild(e)}},y.prototype.playRewardNode=function(){var t=this;this.rewardNodeArray.length&&cc.tween(this.rewardNodeArray[0]).to(.1,{scale:1.4,y:150}).to(.1,{scale:1}).to(.1,{scale:1.2}).to(.1,{scale:1}).call(function(){t.playAnimationFloat(t.rewardNodeArray[0],10)}).start()},y.prototype.playAnimationFloat=function(t,e){var o=this;cc.tween(t).by(1,{y:e}).call(function(){o.playAnimationFloat(t,-e)}).start()},s([i(cc.Node)],y.prototype,"maskNode",void 0),s([i(cc.Node)],y.prototype,"titleSpine",void 0),s([i(cc.Node)],y.prototype,"boxSpine",void 0),s([i(cc.Node)],y.prototype,"flashNode",void 0),s([i(cc.Node)],y.prototype,"receiveBtn",void 0),s([i(cc.Label)],y.prototype,"receiveLabel",void 0),s([i(cc.Prefab)],y.prototype,"rewardPrefab",void 0),a=s([a],y),r.default=a,cc._RF.pop()},{}],"show-reward-pop":[function(t,e,o){"use strict";cc._RF.push(e,"a28f8l6KdRP1bgidG2CHAQ9","show-reward-pop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("cookieRewardNode"),h=a("CcJsFunc"),f=a("enumConfig"),g=a("audio"),y=a("spine");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.maskNode=null,t.cookieRewardLayer=null,t.cookieTitleSpine=null,t.cookieRewardNode=null,t.cookieFlashNode=null,t.cookieImageNode=null,t.cookieNumNode=null,t.cookieReceiveBtn=null,t.cookiePropEndNode=null,t.receiveLabel=null,t.popData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(m,l=cc.Component),m.prototype.start=function(){h.default.addbtnTouchStartScale(this.cookieReceiveBtn),h.default.addbtnTouchEndScale(this.cookieReceiveBtn,this.receiveBtnFunc.bind(this)),h.default.addbtnTouchCancelScale(this.cookieReceiveBtn),this.receiveLabel.string=u.default.instance.trans(p.GDLanguage.pop_claim)},m.prototype.receiveBtnFunc=function(){var t=this;this.maskNode.active=!1,this.cookieTitleSpine.active=!1,this.cookieFlashNode.active=!1,this.cookieReceiveBtn.active=!1;var e=this.cookiePropEndNode,o=h.default.getWorldPosition(e);o=h.default.getNodePosition(this.node,o),cc.tween(this.cookieRewardNode).to(.1,{angle:5}).to(.1,{angle:-5}).to(.1,{angle:5}).to(.1,{angle:-5}).to(.3,{position:cc.v3(o.x,o.y,0),scale:.3}).call(function(){t.node.active=!1,t.popData&&t.popData.rewardCallback&&t.popData.rewardCallback(),cc.tween(e).to(.2,{scale:1.2}).to(.2,{scale:1}).start()}).start()},m.prototype.showPop=function(t){this.popData=t,this.cookieRewardLayer.active=!1,1==t.popType&&(this.node.active=!0,this.maskNode.active=!0,this.cookieRewardLayer.active=!0,this.cookieRewardLayer.position=cc.v3(0,0,0),this.cookieRewardNode.scale=1,this.cookieTitleSpine.active=!0,this.cookieReceiveBtn.active=!0,this.showCookieRewardPopData(t.rewardData,t.startNode,t.endNode))},m.prototype.showCookieRewardPopData=function(t,e,o){console.log("\u9886\u53d6\u5956\u52b1",JSON.stringify(t));var n=this;n.cookieFlashNode.active=!1,g.default.playAudioMusic("audio/sound/Words1.mp3",!1),n.cookieTitleSpine.getComponent(y.default).play("Award1_Words1",1),e=h.default.getWorldPosition(e),e=h.default.getNodePosition(this.node,e),o=h.default.getWorldPosition(o),o=h.default.getNodePosition(this.node,o),this.cookieRewardNode.getComponent(d.default).showData(t),this.cookieRewardNode.position=cc.v3(e),this.cookieReceiveBtn.scale=0,this.cookieRewardNode.scale=.5,cc.tween(this.cookieRewardNode).to(.3,{position:cc.v3(e.x+10,e.y-400),scale:.7}).to(.3,{position:cc.v3(e.x-100,e.y-500)}).to(.2,{position:cc.v3(o),scale:1}).call(function(){n.cookieFlashNode.active=!0,cc.tween(n.cookieFlashNode).by(5,{angle:360}).repeatForever().start(),cc.tween(n.cookieReceiveBtn).to(.3,{scale:1}).start(),n.popData&&n.popData.callback?n.popData.callback():cc.game.emit(f.EMITKEY.HIDEMASKLAYER)}).start()},s([i(cc.Node)],m.prototype,"maskNode",void 0),s([i(cc.Node)],m.prototype,"cookieRewardLayer",void 0),s([i(cc.Node)],m.prototype,"cookieTitleSpine",void 0),s([i(cc.Node)],m.prototype,"cookieRewardNode",void 0),s([i(cc.Node)],m.prototype,"cookieFlashNode",void 0),s([i(cc.Node)],m.prototype,"cookieImageNode",void 0),s([i(cc.Node)],m.prototype,"cookieNumNode",void 0),s([i(cc.Node)],m.prototype,"cookieReceiveBtn",void 0),s([i(cc.Node)],m.prototype,"cookiePropEndNode",void 0),s([i(cc.Label)],m.prototype,"receiveLabel",void 0),a=s([a],m),r.default=a,cc._RF.pop()},{}],"snake-ctrl-point":[function(t,e,o){"use strict";cc._RF.push(e,"97d1cS+taxBnYxM87Oc/vw1","snake-ctrl-point");var n,a,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function s(){var t=null!==a&&a.apply(this,arguments)||this;return t.size=20,t.isDragging=!1,t.sprite=null,t.onEditStart=null,t.onEditEnd=null,t}Object.defineProperty(r,"__esModule",{value:!0}),i=cc._decorator.ccclass,c(s,a=cc.Component),s.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.addComponent(cc.BlockInputEvents)},s.prototype.start=function(){this.idle()},s.prototype.setEditCallback=function(t,e){this.onEditStart=t,this.onEditEnd=e},s.prototype.onTouchStart=function(){this.selected(),this.isDragging=!0,this.onEditStart&&this.onEditStart()},s.prototype.onTouchMove=function(t){var e;0!=this.isDragging&&(t=(e=t.getDelta()).x,e=e.y,this.node.setPosition(this.node.position.x+t,this.node.position.y+e))},s.prototype.onTouchEnd=function(){this.idle(),this.isDragging=!1,this.onEditEnd&&this.onEditEnd()},s.prototype.idle=function(){this.node.stopAllActions(),cc.tween(this.node).to(.1,{scale:1,opacity:255}).to(.5,{scale:1.01,opacity:200},{easing:cc.easing.backInOut}).union().repeatForever().start()},s.prototype.selected=function(){this.node.stopAllActions(),cc.tween(this.node).to(.1,{scale:1,opacity:255}).to(.5,{scale:1.4,opacity:100},{easing:cc.easing.backInOut}).union().repeatForever().start()},s.prototype.getSpriteFrameByColor=function(t){for(var e=new Uint8Array(16),o=0;o<2;o++)for(var n=0;n<2;n++)e[8*o+4*n]=t.r,e[8*o+4*n+1]=t.g,e[8*o+4*n+2]=t.b,e[8*o+4*n+3]=t.a;var a=new cc.Texture2D;return a.initWithData(e,cc.Texture2D.PixelFormat.RGBA8888,2,2),new cc.SpriteFrame(a)},i=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r}([i],s),r.default=i,cc._RF.pop()},{}],"snake-sprite-assembler":[function(t,e,o){"use strict";cc._RF.push(e,"f7fady81S5KDZYrZVIIiQPn","snake-sprite-assembler");var n,a=t,i=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},i=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),r.SplineSpriteAssembler=void 0;for(var c=a("curve-sample"),s=cc.Vec3,l=a("export-helper"),p=cc.Mat4,u=[],d=0;d<4;d++)u.push(new s);var h=[];for(d=0;d<4;d++)h.push({u:0,v:1});var f,g=new s,y=Math.floor(65535/4),m=new Array,v=new Array;function b(){var t=null!==f&&f.apply(this,arguments)||this;return t._renderData=null,t.verticesCount=0,t.indicesCount=0,t}i(b,f=cc.Assembler),b.prototype.init=function(t){f.prototype.init.call(this,t),this._renderData=new cc.RenderData,this._renderData.init(this),this._renderData.createFlexData(0,4,6,this.getVfmt()),this._updateIndices()},b.prototype._updateIndices=function(){for(var t=this._renderData.iDatas[0],e=0,o=0,n=t.length;e<n;e+=6,o+=4)t[e]=o,t[e+1]=o+1,t[e+2]=o+2,t[e+3]=o+1,t[e+4]=o+3,t[e+5]=o+2},b.prototype.updateRenderData=function(t){this.packToDynamicAtlas(t,t.spriteFrame),t._vertsDirty&&(this.updateVertAndUV(t),t._vertsDirty=!1)},b.prototype.updateVertAndUV=function(t){if(k=t.spriteFrame){var e=function(t,e){return(t=v[t])<=i+1e-4?0<i?l.math.lerp(E[12].v,E[8].v,t/i):E[8].v:L<a.height?l.math.lerp(E[8].v,E[0].v,(t-i)/(L-i)):B<=t?(0==R&&(R=Math.floor((B-i)/d)*d+i),l.math.lerp(E[8].v,E[0].v,(t-R)/(M-R))):(t=e(t=(t-i)/d%1),l.math.lerp(E[8].v,E[4].v,t))},o=function(t){return t<.001?1:t},n=function(t){return.9999<t?0:t},a=k._rect,i=k.insetTop,r=k.insetBottom,d=a.height-i-r;m.length=0,v.length=0;for(var f=t.mSpline.GetCurves(),b=i,N=0,_=0;_<f.length;++_){for(var w=f[_].samples,C=0==_?0:1;C<w.length;C++){var P=w[C];if(l.math.approx(b,P.distanceInCurve,.01))b+=d;else if(b<P.distanceInCurve)do{var S=(b-(S=w[C-1].distanceInCurve))/(P.distanceInCurve-S);S=c.CurveSample.Lerp(w[C-1],P,S)}while(m.push(S),v.push(N+S.distanceInCurve),(b+=d)<P.distanceInCurve);m.push(P),v.push(N+P.distanceInCurve)}b-=f[_].Length,N+=f[_].Length}var k=m.length-1;y<k&&(console.warn("Spline("+t.name+")\u7684\u56db\u8fb9\u5f62\u6570\u91cf("+k+")\u8d85\u8fc7\u4e86\u5141\u8bb8\u7684\u6700\u5927\u503c("+y+"), \u81ea\u52a8\u622a\u65ad, Spline \u66f2\u7ebf\u4f1a\u663e\u793a\u4e0d\u5b8c\u6574"),m.length=y),this.verticesCount=4*k,this.indicesCount=6*k,k=t.node.width;var D=t.node.getWorldMatrix(new p),A=.5*k;(k=this._renderData._flexBuffer).reserve(this.verticesCount,this.indicesCount)&&this._updateIndices(),k.used(this.verticesCount,this.indicesCount);var O=this._renderData.vDatas[0],I=this._renderData.uintVDatas[0],T=0,E=null===(k=t.spriteFrame)||void 0===k?void 0:k.uvSliced,L=v[v.length-1],M=(k=L>a.height?1:a.height/L,L*k),B=M-r;B<i&&(B=i);for(var R=0,F=256*t.node.color.toRGBValue()+t.node.color.getA(),j=0,x=m.length-1;j<x;j++){P=m[j+1],s.cross(g,cc.v3(0,0,1),P.tangent);var U=A*P.scale.x;for(s.multiplyScalar(g,g,U),s.subtract(u[0],P.location,g),s.add(u[1],P.location,g),P=m[j],s.cross(g,cc.v3(0,0,1),P.tangent),U=A*P.scale.x,s.multiplyScalar(g,g,U),s.subtract(u[2],P.location,g),s.add(u[3],P.location,g),h[0].v=e(j+1,o),h[0].u=E[1].u,h[1].v=h[0].v,h[1].u=E[2].u,h[2].v=e(j,n),h[2].u=E[13].u,h[3].v=h[2].v,h[3].u=E[14].u,_=0;_<4;_++){var G=u[_];s.transformMat4(G,G,D);var Y=5*_;O[T+Y]=G.x,O[T+Y+1]=G.y,O[T+Y+2]=h[_].u,O[T+Y+3]=h[_].v,I[T+Y+4]=F}T+=20}t.splineVerticesCache=O,m.length=0,v.length=0}},b.prototype.fillBuffers=function(t,e){e.worldMatDirty&&this.updateVertAndUV(t);var o=(i=this._renderData).vDatas[0],n=i.iDatas[0],a=this.getBuffer(e),i=(t=a.request(this.verticesCount,this.indicesCount)).byteOffset>>2;e=a._vData,o.length+i>e.length?e.set(o.subarray(0,e.length-i),i):e.set(o,i);for(var r=a._iData,c=t.vertexOffset,s=t.indiceOffset,l=0,p=n.length;l<p;l++)r[s++]=c+n[l]},b.prototype.getBuffer=function(){return cc.renderer._handle._meshBuffer},b.prototype.packToDynamicAtlas=function(t,e){e._original||!cc.dynamicAtlasManager||!e._texture.packable||(o=cc.dynamicAtlasManager.insertSpriteFrame(e))&&e._setDynamicAtlasFrame(o);var o=t._materials[0];o&&o.getProperty("texture")!==e._texture&&(t._vertsDirty=!0,t._updateMaterial())},i=b,r.SplineSpriteAssembler=i,cc._RF.pop()},{}],spine:[function(t,e,o){"use strict";cc._RF.push(e,"f215cEjIoBLcpliwC5ZCFQh","spine");var n,a=e,i=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(i,"__esModule",{value:!0}),a=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.spine=null,t._frameEventMap={},t._loop=!1,t._times=1,t._playingName="",t._playingNameQueue=[],t}r(p,s=cc.Component),p.prototype.onLoad=function(){this.init()},p.prototype.init=function(){this.spine&&(this.spine.setCompleteListener(this.completeFunc.bind(this)),this.spine.setStartListener(this.startFunc.bind(this)),this.spine.setEventListener(this.frameEventFunc.bind(this)))},p.prototype.completeFunc=function(t){this._loop||(0<this._playingNameQueue.length?t.animation.name==this._playingNameQueue[this._playingNameQueue.length-1]&&(this._times--,0!=this._times?this.playQueue(this._playingNameQueue,this._times,this._completeCb):this._completeCb&&this._completeCb(t.animation.name)):(this._times--,0!=this._times?this.play(this._playingName,this._times,this._completeCb):this._completeCb&&this._completeCb(t.animation.name)))},p.prototype.startFunc=function(t){this._startCb&&this._startCb(t.animation.name)},p.prototype.frameEventFunc=function(t,e){this._frameEventMap[e.data.name]&&this._frameEventMap[e.data.name](e.data.name)},p.prototype.setCompleteCb=function(t){this._completeCb=t},p.prototype.setStartCb=function(t){this._startCb=t},p.prototype.setFrameEventCb=function(t,e){t?e?this._frameEventMap[t]=e:delete this._frameEventMap[t]:this._frameEventMap={}},p.prototype.setNewSkin=function(t){this.spine.setSkin(t)},p.prototype.play=function(t,e,o){void 0===e&&(e=1),cc.isValid(this)&&cc.isValid(this.node)&&(this.spine.clearTracks(),this.spine.setToSetupPose(),this._playingName=t,this._loop=0==e,this._times=e,this._completeCb=o,this._playingNameQueue.length=0,this.spine.setAnimation(0,this._playingName,this._loop))},p.prototype.playQueue=function(t,e,o){if(void 0===e&&(e=1),cc.isValid(this)&&cc.isValid(this.node)&&0!=t.length)if(this._completeCb=o,this.spine.clearTracks(),this.spine.setToSetupPose(),1==t.length)this.play(t[0],e);else{this._loop=0==e,this._times=e,this._playingNameQueue=t.concat(),this.spine.setAnimation(0,t[0],!1);for(var n=1;n<t.length;n++)this.spine.addAnimation(0,t[n],!1)}},p.prototype.loadNewSpine=function(t,e){var o=this;cc.resources.load("catModel/"+t,sp.SkeletonData,function(t,n){o.spine.skeletonData=n,e()})},p.prototype.loadSpine=function(t,e){var o=this;cc.resources.load(t,sp.SkeletonData,function(t,n){o.spine.skeletonData=n,e()})},p.prototype.clear=function(){this._loop=!1,this._times=0,this._playingName="",this._playingNameQueue.length=0,this.setCompleteCb(),this.setFrameEventCb(),this.spine.clearTracks()},p.prototype.onDestroy=function(){this.clear()},c([l({type:sp.Skeleton,tooltip:"spine\u52a8\u753b\u8282\u70b9"})],p.prototype,"spine",void 0),a=c([a],p),i.default=a,cc._RF.pop()},{}],"spline-node":[function(t,e,o){"use strict";cc._RF.push(e,"54695rURQFKQ4TOtSSPaoKl","spline-node");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.SplineNode=void 0;var i=n("typed-event"),r=cc.Vec2,c=cc.Vec3;function s(t,e,o){this.position=c.ZERO.clone(),this.direction=new c(0,1,0),this.up=new c(0,0,1),this.scale=r.ONE.clone(),this.changed=new i.TypedEvent,this.position.set(t),this.direction.set(e),o&&(this.scale.x=o.x,this.scale.y=o.y)}Object.defineProperty(s.prototype,"Position",{get:function(){return this.position},set:function(t){this.position.equals(t)||(this.position.set(t),this.changed.emit(this))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Direction",{get:function(){return this.direction},set:function(t){this.direction.equals(t)||(this.direction.set(t),this.changed.emit(this))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Up",{get:function(){return this.up},set:function(t){this.up.equals(t)||(this.up.set(t),this.changed.emit(this))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Scale",{get:function(){return this.scale},set:function(t){this.scale.equals(t)||(this.scale.set(t),this.changed.emit(this))},enumerable:!1,configurable:!0}),n=s,a.SplineNode=n,cc._RF.pop()},{}],"spline-sprite":[function(t,e,o){"use strict";cc._RF.push(e,"7cb294g2cpBkqh5EBwwas6q","spline-sprite");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.SplineSprite=r.SplineSpriteVert=void 0;var l,p=a("spline"),u=a("spline-node"),d=a("snake-ctrl-point"),h=a("snake-sprite-assembler"),f=(cc.Sprite,cc.Node),g=(cc.Node.EventType,cc.assetManager),y=(i=(cc.Color,y=cc._decorator).ccclass,a=y.property,y.menu);function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.showDebugInfo=!1,t.editMode=!1,t.mCtrlNodeRoot=null,t.mSplineDirty=!0,t.lockHeadAndTail=!0,t.mSpline=new p.Spline,t.curveSampleList=new Array,t.splineVerticesCache=null,t}r.SplineSpriteVert=function(t){this.vertices=t},c(m,l=cc.Sprite),Object.defineProperty(m.prototype,"ShowDebugInfo",{get:function(){return this.showDebugInfo},enumerable:!1,configurable:!0}),m.prototype.setSplineDirty=function(){this.mSplineDirty=!0},m.prototype.onLoad=function(){var t;null===(t=l.prototype.onLoad)||void 0===t||t.call(this),this.initRootCtrlNode(),this.setSplineDirty(),this.mCtrlNodeRoot.active=!1},m.prototype.start=function(){var t;null===(t=l.prototype.start)||void 0===t||t.call(this)},m.prototype.onEnable=function(){l.prototype.onEnable.call(this)},m.prototype.setCtrlPosList=function(t){if(this.spriteFrame){try{this.mCtrlNodeRoot&&this.mCtrlNodeRoot.isValid&&(this.mCtrlNodeRoot.removeAllChildren(),this.mSpline.RemoveAllNode())}catch(t){cc.warn("setCtrlPosList err",t)}try{for(var e=0;e<t.length;e++){var o=t[e],n=this.addBigCtrlNode(o),a=0==e||e==t.length-1;this.updateBigCtrlNode(n,a)}}catch(t){cc.warn(t)}this.updateSpline()}},m.prototype.getCtrlPosList=function(){var t,e=[];if(!this.mCtrlNodeRoot)return e;for(t in this.mCtrlNodeRoot.children){var o=this.mCtrlNodeRoot.children[t],n=o.children[0];e.push({p:{x:o.position.x,y:o.position.y},t:{x:n.position.x,y:n.position.y}})}return e},m.prototype.getHeadDirection=function(){if(this.mCtrlNodeRoot&&0<this.mCtrlNodeRoot.children.length){var t=this.mCtrlNodeRoot.children[0].children[0];return cc.v2(t.position.normalize())}return cc.v2()},m.prototype.lockHeadAndTailCtrlNode=function(t){this.lockHeadAndTail=t},m.prototype.setEditMode=function(t){if(this.editMode=t,this.mCtrlNodeRoot.active=t)for(var e=this.mCtrlNodeRoot.children.length,o=0;o<e;o++){var n=this.mCtrlNodeRoot.children[o],a=this.lockHeadAndTail&&(0==o||o==e-1);this.updateBigCtrlNode(n,a)}this.setVertsDirty()},m.prototype.getCurvePoints=function(){return this.mSpline.GetCurves(),[]},m.prototype.updateCtrlNodeData=function(t,e){this.mCtrlNodeRoot?this.mCtrlNodeRoot.children.length<=t||(t=this.mCtrlNodeRoot.children[t])&&(t.setPosition(e.p),(t=t.children[0])&&t.setPosition(e.t)):cc.warn("\u6839\u63a7\u5236\u8282\u70b9\u8fd8\u6ca1\u6709\u521b\u5efa\u5b8c\u6210")},m.prototype.updateBigCtrlNode=function(t,e){void 0===e&&(e=!1),t&&(0==e&&this.setNodeCtrl(t),e=(e=t.children[0])||this.addTangentNode(t,cc.v2(0,100)),this.setNodeCtrl(e))},m.prototype._resetAssembler=function(){this.setVertsDirty(),this._assembler=new h.SplineSpriteAssembler,this._assembler.init(this)},m.prototype.calcDirection=function(t){if(t.children.length<=0)return cc.v3(10,-10,0);var e=t.position;return t=t.children[0].position,cc.Vec3.add(cc.v3(),e,t)},m.prototype.updateSpline=function(){try{var t=this.mCtrlNodeRoot.children;if(!t||0==t.length)return;if(t.length<2)return;if(this.mSpline.reset(),0<t.length)for(var e=0;e<t.length;e++)this.mSpline.AddNode(this.newCtrlByNode(t[e]));this.setVertsDirty()}catch(t){cc.log("update spline err:",t)}},m.prototype.newCtrlByNode=function(t){return new u.SplineNode(t.position,this.calcDirection(t),cc.v2(t.scale,t.scale))},m.prototype.addBigCtrlNode=function(t){var e=this.addCtrlNode(t.p);return this.addTangentNode(e,t.t),e},m.prototype.addCtrlNode=function(t,e){void 0===e&&(e=!0);var o=new f("__ctrl-node__");return o.setParent(this.mCtrlNodeRoot),o.setPosition(t),e&&this.addCtrlHandleImg(o,20),o},m.prototype.addTangentNode=function(t,e){var o=t.getChildByName("__tangent-node__");return o||(o=new f("__tangent-node__")).setParent(t),o.setPosition(e),this.addCtrlHandleImg(o,12,cc.Color.RED),o},m.prototype.initRootCtrlNode=function(){this.mCtrlNodeRoot||(this.mCtrlNodeRoot=this.node.getChildByName("__ctrl-nodes-root__"),this.mCtrlNodeRoot||(this.mCtrlNodeRoot=new f("__ctrl-nodes-root__"),this.mCtrlNodeRoot.parent=this.node,this.mCtrlNodeRoot.setPosition(0,0)));var t=this.mCtrlNodeRoot.children.length;if(t<2)for(var e=2-t,o=0;o<e;o++)this.addCtrlNode(cc.v2(0,-100*o))},m.prototype.addCtrlHandleImg=function(t,e,o){void 0===e&&(e=10),void 0===o&&(o=cc.Color.WHITE);var n=t.addComponent(cc.Sprite);g.loadAny({uuid:"e7aba14b-f956-4480-b254-8d57832e273f"},function(t,a){n.spriteFrame=a,n.node&&n.node.isValid&&(n.node.color=o,n.node.setContentSize(e,e))}),t.setContentSize(e,e)},m.prototype.setNodeCtrl=function(t){t&&(t.getComponent(d.default)?this.setVertsDirty():t.addComponent(d.default))},m.prototype.ensureControlChildNode=function(){},s([a({editorOnly:!0,tooltip:"\u662f\u5426\u663e\u793a\u8c03\u8bd5\u4fe1\u606f, \u53ea\u5728\u7f16\u8f91\u5668\u4e2d\u6709\u6548"})],m.prototype,"showDebugInfo",void 0),s([a({tooltip:"\u662f\u5426\u4e3a\u7f16\u8f91\u6a21\u5f0f"})],m.prototype,"editMode",void 0),y=s([i(),y("2D/SnakeSprite")],m),r.SplineSprite=y,cc._RF.pop()},{}],spline:[function(t,e,o){"use strict";cc._RF.push(e,"100b90Z0nZEjY59xqkwsOb4","spline");var n=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Spline=a.ListChangeType=void 0;var i=n("cubic-bezier-curve"),r=n("typed-event"),c=cc.Vec3,s=a.ListChangeType||(a.ListChangeType={});function l(t,e){this.newItems=t,this.insertIndex=e}function p(t,e){this.removedItems=t,this.removeIndex=e}function u(t){this.newItems=t}function d(){var t=this;this.nodes=[],this.curves=[],this._length=0,this.isLoop=!1,this.NodeListChanged=new r.TypedEvent,this.CurveChanged=new r.TypedEvent,this.UpdateAfterCurveChanged=function(){for(var e=t._length=0,o=t.curves;e<o.length;e++){var n=o[e];t._length+=n.Length}t.CurveChanged.emit(t)},this.start=null,this.end=null,this.StartNodeChanged=function(){var e=t.end,o=t.start;e.changed.off(t.EndNodeChanged),e.Position=o.Position,e.Direction=o.Direction,e.Scale=o.Scale,e.Up=o.Up,e.changed.on(t.EndNodeChanged)},this.EndNodeChanged=function(){var e=t.start,o=t.end;e.changed.off(t.StartNodeChanged),e.Position=o.Position,e.Direction=o.Direction,e.Scale=o.Scale,e.Up=o.Up,e.changed.on(t.StartNodeChanged)}}s[s.clear=0]="clear",d.prototype.GetCurves=function(){return this.curves},Object.defineProperty(d.prototype,"Length",{get:function(){return this._length},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"IsLoop",{get:function(){return this.isLoop},enumerable:!1,configurable:!0}),d.prototype.reset=function(){this.nodes.length=0,this.curves.length=0,this.RaiseNodeListChanged(s.clear),this.UpdateAfterCurveChanged()},d.prototype.RaiseNodeListChanged=function(t){this.NodeListChanged.emit(t)},d.prototype.GetSample=function(t){var e=this.GetNodeIndexForTime(t);return this.curves[e].GetSample(t-e)},d.prototype.getAllCurveSampleCount=function(){for(var t=0,e=0,o=this.curves;e<o.length;e++)t+=o[e].samples.length;return t},d.prototype.foreachSamples=function(t){for(var e=0,o=0,n=this.curves;o<n.length;o++){for(var a=n[o],i=e;i<a.samples.length;++i)t(a.samples[i]);e=1}},d.prototype.GetCurve=function(t){return this.curves[this.GetNodeIndexForTime(t)]},d.prototype.GetNodeIndexForTime=function(t){if(t<0||1<t)throw new Error("Time must be between 0 and 1. Given time was "+t);return Math.floor(t*(this.curves.length-1))},d.prototype.RefreshCurves=function(){for(var t=this.curves.length=0;t<this.nodes.length-1;++t){var e=this.nodes[t],o=this.nodes[t+1];(o=new i.CubicBezierCurve(e,o)).Changed.on(this.UpdateAfterCurveChanged),this.curves.push(o)}this.RaiseNodeListChanged(s.clear),this.UpdateAfterCurveChanged()},d.prototype.GetSampleAtDistance=function(t){if(t<0||t>this.Length)throw new Error("Distance must be between 0 and spline length ("+this._length+"). Given distance was "+t);for(var e=0,o=this.curves;e<o.length;e++){var n=o[e],a=n.Length;if(!(a<(t=a<t&&t<a+1e-4?a:t)))return n.GetSampleAtDistance(t);t-=a}throw new Error("Something went wrong with GetSampleAtDistance.")},d.prototype.AddNode=function(t){var e;this.nodes.push(t),1!==this.nodes.length&&(e=this.nodes[this.nodes.length-2],(e=new i.CubicBezierCurve(e,t)).Changed.on(this.UpdateAfterCurveChanged),this.curves.push(e)),this.RaiseNodeListChanged(new u(new Array(t))),this.UpdateAfterCurveChanged(),this.updateLoopBinding()},d.prototype.InsertNode=function(t,e){if(0===t)throw new Error("Can't insert a node at index 0.");var o=this.nodes[t];this.nodes.splice(t,0,e),this.curves[t-1].ConnectEnd(e),(o=new i.CubicBezierCurve(e,o)).Changed.on(this.UpdateAfterCurveChanged),this.curves.splice(t,0,o),this.RaiseNodeListChanged(new l([e],t)),this.UpdateAfterCurveChanged(),this.updateLoopBinding()},d.prototype.RemoveAllNode=function(){for(var t=0;t<this.nodes.length;t++){if(t<2)return;var e=this.nodes[t];this.RemoveNode(e)}},d.prototype.RemoveNode=function(t){var e=this.nodes,o=e.indexOf(t);if(e.length<=2)throw new Error("Can't remove the node because a spline needs at least 2 nodes.");var n,a=this.curves;0!==o&&o!==e.length-1&&(n=e[o+1],a[o-1].ConnectEnd(n)),e.splice(o,1),a[e=o===e.length-1?o-1:o].Changed.off(this.UpdateAfterCurveChanged),a.splice(e,1),this.RaiseNodeListChanged(new p([t],o)),this.UpdateAfterCurveChanged(),this.updateLoopBinding()},d.prototype.updateLoopBinding=function(){null!==this.start&&this.start.changed.off(this.StartNodeChanged),null!==this.end&&this.end.changed.off(this.EndNodeChanged),this.isLoop?(this.start=this.nodes[0],this.end=this.nodes[this.nodes.length-1],this.start.changed.on(this.StartNodeChanged),this.end.changed.on(this.EndNodeChanged),this.StartNodeChanged()):(this.start=null,this.end=null)},d.prototype.GetProjectionSample=function(t){for(var e=null,o=34028235e31,n=0,a=this.curves;n<a.length;n++){var i=a[n],r=i.GetProjectionSample(t);i!==this.curves[0]?(i=c.squaredDistance(null==r?void 0:r.location,t))<o&&(o=i,e=r):o=c.squaredDistance(null==(e=r)?void 0:r.location,t)}return e},a.Spline=n=d,cc._RF.pop()},{}],"split-on-first":[function(t,e){"use strict";cc._RF.push(e,"3009aV4bZNFgpLV4v5kwTtF","split-on-first"),cc._RF.pop()},{}],sprintRewardBar:[function(t,e,o){"use strict";cc._RF.push(e,"b08b76DWJJK55Of1nkBDZNg","sprintRewardBar");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("CcJsFunc"),h=a("dataTs"),f=a("audio"),g=a("spine"),y=a("GameManager");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.maskNode=null,t.spineBox=null,t.bgCoin=null,t.bgCoinLabel=null,t.bgProp=null,t.bgPropLabel=null,t.reveiceBtn=null,t.reveiceBtnLabel=null,t.spineProgress=null,t.particleNode=null,t.labelNode=null,t.lastLabel=null,t.callback=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(m,l=cc.Component),m.prototype.start=function(){d.default.addbtnTouchStartScale(this.reveiceBtn),d.default.addbtnTouchEndScale(this.reveiceBtn,this.reveiceBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.reveiceBtn),this.reveiceBtnLabel.string=u.default.instance.trans(p.GDLanguage.pop_claim)},m.prototype.reveiceBtnFunc=function(){this.node.active=!1,3<=h.default.getSprintRewardData().rewardProgress&&this.callback&&this.callback()},m.prototype.showProgress=function(t){var e=this;this.spineBox.active=!1,this.bgCoin.active=!1,this.bgProp.active=!1,this.reveiceBtn.active=!1,this.node.active=!0,this.maskNode.opacity=0,this.maskNode.active=!0,this.callback=t,e.spineProgress.active=!1,e.particleNode.active=!1,console.log("\u51b2\u523a\u5956\u52b1 = "+JSON.stringify(h.default.getSprintRewardData()));var o,n,a=h.default.getSprintRewardData(),i=a.rewardProgress,r=a.winBox,c=a.winNum;i<=0&&(i=1),3<=h.default.getSprintRewardData().rewardProgress&&(o=12,1<(n=5<r?5:r)&&(o+=11*(n-1)),(t=h.default.getUserData()).coin+=o,(a=h.default.gameConfigData.baseConfigData.rewardBox[Math.floor(3*Math.random())])&&2<=a.length&&(console.log(JSON.stringify(a)),n="rewardIcon/"+a[1].propType+".png",d.default.changeSpriteFrame(this.bgProp,n),"prop_remove"==a[1].propType?(t.prop_remove++,t.prop_remove):"prop_cancel"==a[1].propType?(t.prop_cancel++,t.prop_cancel):"prop_random"==a[1].propType&&(t.prop_random++,t.prop_random)),h.default.saveUserData(t),this.bgCoinLabel.string="x"+o);var s=3*(c<=3?0:r);3<=i&&0<r&&(s=3*(r-1));var l,p=this.labelNode.children;for(l in p)s+=1,p[l].getComponent(cc.Label).string=s+"",l<i?(p[l].active=!1,Number(l)==i-1&&(p[l].active=!0,e.lastLabel=p[l])):p[l].active=!0;cc.tween(this.spineProgress).to(0,{opacity:0}).call(function(){e.spineProgress.active=!0,e.playSpineProgress()}).to(1,{opacity:255}).call(function(){}).start()},m.prototype.playSpineProgress=function(){console.log("playSpineProgress ###### ");var t=this,e=h.default.getSprintRewardData(),o=(e.winBox,e.rewardProgress),n=this.getSpineName();console.log("spineName = "+n),this.spineProgress.getComponent(g.default).setFrameEventCb("NoShow1",function(e){console.log("NoShow1 = "+e),t.lastLabel.active=!1,o<3&&t.playBoxAnim()}),this.spineProgress.getComponent(g.default).setFrameEventCb("Open2",function(e){console.log("Open2 = "+e),t.particleNode.active=!0,t.particleNode.getComponent(cc.ParticleSystem).resetSystem(),t.particleNode.getChildByName("Star0").getComponent(cc.ParticleSystem).resetSystem(),t.particleNode.getChildByName("Star1").getComponent(cc.ParticleSystem).resetSystem()}),this.spineProgress.getComponent(g.default).play(n,1,function(){n+="_1",console.log("\u5f85\u673a "+n),3<=o&&t.playBoxAnim(),t.spineProgress.getComponent(g.default).play(n,0,function(){})})},m.prototype.getSpineName=function(){var t=h.default.getSprintRewardData(),e=5<=(e=(e=t.winBox)<=0?1:e+1)?5:e;return 3<=(t=t.rewardProgress)&&1<e&&e<5&&--e,0==t?"3RichRoad0_0":"3RichRoad"+e+"_"+(t<=0?1:3<=t?3:t)},m.prototype.playBoxAnim=function(){y.default.getInstance().sprintMark=!0;var t=this;if(h.default.getSprintRewardData().rewardProgress<3)return this.maskNode.active=!1,void(this.callback&&this.callback());this.maskNode.opacity=220,t.spineBox.active=!0,this.spineBox.getComponent(g.default).setFrameEventCb("Open1",function(){f.default.playAudioMusic("audio/sound/Open1.mp3",!1)}),this.spineBox.getComponent(g.default).setFrameEventCb("Eff_Sheen1",function(){t.bgCoin.active=!0,t.bgProp.active=!0}),this.spineBox.getComponent(g.default).play("Ref1_Open4",1,function(){t.reveiceBtn.active=!0,cc.tween(t.reveiceBtn).to(.1,{scale:1.3}).to(.1,{scale:1}).start()})},s([i(cc.Node)],m.prototype,"maskNode",void 0),s([i(cc.Node)],m.prototype,"spineBox",void 0),s([i(cc.Node)],m.prototype,"bgCoin",void 0),s([i(cc.Label)],m.prototype,"bgCoinLabel",void 0),s([i(cc.Node)],m.prototype,"bgProp",void 0),s([i(cc.Label)],m.prototype,"bgPropLabel",void 0),s([i(cc.Node)],m.prototype,"reveiceBtn",void 0),s([i(cc.Label)],m.prototype,"reveiceBtnLabel",void 0),s([i(cc.Node)],m.prototype,"spineProgress",void 0),s([i(cc.Node)],m.prototype,"particleNode",void 0),s([i(cc.Node)],m.prototype,"labelNode",void 0),a=s([a],m),r.default=a,cc._RF.pop()},{}],sprintRewardPop:[function(t,e,o){"use strict";cc._RF.push(e,"28f4dgUbolNKYJgMwFcV4Es","sprintRewardPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("gd_language"),u=a("i18n"),d=a("CcJsFunc"),h=a("dataTs"),f=a("enumConfig"),g=a("spine"),y=a("util"),m=a("GameManager");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.closeBtn=null,t.titleLabel=null,t.spineNode=null,t.timeSpineNode=null,t.descLabel=null,t.playBtn=null,t.timeLabel=null,t.exitBtn=null,t.resetBtn=null,t.mainBtn=null,t.playLabel=null,t.exitLabel=null,t.restartLabel=null,t.mainLabel=null,t.firstLabel=null,t.secondLabel=null,t.threeLabel=null,t.particleNode=null,t.showPopData=null,t.updateTime=0,t}a=(i=cc._decorator).ccclass,i=i.property,c(v,l=cc.Component),v.prototype.update=function(t){this.updateTime+=t,1<=this.updateTime&&(--this.updateTime,this.updateTimeNum())},v.prototype.updateTimeNum=function(){var t=h.default.updateSprintRewardTime();0==t?(console.log("\u5df2\u6ee1"),this.timeLabel.string="End"):0<(t=y.default.formatTime(t))[0]?this.timeLabel.string=t[0]+"d"+t[1]+"h":0<t[1]?this.timeLabel.string=t[1]+"h"+t[2]+"m":(0<t[2]||0<t[3])&&(this.timeLabel.string=t[2]+"m"+t[3]+"s")},v.prototype.start=function(){d.default.addbtnTouchStartScale(this.closeBtn),d.default.addbtnTouchEndScale(this.closeBtn,this.closeBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.closeBtn),d.default.addbtnTouchStartScale(this.playBtn),d.default.addbtnTouchEndScale(this.playBtn,this.playBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.playBtn),d.default.addbtnTouchStartScale(this.exitBtn),d.default.addbtnTouchEndScale(this.exitBtn,this.exitBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.exitBtn),d.default.addbtnTouchStartScale(this.resetBtn),d.default.addbtnTouchEndScale(this.resetBtn,this.resetBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.resetBtn),d.default.addbtnTouchStartScale(this.mainBtn),d.default.addbtnTouchEndScale(this.mainBtn,this.mainBtnFunc.bind(this)),d.default.addbtnTouchCancelScale(this.mainBtn),this.updateTimeNum(),this.setupFonts()},v.prototype.setupFonts=function(){this.playLabel.string=u.default.instance.trans(p.GDLanguage.daily_start),this.restartLabel.string=u.default.instance.trans(p.GDLanguage.pop_restart),this.exitLabel.string=u.default.instance.trans(p.GDLanguage.pop_quit),this.mainLabel.string=u.default.instance.trans(p.GDLanguage.main_screen)},v.prototype.resetBtnFunc=function(){this.node.active=!1,this.exitBtnFunc()},v.prototype.mainBtnFunc=function(){this.exitBtnFunc()},v.prototype.exitBtnFunc=function(){this.node.active=!1,cc.game.emit("blowupHeartAnim",1)},v.prototype.closeBtnFunc=function(){this.node.active=!1,cc.game.emit("blowupHeartAnim",0)},v.prototype.playBtnFunc=function(){console.log("\u53bb\u73a9\u6e38\u620f"),this.node.active=!1},v.prototype.showPop=function(t){var e=this;this.node.active=!0,this.firstLabel.node.scale=1,this.secondLabel.node.scale=1,this.showPopData=t,this.playBtn.active=!1,this.mainBtn.active=!1,this.exitBtn.active=!1,this.resetBtn.active=!1;var o=this.node.getChildByName("mask");o.opacity=0,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),this.titleLabel.string=u.default.instance.trans(p.GDLanguage.level_1,h.default.getUserData().playLevelId),this.timeSpineNode.getComponent(g.default).play("5Clock1",0);var n=h.default.getSprintRewardData();console.log("\u51b2\u523a\u5956\u52b1 = "+JSON.stringify(n)),t=n.winBox;var a=n.rewardProgress;n=3*t,3<=a&&0<t?(this.firstLabel.string=2+(n=3*(t-1))+"",this.secondLabel.string=n+3+"",this.threeLabel.string=n+4+""):(this.firstLabel.string=n+1+"",this.secondLabel.string=n+2+"",this.threeLabel.string=n+3+""),this.firstLabel.node.active=!0,this.secondLabel.node.active=!0,this.threeLabel.node.active=!0,1==a||2!=a&&3!=a||(e.firstLabel.node.active=!1),t={spineName:"2RichRoad0_0",standBy:!0},t=a<=0?this.getSpineNameWithStaydBy(!0):this.getSpineNameWithStaydBy(!m.default.getInstance().sprintMark),n=u.default.instance.trans(p.GDLanguage.streak_award),0==this.showPopData.popType?(this.popNode.height=600,this.playBtn.active=!0,o.opacity=178):1==this.showPopData.popType?(this.popNode.height=600,this.exitBtn.active=!0,t=this.getSpineNameWithStaydBy(!0),n=u.default.instance.trans(p.GDLanguage.streak_lose)):2==this.showPopData.popType&&(this.popNode.height=700,this.resetBtn.active=!0,this.mainBtn.active=!0,t=this.getSpineNameWithStaydBy(!0),n=u.default.instance.trans(p.GDLanguage.streak_lose)),this.descLabel.string=n,this.spineNode.getComponent(g.default).setFrameEventCb("NoShow1",function(t){console.log("NoShow1 = "+t),e.updateProgressLabel(a)}),this.spineNode.getComponent(g.default).setFrameEventCb("Open2",function(t){console.log("Open2 = "+t),e.particleNode.getComponent(cc.ParticleSystem).resetSystem(),e.particleNode.getChildByName("Star0").getComponent(cc.ParticleSystem).resetSystem(),e.particleNode.getChildByName("Star1").getComponent(cc.ParticleSystem).resetSystem()});var i=t.spineName;t=t.standBy,console.log("spineDict",i,t),t?(e.updateProgressLabel(a),this.spineNode.getComponent(g.default).play(i,0,function(){})):this.spineNode.getComponent(g.default).play(i,1,function(){i+="_1",console.log("\u5f85\u673a "+i),e.spineNode.getComponent(g.default).play(i,0,function(){})}),m.default.getInstance().sprintMark=!1,0==this.showPopData.popType&&cc.game.emit(f.EMITKEY.MAINUPDATEUI)},v.prototype.updateProgressLabel=function(t){1==t?this.firstLabel.node.active=!1:2!=t&&3!=t||(this.secondLabel.node.active=!1)},v.prototype.getSpineNameWithStaydBy=function(t){var e=(n=h.default.getSprintRewardData()).winBox,o=n.rewardProgress,n=5<=(n=e<=0?1:e+1)?5:n;return 3<=o&&1<n&&n<=5&&--n,e=o<=0?1:3<=o?3:o,{spineName:0==o?"2RichRoad0_0":"2RichRoad"+n+"_"+(t?e+"_1":e),standBy:t}},s([i(cc.Node)],v.prototype,"popNode",void 0),s([i(cc.Node)],v.prototype,"closeBtn",void 0),s([i(cc.Label)],v.prototype,"titleLabel",void 0),s([i(cc.Node)],v.prototype,"spineNode",void 0),s([i(cc.Node)],v.prototype,"timeSpineNode",void 0),s([i(cc.Label)],v.prototype,"descLabel",void 0),s([i(cc.Node)],v.prototype,"playBtn",void 0),s([i(cc.Label)],v.prototype,"timeLabel",void 0),s([i(cc.Node)],v.prototype,"exitBtn",void 0),s([i(cc.Node)],v.prototype,"resetBtn",void 0),s([i(cc.Node)],v.prototype,"mainBtn",void 0),s([i(cc.Label)],v.prototype,"playLabel",void 0),s([i(cc.Label)],v.prototype,"exitLabel",void 0),s([i(cc.Label)],v.prototype,"restartLabel",void 0),s([i(cc.Label)],v.prototype,"mainLabel",void 0),s([i(cc.Label)],v.prototype,"firstLabel",void 0),s([i(cc.Label)],v.prototype,"secondLabel",void 0),s([i(cc.Label)],v.prototype,"threeLabel",void 0),s([i(cc.Node)],v.prototype,"particleNode",void 0),a=s([a],v),r.default=a,cc._RF.pop()},{}],stagePop:[function(t,e,o){"use strict";cc._RF.push(e,"7537cBSDCRLP5ZtoGd5R7fy","stagePop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("spine"),d=a("util"),h=a("DateManager");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.mask=null,t.popNode=null,t.closeBtn=null,t.titleLabel=null,t.spNode=null,t.headerNode=null,t.manNode=null,t.womanNode=null,t.userName=null,t.userAddress=null,t.topTimeLabel=null,t.lTimeLabel=null,t.timeLabel=null,t.rTimeLabel=null,t.noKingNode=null,t.showPopData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){p.default.addbtnTouchEndScale(this.mask,this.closeBtnFunc.bind(this)),p.default.addbtnTouchStartScale(this.closeBtn),p.default.addbtnTouchEndScale(this.closeBtn,this.closeBtnFunc.bind(this)),p.default.addbtnTouchCancelScale(this.closeBtn)},f.prototype.closeBtnFunc=function(){this.node.active=!1},f.prototype.showPop=function(t){var e=this;this.node.active=!0;var o=(this.showPopData=t).idx;cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start();var n,a="",i="",r="",c="",s=(t="",""),l="default";1==o?(a="\u5168\u56fd\u9886\u5934\u7f8a",r="\u4e8e\u6628\u65e5",c="\u9996\u4e2a\u901a\u5173",t="sheep/Alpaca01",s="animation"):2==o?(a="\u673a\u667a\u7267\u7f8a\u72ac",i="\u4e8e\u6628\u65e5\u5728\u4e0d\u4f7f\u7528\u9053\u5177\u548c\u590d\u6d3b\u7684\u60c5",r="\u51b5\u4e0b\u4ec5\u7528",c="\u901a\u5173",t="sheep/DJ1",s="Jump2",l="00"):3==o&&(a="\u79cb\u540d\u5c71\u7f8a\u795e",r="\u4e8e\u6628\u65e5\u4ec5\u7528",c="\u901a\u5173",t="sheep/Alpaca02",s="animation"),this.spNode.getComponent(u.default).loadSpine(t,function(){e.spNode.getComponent(u.default).setNewSkin(l),e.spNode.getComponent(u.default).play(s,0)}),this.titleLabel.string=a,this.topTimeLabel.string=i,this.lTimeLabel.string=r,this.rTimeLabel.string=c,r=this.showPopData.stageInfo,1==o&&r.firstWin&&r.firstWin.nick_name&&r.firstWin.nick_name.length&&(console.log(JSON.stringify(r.firstWin)),n=this.getTimeDate(r.firstWin.ts),c=h.default.getInstance().formatTs(r.firstWin.ts),this.timeLabel.string=c[3]+":"+c[4]+":"+c[5],this.updateInfo(r.firstWin)),this.noKingNode.active=!1,2==o&&r.iqWin&&r.iqWin.nick_name&&r.iqWin.nick_name.length?(console.log(JSON.stringify(r.iqWin)),n=this.getTimeDate(r.iqWin.time),this.timeLabel.string=n[1]+"\u5206"+n[2]+"\u79d2",this.updateInfo(r.iqWin)):2==o&&(this.noKingNode.active=!0,this.titleLabel.string="\u6700\u5f3a\u738b\u8005",console.log("\u6700\u5f3a\u738b\u8005")),3==o&&r.timeWin&&r.timeWin.nick_name&&r.timeWin.nick_name.length&&(console.log(JSON.stringify(r.timeWin)),n=this.getTimeDate(r.timeWin.time),this.timeLabel.string=n[1]+"\u5206"+n[2]+"\u79d2",this.updateInfo(r.timeWin))},f.prototype.updateInfo=function(t){p.default.setAvatar(this.headerNode,t.avatar),this.userName.getComponent(cc.Label).string=t.nick_name,this.userAddress.getComponent(cc.Label).string=t.city,0==t.gender?this.manNode.active=!0:this.manNode.active=!1},f.prototype.getTimeDate=function(t){return[(t=d.default.countdownTime(t))[0]<10?"0"+t[0]:t[0]+"",t[1]<10?"0"+t[1]:t[1]+"",t[2]<10?"0"+t[2]:t[2]+""]},s([i(cc.Node)],f.prototype,"mask",void 0),s([i(cc.Node)],f.prototype,"popNode",void 0),s([i(cc.Node)],f.prototype,"closeBtn",void 0),s([i(cc.Label)],f.prototype,"titleLabel",void 0),s([i(cc.Node)],f.prototype,"spNode",void 0),s([i(cc.Node)],f.prototype,"headerNode",void 0),s([i(cc.Node)],f.prototype,"manNode",void 0),s([i(cc.Node)],f.prototype,"womanNode",void 0),s([i(cc.Label)],f.prototype,"userName",void 0),s([i(cc.Label)],f.prototype,"userAddress",void 0),s([i(cc.Label)],f.prototype,"topTimeLabel",void 0),s([i(cc.Label)],f.prototype,"lTimeLabel",void 0),s([i(cc.Label)],f.prototype,"timeLabel",void 0),s([i(cc.Label)],f.prototype,"rTimeLabel",void 0),s([i({type:cc.Node,tooltip:"\u6700\u5f3a\u738b\u8005"})],f.prototype,"noKingNode",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],"str-utils":[function(t,e,o){"use strict";cc._RF.push(e,"622d8ysQvVFXaRZmKMfNXEC","str-utils");var n=o;function a(){}Object.defineProperty(n,"__esModule",{value:!0}),a.formatStr=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(e&&0<e.length)for(var n=0;n<e.length;n++){var a=new RegExp("\\{"+n+"\\}","g");t=t.replace(a,String(e[n]))}return t},a.trim=function(t){return t&&0!=t.length?t.replace(/^\s+/,"").replace(/\s+$/,""):""},n.default=a,cc._RF.pop()},{}],"strict-uri-encode":[function(t,e){"use strict";cc._RF.push(e,"9ee17meaWNGjqscDpg+fqVd","strict-uri-encode"),cc._RF.pop()},{}],"thinkingdata.mg.cocoscreator.min":[function(t,e){"use strict";cc._RF.push(e,"a0a6ahsQR5GbrwuSTQ1Rjj5","thinkingdata.mg.cocoscreator.min");var o=e;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),t}var c={},s=Array.prototype,l=(o=Object.prototype,s.slice),p=o.toString,u=Object.prototype.hasOwnProperty,d=s.forEach,h=(o=Array.isArray,{});function f(){return new RegExp(/(.*?)\.?([^.]*?)\.(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|net\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function g(t,e){var o=t.charAt(0);return e=e.split(o),o===t?e:e[(t=parseInt(t.substring(1),10))<0?e.length+t:t-1]}function y(t,e){for(var o,n=t.charAt(0),a=e.split("&"),i=[],r={},s=t.substring(1),l=0,p=a.length;l<p;l++)if(""!==(i=(i=a[l].match(/(.*?)=(.*)/))||[a[l],a[l],""])[1].replace(/\s/g,"")){if(i[2]=(o=i[2]||"",c.decodeURIComponent(o.replace(/\+/g," "))),s===i[1])return i[2];(o=i[1].match(/(.*)\[([0-9]+)\]/))?(r[o[1]]=r[o[1]]||[],r[o[1]][o[2]]=i[2]):r[i[1]]=i[2]}return n===t?r:r[s]}c.each=function(t,e,o){if(null==t)return!1;if(d&&t.forEach===d)t.forEach(e,o);else if(t.length===+t.length){for(var n=0,a=t.length;n<a;n++)if(n in t&&e.call(o,t[n],n,t)===h)return!1}else for(var i in t)if(u.call(t,i)&&e.call(o,t[i],i,t)===h)return!1},c.extend=function(t){return c.each(l.call(arguments,1),function(e){for(var o in e)void 0!==e[o]&&(t[o]=e[o])}),t},c.extend2Layers=function(t){return c.each(l.call(arguments,1),function(e){for(var o in e)void 0!==e[o]&&(c.isObject(e[o])&&c.isObject(t[o])?c.extend(t[o],e[o]):t[o]=e[o])}),t},c.isArray=o||function(t){return"[object Array]"===p.call(t)},c.isFunction=function(t){try{return"function"==typeof t}catch(t){return!1}},c.isPromise=function(t){return"[object Promise]"===p.call(t)&&null!=t},c.isObject=function(t){return"[object Object]"===p.call(t)&&null!=t},c.isEmptyObject=function(t){if(c.isObject(t)){for(var e in t)if(u.call(t,e))return!1;return!0}return!1},c.isUndefined=function(t){return void 0===t},c.isString=function(t){return"[object String]"===p.call(t)},c.isDate=function(t){return"[object Date]"===p.call(t)},c.isBoolean=function(t){return"[object Boolean]"===p.call(t)},c.isNumber=function(t){return"[object Number]"===p.call(t)&&/[\d\.]+/.test(String(t))},c.isJSONString=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},c.decodeURIComponent=function(t){var e="";try{e=decodeURIComponent(t)}catch(o){e=t}return e},c.encodeURIComponent=function(t){var e="";try{e=encodeURIComponent(t)}catch(o){e=t}return e},c.utf8Encode=function(t){for(var e,o="",n=e=0,a=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<a;i++){var r=t.charCodeAt(i),c=null;r<128?e++:c=127<r&&r<2048?String.fromCharCode(r>>6|192,63&r|128):String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128),null!==c&&(n<e&&(o+=t.substring(n,e)),o+=c,n=e=i+1)}return n<e&&(o+=t.substring(n,t.length)),o},c.base64Encode=function(t){var e,o,n,a,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=0,s=0,l="",p=[];if(!t)return t;for(t=c.utf8Encode(t);e=(a=t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<8|t.charCodeAt(r++))>>18&63,o=a>>12&63,n=a>>6&63,a&=63,p[s++]=i.charAt(e)+i.charAt(o)+i.charAt(n)+i.charAt(a),r<t.length;);switch(l=p.join(""),t.length%3){case 1:l=l.slice(0,-2)+"==";break;case 2:l=l.slice(0,-1)+"="}return l},c.encodeDates=function(t){return c.each(t,function(e,o){if(c.isDate(e))t[o]=c.formatDate(e);else if(c.isObject(e))t[o]=c.encodeDates(e);else if(c.isArray(e))for(var n=0;n<e.length;n++)c.isDate(e[n])&&(t[o][n]=c.formatDate(e[n]))}),t},c.formatDate=function(t){function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+"."+((t=t.getMilliseconds())<100&&9<t?"0"+t:t<10?"00"+t:t)},c.searchObjDate=function(t){try{(c.isObject(t)||c.isArray(t))&&c.each(t,function(e,o){c.isObject(e)||c.isArray(e)?c.searchObjDate(t[o]):c.isDate(e)&&(t[o]=c.formatDate(e))})}catch(o){m.warn(o)}},c.UUID=function(){var t=(new Date).getTime();return String(Math.random()).replace(".","").slice(1,11)+"-"+t},c.UUIDv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},c.setMpPlatform=function(t){c.mpPlatform=t},c.getMpPlatform=function(){return c.mpPlatform},c.createExtraHeaders=function(){return{"TA-Integration-Type":"MG","TA-Integration-Version":"2.1.0","TA-Integration-Count":"1","TA-Integration-Extra":c.getMpPlatform()}},c.checkAppId=function(t){return t.replace(/\s*/g,"")},c.checkUrl=function(t){return t=t.replace(/\s*/g,""),c.url("basic",t)},c.url=function(t,e){var o={};if("tld?"===t)return f();if(e=e||window.location.toString(),!t)return e;if(t=t.toString(),e.match(/^mailto:([^/].+)/))n=e.match(/^mailto:([^/].+)/),o.protocol="mailto",o.email=n[1];else{if((e=e.match(/(.*?)\/#!(.*)/)?(n=e.match(/(.*?)\/#!(.*)/))[1]+n[2]:e).match(/(.*?)#(.*)/)&&(n=e.match(/(.*?)#(.*)/),o.hash=n[2],e=n[1]),o.hash&&t.match(/^#/))return y(t,o.hash);if(e.match(/(.*?)\?(.*)/)&&(n=e.match(/(.*?)\?(.*)/),o.query=n[2],e=n[1]),o.query&&t.match(/^\?/))return y(t,o.query);if(e.match(/(.*?):?\/\/(.*)/)&&(n=e.match(/(.*?):?\/\/(.*)/),o.protocol=n[1].toLowerCase(),e=n[2]),e.match(/(.*?)(\/.*)/)&&(n=e.match(/(.*?)(\/.*)/),o.path=n[2],e=n[1]),o.path=(o.path||"").replace(/^([^/])/,"/$1").replace(/\/$/,""),(t=t.match(/^[-0-9]+$/)?t.replace(/^([^/])/,"/$1"):t).match(/^\//))return g(t,o.path.substring(1));if((n=(n=g("/-1",o.path.substring(1)))&&n.match(/(.*?)\.(.*)/))&&(o.file=n[0],o.filename=n[1],o.fileext=n[2]),e.match(/(.*):([0-9]+)$/)&&(n=e.match(/(.*):([0-9]+)$/),o.port=n[2],e=n[1]),e.match(/(.*?)@(.*)/)&&(n=e.match(/(.*?)@(.*)/),o.auth=n[1],e=n[2]),o.auth&&(n=o.auth.match(/(.*):(.*)/),o.user=n?n[1]:o.auth,o.pass=n?n[2]:void 0),o.hostname=e.toLowerCase(),"."===t.charAt(0))return g(t,o.hostname);f()&&(n=o.hostname.match(f()))&&(o.tld=n[3],o.domain=n[2]?n[2]+"."+n[3]:void 0,o.sub=n[1]||void 0);var n=o.port?":"+o.port:"";o.protocol=o.protocol||window.location.protocol.replace(":",""),o.port=o.port||("https"===o.protocol?"443":"80"),o.protocol=o.protocol||("443"===o.port?"https":"http"),o.basic=o.protocol+"://"+o.hostname+n}return t in o?o[t]:"{}"===t?o:""},c.createString=function(t){for(var e=t,o=Math.random().toString(36).substr(2);o.length<e;)o+=Math.random().toString(36).substr(2);return o.substr(0,t)},c.createAesKey=function(){return c.createString(16)},c.generateEncryptyData=function(t,e){if(void 0===e)return t;var o=e.publicKey,n=e.version;if(void 0===o||void 0===n)return t;if("undefined"==typeof CryptoJS||"undefined"==typeof JSEncrypt)return t;e=c.createAesKey();try{var a=CryptoJS.enc.Utf8.parse(e),i=CryptoJS.enc.Utf8.parse(JSON.stringify(t)),r=c.isUndefined(CryptoJS.pad.Pkcs7)?CryptoJS.pad.PKCS7:CryptoJS.pad.Pkcs7;return a=CryptoJS.AES.encrypt(i,a,{mode:CryptoJS.mode.ECB,padding:r}).toString(),(r=new JSEncrypt).setPublicKey(o),!1===(r=r.encrypt(e))?(m.warn("\u79c1\u94a5\u52a0\u5bc6\u5931\u8d25\uff0c\u8fd4\u56de\u539f\u6570\u636e"),t):{pkv:n,ekey:r,payload:a}}catch(t){m.warn("\u6570\u636e\u52a0\u5bc6\u5931\u8d25\uff0c\u8fd4\u56de\u539f\u6570\u636e: "+t)}return t};var m="object"===n(m)?m:{};function v(t,e){var o=this;a(this,v),this.taInstance=t,this.config=e||{},this.config.appShow&&this.taInstance._internalTrack("ta_mg_show"),this.config.appHide&&this.taInstance.timeEvent("ta_mg_hide"),qg.onShow(function(){var t;o.config.appHide&&o.taInstance.timeEvent("ta_mg_hide"),o.config.appShow&&(c.extend(t={},o.config.properties),c.isFunction(o.config.callback)&&c.extend(t,o.config.callback("appShow")),o.taInstance._internalTrack("ta_mg_show"))}),qg.onHide(function(){var t;o.config.appHide&&(c.extend(t={},o.config.properties),c.isFunction(o.config.callback)&&c.extend(t,o.config.callback("appHide")),o.taInstance._internalTrack("ta_mg_hide"))})}function b(t,e,o){var n=this;a(this,b),this.taInstance=t,this.config=e||{},this.config.appShow&&(c.extend(e={},this.config.properties),c.isFunction(this.config.callback)&&c.extend(e,this.config.callback("appShow")),this.taInstance._internalTrack("ta_mg_show",e)),this.config.appHide&&this.taInstance.timeEvent("ta_mg_hide"),o.onShow(function(){var t;n.config.appHide&&n.taInstance.timeEvent("ta_mg_hide"),n.config.appShow&&(c.extend(t={},n.config.properties),c.isFunction(n.config.callback)&&c.extend(t,n.config.callback("appShow")),n.taInstance._internalTrack("ta_mg_show",t))}),o.onHide(function(){var t;n.config.appHide&&(c.extend(t={},n.config.properties),c.isFunction(n.config.callback)&&c.extend(t,n.config.callback("appHide")),n.taInstance._internalTrack("ta_mg_hide",t))})}m.info=function(){if("object"===("undefined"==typeof console?"undefined":n(console))&&console.log&&m.enabled)try{return console.log.apply(console,arguments)}catch(o){console.log(arguments[0])}},m.warn=function(){if("object"===("undefined"==typeof console?"undefined":n(console))&&console.log&&m.enabled)try{return console.warn.apply(console,arguments)}catch(o){console.warn(arguments[0])}};var N=(r(Z,[{key:"getConfig",value:function(){return this.config}},{key:"getStorage",value:function(t,e,o){if(t=localStorage.getItem(t),!e)return c.isJSONString(t)?JSON.parse(t):{};c.isJSONString(t)?o(JSON.parse(t)):o({})}},{key:"setStorage",value:function(t,e){localStorage.setItem(t,e)}},{key:"_setSystemProxy",value:function(t){this._sysCallback=t}},{key:"getSystemInfo",value:function(t){var e={mp_platform:"web",system:this._getOs(),screenWidth:window.screen.width,screenHeight:window.screen.height,systemLanguage:navigator.language};this._sysCallback&&(e=c.extend(e,this._sysCallback(t))),t.success(e),t.complete()}},{key:"_getOs",value:function(){var t=navigator.userAgent;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"MacOS":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"ChromeOS":""}},{key:"getNetworkType",value:function(t){t.complete()}},{key:"onNetworkStatusChange",value:function(){}},{key:"request",value:function(t){var e={},o=new XMLHttpRequest;if(o.open(t.method,t.url),t.header)for(var n in t.header)o.setRequestHeader(n,t.header[n]);return o.onreadystatechange=function(){4===o.readyState&&200===o.status?(e.statusCode=200,c.isJSONString(o.responseText)&&(e.data=JSON.parse(o.responseText)),t.success(e)):200!==o.status&&(e.errMsg="network error",t.fail(e))},o.ontimeout=function(){e.errMsg="timeout",t.fail(e)},o.send(t.data),o}},{key:"initAutoTrackInstance",value:function(t,e){this.instance=t,this.autoTrack=e.autoTrack;var o=this;"onpagehide"in window?window.onpagehide=function(){o.onPageHide(!0)}:window.onbeforeunload=function(){o.onPageHide(!0)},o.onPageShow(),o.autoTrack.appHide&&o.instance.timeEvent("ta_page_hide"),"onvisibilitychange"in document&&(document.onvisibilitychange=function(){document.hidden?o.onPageHide(!1):(o.onPageShow(),o.autoTrack.appHide&&o.instance.timeEvent("ta_page_hide"))})}},{key:"setGlobal",value:function(t,e){window[e]=t}},{key:"getAppOptions",value:function(){}},{key:"showToast",value:function(){}},{key:"onPageShow",value:function(){var t;this.autoTrack.appShow&&(c.extend(t={},this.autoTrack.properties),c.isFunction(this.autoTrack.callback)&&c.extend(t,this.autoTrack.callback("appShow")),this.instance._internalTrack("ta_page_show",t))}},{key:"onPageHide",value:function(t){var e;this.autoTrack.appHide&&(c.extend(e={},this.autoTrack.properties),c.isFunction(this.autoTrack.callback)&&c.extend(e,this.autoTrack.callback("appHide")),this.instance._internalTrack("ta_page_hide",e,new Date,null,t))}}],[{key:"createInstance",value:function(){return new Z}}]),Z),_=(r(X,[{key:"_initPageExtension",value:function(t){var e=this;return function(o){var n=o.onShow,a=o.onShareAppMessage;return o.onShow=function(t){e.onPageShow(),"function"==typeof n&&n.call(this,t)},"function"==typeof a&&(o.onShareAppMessage=function(t){return t=a.call(this,t),e.onPageShare(t)}),t(o)}}},{key:"_initAppExtention",value:function(t){var e=this;return function(o){var n=o.onLaunch,a=o.onShow,i=o.onHide;return o.onLaunch=function(t){e.onAppLaunch(t,this),"function"==typeof n&&n.call(this,t)},o.onShow=function(t){e.onAppShow(t),"function"==typeof a&&a.call(this,t)},o.onHide=function(){e.onAppHide(),"function"==typeof i&&i.call(this)},t(o)}}},{key:"onAppLaunch",value:function(t,e){this._setAutoTrackProperties(t),c.isUndefined(e)||(e[this.taInstance.name]=this.taInstance),this.config.appLaunch&&(e={},t&&t.path&&(e["#url_path"]=this._getPath(t.path)),this.taInstance._internalTrack("ta_mp_launch",e))}},{key:"onAppShow",value:function(t){var e;this.config.appHide&&this.taInstance.timeEvent("ta_mp_hide"),this._setAutoTrackProperties(t),this.config.appShow&&(e={},t&&t.path&&(e["#url_path"]=this._getPath(t.path)),c.extend(e,this.config.properties),c.isFunction(this.config.callback)&&c.extend(e,this.config.callback("appShow")),this.taInstance._internalTrack("ta_mp_show",e))}},{key:"onAppHide",value:function(){var t;this.config.appHide&&(t={"#url_path":this._getCurrentPath()},c.extend(t,this.config.properties),c.isFunction(this.config.callback)&&c.extend(t,this.config.callback("appHide")),this.taInstance._internalTrack("ta_mp_hide",t))}},{key:"_getCurrentPath",value:function(){var t="Not to get";try{var e=getCurrentPages();t=e[e.length-1].route}catch(t){m.info(t)}return t}},{key:"_setAutoTrackProperties",value:function(t){t={"#scene":t.scene},this.taInstance._setAutoTrackProperties(t)}},{key:"_getPath",value:function(t){return"string"==typeof t?t.replace(/^\//,""):"Abnormal values"}},{key:"onPageShare",value:function(t){return this.config.pageShare&&this.taInstance._internalTrack("ta_mp_share",{"#url_path":this._getCurrentPath()}),c.isObject(t)?t:{}}},{key:"onPageShow",value:function(){var t,e;this.config.pageShow&&(e={"#url_path":(t=this._getCurrentPath())||"The system did not get a value","#referrer":this.referrer},this.referrer=t,this.taInstance._internalTrack("ta_mp_view",e))}}]),X),w=(r(z,[{key:"_onShow",value:function(t){this.startTracked||(this.config.appHide&&this.taInstance.timeEvent("ta_mg_hide"),t&&t.scene&&this.taInstance._setAutoTrackProperties({"#scene":t.scene}),this.config.appShow&&(c.extend(t={},this.config.properties),c.isFunction(this.config.callback)&&c.extend(t,this.config.callback("appShow")),this.taInstance._internalTrack("ta_mg_show",t)))}}]),z),C=(r(q,[{key:"getConfig",value:function(){return this.config}},{key:"getStorage",value:function(t,e,o){if(!e){if("dd_mp"!==this._config.platform)return n=this.api.getStorageSync(t),c.isJSONString(n)?JSON.parse(n):{};var n=this.api.getStorageSync({key:t});return c.isJSONString(n.data)?JSON.parse(n.data):{}}this.api.getStorage({key:t,success:function(t){t=c.isJSONString(t.data)?JSON.parse(t.data):{},o(t)},fail:function(){m.warn("getStorage faild"),o({})}})}},{key:"setStorage",value:function(t,e){this.api.setStorage({key:t,data:e})}},{key:"_getPlatform",value:function(){return""}},{key:"getSystemInfo",value:function(t){var e=this._config.mpPlatform;this.api.getSystemInfo({success:function(o){c.isFunction(e)?o.mp_platform=e(o):o.mp_platform=e,t.success(o),"wechat"===e&&t.complete()},complete:function(){t.complete()}})}},{key:"getNetworkType",value:function(t){c.isFunction(this.api.getNetworkType)?this.api.getNetworkType({success:function(e){t.success(e)},complete:function(){t.complete()}}):(t.success({}),t.complete())}},{key:"onNetworkStatusChange",value:function(t){c.isFunction(this.api.onNetworkStatusChange)?this.api.onNetworkStatusChange(t):t({})}},{key:"request",value:function(t){if("ali_mp"!==this._config.platform&&"dd_mp"!==this._config.platform)return this.api.request(t);var e=c.extend({},t);return e.headers=t.header,e.success=function(e){e.statusCode=e.status,t.success(e)},e.fail=function(e){e.errMsg=e.errorMessage,t.fail(e)},"dd_mp"===this._config.platform?this.api.httpRequest(e):this.api.request(e)}},{key:"initAutoTrackInstance",value:function(t,e){return c.isObject(e.autoTrack)&&(e.autoTrack.isPlugin=e.is_plugin),new(this._config.mp?_:w)(t,e.autoTrack,this.api)}},{key:"setGlobal",value:function(t,e){this._config.mp?m.warn("ThinkingAnalytics: we do not set global name for TA instance when you do not enable auto track."):GameGlobal[e]=t}},{key:"getAppOptions",value:function(t){var e={};try{e=this.api.getLaunchOptionsSync()}catch(t){m.warn("Cannot get launch options.")}if(c.isFunction(t))try{this._config.mp?this.api.onAppShow(t):this.api.onShow(t)}catch(t){m.warn("Cannot register onShow callback.")}return e}},{key:"showToast",value:function(t){var e;c.isFunction(this.api.showToast)&&(e={title:t},"dd_mp"!==this._config.platform&&"ali_mp"!==this._config.platform||(e.content=t),this.api.showToast(e))}}],[{key:"createInstance",value:function(){return this._createInstance("R_CURRENT_PLATFORM")}},{key:"_createInstance",value:function(t){switch(t){case"wechat_mp":return new q(wx,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_wechat"},{mpPlatform:"wechat",mp:!0,platform:t});case"wechat_mg":return new q(wx,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_wechat_game"},{mpPlatform:"wechat",platform:t});case"qq_mp":return new q(qq,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qq"},{mpPlatform:"qq",mp:!0,platform:t});case"qq_mg":return new q(qq,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qq_game"},{mpPlatform:"qq",platform:t});case"baidu_mp":return new q(swan,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_swan"},{mpPlatform:function(t){return t.host},mp:!0,platform:t});case"baidu_mg":return new q(swan,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_swan_game"},{mpPlatform:function(t){return t.host},platform:t});case"tt_mg":return new q(tt,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_tt_game"},{mpPlatform:function(t){return t.appName},platform:t});case"tt_mp":return new q(tt,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_tt"},{mpPlatform:function(t){return t.appName},mp:!0,platform:t});case"ali_mp":return new q(my,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_ali"},{mpPlatform:function(t){return t.app},mp:!0,platform:t});case"dd_mp":return new q(dd,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_dd"},{mpPlatform:"dingding",mp:!0,platform:t});case"bl_mg":return new q(bl,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_mg"},{mpPlatform:"bilibili",platform:t});case"kuaishou_mp":return new q(ks,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_kuaishou"},{mpPlatform:"kuaishou",mp:!0,platform:t});case"qh360_mg":return new q(qh,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qh360"},{mpPlatform:"qh360",platform:t});case"tb_mp":return new q(my,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_tb"},{mpPlatform:"tb",mp:!0,platform:t});case"jd_mp":return new q(jd,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_jd"},{mpPlatform:"jd",mp:!0,platform:t});case"qh360_mp":return new q(qh,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qh360"},{mpPlatform:"qh360",mp:!0,platform:t});case"WEB":return new N.createInstance}}}]),q),P=(r(K,[{key:"getConfig",value:function(){return this.config||{}}},{key:"getStorage",value:function(t,e,o){if(!e)return e=qg.getStorageSync({key:t}),c.isJSONString(e)?JSON.parse(e):{};qg.getStorage({key:t,success:function(t){t=c.isJSONString(t)?JSON.parse(t):{},o(t)},fail:function(){o({})}})}},{key:"setStorage",value:function(t,e){qg.setStorage({key:t,value:e})}},{key:"getSystemInfo",value:function(t){qg.getSystemInfo({success:function(e){var o=e,n=[e.osType,e.osVersionName].join(" ");o.brand=e.manufacturer,o.system=n,o.mp_platform="vivo_qg",t.success(o)},complete:function(){t.complete()}})}},{key:"getNetworkType",value:function(t){qg.getNetworkType({success:function(e){var o=e;o.networkType=e.type,t.success(o)},complete:function(){t.complete()}})}},{key:"onNetworkStatusChange",value:function(t){qg.subscribeNetworkStatus({callback:function(e){var o=e;o.networkType=e.type,t(o)}})}},{key:"request",value:function(t){return qg.request({url:t.url,data:t.data,method:t.method,header:t.header,success:function(e){t.success(e)},fail:function(e){t.fail(e)}})}},{key:"initAutoTrackInstance",value:function(t,e){return new v(t,e.autoTrack)}},{key:"setGlobal",value:function(t,e){globalThis[e]=t}},{key:"getAppOptions",value:function(){return{}}},{key:"showToast",value:function(t){qg.showToast({message:t,duration:0})}}],[{key:"createInstance",value:function(){return new K}}]),K),S=(r(J,[{key:"getConfig",value:function(){return this.config||{}}},{key:"getStorage",value:function(t,e,o){if(t=localStorage.getItem(t),!e)return c.isJSONString(t)?JSON.parse(t):{};c.isJSONString(t)?o(JSON.parse(t)):o({})}},{key:"setStorage",value:function(t,e){localStorage.setItem(t,e)}},{key:"getSystemInfo",value:function(t){var e=this._config.mpPlatform;this.api.getSystemInfo({success:function(o){o.mp_platform=e,t.success(o)},complete:function(){t.complete()}})}},{key:"getNetworkType",value:function(t){this.api.getNetworkType({success:function(e){t.success(e)},complete:function(){t.complete()}})}},{key:"onNetworkStatusChange",value:function(t){this.api.onNetworkStatusChange({callback:function(e){t(e)}})}},{key:"request",value:function(t){var e={},o=new XMLHttpRequest;if(o.open(t.method,t.url),t.header)for(var n in t.header)o.setRequestHeader(n,t.header[n]);return o.onreadystatechange=function(){4===o.readyState&&200===o.status?(e.statusCode=200,c.isJSONString(o.responseText)&&(e.data=JSON.parse(o.responseText)),t.success(e)):200!==o.status&&(e.errMsg="network error",t.fail(e))},o.ontimeout=function(){e.errMsg="timeout",t.fail(e)},o.send(t.data),o}},{key:"initAutoTrackInstance",value:function(t,e){return new b(t,e.autoTrack,this.api)}},{key:"setGlobal",value:function(t,e){globalThis[e]=t}},{key:"getAppOptions",value:function(){return this.api.getLaunchOptionsSync()}},{key:"showToast",value:function(t){this.api.showToast({title:t,icon:"none",duration:2e3})}}],[{key:"createInstance",value:function(){return this._createInstance("R_CURRENT_PLATFORM")}},{key:"_createInstance",value:function(t){switch(t){case"oppo":return new J(qg,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_oppo_game"},{mpPlatform:"oppo_qg"});case"huawei":return new J(hbs,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_huawei_game"},{mpPlatform:"huawei_qg"});case"mz":return new J(qg,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_mz_game"},{mpPlatform:"mz"});case"xiaomi":return new J(qg,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg"},{mpPlatform:"xiaomi"})}}}]),J),k=(r(V,null,[{key:"createInstance",value:function(){var t=Object.freeze({WECHAT_GAME:104,QQ_PLAY:105,BAIDU_GAME:107,VIVO_GAME:108,OPPO_GAME:109,HUAWEI_GAME:110,XIAOMI_GAME:111,BYTEDANCE_GAME:117,QTT_GAME:116,LINKSURE:119,WECHAT_MINI_GAME:"WECHAT_GAME",BAIDU_MINI_GAME:"BAIDU_MINI_GAME",XIAOMI_QUICK_GAME:"XIAOMI_QUICK_GAME",OPPO_MINI_GAME:"OPPO_MINI_GAME",VIVO_MINI_GAME:"VIVO_MINI_GAME",HUAWEI_QUICK_GAME:"HUAWEI_QUICK_GAME",BYTEDANCE_MINI_GAME:"BYTEDANCE_MINI_GAME",QTT_MINI_GAME:"QTT_MINI_GAME",LINKSURE_MINI_GAME:"LINKSURE_MINI_GAME"});if(cc.sys.platform===t.WECHAT_GAME||cc.sys.platform===t.WECHAT_MINI_GAME)return C._createInstance("wechat_mg");if(cc.sys.platform===t.BAIDU_GAME||cc.sys.platform===t.BAIDU_MIN_GAME)return C._createInstance("baidu_mg");if(cc.sys.platform===t.VIVO_GAME||cc.sys.platform===t.VIVO_MINI_GAME)return P.createInstance();if(cc.sys.platform===t.QQ_PLAY)return C._createInstance("qq_mg");if(cc.sys.platform===t.OPPO_GAME||cc.sys.platform===t.OPPO_MINI_GAME)return S._createInstance("oppo");if(cc.sys.platform===t.HUAWEI_GAME||cc.sys.platform===t.HUAWEI_QUICK_GAME)return S._createInstance("huawei");if(cc.sys.platform===t.XIAOMI_GAME||cc.sys.platform===t.XIAOMI_QUICK_GAME)return S._createInstance("xiaomi");if(cc.sys.platform===t.BYTEDANCE_GAME||cc.sys.platform===t.BYTEDANCE_MINI_GAME)return C._createInstance("tt_mg");var e=N.createInstance();return e._sysCallback=function(){return{system:cc.sys.os.replace(" ","")+" "+cc.sys.osVersion}},e.getNetworkType=function(t){var e={};switch(cc.sys.getNetworkType()){case cc.sys.NetworkType.LAN:e.networkType="WIFI";break;case cc.sys.NetworkType.WWAN:e.networkType="WWAN";break;default:e.networkType="NONE"}t.success(e),t.complete()},e.getSystemInfo=function(t){var o={mp_platform:cc.sys.platform.toString(),system:e._getOs(),screenWidth:window.screen.width,screenHeight:window.screen.height};e._sysCallback&&(o=c.extend(o,e._sysCallback(t))),t.success(o),t.complete()},e}}]),V),D=(r(W,null,[{key:"_getCurrentPlatform",value:function(){return this.currentPlatform||(this.currentPlatform=k.createInstance())}},{key:"getConfig",value:function(){return this._getCurrentPlatform().getConfig()}},{key:"getStorage",value:function(t,e,o){return this._getCurrentPlatform().getStorage(t,e,o)}},{key:"setStorage",value:function(t,e){return this._getCurrentPlatform().setStorage(t,e)}},{key:"getSystemInfo",value:function(t){return this._getCurrentPlatform().getSystemInfo(t)}},{key:"getNetworkType",value:function(t){return this._getCurrentPlatform().getNetworkType(t)}},{key:"onNetworkStatusChange",value:function(t){this._getCurrentPlatform().onNetworkStatusChange(t)}},{key:"request",value:function(t){return this._getCurrentPlatform().request(t)}},{key:"initAutoTrackInstance",value:function(t,e){return this._getCurrentPlatform().initAutoTrackInstance(t,e)}},{key:"setGlobal",value:function(t,e){t&&e&&this._getCurrentPlatform().setGlobal(t,e)}},{key:"getAppOptions",value:function(t){return this._getCurrentPlatform().getAppOptions(t)}},{key:"showDebugToast",value:function(t){this._getCurrentPlatform().showToast(t)}}]),W),A=/^[a-zA-Z][a-zA-Z0-9_]{0,49}$/,O=(r(H,null,[{key:"stripProperties",value:function(t){return c.isObject(t)&&c.each(t,function(t,e){c.isString(t)||c.isNumber(t)||c.isDate(t)||c.isBoolean(t)||c.isArray(t)||c.isObject(t)||m.warn("Your data -",e,t,"- format does not meet requirements and may not be stored correctly. Attribute values only support String, Number, Date, Boolean, Array, Object")}),t}},{key:"_checkPropertiesKey",value:function(t){var e=!0;return c.each(t,function(t,o){A.test(o)||(m.warn("Invalid KEY: "+o),e=!1)}),e}},{key:"event",value:function(t){return!(!c.isString(t)||!A.test(t))||(m.warn("Check the parameter format. The eventName must start with an English letter and contain no more than 50 characters including letters, digits, and underscores: "+t),!1)}},{key:"propertyName",value:function(t){return!(!c.isString(t)||!A.test(t))||(m.warn("Check the parameter format. PropertyName must start with a letter and contain letters, digits, and underscores (_). The value is a string of no more than 50 characters: "+t),!1)}},{key:"properties",value:function(t){return this.stripProperties(t),!(t&&(c.isObject(t)?!this._checkPropertiesKey(t)&&(m.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"),1):(m.warn("properties can be none, but it must be an object"),1)))}},{key:"propertiesMust",value:function(t){return this.stripProperties(t),void 0===t||!c.isObject(t)||c.isEmptyObject(t)?(m.warn("properties must be an object with a value"),!1):!!this._checkPropertiesKey(t)||(m.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"),!1)}},{key:"userId",value:function(t){return!(!c.isString(t)||!/^.{1,64}$/.test(t))||(m.warn("The user ID must be a string of less than 64 characters and cannot be null"),!1)}},{key:"userAddProperties",value:function(t){if(!this.propertiesMust(t))return!1;for(var e in t)if(!c.isNumber(t[e]))return m.warn("The attributes of userAdd need to be Number"),!1;return!0}},{key:"userAppendProperties",value:function(t){if(!this.propertiesMust(t))return!1;for(var e in t)if(!c.isArray(t[e]))return m.warn("The attribute of userAppend must be Array"),!1;return!0}}]),H),I=(r(Y,[{key:"run",value:function(){var t=this,e=c.createExtraHeaders();e["content-type"]="application/json";var o=D.request({url:this.serverUrl,method:"POST",data:this.data,header:e,success:function(e){t.onSuccess(e)},fail:function(e){t.onFailed(e)}});setTimeout(function(){(c.isObject(o)||c.isPromise(o))&&c.isFunction(o.abort)&&o.abort()},this.timeout)}},{key:"onSuccess",value:function(t){if(200===t.statusCode){var e;switch(t.data.code){case 0:e="success";break;case-1:e="invalid data";break;case-2:e="invalid APP ID";break;default:e="Unknown return code"}this.callback({code:t.data.code,msg:e})}else this.callback({code:-3,msg:t.statusCode})}},{key:"onFailed",value:function(t){0<--this.tryCount?this.run():this.callback({code:-3,msg:t.errMsg})}}]),Y),T=(r(G,[{key:"run",value:function(){var t=this,e="appid="+this.data["#app_id"]+"&source=client&dryRun="+this.dryrun+"&deviceId="+this.deviceId+"&data="+encodeURIComponent(JSON.stringify(this.data.data[0])),o=c.createExtraHeaders();o["content-type"]="application/x-www-form-urlencoded";var n=D.request({url:this.serverDebugUrl,method:"POST",data:e,header:o,success:function(e){t.onSuccess(e)},fail:function(e){t.onFailed(e)}});setTimeout(function(){(c.isObject(n)||c.isPromise(n))&&c.isFunction(n.abort)&&n.abort()},this.timeout)}},{key:"onSuccess",value:function(t){if(200===t.statusCode){var e;if(0===t.data.errorLevel)e="Verify data success.";else if(1===t.data.errorLevel){for(var o=t.data.errorProperties,n="",a=0;a<o.length;a++){var i=o[a].errorReason;n=n+" propertyName:"+o[a].propertyName+" errorReasons:"+i+"\n"}e="Debug data error. errorLevel:"+t.data.errorLevel+" reason:"+n}else 2!==t.data.errorLevel&&-1!==t.data.errorLevel||(e="Debug data error. errorLevel:"+t.data.errorLevel+" reason:"+t.data.errorReasons);m.info(e),this.callback({code:t.data.errorLevel,msg:e})}else this.callback({code:-3,msg:t.statusCode})}},{key:"onFailed",value:function(t){0<--this.tryCount?this.run():this.callback({code:-3,msg:t.errMsg})}}]),G),E=(r(U,[{key:"enqueue",value:function(t,e,o,n){n=!(3<arguments.length&&void 0!==n)||n;var a=this;e="debug"===o.debugMode?new T(t,e,o.maxRetries,o.sendTimeout,0,o.deviceId,function(t){a.isRunning=!1,c.isFunction(o.callback)&&o.callback(t),a._runNext(),!1===a.showDebug&&(0!==t.code&&1!==t.code&&2!==t.code||(a.showDebug=!0,c.isFunction(D.showDebugToast)&&D.showDebugToast("The current mode is Debug")))}):"debugOnly"===o.debugMode?new T(t,e,o.maxRetries,o.sendTimeout,1,o.deviceId,function(t){a.isRunning=!1,c.isFunction(o.callback)&&o.callback(t),a._runNext(),!1===a.showDebug&&(0!==t.code&&1!==t.code&&2!==t.code||(a.showDebug=!0,c.isFunction(D.showDebugToast)&&D.showDebugToast("The current mode is debugOnly")))}):new I(JSON.stringify(t),e,o.maxRetries,o.sendTimeout,function(t){a.isRunning=!1,c.isFunction(o.callback)&&o.callback(t),a._runNext()}),!0===n?(this.items.push(e),this._runNext()):e.run()}},{key:"_dequeue",value:function(){return this.items.shift()}},{key:"_runNext",value:function(){if(0<this.items.length&&!this.isRunning)if(this.isRunning=!0,"HttpTask"!==this.items[0].taClassName)this._dequeue().run();else{for(var t=this.items.splice(0,this.items.length),e=t[0],o=JSON.parse(e.data),n=o["#app_id"],a=1;a<t.length;a++){var i=t[a],r=JSON.parse(i.data);r["#app_id"]===n&&e.serverUrl===i.serverUrl?o.data=o.data.concat(r.data):this.items.push(i)}var c=(new Date).getTime();o["#flush_time"]=c,new I(JSON.stringify(o),e.serverUrl,e.tryCount,e.timeout,e.callback).run()}}}]),new U),L={name:"thinkingdata",is_plugin:!1,maxRetries:3,sendTimeout:3e3,enablePersistence:!0,asyncPersistence:!1,enableLog:!0,strict:!1,debugMode:"none"},M={properties:{"#lib":"MG","#lib_version":"2.1.0"},initDeviceId:function(t){c.isString(t)&&(this.properties["#device_id"]=t)},getSystemInfo:function(t){var e=this;D.onNetworkStatusChange(function(t){e.properties["#network_type"]=t.networkType}),D.getNetworkType({success:function(t){e.properties["#network_type"]=t.networkType},complete:function(){D.getSystemInfo({success:function(t){m.info(JSON.stringify(t,null,4));var o=t.system?t.system.replace(/\s+/g," ").split(" "):[];o={"#manufacturer":t.brand,"#device_model":t.model,"#screen_width":Number(t.screenWidth),"#screen_height":Number(t.screenHeight),"#os":o[0],"#os_version":o[1],"#mp_platform":t.mp_platform,"#system_language":t.systemLanguage},c.extend(e.properties,o),c.setMpPlatform(t.mp_platform)},complete:function(){t()}})}})}},B=(r(x,[{key:"_init",value:function(t,e){this.getDistinctId()||this.setDistinctId(c.UUID()),t.isChildInstance||(this.getDeviceId()||this._setDeviceId(c.UUID()),M.initDeviceId(this.getDeviceId())),this.initComplete=!0,"function"==typeof e&&e(),this._save()}},{key:"_save",value:function(){this.enabled&&this.initComplete&&D.setStorage(this.name,JSON.stringify(this._state))}},{key:"_set",value:function(t,e){var o,a=this;"string"==typeof t?(o={})[t]=e:"object"===n(t)&&(o=t),c.each(o,function(t,e){a._state[e]=t}),this._save()}},{key:"_get",value:function(t){return this._state[t]}},{key:"setEventTimer",value:function(t,e){var o=this._state.event_timers||{};o[t]=e,this._set("event_timers",o)}},{key:"removeEventTimer",value:function(t){var e=(this._state.event_timers||{})[t];return c.isUndefined(e)||(delete this._state.event_timers[t],this._save()),e}},{key:"getDeviceId",value:function(){return this._state.device_id}},{key:"_setDeviceId",value:function(t){this.getDeviceId()?m.warn("cannot modify the device id."):this._set("device_id",t)}},{key:"getDistinctId",value:function(){return this._state.distinct_id}},{key:"setDistinctId",value:function(t){this._set("distinct_id",t)}},{key:"getAccountId",value:function(){return this._state.account_id}},{key:"setAccountId",value:function(t){this._set("account_id",t)}},{key:"getSuperProperties",value:function(){return this._state.props||{}}},{key:"setSuperProperties",value:function(t,e){t=e?t:c.extend(this.getSuperProperties(),t),this._set("props",t)}}]),x),R=(r(j,[{key:"_init",value:function(t){var e=this;this.name=t.name,this.appId=t.appId||t.appid;var o=t.serverUrl||t.server_url;this.serverUrl=o+"/sync_xcx",this.serverDebugUrl=o+"/data_debug",this.configUrl=o+"/config",this.autoTrackProperties={},this._queue=[],this.updateConfig(this.configUrl,this.appId),t.isChildInstance?this._state={}:(m.enabled=t.enableLog,this.instances=[],this._state={getSystemInfo:!1,initComplete:!1},M.getSystemInfo(function(){e._updateState({getSystemInfo:!0})}),D.setGlobal(this,this.name)),this.store=new B(t,function(){e.config.asyncPersistence&&c.isFunction(e.config.persistenceComplete)&&e.config.persistenceComplete(e),e._updateState()}),this.enabled=!c.isBoolean(this.store._get("ta_enabled"))||this.store._get("ta_enabled"),this.isOptOut=!!c.isBoolean(this.store._get("ta_isOptOut"))&&this.store._get("ta_isOptOut"),!t.isChildInstance&&t.autoTrack&&(this.autoTrack=D.initAutoTrackInstance(this,t))}},{key:"updateConfig",value:function(t,e){var o=this,n=c.createExtraHeaders();n["content-type"]="application/json";var a=D.request({url:t+"?appid="+e,method:"GET",header:n,success:function(t){c.isUndefined(t)||c.isUndefined(t.data)||(m.info("config update success("+e+") :"+JSON.stringify(t.data)),c.isUndefined(t.data.data)||(o.config.syncBatchSize=t.data.data.sync_batch_size,o.config.syncInterval=t.data.data.sync_interval,o.config.disableEventList=t.data.data.disable_event_list,c.isUndefined(t.data.data.secret_key)||(t=t.data.data.secret_key,o.config.secretKey={publicKey:t.key,version:t.version})))},fail:function(t){m.info("config update fail("+e+") :"+t.errMsg)}});setTimeout(function(){(c.isObject(a)||c.isPromise(a))&&c.isFunction(a.abort)&&a.abort()},3e3)}},{key:"initInstance",value:function(t,e){if(this.config.isChildInstance)m.warn("initInstance() cannot be called on child instance");else{if(c.isString(t)&&t!==this.name&&c.isUndefined(this[t]))return e=new j(c.extend({},this.config,{enablePersistence:!1,isChildInstance:!0,name:t},e)),this[t]=e,this.instances.push(t),this[t]._state=this._state,e;m.warn("initInstance() failed due to the name is invalid: "+t)}}},{key:"lightInstance",value:function(t){return this[t]}},{key:"_setAutoTrackProperties",value:function(t){c.extend(this.autoTrackProperties,t)}},{key:"init",value:function(){if(this._state.initComplete)return!1;this._updateState({initComplete:!0})}},{key:"_isReady",value:function(){return this._state.getSystemInfo&&this._state.initComplete&&this.store.initComplete&&this.getDeviceId()}},{key:"_updateState",value:function(t){var e=this;c.isObject(t)&&c.extend(this._state,t),this._onStateChange(),c.each(this.instances,function(t){e[t]._onStateChange()})}},{key:"_onStateChange",value:function(){var t=this;this._isReady()&&this._queue&&0<this._queue.length&&(c.each(this._queue,function(e){t[e[0]].apply(t,l.call(e[1]))}),this._queue=[])}},{key:"_hasDisabled",value:function(){var t=!this.enabled||this.isOptOut;return t&&m.info("ThinkingData is Pause or Stop!"),t}},{key:"_sendRequest",value:function(t,e,o){var n,a,i;this._hasDisabled()||(c.isUndefined(this.config.disableEventList)||!this.config.disableEventList.includes(t.eventName)?(e=c.isDate(e)?e:new Date,n={data:[{"#type":t.type,"#time":c.formatDate(e),"#distinct_id":this.store.getDistinctId()}]},this.store.getAccountId()&&(n.data[0]["#account_id"]=this.store.getAccountId()),"track"===t.type||"track_update"===t.type||"track_overwrite"===t.type?(n.data[0]["#event_name"]=t.eventName,"track_update"===t.type||"track_overwrite"===t.type?n.data[0]["#event_id"]=t.extraId:t.firstCheckId&&(n.data[0]["#first_check_id"]=t.firstCheckId),n.data[0].properties=c.extend({"#zone_offset":0-e.getTimezoneOffset()/60},M.properties,this.autoTrackProperties,this.store.getSuperProperties(),this.dynamicProperties?this.dynamicProperties():{}),e=this.store.removeEventTimer(t.eventName),c.isUndefined(e)||(a=(new Date).getTime()-e,86400<(i=parseFloat((a/1e3).toFixed(3)))?i=86400:i<0&&(i=0),n.data[0].properties["#duration"]=i)):n.data[0].properties={},c.isObject(t.properties)&&!c.isEmptyObject(t.properties)&&c.extend(n.data[0].properties,t.properties),c.searchObjDate(n.data[0]),1<this.config.maxRetries&&(n.data[0]["#uuid"]=c.UUIDv4()),n["#app_id"]=this.appId,m.info(JSON.stringify(n,null,4)),a="debug"===this.config.debugMode||"debugOnly"===this.config.debugMode?this.serverDebugUrl:this.serverUrl,c.isBoolean(this.config.enableEncrypt)&&1==this.config.enableEncrypt&&(n.data[0]=c.generateEncryptyData(n.data[0],this.config.secretKey)),o?(i=new FormData,"debug"===this.config.debugMode||"debugOnly"===this.config.debugMode?(i.append("source","client"),i.append("appid",this.appId),i.append("dryRun","debugOnly"===this.config.debugMode?1:0),i.append("deviceId",this.getDeviceId()),i.append("data",JSON.stringify(n.data[0]))):(o=c.base64Encode(JSON.stringify(n)),i.append("data",o)),navigator.sendBeacon(a,i),c.isFunction(t.onComplete)&&t.onComplete({statusCode:200})):E.enqueue(n,a,{maxRetries:this.config.maxRetries,sendTimeout:this.config.sendTimeout,callback:t.onComplete,debugMode:this.config.debugMode,deviceId:this.getDeviceId()})):m.info("disabled Event : "+t.eventName))}},{key:"_isObjectParams",value:function(t){return c.isObject(t)&&c.isFunction(t.onComplete)}},{key:"track",value:function(t,e,o,n){var a;this._hasDisabled()||(this._isObjectParams(t)&&(t=(a=t).eventName,e=a.properties,o=a.time,n=a.onComplete),O.event(t)&&O.properties(e)||!this.config.strict?this._internalTrack(t,e,o,n):c.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}},{key:"trackUpdate",value:function(t){var e;this._hasDisabled()||(t&&t.eventId&&(O.event(t.eventName)&&O.properties(t.properties)||!this.config.strict)?(e=c.isDate(t.time)?t.time:new Date,this._isReady()?this._sendRequest({type:"track_update",eventName:t.eventName,properties:t.properties,onComplete:t.onComplete,extraId:t.eventId},e):(t.time=e,this._queue.push(["trackUpdate",[t]]))):(m.warn("Invalide parameter for trackUpdate: you should pass an object contains eventId to trackUpdate()"),c.isFunction(t.onComplete)&&t.onComplete({code:-1,msg:"invalid parameters"})))}},{key:"trackOverwrite",value:function(t){var e;this._hasDisabled()||(t&&t.eventId&&(O.event(t.eventName)&&O.properties(t.properties)||!this.config.strict)?(e=c.isDate(t.time)?t.time:new Date,this._isReady()?this._sendRequest({type:"track_overwrite",eventName:t.eventName,properties:t.properties,onComplete:t.onComplete,extraId:t.eventId},e):(t.time=e,this._queue.push(["trackOverwrite",[t]]))):(m.warn("Invalide parameter for trackOverwrite: you should pass an object contains eventId to trackOverwrite()"),c.isFunction(t.onComplete)&&t.onComplete({code:-1,msg:"invalid parameters"})))}},{key:"trackFirstEvent",value:function(t){var e;this._hasDisabled()||(t&&t.eventName&&(O.event(t.eventName)&&O.properties(t.properties)||!this.config.strict)?(e=c.isDate(t.time)?t.time:new Date,this._isReady()?this._sendRequest({type:"track",eventName:t.eventName,properties:t.properties,onComplete:t.onComplete,firstCheckId:t.firstCheckId||this.getDeviceId()},e):(t.time=e,this._queue.push(["trackFirstEvent",[t]]))):(m.warn("Invalide parameter for trackFirstEvent: you should pass an object contains eventName to trackFirstEvent()"),c.isFunction(t.onComplete)&&t.onComplete({code:-1,msg:"invalid parameters"})))}},{key:"_internalTrack",value:function(t,e,o,n,a){this._hasDisabled()||(o=c.isDate(o)?o:new Date,this._isReady()?this._sendRequest({type:"track",eventName:t,properties:e,onComplete:n},o,a):this._queue.push(["_internalTrack",[t,e,o,n]]))}},{key:"userSet",value:function(t,e,o){var n;this._hasDisabled()||(this._isObjectParams(t)&&(t=(n=t).properties,e=n.time,o=n.onComplete),O.propertiesMust(t)||!this.config.strict?(e=c.isDate(e)?e:new Date,this._isReady()?this._sendRequest({type:"user_set",properties:t,onComplete:o},e):this._queue.push(["userSet",[t,e,o]])):(m.warn("calling userSet failed due to invalid arguments"),c.isFunction(o)&&o({code:-1,msg:"invalid parameters"})))}},{key:"userSetOnce",value:function(t,e,o){var n;this._hasDisabled()||(this._isObjectParams(t)&&(t=(n=t).properties,e=n.time,o=n.onComplete),O.propertiesMust(t)||!this.config.strict?(e=c.isDate(e)?e:new Date,this._isReady()?this._sendRequest({type:"user_setOnce",properties:t,onComplete:o},e):this._queue.push(["userSetOnce",[t,e,o]])):(m.warn("calling userSetOnce failed due to invalid arguments"),c.isFunction(o)&&o({code:-1,msg:"invalid parameters"})))}},{key:"userUnset",value:function(t,e,o){var n;this._hasDisabled()||(this._isObjectParams(n)&&(t=n.property,e=n.time,o=n.onComplete),O.propertyName(t)||!this.config.strict?(e=c.isDate(e)?e:new Date,this._isReady()?((n={})[t]=0,this._sendRequest({type:"user_unset",properties:n,onComplete:o},e)):this._queue.push(["userUnset",[t,o,e]])):(m.warn("calling userUnset failed due to invalid arguments"),c.isFunction(o)&&o({code:-1,msg:"invalid parameters"})))}},{key:"userDel",value:function(t,e){var o;this._hasDisabled()||(this._isObjectParams(t)&&(t=(o=t).time,e=o.onComplete),t=c.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_del",onComplete:e},t):this._queue.push(["userDel",[t,e]]))}},{key:"userAdd",value:function(t,e,o){var n;this._hasDisabled()||(this._isObjectParams(t)&&(t=(n=t).properties,e=n.time,o=n.onComplete),O.userAddProperties(t)||!this.config.strict?(e=c.isDate(e)?e:new Date,this._isReady()?this._sendRequest({type:"user_add",properties:t,onComplete:o},e):this._queue.push(["userAdd",[t,e,o]])):(m.warn("calling userAdd failed due to invalid arguments"),c.isFunction(o)&&o({code:-1,msg:"invalid parameters"})))}},{key:"userAppend",value:function(t,e,o){var n;this._hasDisabled()||(this._isObjectParams(t)&&(t=(n=t).properties,e=n.time,o=n.onComplete),O.userAppendProperties(t)||!this.config.strict?(e=c.isDate(e)?e:new Date,this._isReady()?this._sendRequest({type:"user_append",properties:t,onComplete:o},e):this._queue.push(["userAppend",[t,e,o]])):(m.warn("calling userAppend failed due to invalid arguments"),c.isFunction(o)&&o({code:-1,msg:"invalid parameters"})))}},{key:"userUniqAppend",value:function(t,e,o){var n;this._hasDisabled()||(this._isObjectParams(t)&&(t=(n=t).properties,e=n.time,o=n.onComplete),O.userAppendProperties(t)||!this.config.strict?(e=c.isDate(e)?e:new Date,this._isReady()?this._sendRequest({type:"user_uniq_append",properties:t,onComplete:o},e):this._queue.push(["userUniqAppend",[t,e,o]])):(m.warn("calling userAppend failed due to invalid arguments"),c.isFunction(o)&&o({code:-1,msg:"invalid parameters"})))}},{key:"authorizeOpenID",value:function(t){this.identify(t)}},{key:"identify",value:function(t){if(!this._hasDisabled()){if("number"==typeof t)t=String(t);else if("string"!=typeof t)return!1;this.store.setDistinctId(t)}}},{key:"getDistinctId",value:function(){return this.store.getDistinctId()}},{key:"login",value:function(t){if(!this._hasDisabled()){if("number"==typeof t)t=String(t);else if("string"!=typeof t)return!1;this.store.setAccountId(t)}}},{key:"getAccountId",value:function(){return this.store.getAccountId()}},{key:"logout",value:function(){this._hasDisabled()||this.store.setAccountId(null)}},{key:"setSuperProperties",value:function(t){this._hasDisabled()||(O.propertiesMust(t)||!this.config.strict?this.store.setSuperProperties(t):m.warn("setSuperProperties parameter must be a valid property value"))}},{key:"clearSuperProperties",value:function(){this._hasDisabled()||this.store.setSuperProperties({},!0)}},{key:"unsetSuperProperty",value:function(t){var e;this._hasDisabled()||c.isString(t)&&(delete(e=this.getSuperProperties())[t],this.store.setSuperProperties(e,!0))}},{key:"getSuperProperties",value:function(){return this.store.getSuperProperties()}},{key:"getPresetProperties",value:function(){var t=M.properties,e={},o=t["#os"];e.os=c.isUndefined(o)?"":o,o=t["#screen_width"],e.screenWidth=c.isUndefined(o)?0:o,o=t["#screen_height"],e.screenHeight=c.isUndefined(o)?0:o,o=t["#network_type"],e.networkType=c.isUndefined(o)?"":o,o=t["#device_model"],e.deviceModel=c.isUndefined(o)?"":o,o=t["#os_version"],e.osVersion=c.isUndefined(o)?"":o,e.deviceId=this.getDeviceId();var n=0-(new Date).getTimezoneOffset()/60;return e.zoneOffset=n,t=t["#manufacturer"],e.manufacturer=c.isUndefined(t)?"":t,e.toEventPresetProperties=function(){return{"#device_model":e.deviceModel,"#device_id":e.deviceId,"#screen_width":e.screenWidth,"#screen_height":e.screenHeight,"#os":e.os,"#os_version":e.osVersion,"#network_type":e.networkType,"#zone_offset":n,"#manufacturer":e.manufacturer}},e}},{key:"setDynamicSuperProperties",value:function(t){this._hasDisabled()||("function"==typeof t?O.properties(t())||!this.config.strict?this.dynamicProperties=t:m.warn("A dynamic public property must return a valid property value"):m.warn("setDynamicSuperProperties parameter must be a function type"))}},{key:"timeEvent",value:function(t,e){this._hasDisabled()||(e=c.isDate(e)?e:new Date,this._isReady()?O.event(t)||!this.config.strict?this.store.setEventTimer(t,e.getTime()):m.warn("calling timeEvent failed due to invalid eventName: "+t):this._queue.push(["timeEvent",[t,e]]))}},{key:"getDeviceId",value:function(){return M.properties["#device_id"]}},{key:"enableTracking",value:function(t){this.enabled=t,this.store._set("ta_enabled",t)}},{key:"optOutTracking",value:function(){this.store.setSuperProperties({},!0),this.store.setDistinctId(c.UUID()),this.store.setAccountId(null),this._queue.splice(0,this._queue.length),this.isOptOut=!0,this.store._set("ta_isOptOut",!0)}},{key:"optOutTrackingAndDeleteUser",value:function(){var t=new Date;this._sendRequest({type:"user_del"},t),this.optOutTracking()}},{key:"optInTracking",value:function(){this.isOptOut=!1,this.store._set("ta_isOptOut",!1)}},{key:"setTrackStatus",value:function(t){switch(t){case"PAUSE":this.eventSaveOnly=!1,this.optInTracking(),this.enableTracking(!1);break;case"STOP":this.eventSaveOnly=!1,this.optOutTracking(!0);break;default:this.eventSaveOnly=!1,this.optInTracking(),this.enableTracking(!0)}}}]),s=j,{name:"thinkingdata",enableLog:!0,enableNative:!1});function F(t){a(this,F),t.appId=t.appId?c.checkAppId(t.appId):c.checkAppId(t.appid),t.serverUrl=t.serverUrl?c.checkUrl(t.serverUrl):c.checkUrl(t.server_url);var e=c.extend({},R,D.getConfig());c.isObject(t)?this.config=c.extend(e,t):this.config=e,this._init(this.config)}function j(t){a(this,j),t.appId=t.appId?c.checkAppId(t.appId):c.checkAppId(t.appid),t.serverUrl=t.serverUrl?c.checkUrl(t.serverUrl):c.checkUrl(t.server_url);var e=c.extend({},L,D.getConfig());c.isObject(t)?this.config=c.extend(e,t):this.config=e,this._init(this.config)}function x(t,e){var o=this;a(this,x),this.enabled=t.enablePersistence,this.enabled?(t.isChildInstance?(this.name=t.persistenceName+"_"+t.name,this.nameOld=t.persistenceNameOld+"_"+t.name):(this.name=t.persistenceName,this.nameOld=t.persistenceNameOld),t.asyncPersistence?(this._state={},D.getStorage(this.name,!0,function(n){c.isEmptyObject(n)?D.getStorage(o.nameOld,!0,function(n){o._state=c.extend2Layers({},n,o._state),o._init(t,e),o._save()}):(o._state=c.extend2Layers({},n,o._state),o._init(t,e),o._save())})):(this._state=D.getStorage(this.name)||{},c.isEmptyObject(this._state)&&(this._state=D.getStorage(this.nameOld)||{}),this._init(t,e))):(this._state={},this._init(t,e))}function U(){a(this,U),this.items=[],this.isRunning=!1,this.showDebug=!1}function G(t,e,o,n,i,r,s){a(this,G),this.data=t,this.serverDebugUrl=e,this.callback=s,this.tryCount=c.isNumber(o)?o:1,this.timeout=c.isNumber(n)?n:3e3,this.dryrun=i,this.deviceId=r,this.taClassName="HttpTaskDebug"}function Y(t,e,o,n,i){a(this,Y),this.data=t,this.serverUrl=e,this.callback=i,this.tryCount=c.isNumber(o)?o:1,this.timeout=c.isNumber(n)?n:3e3,this.taClassName="HttpTask"}function H(){a(this,H)}function W(){a(this,W)}function V(){a(this,V)}function J(t,e,o){a(this,J),this.api=t,this.config=e,this._config=o}function K(){a(this,K),this.config={persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_vivo_game",asyncPersistence:!0}}function q(t,e,o){a(this,q),this.api=t,this.config=e,this._config=o}function z(t,e,o){var n=this;a(this,z),this.taInstance=t,this.config=e||{},e=o.getLaunchOptionsSync(),this._onShow(e),this.startTracked=!0,o.onShow(function(t){n._onShow(t)}),o.onHide(function(){var t;n.startTracked=!1,n.config.appHide&&(c.extend(t={},n.config.properties),c.isFunction(n.config.callback)&&c.extend(t,n.config.callback("appHide")),n.taInstance._internalTrack("ta_mg_hide",t))})}function X(t,e){a(this,X),this.taInstance=t,this.config=e||{},this.referrer="Directly open",this.config.isPlugin?(t.App=function(){App.apply(this,arguments)},inension(t.Page)):(t=App,App=this._initAppExtention(t),t=Page,Page=this._initPageExtension(t))}function Z(){a(this,Z),this.config={persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_mg"}}r(F,[{key:"_isNativePlatform",value:function(){return!(!this._isIOS()&&!this._isAndroid()||!this.config.enableNative)}},{key:"_isIOS",value:function(){return!(!cc.sys.isNative||"iOS"!==cc.sys.os)}},{key:"_isAndroid",value:function(){return!(!cc.sys.isNative||"Android"!==cc.sys.os)}},{key:"_init",value:function(t){this.name=t.name,this.appId=t.appId||t.appid,this._isNativePlatform()?(this.initInstanceForNative(this.name,t,this.appId),this._readStorage(t)):this.taJs=new ThinkingAnalyticsAPIForJS(t)}},{key:"_readStorage",value:function(t){var e=this,o=t.persistenceName,n=t.persistenceNameOld;t.isChildInstance&&(o=t.persistenceName+"_"+t.name,n=t.persistenceNameOld+"_"+t.name),this._state=D.getStorage(o)||{},c.isEmptyObject(this._state)&&(this._state=D.getStorage(n)||{}),c.isEmptyObject(this._state)?D.getStorage(o,!0,function(t){c.isEmptyObject(t)?D.getStorage(n,!0,function(t){e._state=c.extend2Layers({},t,e._state)}):e._state=c.extend2Layers({},t,e._state),e._state.distinct_id&&e.identifyForNative(e._state.distinct_id),e._state.account_id&&e.loginForNative(e._state.account_id)}):(this._state.distinct_id&&this.identifyForNative(this._state.distinct_id),this._state.account_id&&this.loginForNative(this._state.account_id))}},{key:"initInstance",value:function(t,e){return this._isNativePlatform()?c.isUndefined(e)?this[t]=new ThinkingAnalyticsAPI(this.config):this[t]=new ThinkingAnalyticsAPI(e):this[t]=this.taJs.initInstance(t,e),this[t]}},{key:"lightInstance",value:function(t){return this[t]}},{key:"init",value:function(){if(this._isNativePlatform()){var t=window,e=this;return t.__autoTrackCallback=function(t){return c.isFunction(e.config.autoTrack.callback)?(t=e.config.autoTrack.callback(t),JSON.stringify(t)):"{}"},void this.startThinkingAnalyticsForNative()}this.taJs.init()}},{key:"track",value:function(t,e,o,n){this._isNativePlatform()?this.trackForNative(t,e,o,this.appId):this.taJs.track(t,e,o,n)}},{key:"trackUpdate",value:function(t){this._isNativePlatform()?this.trackUpdateForNative(t,this.appId):this.taJs.trackUpdate(t)}},{key:"trackOverwrite",value:function(t){this._isNativePlatform()?this.trackOverwriteForNative(t,this.appId):this.taJs.trackOverwrite(t)}},{key:"trackFirstEvent",value:function(t){this._isNativePlatform()?this.trackFirstEventForNative(t,this.appId):this.taJs.trackFirstEvent(t)}},{key:"userSet",value:function(t,e,o){this._isNativePlatform()?this.userSetForNative(t,this.appId):this.taJs.userSet(t,e,o)}},{key:"userSetOnce",value:function(t,e,o){this._isNativePlatform()?this.userSetOnceForNative(t,this.appId):this.taJs.userSetOnce(t,e,o)}},{key:"userUnset",value:function(t,e,o){this._isNativePlatform()?this.userUnsetForNative(t,this.appId):this.taJs.userUnset(t,e,o)}},{key:"userDel",value:function(t,e){this._isNativePlatform()?this.userDelForNative(this.appId):this.taJs.userDel(t,e)}},{key:"userAdd",value:function(t,e,o){this._isNativePlatform()?this.userAddForNative(t,this.appId):this.taJs.userAdd(t,e,o)}},{key:"userAppend",value:function(t,e,o){this._isNativePlatform()?this.userAppendForNative(t,this.appId):this.taJs.userAppend(t,e,o)}},{key:"userUniqAppend",value:function(t,e,o){this._isNativePlatform()?this.userUniqAppendForNative(t,this.appId):this.taJs.userUniqAppend(t,e,o)}},{key:"authorizeOpenID",value:function(t){this.identify(t)}},{key:"identify",value:function(t){this._isNativePlatform()?this.identifyForNative(t,this.appId):this.taJs.identify(t)}},{key:"getDistinctId",value:function(){return this._isNativePlatform()?this.getDistinctIdForNative(this.appId):this.taJs.getDistinctId()}},{key:"login",value:function(t){this._isNativePlatform()?this.loginForNative(t,this.appId):this.taJs.login(t)}},{key:"getAccountId",value:function(){return this._isNativePlatform()?this.getAccountIdForNative(this.appId):this.taJs.getAccountId()}},{key:"logout",value:function(){this._isNativePlatform()?this.logoutForNative(this.appId):this.taJs.logout()}},{key:"setSuperProperties",value:function(t){this._isNativePlatform()?this.setSuperPropertiesForNative(t,this.appId):this.taJs.setSuperProperties(t)}},{key:"clearSuperProperties",value:function(){this._isNativePlatform()?this.clearSuperPropertiesForNative(this.appId):this.taJs.clearSuperProperties()}},{key:"unsetSuperProperty",value:function(t){this._isNativePlatform()?this.unsetSuperPropertyForNative(t,this.appId):this.taJs.unsetSuperProperty(t)}},{key:"getSuperProperties",value:function(){return this._isNativePlatform()?this.getSuperPropertiesForNative(this.appId):this.taJs.getSuperProperties()}},{key:"getPresetProperties",value:function(){if(this._isNativePlatform()){var t=this.getPresetPropertiesForNative(this.appId),e={},o=t["#os"];e.os=c.isUndefined(o)?"":o,o=t["#screen_width"],e.screenWidth=c.isUndefined(o)?0:o,o=t["#screen_height"],e.screenHeight=c.isUndefined(o)?0:o,o=t["#network_type"],e.networkType=c.isUndefined(o)?"":o,o=t["#device_model"],e.deviceModel=c.isUndefined(o)?"":o,o=t["#os_version"],e.osVersion=c.isUndefined(o)?"":o,e.deviceId=this.getDeviceId();var n=0-(new Date).getTimezoneOffset()/60;return e.zoneOffset=n,t=t["#manufacturer"],e.manufacturer=c.isUndefined(t)?"":t,e.toEventPresetProperties=function(){return{"#device_model":e.deviceModel,"#device_id":e.deviceId,"#screen_width":e.screenWidth,"#screen_height":e.screenHeight,"#os":e.os,"#os_version":e.osVersion,"#network_type":e.networkType,"#zone_offset":n,"#manufacturer":e.manufacturer}},e}return this.taJs.getPresetProperties()}},{key:"setDynamicSuperProperties",value:function(t){this._isNativePlatform()?"function"==typeof t?(this.dynamicProperties=t,window.__dynamicPropertiesForNative=function(e){return console.log("__dynamicPropertiesForNative: native msg: ",e),e=t(),e=c.encodeDates(e),JSON.stringify(e)},this.setDynamicSuperPropertiesForNative("__dynamicPropertiesForNative")):logger.warn("setDynamicSuperProperties parameter must be a function type"):this.taJs.setDynamicSuperProperties(t)}},{key:"timeEvent",value:function(t,e){return this._isNativePlatform()?this.timeEventForNative(t,this.appId):this.taJs.timeEvent(t,e)}},{key:"getDeviceId",value:function(){return this._isNativePlatform()?this.getDeviceIdForNative(this.appId):this.taJs.getDeviceId()}},{key:"enableTracking",value:function(t){this._isNativePlatform()?this.enableTrackingForNative(t,this.appId):this.taJs.enableTracking(t)}},{key:"optOutTracking",value:function(){this._isNativePlatform()?this.optOutTrackingForNative(this.appId):this.taJs.optOutTracking()}},{key:"optOutTrackingAndDeleteUser",value:function(){this._isNativePlatform()?this.optOutTrackingAndDeleteUserForNative(this.appId):this.taJs.optOutTrackingAndDeleteUser()}},{key:"optInTracking",value:function(){this._isNativePlatform()?this.optInTrackingForNative(this.appId):this.taJs.optInTracking()}},{key:"setTrackStatus",value:function(t){this._isNativePlatform()?this.setTrackStatusForNative(t,this.appId):this.taJs.setTrackStatus(t)}},{key:"trackForNative",value:function(t,e,o,n){o=c.isDate(o)?c.formatDate(o):"",c.isUndefined(e)&&(e={}),e=c.extend(e,this.dynamicProperties?this.dynamicProperties():{}),e=c.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","track","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",t,JSON.stringify(e),o,n):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","track:properties:time:appId:",t,JSON.stringify(e),o,n)}},{key:"trackUpdateForNative",value:function(t,e){t.properties=c.extend(c.isUndefined(t.properties)?{}:t.properties,this.dynamicProperties?this.dynamicProperties():{}),t=c.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","trackUpdate","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(t),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","trackUpdate:appId:",JSON.stringify(t),e)}},{key:"trackFirstEventForNative",value:function(t,e){t.properties=c.extend(c.isUndefined(t.properties)?{}:t.properties,this.dynamicProperties?this.dynamicProperties():{}),t=c.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","trackFirstEvent","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(t),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","trackFirstEvent:appId:",JSON.stringify(t),e)}},{key:"trackOverwriteForNative",value:function(t,e){t.properties=c.extend(c.isUndefined(t.properties)?{}:t.properties,this.dynamicProperties?this.dynamicProperties():{}),t=c.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","trackOverwrite","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(t),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","trackOverwrite:appId:",JSON.stringify(t),e)}},{key:"timeEventForNative",value:function(t,e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","timeEvent","(Ljava/lang/String;Ljava/lang/String;)V",t,e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","timeEvent:appId:",t,e)}},{key:"loginForNative",value:function(t,e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","login","(Ljava/lang/String;Ljava/lang/String;)V",t,e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","login:appId:",t,e)}},{key:"logoutForNative",value:function(t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","logout","(Ljava/lang/String;)V",t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","logout:",t)}},{key:"setSuperPropertiesForNative",value:function(t,e){t=c.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setSuperProperties","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(t),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setSuperProperties:appId:",JSON.stringify(t),e)}},{key:"getSuperPropertiesForNative",value:function(t){var e="{}";return this._isAndroid()?e=jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getSuperProperties","(Ljava/lang/String;)V",t):this._isIOS()&&(e=jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getSuperProperties:",t)),JSON.parse(e)}},{key:"unsetSuperPropertyForNative",value:function(t,e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","unsetSuperProperty","(Ljava/lang/String;Ljava/lang/String;)V",t,e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","unsetSuperProperty:appId:",t,e)}},{key:"clearSuperPropertiesForNative",value:function(t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","clearSuperProperties","(Ljava/lang/String;)V",t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","clearSuperProperties:",t)}},{key:"userSetForNative",value:function(t,e){t=c.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userSet","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(t),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userSet:appId:",JSON.stringify(t),e)}},{key:"userSetOnceForNative",value:function(t,e){t=c.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userSetOnce","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(t),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userSetOnce:appId:",JSON.stringify(t),e)}},{key:"userAppendForNative",value:function(t,e){t=c.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userAppend","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(t),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userAppend:appId:",JSON.stringify(t),e)}},{key:"userUniqAppendForNative",value:function(t,e){t=c.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userUniqAppend","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(t),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userUniqAppend:appId:",JSON.stringify(t),e)}},{key:"userAddForNative",value:function(t,e){t=c.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userAdd","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(t),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userAdd:appId:",JSON.stringify(t),e)}},{key:"userUnsetForNative",value:function(t,e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userUnset","(Ljava/lang/String;Ljava/lang/String;)V",t,e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userUnset:appId:",t,e)}},{key:"userDelForNative",value:function(t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userDel","(Ljava/lang/String;)V",t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userDel:",t)}},{key:"authorizeOpenIDForNative",value:function(t,e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","authorizeOpenID","(Ljava/lang/String;Ljava/lang/String;)V",t,e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","authorizeOpenID:appId:",t,e)}},{key:"identifyForNative",value:function(t,e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","identify","(Ljava/lang/String;Ljava/lang/String;)V",t,e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","identify:appId:",t,e)}},{key:"initInstanceForNative",value:function(t,e,o){this._isAndroid()?(jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setCustomerLibInfo","(Ljava/lang/String;Ljava/lang/String;)V","MG","2.1.0"),c.isUndefined(e)?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","initInstanceAppId","(Ljava/lang/String;Ljava/lang/String;)V",t,o):jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","initInstanceConfig","(Ljava/lang/String;Ljava/lang/String;)V",t,JSON.stringify(e))):this._isIOS()&&(jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setCustomerLibInfoWithLibName:libVersion:","MG","2.1.0"),c.isUndefined(e)?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","initInstance:appId:",t,o):jsb.reflection.callStaticMethod("CocosCreatorProxyApi","initInstance:config:",t,JSON.stringify(e)))}},{key:"lightInstanceForNative",value:function(t,e){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","lightInstance","(Ljava/lang/String;Ljava/lang/String;)V",t,e):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","lightInstance:appId:",t,e):void 0}},{key:"startThinkingAnalyticsForNative",value:function(t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","startThinkingAnalytics","(Ljava/lang/String;)V",t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","startThinkingAnalytics:",t)}},{key:"setDynamicSuperPropertiesForNative",value:function(t,e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setDynamicSuperProperties","(Ljava/lang/String;Ljava/lang/String;)V",t,e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setDynamicSuperProperties:appId:",t,e)}},{key:"getDeviceIdForNative",value:function(t){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getDeviceId","(Ljava/lang/String;)Ljava/lang/String;",t):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getDeviceId:",t):void 0}},{key:"getDistinctIdForNative",value:function(t){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getDistinctId","(Ljava/lang/String;)Ljava/lang/String;",t):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getDistinctId:",t):void 0}},{key:"getAccountIdForNative",value:function(t){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getAccountId","(Ljava/lang/String;)Ljava/lang/String;",t):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getAccountId:",t):void 0}},{key:"getPresetPropertiesForNative",value:function(t){var e="{}";return this._isAndroid()?e=jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getPresetProperties","(Ljava/lang/String;)Ljava/lang/String;",t):this._isIOS()&&(e=jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getPresetProperties:",t)),JSON.parse(e)}},{key:"enableTrackingForNative",value:function(t,e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","enableTracking","(Ljava/lang/String;Ljava/lang/String;)V",t.toString(),e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","enableTracking:appId:",t.toString(),e)}},{key:"optOutTrackingForNative",value:function(t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","optOutTracking","(Ljava/lang/String;)V",t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","optOutTracking:",t)}},{key:"optOutTrackingAndDeleteUserForNative",value:function(t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","optOutTrackingAndDeleteUser","(Ljava/lang/String;)V",t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","optOutTrackingAndDeleteUser:",t)}},{key:"optInTrackingForNative",value:function(t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","optInTracking","(Ljava/lang/String;)V",t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","optInTracking:",t)}},{key:"setTrackStatusForNative",value:function(t,e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setTrackStatus","(Ljava/lang/String;Ljava/lang/String;)V",t,e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setTrackStatus:appId:",t,e)}}]),o=F,window.ThinkingAnalyticsAPI=o,window.ThinkingAnalyticsAPIForJS=s,cc._RF.pop()},{}],topUiLayer:[function(t,e,o){"use strict";cc._RF.push(e,"66108Xuwc1FDr3Qf3OyCrBI","topUiLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("flying-item-pop-coin"),u=a("main-cookie-reward"),d=a("dataTs"),h=a("enumConfig"),f=a("GameManager");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.coinNumLabel=null,t.flyCoinNode=null,t.topCoinNode=null,t.cookieReward=null,t.moneyData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(g,l=cc.Component),g.prototype.start=function(){cc.game.on(h.EMITKEY.MAINUPDATEUI,this.setMainLayerData,this),this.setMainLayerData()},g.prototype.setMainLayerData=function(){console.log("topUiLayer MAINUPDATEUI");var t=d.default.getUserData();f.default.getInstance().moneyDict,f.default.getInstance().cookieDict,this.coinNumLabel.string=t.coin+"",this.checkCoinOrFish()},g.prototype.getFlyTime=function(t,e,o){return Math.sqrt((o.x-e.x)*(o.x-e.x)+(o.y-e.y)*(o.y-e.y))/t},g.prototype.updatenNumberAnim=function(t,e,o){var n={num:e},a=t.getComponent(cc.Label);a.string=n.num+"",console.log((o-e)/10),1<(e=o-e<10?.3:(o-e)/10*.3)&&(e=1),cc.tween(n).to(e,{num:o},{progress:function(t,e,o,n){return a.string=Math.ceil(t+(e-t)*n)+"",t+(e-t)*n}}).start()},g.prototype.checkCoinOrFish=function(){console.log("checkCoinOrFish moneyDict",f.default.getInstance().moneyDict),console.log("checkCoinOrFish cookieDict",f.default.getInstance().cookieDict),this.moneyData=f.default.getInstance().moneyDict;var t=this.moneyData.coin,e=(this.moneyData.fish,f.default.getInstance().cookieDict.cookie),o=d.default.getUserData();this.coinNumLabel.string=o.coin-t+"",0<t?this.flyCoinFunc():0<e&&this.flyCookieFunc()},g.prototype.flyCoinFunc=function(){console.log("flyCoinFunc"),cc.game.emit(h.EMITKEY.SHOWMASKLAYER,7);var t=this,e={firstCallBack:function(){console.log("\u91d1\u5e01\u5f00\u59cb\u98de\u884c");var e=f.default.getInstance().moneyDict.coin,o=d.default.getUserData();t.updatenNumberAnim(t.coinNumLabel.node,o.coin-e,o.coin)},callBack:function(){console.log("\u91d1\u5e01\u98de\u884c\u7ed3\u675f"),f.default.getInstance().moneyDict.coin=0,t.flyCoinNode.active=!1,cc.game.emit(h.EMITKEY.HIDEMASKLAYER,12),0<f.default.getInstance().cookieDict.cookie&&t.flyCookieFunc()}};this.flyCoinNode.active=!0,this.flyCoinNode.getComponent(p.default).flyTo(this.topCoinNode,e)},g.prototype.flyCookieFunc=function(){d.default.getUserData().playLevelId<17||(console.log("flyCookieFunc"),cc.game.emit(h.EMITKEY.SHOWMASKLAYER,7),this.cookieReward.getComponent(u.default).checkCookie(function(){cc.game.emit(h.EMITKEY.HIDEMASKLAYER,12),console.log("\u83b7\u53d6\u997c\u5e72\u52a8\u753b\u5b8c\u6bd5 ###")}))},g.prototype.getWorldPosition=function(t){return t.convertToWorldSpaceAR(cc.v2(0,0))},g.prototype.getNodePosition=function(t,e){return t.convertToNodeSpaceAR(e)},s([i(cc.Label)],g.prototype,"coinNumLabel",void 0),s([i(cc.Node)],g.prototype,"flyCoinNode",void 0),s([i(cc.Node)],g.prototype,"topCoinNode",void 0),s([i(cc.Node)],g.prototype,"cookieReward",void 0),a=s([a],g),r.default=a,cc._RF.pop()},{}],"topic-card-node":[function(t,e,o){"use strict";cc._RF.push(e,"1be56R1zVlJqa9MONuCRdDg","topic-card-node");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.iconHeader=null,t.purpleNode=null,t.blueNode=null,t.nickNameNode=null,t.cityNode=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(u,l=cc.Component),u.prototype.start=function(){},u.prototype.showData=function(t){var e=this;t?(this.node.stopAllActions(),this.node.active=!0,cc.tween(this.node).delay(3).call(function(){e.node.active=!1},this).start(),t.gender&&1!=t.gender&&2==t.gender?(this.purpleNode.active=!0,this.blueNode.active=!1):(this.purpleNode.active=!1,this.blueNode.active=!0),t.nick_name?this.nickNameNode.getComponent(cc.Label).string=t.nick_name:this.nickNameNode.getComponent(cc.Label).string="",t.city?this.cityNode.getComponent(cc.Label).string=t.city:this.cityNode.getComponent(cc.Label).string="",p.default.setAvatar(this.iconHeader,t.avatar)):this.node.active=!1},s([i(cc.Node)],u.prototype,"iconHeader",void 0),s([i(cc.Node)],u.prototype,"purpleNode",void 0),s([i(cc.Node)],u.prototype,"blueNode",void 0),s([i(cc.Node)],u.prototype,"nickNameNode",void 0),s([i(cc.Node)],u.prototype,"cityNode",void 0),a=s([a],u),r.default=a,cc._RF.pop()},{}],"topic-header-node":[function(t,e,o){"use strict";cc._RF.push(e,"bf959UaKZ5L25ZRO1LSyISJ","topic-header-node");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("api-sheep"),u=a("CcJsFunc"),d=a("dataTs");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.manHeader=null,t.womanHeader=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){},h.prototype.showData=function(t){var e=this;this.womanHeader.opacity=0,this.manHeader.opacity=255,t==d.default.getUserData().userID?p.default.getTopicUserInfo(t,function(t){0==t.err_code&&t.data&&t.data.user&&u.default.setAvatar(e.manHeader,t.data.user.avatar)}):(t="localHeader/header_"+u.default.randomNum(1,200),u.default.changeSpriteFrame(this.manHeader,t))},s([i(cc.Node)],h.prototype,"manHeader",void 0),s([i(cc.Node)],h.prototype,"womanHeader",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],"topic-rank":[function(t,e,o){"use strict";cc._RF.push(e,"e59f1N9al1CCKpf6SOs72TQ","topic-rank");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(r,"__esModule",{value:!0});var u,d=a("api-sheep"),h=a("CcJsFunc"),f=a("dataTs"),g=a("spine"),y=a("data-manager"),m=a("GameManager"),v=a("ScrollMsg"),b=a("topic-sheep-node"),N=a("topic-header-node"),_=a("topic-card-node"),w=a("enumConfig"),C=a("report-common");function P(){var t=null!==u&&u.apply(this,arguments)||this;return t.topicUI=null,t.tombScrollPrefabs=null,t.tombScroll=null,t.tombScrollMsg=null,t.toaistScroll=null,t.toaistScrollMsg=null,t.BGSP=null,t.tombSP=null,t.toaistSP=null,t.spotSP=null,t.DJSP=null,t.tombDeadLabel=null,t.taoistDeadLabel=null,t.sheepNodeBase=null,t.sheepNode=null,t.cardNodePrefab=null,t.cardNode=null,t.headerNodeBase=null,t.headerNode=null,t.marginH=0,t.boundBox=null,t.sheepArray=[],t.isMoving=!1,t.topicRankModel=null,t.userIdx=0,t.userID=null,t.scrollToPosition=!1,t.contentY=0,t.curSheepNode=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(P,u=cc.Component),P.prototype.start=function(){var t=this,e=this;cc.game.on(w.EMITKEY.TOPICPOSITION,this.topicPositionFunc,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){t=t.touch.getDelta(),e.moveActionFunc(t.y)}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){t=t.touch.getDelta(),e.moveActionEndFunc(t.y)}),this.tombScrollMsg=cc.instantiate(this.tombScrollPrefabs),this.tombScroll.addChild(this.tombScrollMsg),this.toaistScrollMsg=cc.instantiate(this.tombScrollPrefabs),this.toaistScroll.addChild(this.toaistScrollMsg),setTimeout(function(){t.boundBox=cc.rect(0,0,cc.winSize.width,cc.winSize.height)},100),this.cardNode=cc.instantiate(this.cardNodePrefab),this.node.addChild(this.cardNode),this.cardNode.opacity=0},P.prototype.topicPositionFunc=function(){var t=this;this.node.stopAllActions(),this.scrollToPosition=!0;var e=.3*this.userIdx;2<=(e=0==e?.5:e)&&(e=2);var o=4<this.userIdx?100*(this.userIdx-5):0;cc.tween(this.node).to(e,{y:this.contentY-o},{easing:cc.easing.cubicOut}).call(function(){var e;t.scrollToPosition=!1,t.curSheepNode&&(1==m.default.getInstance().game_over?(m.default.getInstance().game_over=0,t.curSheepNode.getComponent(b.default).playFlashAnimation()):(e=t.curSheepNode.getComponent(b.default).getUserID(),d.default.getTopicUserInfo(e,function(e){0==e.err_code&&e.data&&e.data.user&&t.showCardNode(t.curSheepNode.x,t.curSheepNode.y+150,e.data.user)})))},this).start()},P.prototype.onEnable=function(){this.requestData()},P.prototype.onDisable=function(){var t;this.topicRankModel&&(t={a_team_win:this.topicRankModel.tomb.length,b_team_win:this.topicRankModel.taoist.length,a_team_fail:this.topicRankModel.tomb_fail_member,b_team_fail:this.topicRankModel.taoist_fail_member},C.default.reportTACommon("topic_team",t))},P.prototype.requestData=function(){return l(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return t=this,0<m.default.getInstance().game_over?[4,d.default.getTopicData(function(){})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[4,d.default.topicRankInfo(function(e){t.topicRankModel=e.data})];case 3:return e.sent(),y.default.topicModel&&y.default.topicModel.info&&0!=y.default.topicModel.info.type||d.default.getTopicData(function(){}),this.setupSubviews(),[2]}})})},P.prototype.setupSubviews=function(){var t,e,o,n,a=this,i=this;this.topicRankModel&&(t=this.topicRankModel.tomb,e=this.topicRankModel.taoist||[],o=((t=t||[]).length>=e.length?t:e).length,n=(cc.winSize.height-cc.winSize.width)/2,this.node.height=cc.winSize.height+100*Math.floor(o/3),this.node.height<1.5*cc.winSize.height&&(this.node.height=1.5*cc.winSize.height),this.marginH=(this.node.height-cc.winSize.height)/2,this.node.y=this.marginH,this.contentY=this.node.y,console.log("\u6392\u884c\u699c\u9ad8\u5ea6 = ",this.node.height,n,this.marginH),this.setupSheep(t,e),this.tombDeadLabel.string=y.default.topicRankInfo.tomb_fail_member,this.taoistDeadLabel.string=y.default.topicRankInfo.taoist_fail_member,setTimeout(function(){var o;a.tombScrollMsg&&a.toaistScrollMsg&&(o="\u4eca\u65e5\u6311\u6218 "+(y.default.topicRankInfo.tomb_fail_member+t.length)+" \u7f8a\uff0c\u901a\u5173 "+t.length+" \u7f8a",i.tombScrollMsg.getComponent(v.default).showMsg({msg:o}),o="\u4eca\u65e5\u6311\u6218 "+(y.default.topicRankInfo.taoist_fail_member+e.length)+" \u7f8a\uff0c\u901a\u5173 "+e.length+" \u7f8a",i.toaistScrollMsg.getComponent(v.default).showMsg({msg:o}))},1e3),1==m.default.getInstance().game_over&&(n=500<=t.length||500<=e.length?2:1,setTimeout(function(){a.scrollToPosition=!0,a.topicPositionFunc()},1e3*n)))},P.prototype.setAnimationSub=function(t,e){this.BGSP.getComponent(g.default).play("Stage2",0),this.spotSP.getComponent(g.default).play("0Spotlight",0),e=t.length>=e.length?"sheep/DJ1":"sheep/DJ2",1==y.default.topicModel.id?this.playDJAnimation(e,"The01","Jump2"):2==y.default.topicModel.id?this.playDJAnimation(e,"The02","Jump2"):3==y.default.topicModel.id?this.playDJAnimation(e,"The03","Jump2"):this.playDJAnimation(e,"00","Jump2"),e=y.default.getJudgeAnimation(y.default.topicModel.id,!0,!1),this.playTombAnimation(e.spName,e.anim),e=y.default.getJudgeAnimation(y.default.topicModel.id,!1,!0),this.playTaoistAnimation(e.spName,e.anim)},P.prototype.playDJAnimation=function(t,e,o){var n=this;this.DJSP.zIndex=10,this.DJSP.getComponent(g.default).loadSpine(t,function(){n.DJSP.getComponent(g.default).setNewSkin(e),n.DJSP.getComponent(g.default).play(o,0)})},P.prototype.playTombAnimation=function(t,e){var o=this;this.tombSP.getComponent(g.default).loadSpine(t,function(){o.tombSP.getComponent(g.default).play(e,0)})},P.prototype.playTaoistAnimation=function(t,e){var o=this;this.toaistSP.getComponent(g.default).loadSpine(t,function(){o.toaistSP.getComponent(g.default).play(e,0)})},P.prototype.setupSheep=function(t,e){var o,n=this;for(o in this.sheepArray)this.sheepArray[o].destroy();this.sheepArray=[],this.userID=f.default.getUserData().userID;for(var a=0;a<t.length;a++)!function(o){setTimeout(function(){n.createSheepNode(o,t,e,!0)},+o)}(a);for(a=0;a<e.length;a++)!function(o){setTimeout(function(){n.createSheepNode(o,t,e,!1)},+o)}(a);setTimeout(function(){n.showOrHide()},300),this.setAnimationSub(t,e)},P.prototype.createSheepNode=function(t,e,o,n){var a,i,r,c,s,l;300<t||(a=this,(i=cc.instantiate(this.sheepNode)).opacity=0,this.sheepNodeBase.addChild(i),this.sheepArray.push(i),r=Math.floor(t/3),c=Math.floor(t%3),s=-this.marginH-cc.winSize.height/2+550+90*r,l=r%2==0?-cc.winSize.width/2+100*c+100:-cc.winSize.width/2+100*c+80,i.x=l*=n?1:-1,i.y=s,i.scaleX=n?1:-1,i.setSiblingIndex(3*r),(t=(n?e:o)[t])==this.userID&&(this.userIdx=r,this.curSheepNode=i,1==m.default.getInstance().game_over&&this.curSheepNode&&(this.curSheepNode.active=!1),console.log("\u627e\u5230\u4e86\u7528\u6237id ###### taoistData ",t,r)),i.getComponent(b.default).showData(t,n,function(t){a.showCardNode(i.x,i.y+150,t)}),(n=cc.instantiate(this.headerNode)).opacity=0,n.x=l,n.y=s,this.headerNodeBase.addChild(n),this.sheepArray.push(n),n.getComponent(N.default).showData(t))},P.prototype.showCardNode=function(t,e,o){var n=this;this.cardNode.stopAllActions(),this.cardNode.x=t,this.cardNode.y=e,this.cardNode.getComponent(_.default).showData(o),cc.tween(this.cardNode).to(0,{opacity:255}).delay(2).call(function(){n.cardNode.opacity=0}).start()},P.prototype.moveActionFunc=function(t){this.node.height<cc.winSize.height||(this.node.y+=t,this.node.y>=this.marginH?this.node.y=this.marginH:this.node.y<=-this.marginH&&(this.node.y=-this.marginH),this.isMoving=!0)},P.prototype.moveActionEndFunc=function(){this.isMoving=!1},P.prototype.update=function(){(this.isMoving||this.scrollToPosition)&&this.showOrHide()},P.prototype.showOrHide=function(){for(var t=0;t<this.sheepArray.length;t++){var e=this.sheepArray[t],o=h.default.getWorldPosition(e);this.boundBox&&this.boundBox.contains(o)?e.opacity=255:e.opacity=0}},s([i({type:cc.Node,tooltip:"UI\u7236\u5c42\u7ea7"})],P.prototype,"topicUI",void 0),s([i({type:cc.Prefab,tooltip:"\u8dd1\u9a6c\u706f\u9884\u5236\u4f53"})],P.prototype,"tombScrollPrefabs",void 0),s([i({type:cc.Node,tooltip:"\u8dd1\u9a6c\u706fbase"})],P.prototype,"tombScroll",void 0),s([i({type:cc.Node,tooltip:"\u8dd1\u9a6c\u706fbase"})],P.prototype,"toaistScroll",void 0),s([i({type:cc.Node,tooltip:"\u80cc\u666f\u52a8\u753b"})],P.prototype,"BGSP",void 0),s([i({type:cc.Node,tooltip:"\u575f\u5893\u52a8\u753b"})],P.prototype,"tombSP",void 0),s([i({type:cc.Node,tooltip:"\u9053\u58eb\u52a8\u753b"})],P.prototype,"toaistSP",void 0),s([i({type:cc.Node,tooltip:"\u706f\u5149\u52a8\u753b"})],P.prototype,"spotSP",void 0),s([i({type:cc.Node,tooltip:"\u8e66\u8fea"})],P.prototype,"DJSP",void 0),s([i({type:cc.Label,tooltip:"\u50f5\u5c38\u6b7b\u4ea1\u6570\u91cf"})],P.prototype,"tombDeadLabel",void 0),s([i({type:cc.Label,tooltip:"\u9053\u58eb\u6b7b\u4ea1\u6570\u91cf"})],P.prototype,"taoistDeadLabel",void 0),s([i({type:cc.Node,tooltip:"\u7f8a\u6a21\u578b\u7236\u89c6\u56fe"})],P.prototype,"sheepNodeBase",void 0),s([i({type:cc.Prefab,tooltip:"\u7f8a\u6a21\u578b"})],P.prototype,"sheepNode",void 0),s([i({type:cc.Prefab,tooltip:"\u540d\u7247"})],P.prototype,"cardNodePrefab",void 0),s([i({type:cc.Node,tooltip:"\u5934\u50cf\u6a21\u578b\u7236\u89c6\u56fe"})],P.prototype,"headerNodeBase",void 0),s([i({type:cc.Prefab,tooltip:"\u5934\u50cf"})],P.prototype,"headerNode",void 0),a=s([a],P),r.default=a,cc._RF.pop()},{}],"topic-sheep-node":[function(t,e,o){"use strict";cc._RF.push(e,"f08acs7KTtK6rQhXCkhnzFG","topic-sheep-node");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("api-sheep"),u=a("CcJsFunc"),d=a("dataTs"),h=a("spine"),f=a("data-manager");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.flashNode=null,t.sheepSp=null,t.clickNode=null,t.userID=0,t.clickCallback=null,t.userData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(g,l=cc.Component),g.prototype.start=function(){u.default.addTargetTouchUpInside(this.clickNode,this.clickNodeFunc.bind(this))},g.prototype.clickNodeFunc=function(){var t=this;this.userData?t.clickCallback&&t.clickCallback(this.userData):p.default.getTopicUserInfo(this.userID,function(e){0==e.err_code&&e.data&&e.data.user&&(t.userData=e.data.user,t.clickCallback&&t.clickCallback(e.data.user))})},g.prototype.getUserID=function(){return this.userID},g.prototype.playFlashAnimation=function(){var t=this;this.node.active=!0,this.sheepSp.getComponent(h.default).play("Drop1",1,function(){t.flashNode.active=!0,t.flashNode.getComponent(h.default).play("3Ray1",1,function(){t.flashNode.active=!1,d.default.isPlatform(d.GDPlatform.tt)&&t.showSharePop()}),t.sheepSp.getComponent(h.default).play("Jump3",0)})},g.prototype.showSharePop=function(){cc.game.emit("showPop",{popName:"shareNodePop",showPopData:{type:1}})},g.prototype.showData=function(t,e,o){var n;this.userID=t,this.clickCallback=o,f.default.topicModel&&(e?(n=f.default.getTopicAnimation(f.default.topicModel.id,!0,!1),this.playTomb(n.spName,n.skin,"Jump3")):(n=f.default.getTopicAnimation(f.default.topicModel.id,!1,!0),this.playTaoist(n.spName,n.skin,"Jump3")))},g.prototype.playTomb=function(t,e,o){var n=this;this.sheepSp.getComponent(h.default).loadSpine(t,function(){n.sheepSp.getComponent(h.default).setNewSkin(e),n.sheepSp.getComponent(h.default).play(o,0)})},g.prototype.playTaoist=function(t,e,o){var n=this;this.sheepSp.getComponent(h.default).loadSpine(t,function(){n.sheepSp.getComponent(h.default).setNewSkin(e),n.sheepSp.getComponent(h.default).play(o,0)})},s([i(cc.Node)],g.prototype,"flashNode",void 0),s([i(cc.Node)],g.prototype,"sheepSp",void 0),s([i(cc.Node)],g.prototype,"clickNode",void 0),a=s([a],g),r.default=a,cc._RF.pop()},{}],"topic-ui-layer":[function(t,e,o){"use strict";cc._RF.push(e,"41174iuu2NIQJJDkdlO9Oyh","topic-ui-layer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("enumConfig"),d=a("audio"),h=a("util"),f=a("data-manager"),g=a("DateManager"),y=a("GameManager");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.pointBtn=null,t.settingBtn=null,t.backBtn=null,t.playBtn=null,t.locationBtn=null,t.timeNode=null,t.timeLabel=null,t.tombLabel=null,t.taoistLabel=null,t.tombNumLabel=null,t.taoistNumLabel=null,t.vsProgress=null,t.beginButtonDuration=0,t.updateTime=0,t}a=(i=cc._decorator).ccclass,i=i.property,c(m,l=cc.Component),m.prototype.start=function(){cc.game.on(u.EMITKEY.TOPICACCOUNT,this.topicAccountFunc,this),cc.game.on(u.EMITKEY.TOPICRANKINFO,this.topicRankInfoFunc,this),p.default.addTargetTouchUpInside(this.pointBtn,this.pointBtnFunc.bind(this)),p.default.addTargetTouchUpInside(this.settingBtn,this.settingBtnFunc.bind(this)),p.default.addTargetTouchUpInside(this.backBtn,this.backBtnFunc.bind(this)),p.default.addTargetTouchUpInside(this.playBtn,this.playBtnFunc.bind(this)),p.default.addTargetTouchUpInside(this.locationBtn,this.locationBtnFunc.bind(this)),this.updateTimeFunc()},m.prototype.onEnable=function(){this.topicAccountFunc(),this.topicRankInfoFunc()},m.prototype.topicAccountFunc=function(){var t;console.log("TOPICACCOUNT \u901a\u77e5 = ",JSON.stringify(f.default.topicModel)),f.default.topicModel&&(this.timeNode.active=!1,(t=f.default.topicModel.name.split("#")).length<2||(this.tombLabel.string=t[0],this.taoistLabel.string=t[1]))},m.prototype.topicRankInfoFunc=function(){var t,e,o;console.log("TOPICRANKINFO \u901a\u77e5 ######"),f.default.topicRankInfo&&(t=f.default.topicRankInfo.tomb||[],e=f.default.topicRankInfo.taoist||[],console.log("topicRankInfoFunc ",t.length,"---",e.length),this.tombNumLabel.string=t.length+"\u7f8a",this.taoistNumLabel.string=e.length+"\u7f8a",t.length==e.length?(this.tombLabel.fontSize=90,this.taoistLabel.fontSize=90):t.length>e.length?(this.tombLabel.fontSize=90,this.taoistLabel.fontSize=60):(this.tombLabel.fontSize=60,this.taoistLabel.fontSize=90),0==t.length&&0==e.length?this.vsProgress.fillStart=.5:0==t.length?this.vsProgress.fillStart=0:0==e.length?this.vsProgress.fillStart=1:0<t.length&&0<e.length&&(o=t.length/(t.length+e.length),this.vsProgress.fillStart=o),this.locationBtn.active=!1,e=this.playBtn.getChildByName("label").getComponent(cc.Label),o=this.isWin(),console.log("winNum ###### = ",o),1==o?(e.string="\u5df2\u52a0\u5165\u7f8a\u7fa4",this.timeNode.active=!0,this.locationBtn.active=!0):e.string=0==o?"\u518d\u6b21\u6311\u6218":"\u52a0\u5165\u7f8a\u7fa4")},m.prototype.isWin=function(){if(f.default.topicModel&&f.default.topicModel.info){if(1==f.default.topicModel.info.state)return 1;if(2==f.default.topicModel.info.state)return 0}return-1},m.prototype.pointBtnFunc=function(){console.log("\u63d0\u793a"),this.showChoosePop(1)},m.prototype.settingBtnFunc=function(){console.log("\u8bbe\u7f6e"),cc.game.emit("showPop",{popName:"setupPop",showPopData:{}})},m.prototype.backBtnFunc=function(){console.log("\u8fd4\u56de"),cc.game.emit(u.EMITKEY.SHOWTRANSITLAYER,function(){cc.game.emit(u.EMITKEY.SHOWMODULE,u.MODULETYPE.COMMON)})},m.prototype.playBtnFunc=function(){console.log("\u5f00\u59cb\u6e38\u620f"),this.chooseCallbackFunc()},m.prototype.showChoosePop=function(t){t={popName:"topicChoosePop",showPopData:{type:t,chooseCallback:this.chooseCallbackFunc.bind(this)}},cc.game.emit("showPop",t)},m.prototype.chooseCallbackFunc=function(){var t;1<=this.beginButtonDuration?(this.beginButtonDuration=0,t=this.isWin(),console.log("winNum ###### = ",t),1!=t?(y.default.setGameType(u.GAMETYPE.GAMETOPIC),d.default.playBGM(),cc.game.emit(u.EMITKEY.BEGINGAME)):cc.game.emit(u.EMITKEY.SHOWMAINTIPS,"\u6bcf\u65e5\u4e00\u5173\uff0c\u4eca\u5929\u5df2\u6311\u6218\u6210\u529f")):console.log("\u4e0d\u80fd\u8fde\u7eed\u70b9\u51fb")},m.prototype.locationBtnFunc=function(){console.log("\u5b9a\u4f4d"),cc.game.emit(u.EMITKEY.TOPICPOSITION)},m.prototype.update=function(t){this.beginButtonDuration+=t,this.updateTime+=t,1<=this.updateTime&&(this.updateTime=0,this.updateTimeFunc())},m.prototype.updateTimeFunc=function(){var t=g.default.format(u.CALENDARNAMES[8],new Date).split(" ");t.length<2||(t=t[1].split(":")).length<3||(t=3600*(24-Number(t[0])-1)+60*(60-Number(t[1])-1)+(60-Number(t[2])),this.timeNode.activeInHierarchy&&(t=((t=h.default.formatTime(1e3*t))[1]<10?"0"+t[1]:t[1])+":"+(t[2]<10?"0"+t[2]:t[2])+":"+(t[3]<10?"0"+t[3]:t[3])+" \u91cd\u7f6e",this.timeLabel.string=t))},s([i({type:cc.Node,tooltip:"\u63d0\u793a"})],m.prototype,"pointBtn",void 0),s([i({type:cc.Node,tooltip:"\u8bbe\u7f6e"})],m.prototype,"settingBtn",void 0),s([i({type:cc.Node,tooltip:"\u8fd4\u56de"})],m.prototype,"backBtn",void 0),s([i({type:cc.Node,tooltip:"\u5f00\u59cb\u6e38\u620f"})],m.prototype,"playBtn",void 0),s([i({type:cc.Node,tooltip:"\u5b9a\u4f4d"})],m.prototype,"locationBtn",void 0),s([i({type:cc.Node,tooltip:"\u5012\u8ba1\u65f6"})],m.prototype,"timeNode",void 0),s([i({type:cc.Label,tooltip:"\u5012\u8ba1\u65f6"})],m.prototype,"timeLabel",void 0),s([i({type:cc.Label,tooltip:"\u50f5\u5c38"})],m.prototype,"tombLabel",void 0),s([i({type:cc.Label,tooltip:"\u9053\u58eb"})],m.prototype,"taoistLabel",void 0),s([i({type:cc.Label,tooltip:"\u50f5\u5c38\u6570\u91cf"})],m.prototype,"tombNumLabel",void 0),s([i({type:cc.Label,tooltip:"\u9053\u58eb\u6570\u91cf"})],m.prototype,"taoistNumLabel",void 0),s([i({type:cc.Sprite,tooltip:"vs\u8fdb\u5ea6"})],m.prototype,"vsProgress",void 0),a=s([a],m),r.default=a,cc._RF.pop()},{}],"topic-ui":[function(t,e,o){"use strict";cc._RF.push(e,"8fa33VO+JBKg6ZJbHIXKnoL","topic-ui");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("dataTs"),u=a("enumConfig"),d=a("audio"),h=a("GameManager");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.rankNode=null,t.uiLayer=null,t.beginBGM=!1,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.onEnable=function(){h.default.setGameType(u.GAMETYPE.GAMETOMB),this.playGameBgMusic()},f.prototype.start=function(){},f.prototype.playGameBgMusic=function(){var t;p.default.getUserSetupData().musicStatus<0?cc.audioEngine.stopAll():0==this.beginBGM?(t=this,cc.loader.loadRes("audio/music/game_begin.mp3",function(e,o){o=cc.audioEngine.playMusic(o,!1),cc.audioEngine.getCurrentTime(o),cc.audioEngine.getDuration(o),cc.audioEngine.setFinishCallback(o,function(){t.beginBGM=!0,console.log("\u64ad\u653e\u5b8c\u6210\u8fdb\u573a\u97f3\u4e50 ###### "),t.playBg()})})):this.playBg()},f.prototype.playBg=function(){d.default.playBGM()},s([i({type:cc.Node,tooltip:"\u6392\u884c\u699c"})],f.prototype,"rankNode",void 0),s([i({type:cc.Node,tooltip:"UI"})],f.prototype,"uiLayer",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],topicChoosePop:[function(t,e,o){"use strict";cc._RF.push(e,"db225EuZZ1H86t8bfP+ErU1","topicChoosePop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("api-sheep"),u=a("CcJsFunc"),d=a("dataTs"),h=a("enumConfig"),f=a("sdk"),g=a("spine"),y=a("util"),m=a("data-manager"),v=a("DateManager");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.titleNode=null,t.closeBtn=null,t.yellowNode=null,t.redNode=null,t.yellowBtn=null,t.redBtn=null,t.timeNode=null,t.chooseBtn=null,t.chooseVideo=null,t.chooseLabel=null,t.noChooseBtn=null,t.giveupBtn=null,t.tombName=null,t.taoistName=null,t.tombSP=null,t.taoistSP=null,t.timeLabel=null,t.popData=null,t.topicType=0,t.updateTime=0,t}a=(i=cc._decorator).ccclass,i=i.property,c(b,l=cc.Component),b.prototype.start=function(){u.default.addTargetTouchUpInside(this.closeBtn,this.closeBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.yellowNode,this.yellowNodeFunc.bind(this)),u.default.addTargetTouchUpInside(this.redNode,this.redNodeFunc.bind(this)),u.default.addTargetTouchUpInside(this.chooseBtn,this.chooseBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.giveupBtn,this.giveupBtnFunc.bind(this))},b.prototype.closeBtnFunc=function(){this.node.active=!1},b.prototype.yellowNodeFunc=function(){this.topicType=1,console.log("topicType = ",this.topicType),this.popData&&1==this.popData.type||this.exchangeUI(!0)},b.prototype.redNodeFunc=function(){this.topicType=2,console.log("topicType = ",this.topicType),this.popData&&1==this.popData.type||this.exchangeUI(!1)},b.prototype.exchangeUI=function(t,e){var o,n;void 0===e&&(e=!1),this.noChooseBtn.active=!1,m.default.topicModel&&m.default.topicModel.name&&((o=m.default.topicModel.name.split("#")).length<2||(this.yellowBtn.active=!0,this.redBtn.active=!0,t?(this.chooseLabel.string="\u52a0\u5165"+o[0]+"\u7f8a",this.yellowNode.getChildByName("choose").active=!0,this.redNode.getChildByName("choose").active=!1,this.yellowBtn.getChildByName("name").color=(new cc.Color).fromHEX("#FBE547"),this.redBtn.getChildByName("name").color=(new cc.Color).fromHEX("#FFFFFF"),this.redBtn.getChildByName("name").getComponent(cc.Label).string="\u9009\u62e9",this.redBtn.active=!e,n=e?"\u5df2\u52a0\u5165":"\u5df2\u9009\u62e9",this.yellowBtn.getChildByName("name").getComponent(cc.Label).string=n):(this.chooseLabel.string="\u52a0\u5165"+o[1]+"\u7f8a",this.yellowNode.getChildByName("choose").active=!1,this.redNode.getChildByName("choose").active=!0,this.yellowBtn.getChildByName("name").color=(new cc.Color).fromHEX("#FFFFFF"),this.redBtn.getChildByName("name").color=(new cc.Color).fromHEX("#FBE547"),this.yellowBtn.getChildByName("name").getComponent(cc.Label).string="\u9009\u62e9",this.yellowBtn.active=!e,n=e?"\u5df2\u52a0\u5165":"\u5df2\u9009\u62e9",this.redBtn.getChildByName("name").getComponent(cc.Label).string=n)))},b.prototype.chooseBtnFunc=function(){if(0==this.topicType){if(this.yellowBtn.stopAllActions(),this.redBtn.stopAllActions(),cc.tween(this.yellowBtn).to(.2,{scale:1.5}).to(.2,{scale:1}).start(),cc.tween(this.redBtn).to(.2,{scale:1.5}).to(.2,{scale:1}).start(),!m.default.topicModel)return void cc.game.emit(h.EMITKEY.SHOWMAINTIPS,"\u8bf7\u9009\u62e9\u4f60\u7684\u9635\u8425");m.default.topicModel.tomb<m.default.topicModel.taoist?this.topicType=1:m.default.topicModel.tomb>m.default.topicModel.taoist?this.topicType=2:this.topicType=u.default.randomNum(1,2)}var t,e,o;1!=m.default.todayIsWin()?(t=this,f.default.isPlatform(f.Platform.wx)?(e=d.default.GetVedioID(),o=d.default.getUserData().openid,f.default.share(o,e,function(){t.addTopicMethod()},function(){cc.game.emit(h.EMITKEY.SHOWMAINTIPS,"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5fae\u4fe1\u7fa4\u4e0e\u597d\u53cbPK")})):f.default.watchAdVideo({id:d.default.GetVedioID(),success:function(){console.log("\u89c6\u9891\u64ad\u653e\u6210\u529f ###### "),t.addTopicMethod()},fail:function(){console.log("\u5931\u8d25")},nofit:function(){}})):this.addTopicMethod()},b.prototype.addTopicMethod=function(){this.requestData(),this.node.active=!1,this.popData&&this.popData.chooseCallback&&this.popData.chooseCallback()},b.prototype.requestData=function(){var t={type:this.topicType};console.log("\u52a0\u5165\u8bdd\u9898\u53c2\u6570 = ",t),p.default.joinTopic(t,function(){console.log("\u52a0\u5165\u8bdd\u9898\u6210\u529f ######")})},b.prototype.giveupBtnFunc=function(){this.node.active=!1},b.prototype.showPop=function(t){this.node.active=!0,this.popData=t,this.topicType=0,this.yellowBtn.active=!0,this.redBtn.active=!0;var e=m.default.todayIsWin();this.chooseVideo.active=1!=e,d.default.isPlatform(d.GDPlatform.wx)&&u.default.changeSpriteFrame(this.chooseVideo,"rewardIcon/reward_share_white.png"),m.default.topicModel&&m.default.topicModel.name&&(2<=(e=m.default.topicModel.name.split("#")).length&&(this.tombName.string=e[0],this.taoistName.string=e[1]),e=m.default.getTopicAnimation(m.default.topicModel.id,!0,!1),this.playTomb(e.spName,e.skin,"Jump1"),e=m.default.getTopicAnimation(m.default.topicModel.id,!1,!0),this.playTaoist(e.spName,e.skin,"Jump1")),this.yellowNode.getChildByName("choose").active=!1,this.redNode.getChildByName("choose").active=!1,this.yellowBtn.getChildByName("name").color=(new cc.Color).fromHEX("#FFFFFF"),this.redBtn.getChildByName("name").color=(new cc.Color).fromHEX("#FFFFFF"),this.noChooseBtn.active=!1,this.chooseLabel.string="\u52a0\u5165\u5bf9\u6297",cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),0==t.type?(this.chooseBtn.active=!0,this.giveupBtn.active=!0,this.yellowBtn.getChildByName("name").getComponent(cc.Label).string="\u9009\u62e9",this.redBtn.getChildByName("name").getComponent(cc.Label).string="\u9009\u62e9",this.titleNode.getComponent(cc.Label).string="\u9009\u62e9\u7f8a\u961f"):1==t.type&&(this.chooseBtn.active=!1,this.giveupBtn.active=!1,this.titleNode.getComponent(cc.Label).string="\u4eca\u65e5\u8bdd\u9898",m.default.topicModel&&m.default.topicModel.info&&(1==m.default.topicModel.info.type?this.exchangeUI(!0,!0):this.exchangeUI(!1,!0))),this.updateTimeFunc()},b.prototype.playTomb=function(t,e,o){var n=this;this.tombSP.getComponent(g.default).loadSpine(t,function(){n.tombSP.getComponent(g.default).setNewSkin(e),n.tombSP.getComponent(g.default).play(o,0)})},b.prototype.playTaoist=function(t,e,o){var n=this;this.taoistSP.getComponent(g.default).loadSpine(t,function(){n.taoistSP.getComponent(g.default).setNewSkin(e),n.taoistSP.getComponent(g.default).play(o,0)})},b.prototype.update=function(t){this.updateTime+=t,1<=this.updateTime&&(this.updateTime=0,this.updateTimeFunc())},b.prototype.updateTimeFunc=function(){var t=v.default.format(h.CALENDARNAMES[8],new Date).split(" ");t.length<2||(t=t[1].split(":")).length<3||(t=3600*(24-Number(t[0])-1)+60*(60-Number(t[1])-1)+(60-Number(t[2])),this.timeNode.activeInHierarchy&&(t=((t=y.default.formatTime(1e3*t))[1]<10?"0"+t[1]:t[1])+" \u5c0f\u65f6 "+(t[2]<10?"0"+t[2]:t[2])+" \u5206 "+(t[3]<10?"0"+t[3]:t[3])+" \u79d2",this.timeLabel.string=t))},s([i({type:cc.Node,tooltip:"\u5f39\u6846"})],b.prototype,"popNode",void 0),s([i({type:cc.Node,tooltip:"\u6807\u9898"})],b.prototype,"titleNode",void 0),s([i({type:cc.Node,tooltip:"\u5173\u95ed\u6309\u94ae"})],b.prototype,"closeBtn",void 0),s([i({type:cc.Node,tooltip:"\u7f8abase"})],b.prototype,"yellowNode",void 0),s([i({type:cc.Node,tooltip:"\u7f8abase"})],b.prototype,"redNode",void 0),s([i({type:cc.Node,tooltip:"\u9009\u62e9"})],b.prototype,"yellowBtn",void 0),s([i({type:cc.Node,tooltip:"\u9009\u62e9"})],b.prototype,"redBtn",void 0),s([i({type:cc.Node,tooltip:"\u5269\u4f59\u65f6\u95f4"})],b.prototype,"timeNode",void 0),s([i({type:cc.Node,tooltip:"\u9009\u62e9"})],b.prototype,"chooseBtn",void 0),s([i({type:cc.Node,tooltip:"\u89c6\u9891"})],b.prototype,"chooseVideo",void 0),s([i({type:cc.Label,tooltip:"\u63cf\u8ff0"})],b.prototype,"chooseLabel",void 0),s([i({type:cc.Node,tooltip:"\u672a\u9009\u62e9"})],b.prototype,"noChooseBtn",void 0),s([i({type:cc.Node,tooltip:"\u653e\u5f03"})],b.prototype,"giveupBtn",void 0),s([i({type:cc.Label,tooltip:"\u9635\u8425\u540d\u5b57"})],b.prototype,"tombName",void 0),s([i({type:cc.Label,tooltip:"\u9635\u8425\u540d\u5b57"})],b.prototype,"taoistName",void 0),s([i({type:cc.Node,tooltip:"\u9635\u8425\u52a8\u753b"})],b.prototype,"tombSP",void 0),s([i({type:cc.Node,tooltip:"\u9635\u8425\u52a8\u753b"})],b.prototype,"taoistSP",void 0),s([i({type:cc.Label,tooltip:"\u5012\u8ba1\u65f6"})],b.prototype,"timeLabel",void 0),a=s([a],b),r.default=a,cc._RF.pop()},{}],topicCollectPop:[function(t,e,o){"use strict";cc._RF.push(e,"9626bbOFCpLgLU2U6ganUyA","topicCollectPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r},l=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),a=0;for(e=0;e<o;e++)for(var i=arguments[e],r=0,c=i.length;r<c;r++,a++)n[a]=i[r];return n};Object.defineProperty(r,"__esModule",{value:!0});var p,u=a("CcJsFunc"),d=a("dataTs"),h=a("spine");function f(){var t=null!==p&&p.apply(this,arguments)||this;return t.popNode=null,t.closeBtn=null,t.sheepCommonBaseNode=null,t.sheepCommonNode=null,t.dressingBaseNode=null,t.dressingNode=null,t.previousBtn=null,t.sureBtn=null,t.nextBtn=null,t.indexLabel=null,t.subPop=null,t.subSheep=null,t.titleLabel=null,t.contentDesc=null,t.contentTeam=null,t.contentDefault=null,t.luckBtn=null,t.changeBtn=null,t.subCloseBtn=null,t.dataArray=[],t.labelArray=[],t.curIdx=1,t.allIdx=0,t.clothesId=0,t.popData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,p=cc.Component),f.prototype.start=function(){u.default.addTargetTouchUpInside(this.closeBtn,this.closeBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.previousBtn,this.previousBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.sureBtn,this.sureBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.nextBtn,this.nextBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.subCloseBtn,this.subCloseBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.luckBtn,this.luckBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.changeBtn,this.changeBtnFunc.bind(this))},f.prototype.luckBtnFunc=function(){this.subPop.active=!1},f.prototype.changeBtnFunc=function(){this.subPop.active=!1;var t=d.default.getSheepClothesData();if(0<this.clothesId){for(var e in t)this.clothesId==t[e].clothesId?(t[e].dressing=!0,this.popData&&this.popData.changeClothesCb&&this.popData.changeClothesCb(this.clothesId)):t[e].dressing=!1;d.default.setSheepClothesData(t),this.setupSubViews(this.curIdx)}},f.prototype.subCloseBtnFunc=function(){this.subPop.active=!1},f.prototype.closeBtnFunc=function(){this.node.active=!1},f.prototype.previousBtnFunc=function(){this.curIdx--,this.curIdx<1&&(this.curIdx=1),this.setupSubViews(this.curIdx)},f.prototype.sureBtnFunc=function(){this.node.active=!1},f.prototype.nextBtnFunc=function(){this.curIdx++,this.curIdx>this.allIdx&&(this.curIdx=this.allIdx),this.setupSubViews(this.curIdx)},f.prototype.showPop=function(t){this.node.active=!0,this.popData=t,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),this.sheepCommonNode.active=!1,this.dressingNode.active=!1,this.subPop.active=!1,this.setupSubViews(this.curIdx)},f.prototype.setupSubViews=function(t){for(var e in t<1&&(t=1),this.dataArray)(n=this.dataArray[e]).destroy();for(var e in this.labelArray)(n=this.labelArray[e]).destroy();this.dataArray=[],this.labelArray=[];var o=d.default.getSheepClothesData();o=this.bubbleSort(o),o=this.bubbleIdSort(o),this.allIdx=Math.ceil(o.length/12),this.indexLabel.string=this.curIdx+" / "+this.allIdx;for(var n,a,i,r=0;r<o.length;r++)12*(t-1)<=r&&r<12*t&&(a=o[r],(n=cc.instantiate(this.sheepCommonNode)).active=!0,this.sheepCommonBaseNode.addChild(n),this.dataArray.push(n),(i=cc.instantiate(this.dressingNode)).active=!0,this.dressingBaseNode.addChild(i),this.labelArray.push(i),u.default.addbtnTouchEndScale(n,this.itemBtnFunc.bind(this,a)),this.updateItem(n,i,a))},f.prototype.itemBtnFunc=function(t){var e=this;console.log(t),this.clothesId=t.clothesId,this.subPop.active=!0,cc.tween(this.subPop).set({scale:.8,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start();var o="sheep/"+t.spName;this.subSheep.getComponent(h.default).loadSpine(o,function(){e.subSheep.getComponent(h.default).setNewSkin(t.spSkin),t.unlock?e.subSheep.getComponent(h.default).play("Jump1",0):e.subSheep.getComponent(h.default).play("Unlock1",0)}),t.unlock?(this.luckBtn.active=!1,this.changeBtn.active=!0,this.titleLabel.string=t.name):(this.luckBtn.active=!0,this.changeBtn.active=!1,this.titleLabel.string="???"),this.contentTeam.string=this.getName(t.clothesId),this.contentDesc.string="\u5728\u8bdd\u9898\u6218                  \u4e2d\uff0c\u52a0\u5165"+t.name+"\u9635\u8425\u5e76\u83b7\u80dc\u540e\u83b7\u5f97\u3002"},f.prototype.getName=function(t){return this.contentDesc.node.active=!0,this.contentTeam.node.active=!0,this.contentDefault.node.active=!1,8==t||9==t?"\u50f5\u5c38vs\u9053\u58eb":10==t||11==t?"\u72fc\u4ebavs\u5438\u8840\u9b3c":12==t||13==t?"\u9ed1\u7f8avs\u767d\u7f8a":41==t||42==t?"\u4e94\u4ec1vs\u83b2\u84c9":43==t||44==t?"\u5b66\u751fvs\u8001\u5e08":45==t||46==t?"\u5ae6\u5a25vs\u7389\u5154":47==t||48==t?"\u5b66\u7ae5vs\u592b\u5b50":(this.contentDesc.node.active=!1,this.contentTeam.node.active=!1,this.contentDefault.node.active=!0,this.contentDefault.string=1==t?"\u9ed8\u8ba4\u88c5\u626e\u3002\u6211\u53ea\u662f\u4e00\u53ea\u5b64\u72ec\u7684\u7f8e\u7f8a\u7f8a\u3002":"\u5e38\u89c4\u6a21\u5f0f\u901a\u5173\uff0c\u6216\u8bdd\u9898PK\u4e2d\u6240\u9009\u9635\u8425\u83b7\u80dc\u540e\u83b7\u5f97\u3002","")},f.prototype.bubbleSort=function(t){for(var e,o=l(t),n=0,a=o.length;n<a;n++)for(var i=0;i<a-1-n;i++)o[i].unlock<o[i+1].unlock&&(e=[o[i+1],o[i]],o[i]=e[0],o[i+1]=e[1]);return o},f.prototype.bubbleIdSort=function(t){for(var e,o=l(t),n=0,a=o.length;n<a;n++)for(var i=0;i<a-1-n;i++)o[i].unlock<=o[i+1].unlock&&o[i].clothesId>o[i+1].clothesId&&(e=[o[i+1],o[i]],o[i]=e[0],o[i+1]=e[1]);return o},f.prototype.updateItem=function(t,e,o){var n=t.getChildByName("new"),a=t.getChildByName("SP"),i=t.getChildByName("choose");e.opacity=0,this.popData&&this.popData.topicClothesNum==o.clothesId?n.active=!0:n.active=!1,n="sheep/"+o.spName,a.getComponent(h.default).loadSpine(n,function(){a.getComponent(h.default).setNewSkin(o.spSkin),o.unlock?o.dressing?(i.active=!0,e.opacity=255,a.getComponent(h.default).play("Jump1",0)):i.active=!1:(a.getComponent(h.default).play("Unlock1",0),i.active=!1)})},s([i(cc.Node)],f.prototype,"popNode",void 0),s([i(cc.Node)],f.prototype,"closeBtn",void 0),s([i(cc.Node)],f.prototype,"sheepCommonBaseNode",void 0),s([i(cc.Node)],f.prototype,"sheepCommonNode",void 0),s([i(cc.Node)],f.prototype,"dressingBaseNode",void 0),s([i(cc.Node)],f.prototype,"dressingNode",void 0),s([i(cc.Node)],f.prototype,"previousBtn",void 0),s([i(cc.Node)],f.prototype,"sureBtn",void 0),s([i(cc.Node)],f.prototype,"nextBtn",void 0),s([i(cc.Label)],f.prototype,"indexLabel",void 0),s([i(cc.Node)],f.prototype,"subPop",void 0),s([i(cc.Node)],f.prototype,"subSheep",void 0),s([i(cc.Label)],f.prototype,"titleLabel",void 0),s([i(cc.Label)],f.prototype,"contentDesc",void 0),s([i(cc.Label)],f.prototype,"contentTeam",void 0),s([i(cc.Label)],f.prototype,"contentDefault",void 0),s([i(cc.Node)],f.prototype,"luckBtn",void 0),s([i(cc.Node)],f.prototype,"changeBtn",void 0),s([i(cc.Node)],f.prototype,"subCloseBtn",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],topicJoinedPop:[function(t,e,o){"use strict";cc._RF.push(e,"90ef543uIxHfKnKA811WqDS","topicJoinedPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("api-sheep"),u=a("CcJsFunc"),d=a("dataTs"),h=a("spine"),f=a("data-manager");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.titleLabel=null,t.tombNode=null,t.taoistNode=null,t.tombLabel=null,t.taoistLabel=null,t.teamLabel=null,t.closeBtn=null,t.sureBtn=null,t.tombSP=null,t.taoistSP=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(g,l=cc.Component),g.prototype.start=function(){u.default.addTargetTouchUpInside(this.closeBtn,this.closeBtnFunc.bind(this)),u.default.addTargetTouchUpInside(this.sureBtn,this.sureBtnBtn.bind(this))},g.prototype.closeBtnFunc=function(){this.node.active=!1},g.prototype.sureBtnBtn=function(){this.node.active=!1},g.prototype.showPop=function(){var t=this;this.node.active=!0,this.tombNode.active=!1,this.taoistNode.active=!1,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),this.updateUI(0);var e=f.default.getTopicAnimation(f.default.topicModel.id,!0,!1);this.playTomb(e.spName,e.skin,"Jump1"),e=f.default.getTopicAnimation(f.default.topicModel.id,!1,!0),this.playTaoist(e.spName,e.skin,"Jump1"),p.default.getTopicUserInfo(d.default.getUserData().userID,function(e){0==e.err_code&&e.data&&e.data.user&&(1==(e=e.data.user.type)?t.tombNode.active=!0:2==e&&(t.taoistNode.active=!0),t.updateUI(e))})},g.prototype.updateUI=function(t){var e=f.default.topicModel.name.split("#");e.length<2||(this.tombLabel.string=e[0]+"\u7f8a",this.taoistLabel.string=e[1]+"\u7f8a",this.teamLabel.string="",1==t?this.teamLabel.string=e[0]+"\u7f8a\u961f":2==t&&(this.teamLabel.string=e[1]+"\u7f8a\u961f"))},g.prototype.playTomb=function(t,e,o){var n=this;this.tombSP.getComponent(h.default).loadSpine(t,function(){n.tombSP.getComponent(h.default).setNewSkin(e),n.tombSP.getComponent(h.default).play(o,0)})},g.prototype.playTaoist=function(t,e,o){var n=this;this.taoistSP.getComponent(h.default).loadSpine(t,function(){n.taoistSP.getComponent(h.default).setNewSkin(e),n.taoistSP.getComponent(h.default).play(o,0)})},s([i(cc.Node)],g.prototype,"popNode",void 0),s([i(cc.Label)],g.prototype,"titleLabel",void 0),s([i(cc.Node)],g.prototype,"tombNode",void 0),s([i(cc.Node)],g.prototype,"taoistNode",void 0),s([i(cc.Label)],g.prototype,"tombLabel",void 0),s([i(cc.Label)],g.prototype,"taoistLabel",void 0),s([i(cc.Label)],g.prototype,"teamLabel",void 0),s([i(cc.Node)],g.prototype,"closeBtn",void 0),s([i(cc.Node)],g.prototype,"sureBtn",void 0),s([i(cc.Node)],g.prototype,"tombSP",void 0),s([i(cc.Node)],g.prototype,"taoistSP",void 0),a=s([a],g),r.default=a,cc._RF.pop()},{}],topicLastWinPop:[function(t,e,o){"use strict";cc._RF.push(e,"74b18J+qNBMbqeSpfyEZqtg","topicLastWinPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("spine"),d=a("data-manager");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.popNode=null,t.closeBtn=null,t.tombSign=null,t.taoistSign=null,t.tombNode=null,t.taoistNode=null,t.nameLabel=null,t.tombLabel=null,t.taoistLabel=null,t.tombNumLabel=null,t.taoistNumLabel=null,t.bottomNumLabel=null,t.tombProgress=null,t.taoistProgress=null,t.tombSP=null,t.taoistSP=null,t.popData=null,t.teamIsWIn=!1,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){p.default.addTargetTouchUpInside(this.closeBtn,this.closeBtnFunc.bind(this))},h.prototype.closeBtnFunc=function(){var t;this.node.active=!1,this.teamIsWIn&&(t={popName:"topicNewPop",showPopData:{type:1,data:this.popData}},cc.game.emit("showPop",t))},h.prototype.showPop=function(t){this.node.active=!0,this.popData=t,cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start(),t&&this.setupData(t)},h.prototype.setupData=function(t){var e=t.tomb,o=t.taoist,n=t.tomb_fail_member,a=t.taoist_fail_member,i=e.length,r=o.length,c=t.topic.name.split("#");e=i+r+n+a,o=i+r,n=0,a=0,i==r?this.nameLabel.string="\u8d5b\u51b5":r<i?(1==t.topic.info.type&&(this.teamIsWIn=!0),this.tombSign.active=!0,this.taoistSign.active=!1,this.nameLabel.string=c[0]+"\u7f8a\u961f\u83b7\u80dc\uff01"):(2==t.topic.info.type&&(this.teamIsWIn=!0),this.tombSign.active=!1,this.taoistSign.active=!0,this.nameLabel.string=c[1]+"\u7f8a\u961f\u83b7\u80dc\uff01"),0!=o&&(n=i/o*300,a=r/o*300),n<50&&(n=50),a<50&&(a=50),cc.tween(this.tombProgress).to(0,{height:50}).to(1.5,{height:n}).start(),cc.tween(this.taoistProgress).to(0,{height:50}).to(1.5,{height:a}).start(),this.tombNumLabel.string=i+"\u7f8a",this.taoistNumLabel.string=r+"\u7f8a",this.tombLabel.string=c[0]+"\u7f8a\u961f",this.taoistLabel.string=c[1]+"\u7f8a\u961f",this.bottomNumLabel.string=e+"",1==t.topic.info.type?(this.tombNode.active=!0,this.taoistNode.active=!1):(this.tombNode.active=!1,this.taoistNode.active=!0),e=d.default.getTopicAnimation(t.topic.id,!0,!1),this.playTomb(e.spName,e.skin,"Jump3"),t=d.default.getTopicAnimation(t.topic.id,!1,!0),this.playTaoist(t.spName,t.skin,"Jump3")},h.prototype.playTomb=function(t,e,o){var n=this;this.tombSP.getComponent(u.default).loadSpine(t,function(){n.tombSP.getComponent(u.default).setNewSkin(e),n.tombSP.getComponent(u.default).play(o,0)})},h.prototype.playTaoist=function(t,e,o){var n=this;this.taoistSP.getComponent(u.default).loadSpine(t,function(){n.taoistSP.getComponent(u.default).setNewSkin(e),n.taoistSP.getComponent(u.default).play(o,0)})},s([i({type:cc.Node,tooltip:"\u5f39\u6846"})],h.prototype,"popNode",void 0),s([i({type:cc.Node,tooltip:"\u5173\u95ed\u6309\u94ae"})],h.prototype,"closeBtn",void 0),s([i(cc.Node)],h.prototype,"tombSign",void 0),s([i(cc.Node)],h.prototype,"taoistSign",void 0),s([i(cc.Node)],h.prototype,"tombNode",void 0),s([i(cc.Node)],h.prototype,"taoistNode",void 0),s([i({type:cc.Label,tooltip:"\u7f8a\u961f"})],h.prototype,"nameLabel",void 0),s([i({type:cc.Label,tooltip:"\u50f5\u5c38"})],h.prototype,"tombLabel",void 0),s([i({type:cc.Label,tooltip:"\u9053\u58eb"})],h.prototype,"taoistLabel",void 0),s([i({type:cc.Label,tooltip:"\u50f5\u5c38\u6570\u91cf"})],h.prototype,"tombNumLabel",void 0),s([i({type:cc.Label,tooltip:"\u9053\u58eb\u6570\u91cf"})],h.prototype,"taoistNumLabel",void 0),s([i({type:cc.Label,tooltip:"\u603b\u4eba\u6570"})],h.prototype,"bottomNumLabel",void 0),s([i(cc.Node)],h.prototype,"tombProgress",void 0),s([i(cc.Node)],h.prototype,"taoistProgress",void 0),s([i(cc.Node)],h.prototype,"tombSP",void 0),s([i(cc.Node)],h.prototype,"taoistSP",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],topicNewPop:[function(t,e,o){"use strict";cc._RF.push(e,"9383fTm8p9NuLEys6rFPQBI","topicNewPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("spine"),h=a("GameManager");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.maskNode=null,t.popNode=null,t.nameLabel=null,t.bgFlashSP=null,t.sheepSP=null,t.winLabel=null,t.descLabel=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){p.default.addbtnTouchEndScale(this.maskNode,this.maskNodeFunc.bind(this))},f.prototype.maskNodeFunc=function(){this.node.active=!1},f.prototype.showPop=function(t){var e=this;this.node.active=!0,cc.tween(this.bgFlashSP).to(0,{scale:0}).to(.1,{scale:1}).call(function(){e.bgFlashSP.getComponent(d.default).loadSpine("sheep/UI",function(){e.bgFlashSP.getComponent(d.default).play("4Ray2",0)})}).start(),1==t.type?this.receiveSheepClothes():2==t.type&&this.showSheep(t.data)},f.prototype.showSheep=function(t){var e=this;cc.tween(this.sheepSP).to(0,{scale:0}).to(.2,{scale:1}).call(function(){e.sheepSP.getComponent(d.default).loadSpine("sheep/"+t.spName,function(){e.sheepSP.getComponent(d.default).setNewSkin(t.spSkin),e.sheepSP.getComponent(d.default).play("Jump1",0)})}).start(),this.nameLabel.string=t.name,this.winLabel.string="",this.descLabel.string=""},f.prototype.receiveSheepClothes=function(){for(var t=this,e=u.default.getSheepClothesData(),o=!1,n="skin_00",a="\u7f8a",i=(e=p.default.shuffle(e),0);i<e.length;i++){var r=e[i];r.dressing,"Sheeps"!=r.spName||0!=r.unlock||o||(r.unlock=o=!0,n=r.spSkin,a=r.name,h.default.getInstance().collectionMark.topicClothesNum=r.clothesId)}o&&u.default.setSheepClothesData(e),cc.tween(this.sheepSP).to(0,{scale:0}).to(.2,{scale:1}).call(function(){t.sheepSP.getComponent(d.default).loadSpine("sheep/Sheeps",function(){t.sheepSP.getComponent(d.default).setNewSkin(n),t.sheepSP.getComponent(d.default).play("Jump1",0)})}).start(),this.nameLabel.string=a,this.descLabel.string="\u6628\u65e5\u7684\u8bdd\u9898PK\u6218",this.winLabel.string="\u4f60\u6240\u5728\u7684\u7f8a\u961f\u80dc\u51fa"},s([i(cc.Node)],f.prototype,"maskNode",void 0),s([i(cc.Node)],f.prototype,"popNode",void 0),s([i(cc.Label)],f.prototype,"nameLabel",void 0),s([i(cc.Node)],f.prototype,"bgFlashSP",void 0),s([i(cc.Node)],f.prototype,"sheepSP",void 0),s([i(cc.Label)],f.prototype,"winLabel",void 0),s([i(cc.Label)],f.prototype,"descLabel",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],transitionsLayer:[function(t,e,o){"use strict";cc._RF.push(e,"1496aPelvpJyp4OMHFbWe8I","transitionsLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("enumConfig"),u=a("audio"),d=a("spine");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.sheepSp=null,t.playing=!1,t.animCallBack=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){cc.game.on(p.EMITKEY.SHOWTRANSITLAYER,this.playTransitionLayerAnim,this)},h.prototype.playTransitionLayerAnim=function(t){var e;this.playing||((e=this).playing=!0,this.animCallBack=t,this.sheepSp.active=!0,u.default.playAudioMusic("audio/sound/transitFont.mp3",!1),this.sheepSp.getComponent(d.default).setFrameEventCb("Turnarounds",function(t){console.log("\u4e13\u573a\u52a8\u753b ### ",t),e.animCallBack(e.playAnimOpen.bind(e))}),this.sheepSp.getComponent(d.default).play("Interlude",1,function(){e.playing=!1,e.sheepSp.active=!1,console.log("\u4e13\u573a\u52a8\u753b end ###")}))},h.prototype.playAnimOpen=function(){console.log("\u8f6c\u573a\u52a8\u753b\u5207\u6362 ### ")},s([i(cc.Node)],h.prototype,"sheepSp",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],"tt-sdk":[function(t,e,o){"use strict";cc._RF.push(e,"0d66ayRO/dGya2ZzHsK5JHr","tt-sdk");var n=o;function a(){}Object.defineProperty(n,"__esModule",{value:!0}),a.init=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&tt.showShareMenu({success:function(){console.log("[tt] \u5df2\u6210\u529f\u663e\u793a\u8f6c\u53d1\u6309\u94ae")},fail:function(t){console.log("[tt] showShareMenu \u8c03\u7528\u5931\u8d25",t.errMsg)},complete:function(){console.log("[tt] showShareMenu \u8c03\u7528\u5b8c\u6210")}})},a.vibrateShort=function(){tt.vibrateShort({})},a.vibrateLong=function(){tt.vibrateLong({})},a.login=function(){tt.login({success:function(t){console.log("[tt] \u767b\u5f55\u6210\u529f",t)},fail:function(t){console.log("[tt] \u767b\u5f55\u5931\u8d25",t)}})},a.checkSession=function(){tt.checkSession({success:function(){console.log("[tt] session \u672a\u8fc7\u671f")},fail:function(){console.log("[tt] session \u5df2\u8fc7\u671f\uff0c\u9700\u8981\u91cd\u65b0\u767b\u5f55"),this.login()}})},a.getSetting=function(){tt.checkSession({success:function(t){console.log("[tt] -------------getSetting \u83b7\u53d6\u7528\u6237\u5f53\u524d\u7684\u6388\u6743\u72b6\u6001\u6210\u529f-----------",t),t.errMsg},fail:function(t){console.log("[tt] -------------getSetting \u83b7\u53d6\u7528\u6237\u5f53\u524d\u7684\u6388\u6743\u72b6\u6001\u5931\u8d25-----------",t)}})},a.openSetting=function(){tt.openSetting({success:function(t){console.log("[tt] -------------openSetting success-----------",t)},complete:function(t){console.log("[tt] -------------openSetting complete-----------",t)},fail:function(t){console.log("[tt] -------------openSetting fail-----------",t)}})},a.authorize=function(){tt.authorize({scope:"scope.userInfo",success:function(t){console.log("[tt] authorize success",t)},complete:function(t){console.log("[tt] authorize complete",t)},fail:function(t){console.log("[tt] authorize fail",t)}})},a.recorderStart=function(){if(cc.sys.platform==cc.sys.BYTEDANCE_GAME)try{console.log("\u5f00\u59cb\u5f55\u5c4f ###### "),tt.getGameRecorderManager().start({duration:300})}catch(a){cc.warn(a)}},a.recorderStop=function(){if(cc.sys.platform==cc.sys.BYTEDANCE_GAME){console.log("\u5f55\u5c4f\u7ed3\u675fstop ###### ");try{tt.getGameRecorderManager().stop()}catch(a){cc.warn(a)}}},a.recorderPause=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(console.log("\u5f55\u5c4f\u7ed3\u675fpause ###### "),tt.getGameRecorderManager().pause())},a.recorderResume=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(console.log("\u5f55\u5c4f\u7ed3\u675fresume ###### "),tt.getGameRecorderManager().resume())},a.setVideoPath=function(t){this.videoPath=t},a.shareTemplate=function(t){cc.sys.platform==cc.sys.BYTEDANCE_GAME?tt.shareAppMessage({templateId:"gf33jlfc0h1k415a7o",query:"",success:function(){console.log("\u5206\u4eab\u6210\u529f"),t(!0)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25"),t(!1)}}):t(!0)},a.shareAppMessage=function(t){var e=t.success,o=t.fail;t=t.url,console.log("[tt] [sdk][tt] share app message",t),t=t||this.videoPath;try{tt.shareAppMessage({channel:"video",query:"",templateId:"",title:"\u7f8a\u4e86\u4e2a\u7f8a",desc:"\u770b\u770b\u5927\u5bb6\u90fd\u559c\u6b22\u4ec0\u4e48\u7f8a",extra:{videoPath:t,videoTopics:["\u7f8a\u4e86\u4e2a\u7f8a"]},success:function(){e&&e(),console.log("[tt] \u5206\u4eab\u89c6\u9891\u6210\u529f")},fail:function(t){o&&o(),console.log("[tt] \u5206\u4eab\u89c6\u9891\u5931\u8d25",t)}})}catch(t){cc.warn("share app message err",t)}},a.rewardVideoAd=function(t){var e=this;this.onRewardVideoAdSuccess=t.success,this.onRewardVideoAdFail=t.fail,this.rewardAd?this.rewardAd.show():(this.rewardAd=tt.createRewardedVideoAd({adUnitId:t.id}),this.rewardAd.onLoad(function(){e.rewardAd.show()}),this.rewardAd.onError(function(t){e.onRewardVideoAdFail&&e.onRewardVideoAdFail(),cc.warn("tt reward video ad error",t)}),this.rewardAd.onClose(function(t){t.isEnded&&e.onRewardVideoAdSuccess&&e.onRewardVideoAdSuccess(),e.onRewardVideoAdFail&&e.onRewardVideoAdFail()}))},a.setClipboardData=function(t){tt.setClipboardData({data:t,success:function(){tt.getClipboardData({success:function(t){console.log("tt get clipboard data:",t.data)}})}})},a.showBannerAd=function(t){var e=this;this.onRewardBannerAdSuccess=t.success,this.onRewardBannerAdFail=t.fail,this.bannerAd?this.bannerAd.show():(this.bannerAd=tt.createBannerAd({adUnitId:t.id,adIntervals:30,style:{left:0,top:cc.winSize.height,width:300}}),this.bannerAd.onLoad(function(){e.bannerAd.show()}),this.bannerAd.onError(function(t){e.onRewardBannerAdFail&&e.onRewardBannerAdFail(),cc.warn("tt reward video ad error",t)}))},a.hideBannerAd=function(){this.bannerAd&&this.bannerAd.hide()},a.showInterstitialAd=function(){},a.showRewardVideoAd=function(){},a.focusDouYin=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&tt.openAwemeUserProfile({success:function(t){console.log(t)}})},a.isSupportFocusDouYin=function(){if(cc.sys.platform!=cc.sys.BYTEDANCE_GAME)return!1;for(var t=(n=tt.getSystemInfoSync()).system,e=n.SDKVersion,o=n.version,n=n.appName,a=(t.split(" "),o.split(".")),i=0;i<a.length;i++)a[i].length<2&&(a[i]="0"+a[i]);return!(e.replace(/\./g,"")<1840)&&"Douyin"==n},a.addShortcut=function(t){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&tt.addShortcut({success:function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),t&&t(!0)},fail:function(e){console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",e.errMsg),t&&t(!1)}})},a.isSupportShortcut=function(){if(cc.sys.platform!=cc.sys.BYTEDANCE_GAME)return!1;var t=tt.getSystemInfoSync();console.log("sdkversion = "+JSON.stringify(t));for(var e=t.system,o=t.SDKVersion,n=(t=t.version,e.split(" "),t.split(".")),a=0;a<n.length;a++)n[a].length<2&&(n[a]="0"+n[a]);return o=o.replace(/\./g,""),console.log("sdkversion = "+o),!(o<2460)},a.getSystemInfo=function(){if(cc.sys.platform==cc.sys.BYTEDANCE_GAME)return tt.getSystemInfoSync()},a.gameBox=function(){var t;cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(tt.onMoreGamesModalClose(function(t){console.log("modal closed",t)}),tt.onNavigateToMiniGameBox(function(t){console.log("box = "+t.errCode),console.log("box = "+t.errMsg)}),"ios"!==tt.getSystemInfoSync().platform)&&(t=tt.getLaunchOptionsSync(),console.log("options = ",JSON.stringify(t)),tt.showMoreGamesModal({appLaunchOptions:[{appId:"ttb06fc6d22f51b12b02",query:"foo=bar&baz=qux",extraData:{}},{appId:"tte3e995547cd7daab02",query:"foo=bar&baz=qux",extraData:{}}],success:function(t){console.log("success",t.errMsg)},fail:function(t){console.log("fail",t.errMsg)}}))},a.videoPath="",a.rewardAd=null,a.onRewardVideoAdSuccess=null,a.onRewardVideoAdFail=null,a.bannerAd=null,a.onRewardBannerAdSuccess=null,a.onRewardBannerAdFail=null,a.interstitialAd=null,a.onRewardInterstitialAdSuccess=null,a.onRewardInterstitialAdFail=null,(n.default=a).init(),cc._RF.pop()},{}],"typed-event":[function(t,e,o){"use strict";cc._RF.push(e,"a986cr5ta9GR5lVg0qHZvFl","typed-event");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.TypedEvent=void 0,n.TypedEvent=function(){var t=this;this.listeners=[],this.listenersOncer=[],this.on=function(e){return t.listeners.push(e),{dispose:function(){return t.off(e)}}},this.once=function(e){t.listenersOncer.push(e)},this.off=function(e){-1<(e=t.listeners.indexOf(e))&&t.listeners.splice(e,1)},this.emit=function(e){var o;t.listeners.forEach(function(t){return t(e)}),0<t.listenersOncer.length&&(o=t.listenersOncer,t.listenersOncer=[],o.forEach(function(t){return t(e)}))},this.pipe=function(e){return t.on(function(t){return e.emit(t)})}},cc._RF.pop()},{}],uiControler:[function(t,e,o){"use strict";cc._RF.push(e,"81349GiDV5P+4W7p0Ox2i/o","uiControler");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("mapEditor"),u=a("newLevelPop"),d=a("selectLevelPop"),h=a("setBlockNumPop"),f=a("config"),g=a("dataTs"),y=a("editorGameLayer"),m=a("saveAsPop");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.mapEditorNode=null,t.setBlockNumPop=null,t.selectLevelPop=null,t.newLevelPop=null,t.saveAsPop=null,t.editorGameLayer=null,t.levelNumLabel=null,t.blockNumLabel=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(v,l=cc.Component),v.prototype.onLoad=function(){},v.prototype.start=function(){cc.game.on("initLevelData",this.initLevelData,this),cc.game.on("setBlockNum",this.showBlockNum,this),cc.game.on("saveAsNewMap",this.saveAsNewMap,this)},v.prototype.selectLevelFun=function(){console.log("\u7f16\u8f91\u5173\u5361"),this.selectLevelPop.getComponent(d.default).showSelectLevelPop()},v.prototype.newLevelFun=function(){console.log("\u65b0\u5efa\u5173\u5361"),this.newLevelPop.getComponent(u.default).showNewLevelPop()},v.prototype.chooseMapSizeFun=function(t,e){cc.game.emit("refreshMapSizeData",f.default.mapType[e])},v.prototype.saveAsShowLayer=function(){console.log("\u53e6\u5b58\u4e3a\u5173\u5361"),this.saveAsPop.getComponent(m.default).showSaveAsPop()},v.prototype.saveLevelMapFun=function(){console.log("\u4fdd\u5b58\u5173\u5361");var t=this.mapEditorNode.getComponent(p.default).levelID,e=this.mapEditorNode.getComponent(p.default).newLevelDataObj;this.checkMapIsRight(e)?g.default.setLevelMapData(t,e):console.log("\u5173\u5361\u914d\u7f6e\u9519\u8bef")},v.prototype.checkMapIsRight=function(t){var e=0,o=0,n=(t=t).levelData;for(i in n)for(var a in n[i])0==n[i][a].type?e++:o++;if(console.log("blockNum:",e),console.log("blockTypeNum:",o),e%3!=0)return console.log("\u7a7a\u767d\u5757\u4e0d\u662f3\u7684\u500d\u6570"),cc.game.emit("showTips","\u7a7a\u767d\u5757\u4e0d\u662f3\u7684\u500d\u6570"),!1;if(o%3!=0)return console.log("\u7c7b\u578b\u5757\u4e0d\u662f3\u7684\u500d\u6570"),cc.game.emit("showTips","\u7c7b\u578b\u5757\u4e0d\u662f3\u7684\u500d\u6570"),!1;var i,r=t.blockTypeData,c=0;for(i in r)c+=r[i];return console.log("typeNum:",c),c==e/3||(console.log("\u5757\u7c7b\u578b\u8bbe\u7f6e\u6570\u91cf\u9519\u8bef"),cc.game.emit("showTips","\u5757\u7c7b\u578b\u8bbe\u7f6e\u6570\u91cf\u9519\u8bef"),!1)},v.prototype.saveAsNewMap=function(t){var e=this.mapEditorNode.getComponent(p.default).newLevelDataObj;e.levelKey=t,g.default.setLevelMapData(t,e),cc.game.emit("initLevelData",{newLevelData:e})},v.prototype.setBlockTypeFun=function(){console.log("\u8bbe\u7f6e\u672c\u5173\u7684\u56fe\u5757\u7c7b\u578b\u6570\u91cf");var t,e=0,o=this.mapEditorNode.getComponent(p.default).newLevelDataObj,n=o.levelData;for(t in n)for(var a in n[t])0==n[t][a].type&&e++;o=o.blockTypeData,e%3==0?this.setBlockNumPop.getComponent(h.default).showSetBlockPop(e/3,o):(console.log("error:\u5757\u6570\u91cf\u4e0d\u80fd\u88ab\u6574\u9664"),cc.game.emit("showTips","error:\u5757\u6570\u91cf\u4e0d\u80fd\u88ab\u6574\u9664"),this.setBlockNumPop.getComponent(h.default).showSetBlockPop(0,o))},v.prototype.selectNewBlockTypeFun=function(){console.log("\u9009\u62e9\u5373\u5c06\u6446\u653e\u7684\u56fe\u5757\u7c7b\u578b")},v.prototype.testPlayFun=function(){console.log("\u8bd5\u73a9\u672c\u5173\u5361"),this.mapEditorNode.getComponent(p.default).levelID;var t=cc.instantiate(this.mapEditorNode.getComponent(p.default).newLevelDataObj);console.log("data:",t),t=[t],this.editorGameLayer.getComponent(y.default).initLevelLayer(t)},v.prototype.backOffFun=function(){console.log("\u56de\u9000\u7ec4\u5757")},v.prototype.initLevelData=function(t){this.levelNumLabel.string="\u5f53\u524d\u5173\u5361ID\uff1a"+t.newLevelData.levelKey},v.prototype.showBlockNum=function(){if(!this.mapEditorNode.getComponent(p.default).newLevelDataObj)return!1;var t=this.getAllBlockNum();this.blockNumLabel.string=""+t},v.prototype.getAllBlockNum=function(){var t,e=0,o=this.mapEditorNode.getComponent(p.default).newLevelDataObj.levelData;for(t in o)e+=o[t].length;return e},s([i(cc.Node)],v.prototype,"mapEditorNode",void 0),s([i(cc.Node)],v.prototype,"setBlockNumPop",void 0),s([i(cc.Node)],v.prototype,"selectLevelPop",void 0),s([i(cc.Node)],v.prototype,"newLevelPop",void 0),s([i(cc.Node)],v.prototype,"saveAsPop",void 0),s([i(cc.Node)],v.prototype,"editorGameLayer",void 0),s([i(cc.Label)],v.prototype,"levelNumLabel",void 0),s([i(cc.Label)],v.prototype,"blockNumLabel",void 0),a=s([a],v),r.default=a,cc._RF.pop()},{}],"uma-sdk":[function(t,e,o){"use strict";cc._RF.push(e,"31ca3gDt7FFSYn5bPlPkMAx","uma-sdk");var n,a=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var r=a("dataTs"),c=a("enumConfig"),s=a("sdk"),l=a("DateManager");function p(){}a=(n=cc._decorator).ccclass,n.property,p.setUserid=function(){s.default.isPlatform(s.Platform.wx)},p.trackEvent=function(t,e){void 0===e&&(e=null);var o=r.default.getUserData();e=e||{};var n=Number(r.default.getUserData().registerTime);n=l.default.format(c.CALENDARNAMES[6],new Date(n)),e.time=n,e.c_time=Number(n),e.uid=o.userID,o=JSON.stringify(e),e.data=o,s.default.isPlatform(s.Platform.wx)},a=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r}([a],p),i.default=a,cc._RF.pop()},{}],"unlock-build-pop":[function(t,e,o){"use strict";cc._RF.push(e,"23d5cnrWYpLtbx08aY5sAOq","unlock-build-pop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("audio"),h=a("spine");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainCultivateLayer=null,t.flightNode=null,t.spriteNode=null,t.spineTitle=null,t.spineAnim=null,t.receiveBtn=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){p.default.addbtnTouchStartScale(this.receiveBtn,this.receiveBtnFunc.bind(this)),p.default.addbtnTouchEndScale(this.receiveBtn,this.receiveBtnFunc.bind(this)),p.default.addbtnTouchCancelScale(this.receiveBtn,this.receiveBtnFunc.bind(this))},f.prototype.hideDefault=function(){this.flightNode.active=!1,this.spriteNode.active=!1,this.spineTitle.active=!1,this.spineAnim.active=!1,this.receiveBtn.active=!1},f.prototype.showGetRemoveProp=function(){this.node.active=!0,this.hideDefault(),this.playRemoveAnim()},f.prototype.playRemoveAnim=function(){var t=this,e=this;this.spineAnim.active=!0,this.spineAnim.getComponent(h.default).setFrameEventCb("Open1",function(){console.log("1"),d.default.playAudioMusic("audio/sound/Open2.mp3",!1)}),this.spineAnim.getComponent(h.default).setFrameEventCb("Eff_Sheen1",function(){e.spineTitle.active=!0,console.log("2"),d.default.playAudioMusic("audio/sound/Words2.mp3",!1),e.spineTitle.getComponent(h.default).play("Award1_Words1",1),t.spineAnim.getComponent(h.default).setFrameEventCb("Treasure1",function(){console.log("3"),e.flightNode.active=!0,t.spriteNode.active=!0,e.receiveBtn.active=!0,e.flightNode.scale=0,e.spriteNode.scale=0,e.receiveBtn.scale=0,cc.tween(e.flightNode).to(.3,{scale:.8}).call(function(){cc.tween(e.flightNode).by(5,{angle:360}).repeatForever().start()},e).start(),cc.tween(e.spriteNode).to(.1,{scale:1.4}).to(.1,{scale:1}).to(.1,{scale:1.2}).to(.1,{scale:1}).call(function(){cc.tween(e.receiveBtn).to(.1,{scale:1.3}).to(.1,{scale:1}).start()}).start()})}),this.spineAnim.getComponent(h.default).play("Ref1_Open3",1,function(){console.log("4")});var o=u.default.getUserData();o.prop_remove+=2,u.default.saveUserData(o)},f.prototype.receiveBtnFunc=function(){this.node.active=!1},s([i(cc.Node)],f.prototype,"mainCultivateLayer",void 0),s([i(cc.Node)],f.prototype,"flightNode",void 0),s([i(cc.Node)],f.prototype,"spriteNode",void 0),s([i(cc.Node)],f.prototype,"spineTitle",void 0),s([i(cc.Node)],f.prototype,"spineAnim",void 0),s([i(cc.Node)],f.prototype,"receiveBtn",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],"unlock-build":[function(t,e,o){"use strict";cc._RF.push(e,"b4509jR79lK778pfI4KU2y8","unlock-build");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("dataTs"),u=a("audio"),d=a("spine");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.catContent=null,t.unlockBuildBtn=null,t.lightBg=null,t.ribbonNode=null,t.catNode=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){},h.prototype.playCatAnimation=function(t){void 0===t&&(t=1);var e=this;this.hideDefault(),this.catContent.active=!0,e.catContent.scale=1;var o=p.default.getGameConfigData().baseConfigData.catClothesData["cat_"+t];o&&o.length&&(e.ribbonNode.getComponent(cc.Label).string=o[0].name),this.unlockBuildBtn.active=!0,e.unlockBuildBtn.getComponent(d.default).setFrameEventCb("Cat1",function(){console.log("Cat1 frame ######"),u.default.playAudioMusic("audio/sound/Open2.mp3",!1),e.lightBg.active=!0,e.ribbonNode.active=!0,e.catNode.active=!0,cc.tween(e.lightBg).by(5,{angle:360}).repeatForever().start(),e.catContent.scale=0,cc.tween(e.catContent).to(.1,{scale:1.1}).to(.1,{scale:1}).start(),e.setCatSpine(t),cc.tween(e.catContent).delay(2).to(.2,{scale:1.2}).to(.3,{scale:0},{easing:cc.easing.cubicIn}).call(function(){e.node.active=!1}).start()}),this.unlockBuildBtn.getComponent(d.default).play("3UnlockCat1",1,function(){console.log("3UnlockCat1 \u64ad\u653e\u5b8c\u6210")})},h.prototype.setCatSpine=function(t){var e=this;t="Model"+(t<10?"0"+t:t+""),this.catNode.getComponent(d.default).loadNewSpine(t,function(){e.catNode.getComponent(d.default).setNewSkin("00"),e.catNode.getComponent(d.default).play("2_Action1",1,function(){e.catNode.getComponent(d.default).play("1_Standby1",0)})})},h.prototype.hideDefault=function(){this.unlockBuildBtn.active=!1,this.lightBg.active=!1,this.ribbonNode.active=!1,this.catNode.active=!1},s([i(cc.Node)],h.prototype,"catContent",void 0),s([i(cc.Node)],h.prototype,"unlockBuildBtn",void 0),s([i(cc.Node)],h.prototype,"lightBg",void 0),s([i(cc.Node)],h.prototype,"ribbonNode",void 0),s([i(cc.Node)],h.prototype,"catNode",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],"upgrade-tip":[function(t,e,o){"use strict";cc._RF.push(e,"fc6e6B31jVAnbLpM0OJ9CQp","upgrade-tip");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("mainCultivateLayer");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.iconFish=null,t.iconPoint=null,t.iconNode=null,t.fishNode=null,t.arrowNode=null,t.mainCultivateLayer=null,t.houseData=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(h,l=cc.Component),h.prototype.start=function(){p.default.addbtnTouchEndScale(this.iconPoint,this.iconPointEndFunc.bind(this)),p.default.addbtnTouchEndScale(this.iconFish,this.iconFishEndFunc.bind(this))},h.prototype.iconPointEndFunc=function(t){t.stopPropagation(),this.mainCultivateLayer&&this.mainCultivateLayer.getComponent(d.default).clickUpgradePoint(this)},h.prototype.iconFishEndFunc=function(t){t.stopPropagation(),this.mainCultivateLayer&&this.mainCultivateLayer.getComponent(d.default).clickUpgradeFish(this.houseData,this)},h.prototype.showPoint=function(t,e,o){void 0===t&&(t=this.houseData),void 0===e&&(e=this.mainCultivateLayer),void 0===o&&(o=!1),this.mainCultivateLayer=e,this.houseData=t,this.iconPoint.active=!0,this.iconFish.active=!1,this.fishNode.getComponent(cc.Label).string="x"+t.fish,u.default.getUserData().fish>=t.fish?this.arrowNode.active=!0:this.arrowNode.active=!1,o&&(this.iconPoint.scale=0,cc.tween(this.iconPoint).delay(.1).to(.5,{scale:1}).start()),o="rewardIcon/Unlock_Hammer.png","cat"==t.buildType?o="rewardIcon/Unlock_Cat.png":"skin"==t.buildType?o="rewardIcon/Unlock_Clothing.png":1==t.buildid&&(o="rewardIcon/Unlock_Brush.png"),p.default.changeSpriteFrame(this.iconNode,o)},h.prototype.showFish=function(){console.log(JSON.stringify(this.houseData)),this.iconPoint.active=!1,this.iconFish.active=!0,this.iconFish.scale=0,cc.tween(this.iconFish).to(.3,{scale:1}).start()},h.prototype.show=function(){this.node.active=!0,this.iconPoint.active=!0,this.iconFish.active=!1,this.iconPoint.scale=0,cc.tween(this.iconPoint).delay(.1).to(.5,{scale:1}).start()},h.prototype.hide=function(){this.node.active=!1},s([i(cc.Node)],h.prototype,"iconFish",void 0),s([i(cc.Node)],h.prototype,"iconPoint",void 0),s([i(cc.Node)],h.prototype,"iconNode",void 0),s([i(cc.Node)],h.prototype,"fishNode",void 0),s([i(cc.Node)],h.prototype,"arrowNode",void 0),a=s([a],h),r.default=a,cc._RF.pop()},{}],upgradePop:[function(t,e,o){"use strict";cc._RF.push(e,"56493C1WJVBQJG8pH7F9E9g","upgradePop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("CcJsFunc"),u=a("dataTs"),d=a("enumConfig"),h=a("audio"),f=a("spine"),g=a("uma-sdk");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.coinNum=null,t.catNode=null,t.closeBtn=null,t.upgradeBtn=null,t.popNode=null,t.catId=0,t.clothId=0,t.callBack=null,t.popCallbackCollect=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(y,l=cc.Component),y.prototype.start=function(){p.default.addbtnTouchStartScale(this.closeBtn),p.default.addbtnTouchEndScale(this.closeBtn,this.hideUpgradePop.bind(this)),p.default.addbtnTouchCancelScale(this.closeBtn),p.default.addbtnTouchStartScale(this.upgradeBtn),p.default.addbtnTouchEndScale(this.upgradeBtn,this.upgradeFunc.bind(this)),p.default.addbtnTouchCancelScale(this.upgradeBtn),this.popCallbackCollect={playGameCallBack:this.playGameFunc.bind(this)}},y.prototype.playGameFunc=function(){},y.prototype.showUpgradePop=function(t,e){this.node.active=!0,this.catId=t,this.callBack=e,u.default.getGameConfigData().baseConfigData.catClothesData;for(var o=u.default.getUserData().catClothesData["cat_"+this.catId],n=0;n<o.length;n++)o[n].isWear&&(this.clothId=o[n].clothesID,this.setCatSpine(this.clothId,o[n].clothRank+1));cc.tween(this.popNode).set({scale:0,opacity:0}).to(.2,{scale:1.1,opacity:255},{easing:cc.easing.quadOut}).to(.2,{scale:1}).start()},y.prototype.hideUpgradePop=function(){this.node.active=!1,this.callBack&&this.callBack(!1)},y.prototype.upgradeFunc=function(){console.log("\u5347\u7ea7\u670d\u88c5");var t,e=u.default.upgradeClothesLevel(this.catId,this.clothId);e?(this.node.active=!1,cc.game.emit(d.EMITKEY.MAINUPDATEUI),this.callBack(!0),h.default.playAudioMusic("audio/sound/Clothe_Upgrade.mp3",!1)):(t={popName:"nothingPop",showPopData:{popCallbackCollect:this.popCallbackCollect,popType:0}},cc.game.emit("showPop",t),this.hideUpgradePop()),g.default.trackEvent("house_clothing_upgrade",{upgrade:e?"\u5347\u7ea7\u6210\u529f":"\u5347\u7ea7\u5931\u8d25"})},y.prototype.setCatSpine=function(t,e){var o=this,n="Model"+(this.catId<10?"0"+this.catId:this.catId+"");this.catNode.getComponent(f.default).loadNewSpine(n,function(){var n=(n=t%1e3)<10?"0"+n:n+"";o.catNode.getComponent(f.default).setNewSkin(n),o.catNode.getComponent(f.default).play("1_Standby1",0);for(var a=1,i=(a=e<2?0:1,["Collar2","Collar1"]),r=0;r<i.length;r++)o.catNode.getComponent("spine").spine.getAttachment(i[r],i[r])&&(o.catNode.getComponent("spine").spine.getAttachment(i[r],i[r]).color.a=a);a=e<3?0:1;var c=["Body1","Arm_L1","Arm_R1","Cloak1"];for(r=0;r<c.length;r++)o.catNode.getComponent("spine").spine.getAttachment(c[r],c[r])&&(o.catNode.getComponent("spine").spine.getAttachment(c[r],c[r]).color.a=a)})},s([i(cc.Label)],y.prototype,"coinNum",void 0),s([i(cc.Node)],y.prototype,"catNode",void 0),s([i(cc.Node)],y.prototype,"closeBtn",void 0),s([i(cc.Node)],y.prototype,"upgradeBtn",void 0),s([i(cc.Node)],y.prototype,"popNode",void 0),a=s([a],y),r.default=a,cc._RF.pop()},{}],util:[function(t,e,o){"use strict";cc._RF.push(e,"4a098EKhTpIr40rNw8ENK2v","util");var n,a=o;Object.defineProperty(a,"__esModule",{value:!0}),n={isType:function(t,e){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()==e},arrayRemoveEqu:function(t){for(var e=[],o=0;o<t.length;o++)-1==e.indexOf(t[o])&&e.push(t[o]);return e},copy:function(t){return t=JSON.stringify(t),JSON.parse(t)},inRect:function(t,e,o,n,a,i){return o<=t&&n<=e&&t<=o+a&&e<=n+i?1:0},pointLength:function(t,e){var o=e.x-t.x;return o*o+(t=e.y-t.y)*t},join:function(t,e){void 0===e&&(e=",");var o,n=[],a=0;for(o in t)n[a]=t[o],a++;return n.join(e)},concat:function(){var t,e={};for(t in arguments)for(var o in arguments[t])e[o]=arguments[t][o];return e},toArray:function(t,e){var o=[];if(e)for(var n in t)o.push(n,t[n]);else for(var n in t)o.push(t[n]);return o},valueArray:function(t,e){var o,n=[];for(o in t)n.push(t[o][e]);return n},getObjectLen:function(t){var e,o=0;for(e in t)o++;return o},formatTime:function(t){var e=[0,0,0,0,0];return e[4]=t%1e3,e[3]=Math.floor(t/1e3),60<=e[3]&&(e[2]=Math.floor(e[3]/60),e[3]=e[3]%60,60<=e[2]&&(e[1]=Math.floor(e[2]/60),e[2]=e[2]%60,24<=e[1]&&(e[0]=Math.floor(e[1]/24),e[1]=e[1]%24))),e},countdownTime:function(t){var e=[0,0,0];return e[0]=Math.floor(t/3600),e[1]=Math.floor(t%3600/60),e[2]=Math.floor(t%60),e},getTime:function(t,e,o){var n="",a="";switch(t=new Date(t),1==o?(n+=t.getFullYear()+"/",n+=this.fixLength(t.getMonth()+1,2)+"/",n+=this.fixLength(t.getDate(),2)):2==o?(n+=t.getFullYear()+"-",n+=this.fixLength(t.getMonth()+1,2)+"-",n+=this.fixLength(t.getDate(),2)):(n+=t.getFullYear()+"\u5e74",n+=this.fixLength(t.getMonth()+1,2)+"\u6708",n+=this.fixLength(t.getDate(),2)+"\u65e5"),a+=this.fixLength(t.getHours(),2)+":",a+=this.fixLength(t.getMinutes(),2)+":",a+=this.fixLength(t.getSeconds(),2),e){case 1:return n;case 2:return n+" "+a;default:return a}},rnd:function(t,e){return(t=null==e?0:t)+Math.floor(Math.random()*(e-t+1))},rndArray:function(t){for(var e=t.concat(),o=[];0<e.length;)o.push(e.splice(this.rnd(e.length-1),1)[0]);return o},inArray:function(t,e){for(var o in e)if(t==e[o])return o;return-1},countArray:function(t,e,o){var n,a=0;for(n in t)e==t[n]&&a++;return o?t.length-a:a},fixLength:function(t,e,o,n){for(t+="",arguments.length<3&&(o=0),arguments.length<4&&(n="0");t.length<e;)0==o?t=n+t:t+=n;return t.length>e?0==o?t.slice(-e):t.slice(0,e):t},fixNumber:function(t,e,o){return e=Math.pow(10,e),Math[o]?Math[o](t*e)/e:Math.round(t*e)/e},formatNumber:function(t,e,o){if(!isNaN(t)&&(arguments.length<2&&(e=1),-1<(o=arguments.length<3?-1:o)&&(t=parseFloat(t).toFixed(o)),1==e)){var n=t.toString().split("."),a=n[0];for(e="",void 0!==n[1]&&(e="."+n[1]),n=[];3<a.length;)n.unshift(a.slice(-3)),a=a.slice(0,a.length-3);0<a.length&&n.unshift(a),t=n.join()+e}return t},fixValue:function(t,e,o,n){return t=Math[n]?Math[n](t):Math.round(t),null!=e&&t<e?t=e:null!=o&&o<t&&(t=o),t},isInt:function(t,e,o){var n=parseInt(t);return n!=t||null!=e&&n<e||null!=o&&o<n?0:1},unsignInt:function(t,e){return t<=0?0:Math[e]?Math[e](t):Math.round(t)},getKey:function(t,e){for(var o in t)if(t[o]==e)return o},getGrid:function(t,e,o,n){for(var a=[],i=0;i<e;i++)for(var r=0;r<t;r++)a[i*t+r]={},a[i*t+r].y=i*n,a[i*t+r].x=r*o;return a},getByteLen:function(t){for(var e=0,o=0;o<t.length;o++)255<t.charCodeAt(o)?e+=2:e++;return e},simpleSplit:function(t,e){var o=[];return-1==t.indexOf(e)?(o[0]=t,o[1]=""):(o[0]=t.slice(0,t.indexOf(e)),o[1]=t.slice(t.indexOf(e)+1)),o},getSum:function(t){var e,o=0;for(e in t)o+=t[e];return o},getAverage:function(t){var e,o=0,n=0;for(e in t)o+=t[e],n++;return o/n},parseToObject:function(t,e,o,n){var a,i=e.split(n=n||"."),r=(n=i.pop(),t);for(a in i)r=r[i[a]];return null!=o&&(r[n]=o),r[n]},multicall:function(t,e){var o=e;switch(o.length){case 0:t();break;case 1:t(o[0]);break;case 2:t(o[0],o[1]);break;case 3:t(o[0],o[1],o[2]);break;case 4:t(o[0],o[1],o[2],o[3]);break;case 5:t(o[0],o[1],o[2],o[3],o[4]);break;case 6:t(o[0],o[1],o[2],o[3],o[4],o[5]);break;case 7:t(o[0],o[1],o[2],o[3],o[4],o[5],o[6]);break;case 8:t(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);break;case 9:t(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8]);break;case 10:t(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9])}},getPointAlpha:function(t,e,o){var n=window.document.createElement("canvas"),a=n.getContext("2d");return n.width=1,n.height=1,a.drawImage(t,e,o,1,1,0,0,1,1),a.getImageData(0,0,1,1).data[3]},ajax:function(t,e,o,n){e=e||"",n=n||"GET";var a=new window.XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&o(a.responseText)},a.open(n,t,!0),a.send(e)},getQueryString:function(t){return t=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),null!=(t=window.location.search.substr(1).match(t))?unescape(t[2]):null},delayCallbackOnce:function(t,e){cc.director.getScheduler().schedule(t,this._defaultTimerTarget,0,0,e,!1)}},a.default=n,cc._RF.pop()},{}],wallpaperPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"5ccb7gpTcZNy6oxSxO1hXsJ","wallpaperPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("wallpaperSubPrefab"),d=a("dataTs"),h=a("enumConfig"),f=a("wallpaperSv");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.content=null,t.wallpaperSubPrefab=null,t.base_title_label=null,t.parentNode=null,t.nodeData=null,t}c(g,l=cc.Component),g.prototype.start=function(){},g.prototype.setNodeData=function(t,e){for(var o in this.parentNode=e,this.nodeData=t,d.default.langCode==h.LangEnum.zhCN&&"- Coming soon -"==this.nodeData.titleName?this.base_title_label.string="- \u656c\u8bf7\u671f\u5f85 -":this.base_title_label.string=this.nodeData.titleName,this.nodeData.bgArray){var n=cc.instantiate(this.wallpaperSubPrefab);n.getComponent(u.default).setNodeData(this.nodeData.bgArray[o],this),this.content.addChild(n)}},g.prototype.refreshNode=function(t,e){this.parentNode=e,this.nodeData=t;var o,n=this.content.children;for(o in n)n[o].getComponent(u.default).setNodeData(this.nodeData.bgArray[o],this)},g.prototype.refreshSubNode=function(){this.parentNode.getComponent(f.default).refreshSubNode()},s([p(cc.Node)],g.prototype,"content",void 0),s([p(cc.Prefab)],g.prototype,"wallpaperSubPrefab",void 0),s([p(cc.Label)],g.prototype,"base_title_label",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],wallpaperSubPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"f4535mVxXNAALqaewBHYpME","wallpaperSubPrefab");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),i=(p=cc._decorator).ccclass;var l,p=p.property,u=a("dataTs"),d=a("CcJsFunc"),h=a("wallpaperPrefab"),f=a("GameManager"),g=a("uma-sdk"),y=a("enumConfig"),m=a("report-common");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.imgContent=null,t.imgLabel=null,t.imgBorder=null,t.imgLock=null,t.parentNode=null,t.userData=null,t.nodeData=null,t.levelNum=null,t.pictureData=null,t.isReward=!1,t}c(v,l=cc.Component),v.prototype.start=function(){d.default.addbtnTouchEndScale(this.node,this.clickNodeAction.bind(this))},v.prototype.rewardNodeData=function(t,e){this.isReward=e=void 0===e||e,this.imgLock.active=!1,this.imgContent.active=!0,this.imgBorder.active=!1,d.default.changeSpriteFrame(this.imgContent,"pictureIcon/GameBgicon"+t+".png"),this.imgBorder.getChildByName("mark").active=!1,this.imgLabel.node.active=!1},v.prototype.setNodeData=function(t,e){this.isReward=!1,this.parentNode=e,this.nodeData=t,this.userData=u.default.getUserData(),this.levelNum=this.userData.playLevelId,this.pictureData=u.default.getPictureData(),u.default.langCode==y.LangEnum.zhCN?this.imgLabel.string=this.nodeData.name:this.imgLabel.string=this.nodeData.en_name,e="pictureIcon/GameBgicon"+this.nodeData.bgID+".png",d.default.changeSpriteFrame(this.imgContent,e),this.levelNum>this.nodeData.unlockNum?(this.imgLock.active=!1,this.imgContent.active=!0,this.imgBorder.active=!1,this.pictureData.bgNum==this.nodeData.bgID?this.imgBorder.active=!0:this.imgBorder.active=!1):(this.imgLock.active=!0,this.imgContent.active=!1,this.imgBorder.active=!1),f.default.getInstance().collectionMark.bgNum==t.bgID?(this.imgBorder.getChildByName("mark").active=!0,f.default.getInstance().collectionMark.bgNum=0):this.imgBorder.getChildByName("mark").active=!1},v.prototype.clickNodeAction=function(){var t;d.default.addClickAudio(),this.levelNum>=this.nodeData.unlockNum&&!this.isReward&&(this.pictureData.bgNum!=this.nodeData.bgID&&m.default.reportTACommon("collar_bg",{bg_before:this.pictureData.bgNum,bg_after:this.nodeData.bgID}),this.imgBorder.active=!0,this.pictureData.bgNum=this.nodeData.bgID,u.default.savePictureData(this.pictureData),this.parentNode.getComponent(h.default).refreshSubNode(),this.imgBorder.getChildByName("mark").active=!1,t=this.nodeData.bgID+"",g.default.trackEvent("collar_bg",{ID:t,c_ID:Number(t)}),cc.game.emit(y.EMITKEY.UPDATEPICTURE))},s([p(cc.Node)],v.prototype,"imgContent",void 0),s([p(cc.Label)],v.prototype,"imgLabel",void 0),s([p(cc.Node)],v.prototype,"imgBorder",void 0),s([p(cc.Node)],v.prototype,"imgLock",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],wallpaperSv:[function(t,e,o){"use strict";cc._RF.push(e,"e1a4baQrCVBT5Hpjf/VGnTF","wallpaperSv");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("dataTs"),u=a("wallpaperPrefab"),d=a("i18n"),h=a("gd_language");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.content=null,t.wallpaperPrefab=null,t.dataArray=[],t.i18nArray=[],t}a=(i=cc._decorator).ccclass,i=i.property,c(f,l=cc.Component),f.prototype.start=function(){this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_commuter_road)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_starry)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_lamp)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_harbour)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_snow)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_dinner)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_moon)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_lazy_time)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_waiting_alone)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_lighthouse)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_meteor_shower)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_harbour)),this.i18nArray.push(d.default.instance.trans(h.GDLanguage.wallpaper_lamp)),this.content.removeAllChildren(),this.dataArray=p.default.gameConfigData.baseConfigData.bgData;var t,e=0;for(t in this.dataArray)for(var o in this.dataArray[t].bgArray)e<this.i18nArray.length&&(this.dataArray[t].bgArray[o].en_name=this.i18nArray[e]),e++;for(t in this.dataArray){var n=cc.instantiate(this.wallpaperPrefab);n.getComponent(u.default).setNodeData(this.dataArray[t],this),this.content.addChild(n)}},f.prototype.onEnable=function(){0<this.dataArray.length&&this.refreshSubNode()},f.prototype.refreshSubNode=function(){var t,e=this.content.children;for(t in e){var o=this.dataArray[t];e[t].getComponent(u.default).refreshNode(o,this)}},s([i(cc.Node)],f.prototype,"content",void 0),s([i(cc.Prefab)],f.prototype,"wallpaperPrefab",void 0),a=s([a],f),r.default=a,cc._RF.pop()},{}],wardrobeLayer:[function(t,e,o){"use strict";cc._RF.push(e,"4448eEzJr1BMqSaSIx1uqZX","wardrobeLayer");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("clothesPrefab"),u=a("CcJsFunc"),d=a("dataTs"),h=a("enumConfig"),f=a("upgradePop"),g=a("uma-sdk"),y=a("mainCultivateLayer");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.mainCultivateLayer=null,t.changeClothesNode=null,t.scrollContent=null,t.clothesPrefab=null,t.btnLayer=null,t.ribbonNode=null,t.ribbonLabel=null,t.rankBtn=null,t.levelLabel1=null,t.levelLabel2=null,t.upgradePop=null,t.challengeBtn=null,t.clothPadding=20,t.catId=0,t.clothNodeArray=[],t.cultivateComp=null,t.isShowing=!1,t}a=(i=cc._decorator).ccclass,i=i.property,c(m,l=cc.Component),m.prototype.start=function(){u.default.addbtnTouchStartScale(this.rankBtn),u.default.addbtnTouchEndScale(this.rankBtn,this.rankFunc.bind(this)),u.default.addbtnTouchCancelScale(this.rankBtn),u.default.addbtnTouchStartScale(this.challengeBtn),u.default.addbtnTouchEndScale(this.challengeBtn,this.challengeBtnFunc.bind(this)),u.default.addbtnTouchCancelScale(this.challengeBtn)},m.prototype.showWardrobelLayer=function(t,e){var o=this;console.log("catId = ",t),this.isShowing||(this.isShowing=!0,this.cultivateComp=e,this.catId=t,this.scrollContent.removeAllChildren(),this.changeClothesNode.active=!0,this.changeClothesNode.y=-cc.winSize.height/2,this.initCatClothesNode(),cc.tween(this.changeClothesNode).by(.3,{y:350},{easing:cc.easing.cubicOut}).start(),this.cultivateComp.houseToBigMiddle(this.catId),cc.tween(this.changeClothesNode).delay(.3).call(function(){o.showBtnLayer(!0)},this).start())},m.prototype.hideWardrobelLayer=function(){var t=this;0!=this.catId&&(this.catId=0,this.isShowing=!1,this.changeClothesNode.stopAllActions(),cc.tween(this.changeClothesNode).to(.2,{y:-cc.winSize.height/2}).call(function(){t.changeClothesNode.active=!1},this).start(),this.hideBtnLayer())},m.prototype.showBtnLayer=function(t){this.btnLayer.active=!0;for(var e,o=d.default.getUserData().catClothesData["cat_"+this.catId],n=0;n<o.length;n++)o[n].isWear&&(e=d.default.getClothesData(this.catId,o[n].clothesID),this.ribbonLabel.string=e.name,console.log("clothesData = "+JSON.stringify(o[n])),3<=o[n].clothRank?(this.rankBtn.active=!1,this.challengeBtn.active=!1):(2==e.skin?(this.challengeBtn.active=!0,this.rankBtn.active=!1):(this.challengeBtn.active=!1,this.rankBtn.active=!0),this.levelLabel1.string=o[n].clothRank+"",this.levelLabel2.string=o[n].clothRank+1+""));t&&(cc.tween(this.ribbonNode).set({scale:0}).to(.3,{scale:1},{easing:cc.easing.backOut}).start(),cc.tween(this.rankBtn).set({scale:0}).delay(.15).to(.3,{scale:1},{easing:cc.easing.cubicOut}).start())},m.prototype.hideBtnLayer=function(){this.btnLayer.active=!1},m.prototype.rankFunc=function(t){t.stopPropagation(),cc.log("\u6253\u5f00\u5347\u7ea7\u5f39\u7a97"),this.upgradePop.getComponent(f.default).showUpgradePop(this.catId,this.popCallbackFunc.bind(this))},m.prototype.challengeBtnFunc=function(){this.hideWardrobelLayer(),this.mainCultivateLayer.getComponent(y.default).houseToMinDefault(),cc.game.emit(h.EMITKEY.UPDATETABBARRECEIVE,2)},m.prototype.popCallbackFunc=function(t){this.cultivateComp.refreshCatCloth(this.catId,t=void 0!==t&&t,t),this.refreshClothSelect(),this.showBtnLayer(!1)},m.prototype.initCatClothesNode=function(){var t=d.default.getGameConfigData().baseConfigData.catClothesData,e=d.default.getUserData().catClothesData;console.log("baseConfig catClothesData = ",t),console.log("userData userClothesData = ",e),this.clothNodeArray=[];for(var o="cat_"+this.catId,n=t[o],a=0;a<n.length;a++)this.addClotheNode(a,n[a],e[o])},m.prototype.refreshClothSelect=function(){for(var t=d.default.getUserData().catClothesData,e="cat_"+this.catId,o=0;o<this.clothNodeArray.length;o++){var n=this.clothNodeArray[o].getComponent(p.default).clothData;this.clothNodeArray[o].getComponent(p.default).setClothNodeData(n,this,this.catId,t[e])}},m.prototype.addClotheNode=function(t,e,o){var n=cc.instantiate(this.clothesPrefab),a=n.width;n.x=(a+this.clothPadding)*t+a/2,n.getComponent(p.default).setClothNodeData(e,this,this.catId,o),this.scrollContent.addChild(n),this.scrollContent.width=(t+1)*(a+this.clothPadding),this.clothNodeArray.push(n)},m.prototype.dressCloth=function(t){var e,o="cat_"+this.catId,n=d.default.getUserData(),a=n.catClothesData[o];for(e in a)a[e].clothesID==t?a[e].isWear=!0:a[e].isWear=!1;d.default.saveUserData(n),this.refreshClothSelect(),this.cultivateComp.refreshCatCloth(this.catId,!1,!0),this.showBtnLayer(!1),g.default.trackEvent("house_clothing",{clothID:t+""})},s([i(cc.Node)],m.prototype,"mainCultivateLayer",void 0),s([i(cc.Node)],m.prototype,"changeClothesNode",void 0),s([i(cc.Node)],m.prototype,"scrollContent",void 0),s([i(cc.Prefab)],m.prototype,"clothesPrefab",void 0),s([i(cc.Node)],m.prototype,"btnLayer",void 0),s([i(cc.Node)],m.prototype,"ribbonNode",void 0),s([i(cc.Label)],m.prototype,"ribbonLabel",void 0),s([i(cc.Node)],m.prototype,"rankBtn",void 0),s([i(cc.Label)],m.prototype,"levelLabel1",void 0),s([i(cc.Label)],m.prototype,"levelLabel2",void 0),s([i(cc.Node)],m.prototype,"upgradePop",void 0),s([i(cc.Node)],m.prototype,"challengeBtn",void 0),a=s([a],m),r.default=a,cc._RF.pop()},{}],winPop:[function(t,e,o){"use strict";cc._RF.push(e,"e67c6kaMd9Juoslo14wbz9l","winPop");var n,a=t,i=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(a=t[c])&&(r=(i<3?a(r):3<i?a(e,o,r):a(e,o))||r);return 3<i&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=a("api-sheep"),u=a("CcJsFunc"),d=a("dataTs"),h=a("enumConfig"),f=a("spine"),g=a("util"),y=a("data-manager"),m=(a("DateManager"),a("GameManager")),v=a("report-common");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.titleNode=null,t.barefootNode=null,t.barefootTitle=null,t.barefootDesc=null,t.sheepSp=null,t.sheepFlagSp=null,t.winDescNode=null,t.backBtn=null,t.shareNode=null,t.shareBtn=null,t.noShareBtn=null,t.shareCloseBtn=null,t.timeNode=null,t.flashSp=null,t}a=(i=cc._decorator).ccclass,i=i.property,c(b,l=cc.Component),b.prototype.start=function(){u.default.addbtnTouchStartScale(this.backBtn),u.default.addbtnTouchEndScale(this.backBtn,this.backBtnFunc.bind(this)),u.default.addbtnTouchCancelScale(this.backBtn),u.default.addbtnTouchStartScale(this.shareBtn),u.default.addbtnTouchEndScale(this.shareBtn,this.shareBtnFunc.bind(this)),u.default.addbtnTouchCancelScale(this.shareBtn),u.default.addbtnTouchStartScale(this.noShareBtn),u.default.addbtnTouchEndScale(this.noShareBtn,this.noShareBtnFunc.bind(this)),u.default.addbtnTouchCancelScale(this.noShareBtn),u.default.addbtnTouchStartScale(this.shareCloseBtn),u.default.addbtnTouchEndScale(this.shareCloseBtn,this.shareCloseBtnFunc.bind(this)),u.default.addbtnTouchCancelScale(this.shareCloseBtn)},b.prototype.shareBtnFunc=function(){cc.game.emit(h.EMITKEY.TTSHARERECORD)},b.prototype.noShareBtnFunc=function(){this.shareNode.active=!1,this.showBackBtn()},b.prototype.shareCloseBtnFunc=function(){this.shareNode.active=!1,this.showBackBtn()},b.prototype.backBtnFunc=function(){cc.game.emit(h.EMITKEY.SHOWMAINLAYER)},b.prototype.showBackBtn=function(){cc.tween(this.backBtn).delay(.5).to(.2,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).start()},b.prototype.showWinPop=function(t){var e=cc.sys.localStorage.getItem("unlocklevel11111")||"0";e=Number.parseInt(e),e+=1,cc.sys.localStorage.setItem("unlocklevel11111",e+"");var o=this;this.node.active=!0,this.backBtn.scale=0,this.shareNode.scale=0;var n=y.default.getTAUserInfo();v.default.reportTACommon("game_finish",n),this.titleNode.getComponent(cc.Label).string="\u7b2c"+e+"\u5173",t=(n=g.default.countdownTime(t.time))[1]<10?"0"+n[1]:n[1]+"",n=n[2]<10?"0"+n[2]:n[2]+"",this.timeNode.getComponent(cc.Label).string="\u901a\u5173\u7528\u65f6"+t+"\u5206"+n+"\u79d2",m.default.getInstance().gameType==h.GAMETYPE.GAMEDAILY?(this.barefootDesc.getComponent(cc.Label).string="\u52a0\u5165\u7f8a\u7fa4",p.default.getRankInfoData(function(t){y.default.setRankData(t),m.default.getInstance().rankInfo=t.data,t=12,t="<color=#ffffff>\u60a8\u6240\u5728\u7684\u5730\u533a\u4e3a\u7b2c</color><color=#ffea00><size=56> "+(m.default.getInstance().rankInfo?m.default.getInstance().rankInfo.user.index:t)+" </size></color><color=#ffffff>\u540d</color>",o.winDescNode.getComponent(cc.RichText).string=t})):m.default.getInstance().gameType==h.GAMETYPE.GAMETOPIC&&(this.barefootDesc.getComponent(cc.Label).string="\u52a0\u5165"+this.getTeamName(),n="",y.default.topicRankInfo&&y.default.topicModel&&(n=1==y.default.topicModel.info.type?y.default.topicRankInfo.tomb?y.default.topicRankInfo.tomb.length+"":"0":y.default.topicRankInfo.taoist?y.default.topicRankInfo.taoist.length+"":"0"),n="<color=#ffffff>"+this.getTeamName()+"\u7f8a\u961f\u5df2\u6709 </color><color=#ffea00><size=56> "+n+" </size></color><color=#ffffff> \u7f8a</color>",o.winDescNode.getComponent(cc.RichText).string=n),this.playBareFoot(),o.sheepSp.getComponent(f.default).play("Finish1",1,function(){o.sheepSp.getComponent(f.default).play("Finish2",0)}),o.flashSp.active=!1,cc.tween(o.sheepFlagSp).to(0,{scale:0}).delay(1).call(function(){o.playDescSp()}).to(.2,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).start()},b.prototype.playDescSp=function(){var t=this;if(m.default.getInstance().gameType==h.GAMETYPE.GAMEDAILY){for(var e=d.default.getSheepClothesData(),o=!1,n="sheep/Sheeps",a="skin_00",i=null,r=(e=u.default.shuffle(e),0);r<e.length;r++)(c=e[r]).dressing&&(n="sheep/"+c.spName,a=c.spSkin),"Sheeps"!=c.spName||0!=c.unlock||o||(c.unlock=o=!0,i=c,m.default.getInstance().collectionMark.topicClothesNum=c.clothesId);o&&d.default.setSheepClothesData(e),t.flashSp.active=!1,t.sheepFlagSp.getComponent(f.default).loadSpine(n,function(){console.log("skinName = ",a),t.sheepFlagSp.getComponent(f.default).setNewSkin(a),t.sheepFlagSp.getComponent(f.default).play("Jump2",0),setTimeout(function(){t.flashSp.active=!0,t.flashSp.getComponent(f.default).play("4Ray1",1,function(){t.flashSp.getComponent(f.default).play("4Ray2",0)})},300)}),this.showNewSheep(i)}else if(m.default.getInstance().gameType==h.GAMETYPE.GAMETOPIC){var c,s=1==y.default.topicModel.info.type,l=2==y.default.topicModel.info.type,p=y.default.getTopicAnimation(y.default.topicModel.id,s,l);for(t.flashSp.active=!1,t.sheepFlagSp.getComponent(f.default).loadSpine(p.spName,function(){t.sheepFlagSp.getComponent(f.default).setNewSkin(p.skin),t.sheepFlagSp.getComponent(f.default).play("Jump1",0),setTimeout(function(){t.flashSp.active=!0,t.flashSp.getComponent(f.default).play("4Ray1",1,function(){t.flashSp.getComponent(f.default).play("4Ray2",0)})},300)}),e=d.default.getSheepClothesData(),o=!1,i=null,r=0;r<e.length;r++)(c=e[r]).dressing,c.spSkin!=p.skin||0!=c.unlock||o||(c.unlock=o=!0,i=c,m.default.getInstance().collectionMark.topicClothesNum=c.clothesId);this.showNewSheep(i),o&&d.default.setSheepClothesData(e)}setTimeout(function(){t.showBackBtn()},500)},b.prototype.showNewSheep=function(t){t&&setTimeout(function(){cc.game.emit("showPop",{popName:"topicNewPop",showPopData:{type:2,data:t}})},1e3)},b.prototype.getTeamName=function(){var t=y.default.topicModel.name.split("#");return 2<=t.length?1==y.default.topicModel.info.type?t[0]:t[1]:""},b.prototype.showShareNode=function(){this.shareNode.active=!0,cc.tween(this.shareNode).delay(.5).to(.2,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).start()},b.prototype.playBareFoot=function(){var t=this;this.barefootNode.active=!0,cc.tween(this.barefootNode).to(0,{scale:0}).to(.1,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).call(function(){cc.tween(t.barefootTitle).to(.1,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).call(function(){cc.tween(t.barefootDesc).to(.1,{scale:1.1}).to(.1,{scale:.9}).to(.1,{scale:1}).start()},t).start()},this).start()},s([i(cc.Node)],b.prototype,"titleNode",void 0),s([i(cc.Node)],b.prototype,"barefootNode",void 0),s([i(cc.Node)],b.prototype,"barefootTitle",void 0),s([i(cc.Node)],b.prototype,"barefootDesc",void 0),s([i(cc.Node)],b.prototype,"sheepSp",void 0),s([i(cc.Node)],b.prototype,"sheepFlagSp",void 0),s([i(cc.Node)],b.prototype,"winDescNode",void 0),s([i(cc.Node)],b.prototype,"backBtn",void 0),s([i(cc.Node)],b.prototype,"shareNode",void 0),s([i(cc.Node)],b.prototype,"shareBtn",void 0),s([i(cc.Node)],b.prototype,"noShareBtn",void 0),s([i(cc.Node)],b.prototype,"shareCloseBtn",void 0),s([i(cc.Node)],b.prototype,"timeNode",void 0),s([i({type:cc.Node,tooltip:"flash\u52a8\u753b"})],b.prototype,"flashSp",void 0),a=s([a],b),r.default=a,cc._RF.pop()},{}],"wx-sdk":[function(t,e,o){"use strict";cc._RF.push(e,"dbb360ys3xP25Wexckd5YGf","wx-sdk");var n=t,a=o,i=function(t,e,o,n){return new(o=o||Promise)(function(a,i){function r(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},r=function(t,e){var o,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(c){r=[6,c],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(a,"__esModule",{value:!0});var c=n("sdk");function s(){}cc.sys.platform,cc.sys.WECHAT_GAME,s.init=function(){cc.sys.platform==cc.sys.WECHAT_GAME&&(wx.onInteractiveStorageModified(function(t){cc.log("onInteractiveStorageModified",t)}),wx.onShareMessageToFriend(function(t){cc.log("wx.shareMessageToFriend",t);var e=t.success?"\u5206\u4eab\u6210\u529f":"\u5206\u4eab\u5931\u8d25";wx.showToast({title:e,icon:"none",duration:2e3}),t.success}),wx.createGameIcon&&(this.gameIconAd=wx.createGameIcon({adUnitId:"PBgAAvMtdTk_v2ho",count:1,style:[]},{appNameHidden:!1,color:"#713A0CC8",size:60,borderWidth:5,borderColor:"#ffffff77",left:0,top:200})),this.authorize(),console.info("-- \u5f00\u542f\u8f6c\u53d1 --"),this.registerShowHide())},s.checkUpdateManager=function(){var t;cc.sys.platform==cc.sys.WECHAT_GAME&&((t=wx.getUpdateManager()).onCheckForUpdate(function(t){console.info("[app update]",t.hasUpdate)}),t.onUpdateReady(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(e){e.confirm&&t.applyUpdate()}})}))},s.registerShowHide=function(){return i(this,void 0,Promise,function(){var t=this;return r(this,function(){return wx.onShow(function(){t.onShowFunction&&t.onShowFunction.forEach(function(t){return t()}),t.onShowOnceFunction&&(t.onShowOnceFunction.forEach(function(t){t()}),t.onShowOnceFunction.length=0)}),wx.onHide(function(){t.onHideFunction&&t.onHideFunction.forEach(function(t){return t()}),t.onHideOnceFunction&&(t.onHideOnceFunction.forEach(function(t){t()}),t.onHideOnceFunction.length=0)}),[2]})})},s.showGameIcon=function(){var t=this;this.gameIconAd&&(this.gameIconAdShown||this.gameIconAd.load().then(function(){t.gameIconAd.show(),t.gameIconAdShown=!0}).catch(function(e){cc.error("wx-sdk show game icon",e),t.gameIconAd.hide()}))},s.hideGameIcon=function(){this.gameIconAd&&(this.gameIconAd.hide(),this.gameIconAdShown=!1)},s.authorizeLocation=function(){return i(this,void 0,Promise,function(){return r(this,function(){return wx.authorize({scope:"scope.userLocation",success:function(t){cc.log("authorize success:",t)},fail:function(t){cc.log("authorize fail:",t)}}),[2]})})},s.authorize=function(){return i(this,void 0,Promise,function(){return r(this,function(){return[2]})})},s.weiBoJump=function(){wx.navigateToMiniProgram({appId:"wx9074de28009e1111",path:"pages/profile/profile?nickname=\u7f8a\u4e86\u4e2a\u7f8a\u5b98\u535a",success:function(){console.log("\u6210\u529f\u8df3\u8f6c\u5fae\u535a\u5c0f\u7a0b\u5e8f")}})},s.vibrateShort=function(t){void 0===t&&(t="light"),wx.vibrateShort({type:t,style:t})},s.vibrateLong=function(){wx.vibrateLong({})},s.wxAppLogin=function(){throw new Error("Method not implemented.")},s.getSubVersion=function(t){return t=t.split("."),{first:parseInt(t[0].trim()),second:parseInt(t[1].trim()),third:parseInt(t[2].trim())}},s.isVersionLower=function(t,e){return t=this.getSubVersion(t),e=this.getSubVersion(e),!(t.first>e.first||t.second>e.second||t.third>e.third)},s.isWxVersionLower=function(t){if(cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.WECHAT_GAME_SUB)return!0;var e=wx.getSystemInfoSync().SDKVersion,o=!1;return this.isVersionLower(e,t)&&(o=!0),cc.log("[sdk] is wx version lower",e,t,o),o},s.isWxVersionHigher=function(t){return!this.isWxVersionLower(t)},s.wxRankScoreUpdate=function(t,e,o){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getOpenDataContext().postMessage({cmd:"update-"+t,type:o,score:e})},s.wxRankScoreRemove=function(t){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getOpenDataContext().postMessage({cmd:"remove-"+t,score:0})},s.wxShowSubContext=function(t,e,o,n){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getOpenDataContext().postMessage({cmd:"show-"+t,setData:e,w:o,h:n})},s.onShareAppMessage=function(t){wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){return{title:t.title,imageUrl:t.imageUrl,query:t.query}}),wx.onShareTimeline(function(){return{title:"\u7f8a\u4e86\u4e2a\u7f8a",imageUrl:"",query:"a=1&b=2"}})},s.onShareAppMessageQuery=function(){return wx.getEnterOptionsSync().query},s.wxShare=function(t,e){var o;cc.sys.platform==cc.sys.WECHAT_GAME&&(o=cc.winSize,e=e||canvas.toTempFilePathSync({destHeight:o.width/5*4}),wx.shareAppMessage({title:t,imageUrl:e}))},s.wxShareWithCallBack=function(t){if(t.tag,cc.sys.isBrowser)return t.success&&t.success("local"),void(t.complete&&t.complete("local"));if(cc.sys.platform!=cc.sys.WECHAT_GAME)return t.success&&t.success("local"),void(t.complete&&t.complete("local"));function e(e){a||(console.log("\u6784\u5efa success"),t.success&&t.success(e),a=!0)}function o(e){t.complete&&t.complete(e)}null==t.validate&&(t.validate=!0);var n=!(this._beforeOnHideAction=1),a=!1,i=!1,r=Date.now();this.setOnShow(function(){Date.now()-r<1e3*c.SHARE_CALLBACK_TIME&&(n=!0)}),this.setOnShow(function(){return!(!n||a)&&(t.validate&&Date.now()-r<1e3*c.SHARE_CALLBACK_TIME?void(Math.random()<c.SHARE_CALLBACK_RATE?(e(),o()):wx.showModal({title:"\u63d0\u793a",content:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u7fa4\uff01",confirmText:"\u91cd\u8bd5",showCancel:!1,complete:function(){console.log("\u6267\u884c complete")},success:function(){console.log("\u6267\u884c success"),e()},fail:function(){console.log("\u6267\u884c fail"),i||(console.log("\u6784\u5efa fail"),t.fail&&t.fail(void 0),i=!0)}})):(e(),void o()))});var s=setInterval(function(){e(),o()},2e3);clearInterval(s),s="",t.query&&(s=t.query),wx.shareAppMessage({title:t.title,imageUrl:t.imageUrl,query:s})},s.setOnShow=function(t){t&&this.onShowFunction.push(t)},s.setOffShow=function(t){-1<(t=this.onShowFunction.indexOf(t))&&this.onShowFunction.splice(t,1)},s.setOnShowOnce=function(t){t&&this.onShowOnceFunction.push(t)},s.setOffShowOnce=function(t){-1<(t=this.onShowOnceFunction.indexOf(t))&&this.onShowOnceFunction.splice(t,1)},s.setOnHide=function(t){t&&this.onHideFunction.push(t)},s.setOffHide=function(t){-1<(t=this.onHideFunction.indexOf(t))&&this.onHideFunction.splice(t,1)},s.setOnHideOnce=function(t){t&&this.onHideOnceFunction.push(t)},s.setOffHideOnce=function(t){-1<(t=this.onHideOnceFunction.indexOf(t))&&this.onHideOnceFunction.splice(t,1)},s.getAppVersion=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getAccountInfoSync){var t=wx.getAccountInfoSync();return cc.log("[sdk] accountInfo:",t),t.miniProgram.version||""}return""},s.setClipboardData=function(t){wx.setClipboardData({data:t,success:function(){wx.getClipboardData({success:function(t){cc.log("wx get clipboard data:",t.data)}})}})},s.showToast=function(t){wx.showToast(t)},s.showBannerAd=function(){},s.hideBannerAd=function(){},s.showInterstitialAd=function(){},s.showRewardVideoAd=function(t,e,o){var n,a;wx?(n=!1,(a=wx.createRewardedVideoAd({adUnitId:t})).onClose(function(t){0==n&&(n=!0,t&&t.isEnded||void 0===t?e():o(!1,"\u89c2\u770b\u5931\u8d25"))}),a.onError(function(t){0==n&&o(!(n=!0),t.errMsg)}),a.load().then(function(){a.show()}).catch(function(){o(!1,"\u5e7f\u544a\u62c9\u53d6\u5931\u8d25")})):o(!1,"wx undefined")},s.onShowFunction=[],s.onHideFunction=[],s.onShowOnceFunction=[],s.onHideOnceFunction=[],s.gameIconAd=null,s.gameIconAdShown=!1,(a.default=n=s).init(),cc._RF.pop()},{}]},{},["ApiTool","BulletPrefab","CcJsFunc","CoinEmitter","CoinEmitterByTime","DateManager","FriendRankPop","FriendSubContextView","GameManager","PersonalPop","PoolManager","PrivacyPolicy","PrivacyUserPop","ScrollMsg","SpriteWithMask","SpriteWithMaskAssembler","TodayRankPop","TodaySubContextView","ad","android-sdk","api-sheep","audio","blockArea","blockEditorPrefab","blockPrefab","brickPrefab","brickSubPrefab","brickSv","bullet-item","bullet-screen-pop","bullet-screen","calendar-item","cat-house-progress","catClawPrefabs","catNode","challengeSucPop","chessboard","clothesPrefab","collectPrefab","collectSubPrefab","collectSv","config","cookiePrefab","cookieRewardNode","crushArea","cubic-bezier-curve","curve-sample","daily-challenge","data-env","data-manager","data-type","dataModel","dataTs","editorGameLayer","editorGameUiLayer","editorPopCommon","editorTips","enumConfig","export-helper","failPop","flying-item-pop-coin","flying-item-pop-fish","fontTipsLayer","game-top-ui","gameLayer","gameUiLayer","gd_language","getLovePop","getPropPop","giftLayerAnimate","houseLayer","http","i18n","key-map","loadCanvas","loadLayer","loseCookiePop","loseLovePop","main-cookie-reward","main-rank","main-tabbar","mainCanvas","mainCultivateLayer","mainLayer","mainUiLayer","mapArea","mapEditor","mask","maskLayer","mesh-vertex","moveOutArea","native-bridge","native-def","native-event","network-tool","newLevelPop","nextLevelPop","noLimitPop","nothingPop","page-house","page-main","picturePop","player-head-atlas","decode-uri-component","filter-obj","query-string","split-on-first","strict-uri-encode","popManager","prop-prefab","register-head-image","report-common","reward-emitter","rewardPrefab","saveAsPop","sdk","selectLevelPop","setBloackNumPrefab","setBlockNumPop","setupPop","share","shareNodePop","sheep-card","sheep-flock-icon","sheep-flock","sheep-rank-pop","sheepRankItem","show-daily-pop","show-reward-pop","snake-ctrl-point","snake-sprite-assembler","spine","spline-node","spline-sprite","spline","sprintRewardBar","sprintRewardPop","stagePop","str-utils","thinkingdata.mg.cocoscreator.min","topUiLayer","topic-card-node","topic-header-node","topic-rank","topic-sheep-node","topic-ui-layer","topic-ui","topicChoosePop","topicCollectPop","topicJoinedPop","topicLastWinPop","topicNewPop","transitionsLayer","tt-sdk","typed-event","uiControler","uma-sdk","unlock-build-pop","unlock-build","upgrade-tip","upgradePop","util","wallpaperPrefab","wallpaperSubPrefab","wallpaperSv","wardrobeLayer","winPop","wx-sdk"]);